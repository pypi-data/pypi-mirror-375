(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{23663:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return s(64665)}])},77213:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(24246),i=s(96306),l=s(88038),r=s.n(l),n=s(86677);s(27378);var o=s(25980),d=s(90867),c=s(77830),u=()=>{let e=(0,n.useRouter)();return(0,a.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,a.jsxs)(i.xuv,{children:[(0,a.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,a.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,a.jsx)(i.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,a.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:s,padded:l=!0,mainProps:c}=e,m=(0,o.hz)(),h=(0,n.useRouter)(),x="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,p=!(m.flags.privacyRequestsConfiguration&&x),{data:_}=(0,d.JE)(void 0,{skip:p}),{data:v}=(0,d.PW)(void 0,{skip:p}),j=m.flags.privacyRequestsConfiguration&&(!_||!v)&&x;return(0,a.jsxs)(i.kCb,{"data-testid":s,direction:"column",h:"100vh",children:[(0,a.jsxs)(r(),{children:[(0,a.jsxs)("title",{children:["Fides Admin UI - ",s]}),(0,a.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)(i.kCb,{as:"main",direction:"column",py:l?6:0,px:l?10:0,h:l?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[j?(0,a.jsx)(u,{}):null,t]})]})}},97181:function(e,t,s){"use strict";s.d(t,{d:function(){return d}});var a=s(24246),i=s(96306),l=s(34090),r=s(27378),n=s(46238),o=s(40324);let d=e=>{let{name:t,label:s,labelProps:d,tooltip:c,isRequired:u,layout:m="inline",helperText:h,...x}=e,[p,_,{setValue:v}]=(0,l.U$)(t),j=!!(_.touched&&_.error),[y,g]=(0,r.useState)("");p.value||"tags"!==x.mode&&"multiple"!==x.mode||(p.value=[]),"tags"===x.mode&&"string"==typeof p.value&&(p.value=[p.value]);let f="tags"===x.mode?(e,t)=>e?e.value!==y||p.value.includes(y)?x.optionRender?x.optionRender(e,t):e.label:'Create "'.concat(y,'"'):void 0:x.optionRender||void 0,b=e=>{g(e),x.onSearch&&x.onSearch(e)},k=(e,t)=>{v(e),x.onChange&&x.onChange(e,t)};return"inline"===m?(0,a.jsx)(i.NIc,{isInvalid:j,isRequired:u,children:(0,a.jsxs)(i.rjZ,{templateColumns:s?"1fr 3fr":"1fr",children:[s?(0,a.jsx)(o.__,{htmlFor:x.id||t,...d,children:s}):null,(0,a.jsxs)(i.jqI,{align:"center",children:[(0,a.jsxs)(i.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,a.jsx)(i.WPr,{...p,id:x.id||t,"data-testid":"controlled-select-".concat(p.name),...x,optionRender:f,onSearch:"tags"===x.mode?b:void 0,onChange:k,value:p.value||void 0,status:j?"error":void 0}),h&&(0,a.jsx)(i.Q6r,{children:h}),(0,a.jsx)(o.Bc,{isInvalid:j,message:_.error,fieldName:p.name})]}),(0,a.jsx)(n.b,{label:c,className:j?"mt-2 self-start":void 0})]})]})}):(0,a.jsx)(i.NIc,{isInvalid:j,isRequired:u,children:(0,a.jsxs)(i.gCW,{alignItems:"start",children:[(0,a.jsxs)(i.jqI,{align:"center",children:[s?(0,a.jsx)(o.__,{htmlFor:x.id||t,fontSize:"xs",my:0,mr:1,...d,children:s}):null,(0,a.jsx)(n.b,{label:c})]}),(0,a.jsx)(i.WPr,{...p,id:x.id||t,"data-testid":"controlled-select-".concat(p.name),...x,optionRender:f,onSearch:"tags"===x.mode?b:void 0,onChange:k,value:p.value||void 0,status:j?"error":void 0}),h&&(0,a.jsx)(i.Q6r,{style:{marginTop:0},children:h}),(0,a.jsx)(o.Bc,{isInvalid:j,message:_.error,fieldName:p.name})]})})}},71784:function(e,t,s){"use strict";s.d(t,{DE:function(){return o},I3:function(){return i},kN:function(){return r},qX:function(){return n},rE:function(){return l}});var a=s(21910);let i=[...new Map([[a.q2.APPROVED,"Approved"],[a.q2.AWAITING_EMAIL_SEND,"Awaiting email send"],[a.q2.CANCELED,"Canceled"],[a.q2.COMPLETE,"Completed"],[a.q2.DENIED,"Denied"],[a.q2.ERROR,"Error"],[a.q2.IN_PROCESSING,"In progress"],[a.q2.PENDING,"New"],[a.q2.PAUSED,"Paused"],[a.q2.IDENTITY_UNVERIFIED,"Unverified"],[a.q2.REQUIRES_INPUT,"Requires input"],[a.q2.REQUIRES_MANUAL_FINALIZATION,"Requires finalization"]])].map(e=>{let[t,s]=e;return{label:s,value:t}}),l=new Map([[a.Us.ACCESS,"Access"],[a.Us.ERASURE,"Erasure"],[a.Us.CONSENT,"Consent"],[a.Us.UPDATE,"Update"]]),r=[...l].map(e=>{let[t,s]=e;return{label:s,value:t}}),n={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},o={local:"local",s3:"s3",gcs:"gcs"}},64665:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(24246),i=s(96306),l=s(27378),r=s(812),n=s(41841),o=s(77213),d=s(77830),c=s(58754),u=s(7426),m=s(71784),h=s(90867),x=s(34090),p=s(97181),_=s(40324),v=e=>{var t,s,o,d,c;let{storageDetails:u}=e,[v,j]=(0,l.useState)(""),[y]=(0,h.gC)(),[g]=(0,h.cf)(),{handleError:f}=(0,n.HK)(),{successAlert:b}=(0,n.VY)(),k={type:m.DE.gcs,auth_method:null!==(o=null==u?void 0:null===(t=u.details)||void 0===t?void 0:t.auth_method)&&void 0!==o?o:"",bucket:null!==(d=null==u?void 0:null===(s=u.details)||void 0===s?void 0:s.bucket)&&void 0!==d?d:"",format:null!==(c=null==u?void 0:u.format)&&void 0!==c?c:""},C=async e=>{let t=await y({type:m.DE.gcs,details:{auth_method:e.auth_method,bucket:e.bucket},format:e.format});(0,r.D4)(t)?f(t.error):(j(e.auth_method),b("Google Cloud Storage credentials successfully updated."))},q=async e=>{let t=e.private_key.trim();t.includes("\\n")&&(t=t.replace(/\\n/g,"\n"));let s=await g({details:{type:e.type,project_id:e.project_id,private_key_id:e.private_key_id,private_key:t,client_email:e.client_email,client_id:e.client_id,auth_uri:e.auth_uri,token_uri:e.token_uri,auth_provider_x509_cert_url:e.auth_provider_x509_cert_url,client_x509_cert_url:e.client_x509_cert_url,universe_domain:e.universe_domain},type:m.DE.gcs});(0,r.D4)(s)?f(s.error):b("Google Cloud Storage secrets successfully updated.")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Google Cloud Storage configuration"}),(0,a.jsx)(i.Kqy,{children:(0,a.jsx)(x.J9,{initialValues:k,onSubmit:C,enableReinitialize:!0,children:e=>{let{isSubmitting:t,handleReset:s}=e;return(0,a.jsxs)(x.l0,{children:[(0,a.jsxs)(i.Kqy,{mt:5,spacing:5,children:[(0,a.jsx)(p.d,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,a.jsx)(p.d,{name:"auth_method",label:"Auth method",options:[{label:"Service Account Keys",value:"service_account_keys"},{label:"Application Default Credentials",value:"adc"}],"data-testid":"auth_method",isRequired:!0}),(0,a.jsx)(_.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,a.jsx)(i.wpx,{onClick:()=>s(),className:"mr-2 mt-5",children:"Cancel"}),(0,a.jsx)(i.wpx,{htmlType:"submit",className:"mt-5",disabled:t,type:"primary","data-testid":"save-btn",children:"Save"})]})}})}),"service_account_keys"===v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.izJ,{mt:5}),(0,a.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,a.jsx)(i.Kqy,{children:(0,a.jsx)(x.J9,{initialValues:{type:"",project_id:"",private_key_id:"",private_key:"",client_email:"",client_id:"",auth_uri:"",token_uri:"",auth_provider_x509_cert_url:"",client_x509_cert_url:"",universe_domain:""},onSubmit:q,children:e=>{let{isSubmitting:t,handleReset:s}=e;return(0,a.jsxs)(x.l0,{children:[(0,a.jsxs)(i.Kqy,{mt:5,spacing:5,children:[(0,a.jsx)(_.j0,{name:"type",label:"Type"}),(0,a.jsx)(_.j0,{name:"project_id",label:"Project ID"}),(0,a.jsx)(_.j0,{name:"private_key_id",label:"Private key ID",type:"password"}),(0,a.jsx)(_.j0,{name:"private_key",label:"Private key",type:"password"}),(0,a.jsx)(_.j0,{name:"client_email",label:"Client email"}),(0,a.jsx)(_.j0,{name:"client_id",label:"Client ID"}),(0,a.jsx)(_.j0,{name:"auth_uri",label:"Auth URI"}),(0,a.jsx)(_.j0,{name:"token_uri",label:"Token URI"}),(0,a.jsx)(_.j0,{name:"auth_provider_x509_cert_url",label:"Auth provider x509 cert URL"}),(0,a.jsx)(_.j0,{name:"client_x509_cert_url",label:"Client x509 cert URL"}),(0,a.jsx)(_.j0,{name:"universe_domain",label:"Universe domain"})]}),(0,a.jsxs)(i.xuv,{mt:10,children:[(0,a.jsx)(i.wpx,{onClick:()=>s(),className:"mr-2 mt-5",children:"Cancel"}),(0,a.jsx)(i.wpx,{disabled:t,htmlType:"submit",type:"primary",className:"mt-5","data-testid":"save-btn",children:"Save"})]})]})}})})]})]})},j=e=>{var t,s,o,d,c;let{storageDetails:u}=e,[v,j]=(0,l.useState)(""),[y]=(0,h.gC)(),[g]=(0,h.cf)(),{handleError:f}=(0,n.HK)(),{successAlert:b}=(0,n.VY)(),k={type:m.DE.s3,auth_method:null!==(o=null==u?void 0:null===(t=u.details)||void 0===t?void 0:t.auth_method)&&void 0!==o?o:"",bucket:null!==(d=null==u?void 0:null===(s=u.details)||void 0===s?void 0:s.bucket)&&void 0!==d?d:"",format:null!==(c=null==u?void 0:u.format)&&void 0!==c?c:""},C=async e=>{let t=await y({type:m.DE.s3,details:{auth_method:e.auth_method,bucket:e.bucket},format:e.format});(0,r.D4)(t)?f(t.error):(j(e.auth_method),b("S3 storage credentials successfully updated."))},q=async e=>{let t=await g({details:{aws_access_key_id:e.aws_access_key_id,aws_secret_access_key:e.aws_secret_access_key},type:m.DE.s3});(0,r.D4)(t)?f(t.error):b("S3 storage secrets successfully updated.")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,a.jsx)(i.Kqy,{children:(0,a.jsx)(x.J9,{initialValues:k,onSubmit:C,enableReinitialize:!0,children:e=>{let{isSubmitting:t,handleReset:s}=e;return(0,a.jsxs)(x.l0,{children:[(0,a.jsxs)(i.Kqy,{mt:5,spacing:5,children:[(0,a.jsx)(p.d,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,a.jsx)(p.d,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,a.jsx)(_.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,a.jsx)(i.wpx,{onClick:()=>s(),className:"mr-2 mt-5",children:"Cancel"}),(0,a.jsx)(i.wpx,{htmlType:"submit",className:"mt-5",disabled:t,type:"primary","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.izJ,{mt:5}),(0,a.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,a.jsx)(i.Kqy,{children:(0,a.jsx)(x.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:q,children:e=>{let{isSubmitting:t,handleReset:s}=e;return(0,a.jsxs)(x.l0,{children:[(0,a.jsxs)(i.Kqy,{mt:5,spacing:5,children:[(0,a.jsx)(_.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,a.jsx)(_.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,a.jsxs)(i.xuv,{mt:10,children:[(0,a.jsx)(i.wpx,{onClick:()=>s(),className:"mr-2 mt-5",children:"Cancel"}),(0,a.jsx)(i.wpx,{disabled:t,htmlType:"submit",type:"primary",className:"mt-5","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},y=()=>{let{successAlert:e}=(0,n.VY)(),{handleError:t}=(0,n.HK)(),[s,x]=(0,l.useState)(""),{data:p}=(0,h.PW)(),{data:_}=(0,h.Au)({type:s}),[y,{isLoading:g}]=(0,h.gC)(),[f]=(0,u.L)();(0,l.useEffect)(()=>{p&&x(p.type)},[p]);let b=async s=>{let{value:a}=s.target;if(a===m.DE.local){let s=await y({type:a,details:{},format:"json"});(0,r.D4)(s)?t(s.error):e("Configured storage details successfully.")}let i=await f({storage:{active_default_storage_type:a}});(0,r.D4)(i)?t(i.error):x(a)},k={s3:j,gcs:v}[s];return(0,a.jsxs)(o.Z,{title:"Configure Privacy Requests - Storage",children:[(0,a.jsx)(c.Z,{heading:"Privacy Requests",breadcrumbItems:[{title:"All requests",href:d.Jw},{title:"Configure requests",href:d.fz},{title:"Storage"}]}),(0,a.jsx)(i.X6q,{mb:5,fontSize:"md",fontWeight:"semibold",children:"Configure storage"}),(0,a.jsxs)(i.xuv,{display:"flex",flexDirection:"column",width:"50%",children:[(0,a.jsx)(i.xuv,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,a.jsxs)(i.xuv,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,a.jsx)(i.xvT,{as:"span",color:"complimentary.500",children:"Local"}),", ",(0,a.jsx)(i.xvT,{as:"span",color:"complimentary.500",children:"S3"})," ","and"," ",(0,a.jsx)(i.xvT,{as:"span",color:"complimentary.500",children:"GCS"})," ","storage methods."]}),(0,a.jsx)(i.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,a.jsx)(i.y02.Group,{disabled:g,onChange:b,value:s,"data-testid":"privacy-requests-storage-selection",className:"p-3",children:(0,a.jsxs)(i.jqI,{children:[(0,a.jsx)(i.y02,{value:"local","data-testid":"option-local",children:"Local"},"local"),(0,a.jsx)(i.y02,{value:"s3","data-testid":"option-s3",children:"S3"},"s3"),(0,a.jsx)(i.y02,{value:"gcs","data-testid":"option-gcs",children:"GCS"},"gcs")]})}),k&&_&&(0,a.jsx)(k,{storageDetails:_})]})]})},g=()=>(0,a.jsx)(y,{})}},function(e){e.O(0,[431,4164,2888,9774,179],function(){return e(e.s=23663)}),_N_E=e.O()}]);