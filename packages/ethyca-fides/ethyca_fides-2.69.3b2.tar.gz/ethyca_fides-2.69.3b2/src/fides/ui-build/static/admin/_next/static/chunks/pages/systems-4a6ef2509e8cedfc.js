(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3785],{90988:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/systems",function(){return s(6557)}])},30952:function(e,t,s){"use strict";s.d(t,{f:function(){return o}});var l=s(24246),a=s(66726),n=s.n(a),i=s(27378),r=s(26917);let o=e=>{let{value:t,onChange:s,placeholder:a,...o}=e,[d,u]=(0,i.useState)(t);(0,i.useEffect)(()=>{u(t||"")},[t]);let c=n()(s,500),p=(0,i.useCallback)(e=>{u(e),c(e)},[]);return(0,l.jsx)(r.Z,{value:d,onChange:p,onClear:()=>{u(""),s("")},placeholder:a,...o})}},35287:function(e,t,s){"use strict";var l=s(24246),a=s(96306),n=s(88038),i=s.n(n);s(27378),t.Z=e=>{let{children:t,title:s,mainProps:n}=e;return(0,l.jsxs)(a.kCb,{"data-testid":s,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,l.jsxs)(i(),{children:[(0,l.jsxs)("title",{children:["Fides Admin UI - ",s]}),(0,l.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsx)(a.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...n,children:t})]})}},58754:function(e,t,s){"use strict";var l=s(24246),a=s(96306),n=s(70788);t.Z=e=>{let{heading:t,breadcrumbItems:s,isSticky:i=!0,children:r,rightContent:o,style:d,...u}=e;return(0,l.jsxs)("div",{...u,style:i?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,l.jsxs)(a.jqI,{justify:"space-between",children:["string"==typeof t?(0,l.jsx)(a.lQT,{className:s||r?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,l.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!s&&(0,l.jsx)(n.m,{className:r?"pb-4":void 0,items:s,"data-testid":"page-breadcrumb"}),r]})}},19904:function(e,t,s){"use strict";s.d(t,{Tg:function(){return i}});var l=s(24246),a=s(16134),n=s(31793);let i=e=>(0,a.C)(n.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:s}=e;return i(t)?(0,l.jsx)(l.Fragment,{children:s}):null}},97181:function(e,t,s){"use strict";s.d(t,{d:function(){return d}});var l=s(24246),a=s(96306),n=s(34090),i=s(27378),r=s(46238),o=s(40324);let d=e=>{let{name:t,label:s,labelProps:d,tooltip:u,isRequired:c,layout:p="inline",helperText:m,...g}=e,[y,h,{setValue:v}]=(0,n.U$)(t),x=!!(h.touched&&h.error),[f,j]=(0,i.useState)("");y.value||"tags"!==g.mode&&"multiple"!==g.mode||(y.value=[]),"tags"===g.mode&&"string"==typeof y.value&&(y.value=[y.value]);let k="tags"===g.mode?(e,t)=>e?e.value!==f||y.value.includes(f)?g.optionRender?g.optionRender(e,t):e.label:'Create "'.concat(f,'"'):void 0:g.optionRender||void 0,b=e=>{j(e),g.onSearch&&g.onSearch(e)},S=(e,t)=>{v(e),g.onChange&&g.onChange(e,t)};return"inline"===p?(0,l.jsx)(a.NIc,{isInvalid:x,isRequired:c,children:(0,l.jsxs)(a.rjZ,{templateColumns:s?"1fr 3fr":"1fr",children:[s?(0,l.jsx)(o.__,{htmlFor:g.id||t,...d,children:s}):null,(0,l.jsxs)(a.jqI,{align:"center",children:[(0,l.jsxs)(a.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,l.jsx)(a.WPr,{...y,id:g.id||t,"data-testid":"controlled-select-".concat(y.name),...g,optionRender:k,onSearch:"tags"===g.mode?b:void 0,onChange:S,value:y.value||void 0,status:x?"error":void 0}),m&&(0,l.jsx)(a.Q6r,{children:m}),(0,l.jsx)(o.Bc,{isInvalid:x,message:h.error,fieldName:y.name})]}),(0,l.jsx)(r.b,{label:u,className:x?"mt-2 self-start":void 0})]})]})}):(0,l.jsx)(a.NIc,{isInvalid:x,isRequired:c,children:(0,l.jsxs)(a.gCW,{alignItems:"start",children:[(0,l.jsxs)(a.jqI,{align:"center",children:[s?(0,l.jsx)(o.__,{htmlFor:g.id||t,fontSize:"xs",my:0,mr:1,...d,children:s}):null,(0,l.jsx)(r.b,{label:u})]}),(0,l.jsx)(a.WPr,{...y,id:g.id||t,"data-testid":"controlled-select-".concat(y.name),...g,optionRender:k,onSearch:"tags"===g.mode?b:void 0,onChange:S,value:y.value||void 0,status:x?"error":void 0}),m&&(0,l.jsx)(a.Q6r,{style:{marginTop:0},children:m}),(0,l.jsx)(o.Bc,{isInvalid:x,message:h.error,fieldName:y.name})]})})}},34929:function(e,t,s){"use strict";var l=s(24246),a=s(64925),n=s.n(a),i=s(27378),r=s(16134),o=s(30002),d=s(28079),u=s(57072);let c=()=>{let{isLoading:e}=(0,d.fd)(),t=(0,r.C)(d.U3),{isLoading:s}=(0,u.MO)(),l=(0,r.C)(u.qb),{isLoading:a}=(0,o.te)();return{dataUses:t,dataSubjects:(0,r.C)(o.ZL),dataCategories:l,isLoading:e||s||a}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:s,isLoading:a}=c(),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},o=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=t(e);if(!l)return{};let a=t(r(e,s)),n=!!l.parent_key;return{name:l.name||void 0,primaryName:n&&(null==a?void 0:a.name)!==l.name&&(null==a?void 0:a.name)||void 0}},d=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:a,primaryName:n}=o(e,t,s);return a?n?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("strong",{children:[n,":"]})," ",a]},e):(0,l.jsx)("strong",{children:a},e):e},u=t=>n()(e,{fides_key:t}),p=e=>n()(t,{fides_key:e}),m=e=>n()(s,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:u,getDataUseDisplayName:e=>d(e,u,1),getDataUseDisplayNameProps:e=>o(e,u,1),getDataCategories:()=>t,getDataCategoryByKey:p,getDataCategoryDisplayName:e=>d(e,p,2),getDataCategoryDisplayNameProps:e=>o(e,p,2),getDataSubjects:()=>s,getDataSubjectByKey:m,getDataSubjectDisplayName:e=>{let t=m(e);return t?t.name:e},getPrimaryKey:r,isLoading:a}}},70788:function(e,t,s){"use strict";s.d(t,{m:function(){return d}});var l=s(24246),a=s(96306),n=s(79894),i=s.n(n),r=s(27378);let{Text:o}=a.AntTypography,d=e=>{let{items:t,...s}=e,n=(0,r.useMemo)(()=>null==t?void 0:t.map((e,s)=>{let n=s===t.length-1,r={...e},d=r.onClick&&!r.href;return("string"==typeof r.title&&(r.title=(0,l.jsx)(o,{style:{color:"inherit",maxWidth:n?void 0:400},ellipsis:!n,id:n?"breadcrumb-current-page":void 0,children:r.title})),d)?r.title=(0,l.jsx)(a.wpx,{type:"text",size:"small",icon:r.icon,onClick:r.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:r.title}):(r.icon&&(r.title=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"anticon align-text-bottom",children:r.icon}),r.title]})),r.href&&r.title&&(r.title=(0,l.jsx)(i(),{href:r.href,className:"ant-breadcrumb-link",children:r.title}),delete r.href)),r}),[t]);return(0,l.jsx)(a.zrq,{items:n,...s})}},99640:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var l=s(24246),a=s(96306),n=s(79894),i=s.n(n);let{Link:r,Text:o}=a.AntTypography,d=e=>{let{href:t,children:s,...a}=e;return t?(0,l.jsx)(i(),{href:t,passHref:!0,legacyBehavior:!0,children:(0,l.jsx)(r,{strong:!0,ellipsis:!0,onClick:e=>e.stopPropagation(),...a,children:s})}):(0,l.jsx)(o,{strong:!0,ellipsis:!0,...a,children:s})}},2525:function(e,t,s){"use strict";s.d(t,{Q:function(){return r}});var l=s(24246),a=s(96306),n=s(27378),i=s(3110);let r=e=>{let{values:t,columnState:s,tagProps:r,onTagClose:o,...d}=e,{isExpanded:u,isWrapped:c,version:p}=s||{},[m,g]=(0,n.useState)(!u),[y,h]=(0,n.useState)(!!c),[v,x]=(0,n.useState)(u?t:null==t?void 0:t.slice(0,2));(0,n.useEffect)(()=>{g(!u)},[u,p]),(0,n.useEffect)(()=>{h(!!c)},[c]),(0,n.useEffect)(()=>{(null==t?void 0:t.length)&&x(m?t.slice(0,2):t)},[m,t]);let f=(0,n.useCallback)(()=>{x(null==t?void 0:t.slice(0,2)),g(!0)},[t]),j=(0,n.useCallback)(()=>{g(!1)},[]),k=(0,n.useCallback)(()=>{m?j():f()},[m,j,f]);return(0,n.useMemo)(()=>(null==v?void 0:v.length)?(0,l.jsxs)(a.jqI,{align:m?"center":"start",wrap:y?"wrap":"nowrap",vertical:!m,gap:"small","data-testid":"tag-expandable-cell",...d,children:[v.map(e=>(0,l.jsx)(a.j8w,{color:"white","data-testid":e.key,onClose:o?()=>o(e.key):void 0,...r,...e.tagProps,children:(0,l.jsx)(a.lKn,{ellipsis:!!m&&{tooltip:!0},style:{color:"inherit",maxWidth:m?i.TD:void 0},children:e.label})},e.key)),t&&t.length>2&&(0,l.jsx)(a.wpx,{type:"link",size:"small",onClick:e=>{e.stopPropagation(),k()},className:"h-auto p-0",style:{fontSize:"var(--ant-font-size)"},children:m?"+".concat(t.length-2," more"):i.T5})]}):(0,l.jsx)("span",{"data-testid":"tag-expandable-cell-empty"}),[v,m,y,d,t,r,o,k])}},3110:function(e,t,s){"use strict";s.d(t,{DI:function(){return r},T5:function(){return n},TD:function(){return i}});var l=s(24246),a=s(96306);let n="show less",i=150,r=[{key:"expand-all",label:"Expand all",icon:(0,l.jsx)(a.PJP.jbG,{})},{key:"collapse-all",label:"Collapse all",icon:(0,l.jsx)(a.PJP.MVB,{})}]},26070:function(e,t,s){"use strict";s.d(t,{v:function(){return o},Q:function(){return d.Q}});var l=s(24246),a=s(96306),n=s(27378),i=s(3110);let{Text:r}=a.AntTypography,o=e=>{let{values:t,valueSuffix:s,columnState:o}=e,{isExpanded:d,version:u}=o||{},[c,p]=(0,n.useState)(!d);(0,n.useEffect)(()=>{p(!d)},[d,u]);let m=(0,n.useCallback)(()=>{p(!0)},[]),g=(0,n.useCallback)(()=>{p(!1)},[]),y=(0,n.useCallback)(()=>{c?g():m()},[c,g,m]);return(0,n.useMemo)(()=>(null==t?void 0:t.length)?1===t.length?(0,l.jsx)(r,{ellipsis:!0,"data-testid":"list-expandable-cell-single",children:t[0]}):(0,l.jsxs)(a.jqI,{align:c?"center":"flex-start",vertical:!c,gap:c?"small":"none","data-testid":"list-expandable-cell",children:[c?(0,l.jsxs)(r,{ellipsis:!0,children:[t.length," ",s]}):(0,l.jsx)(a.krs,{dataSource:t,renderItem:e=>(0,l.jsx)("li",{children:e})}),(0,l.jsx)(a.wpx,{type:"link",size:"small",onClick:e=>{e.stopPropagation(),y()},className:"h-auto p-0",style:{fontSize:"var(--ant-font-size)"},children:c?"view":i.T5})]}):null,[c,t,s,y])};var d=s(2525)},8125:function(e,t,s){"use strict";s.d(t,{V:function(){return n},o:function(){return d}});var l=s(27378),a=s(32735);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{enableSelection:s=!1,getRowKey:n,bulkActions:i,isLoading:r=!1,isFetching:o=!1,dataSource:d=[],totalRows:u=0,currentPage:c,pageSize:p,customTableProps:m={}}=t,g=(0,l.useCallback)(e=>{if(e&&"object"==typeof e){if(e.id)return String(e.id);if(e.key)return String(e.key)}return String(e)},[]),y=n||g,[h,v]=(0,l.useState)([]),[x,f]=(0,l.useState)([]),j=(0,l.useCallback)(()=>{v([]),f([])},[]),k=(0,l.useMemo)(()=>({selectedRowKeys:h,selectedRows:x,resetSelections:j}),[h,x,j]),b=(0,l.useMemo)(()=>{if(s)return{selectedRowKeys:h,onChange:(e,t)=>{v(e),f(t)}}},[s,h]),S=(0,l.useCallback)((t,s,l)=>{var a,n;let i=null!==(a=t.current)&&void 0!==a?a:e.pageIndex,r=null!==(n=t.pageSize)&&void 0!==n?n:e.pageSize,o=i!==e.pageIndex||r!==e.pageSize;o?(t.current&&t.current!==e.pageIndex&&e.updatePageIndex(t.current),t.pageSize&&t.pageSize!==e.pageSize&&e.updatePageSize(t.pageSize)):e.updateFilters(s||{});let d=l&&!Array.isArray(l)?l.field:void 0,u=l&&!Array.isArray(l)&&null!==l.order?l.order:void 0;o||e.updateSorting(d,u)},[e]),_=(0,l.useMemo)(()=>{var t,s,l,n,i;return{current:null!=c?c:e.pageIndex,pageSize:null!=p?p:e.pageSize,total:u,showSizeChanger:null===(n=null===(t=e.paginationConfig)||void 0===t?void 0:t.showSizeChanger)||void 0===n||n,pageSizeOptions:null!==(i=null===(l=e.paginationConfig)||void 0===l?void 0:null===(s=l.pageSizeOptions)||void 0===s?void 0:s.map(String))&&void 0!==i?i:a.VZ}},[c,e.pageIndex,p,e.pageSize,u,e.paginationConfig]),C=(0,l.useMemo)(()=>({dataSource:d,loading:r||o,pagination:_,onChange:S,rowKey:y,scroll:{x:"max-content",scrollToFirstRowOnChange:!0},size:"small",bordered:!0,...m}),[d,r,o,_,S,y,m]),E=h.map(String),w=x.length>0,N=(0,l.useCallback)(e=>{let t=null==i?void 0:i.actions.find(t=>t.key===e);return t?{disabled:!w||!!t.disabled&&t.disabled(x),loading:t.loading||!1,onClick:()=>t.onClick(x)}:{disabled:!0,loading:!1}},[i,w,x]);return(0,l.useMemo)(()=>({tableProps:C,selectionProps:b,selectionState:k,selectedRows:x,selectedKeys:E,hasSelectedRows:w,resetSelections:j,getBulkActionProps:N,isLoadingOrFetching:r||o,hasData:d.length>0}),[C,b,k,x,E,w,j,N,r,o,d.length])};var i=s(40431),r=s(41841);let o=()=>({filters:(0,i.WJ)(e=>e).withDefault({})}),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pagination:t={},sorting:s={},search:a={},onStateChange:n}=e,{pageIndex:d,pageSize:u,resetPagination:c,updatePageIndex:p,updatePageSize:m,pageSizeOptions:g,showSizeChanger:y}=(0,r.h0)(t),{sortKey:h,sortOrder:v,updateSorting:x,resetSorting:f}=(0,r.rK)(s),{searchQuery:j,updateSearch:k,resetSearch:b}=(0,r.Rx)(a),S=(0,l.useMemo)(()=>o(),[]),[_,C]=(0,i.XI)(S,{history:"push"}),E=(0,l.useMemo)(()=>{var e;return{pageIndex:d,pageSize:u,sortKey:h,sortOrder:v,columnFilters:null!==(e=_.filters)&&void 0!==e?e:{},searchQuery:j}},[_,d,u,h,v,j]),w=(0,l.useCallback)((e,t)=>{x(e,t),c()},[x,c]),N=(0,l.useCallback)(e=>{let t=Object.fromEntries(Object.entries(e).filter(e=>{let[,t]=e;return null!=t}));C({filters:Object.keys(t).length>0?t:null}),c()},[C,c]),T=(0,l.useCallback)(e=>{k(e),c()},[k,c]),O=(0,l.useCallback)(()=>{C({filters:null}),c(),f(),b()},[C,c,f,b]);return(0,l.useEffect)(()=>{n&&n(E)},[E,n]),{state:E,pageIndex:E.pageIndex,pageSize:E.pageSize,updatePageIndex:p,updatePageSize:m,sortKey:E.sortKey,sortOrder:E.sortOrder,updateSorting:w,columnFilters:E.columnFilters,updateFilters:N,searchQuery:E.searchQuery,updateSearch:T,resetState:O,paginationConfig:{pageSizeOptions:g,showSizeChanger:y}}}},33335:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});let l=e=>e.toLowerCase().replace(/[ .]/g,"_").replace(/[^a-zA-Z0-9_<>-]/g,"")},95782:function(e,t,s){"use strict";s.d(t,{Nr:function(){return a},QD:function(){return l},Xz:function(){return n}});let{useGetAllSystemGroupsQuery:l,useCreateSystemGroupMutation:a,useUpdateSystemGroupMutation:n,useDeleteSystemGroupMutation:i}=s(78780).u.injectEndpoints({endpoints:e=>({getAllSystemGroups:e.query({query:()=>({url:"system-groups"}),providesTags:()=>["System Groups"]}),createSystemGroup:e.mutation({query:e=>({url:"system-groups",method:"POST",body:e}),invalidatesTags:["System Groups","System"]}),updateSystemGroup:e.mutation({query:e=>({url:"system-groups/".concat(e.fides_key),method:"PUT",body:e}),invalidatesTags:["System Groups","System"]}),deleteSystemGroup:e.mutation({query:e=>({url:"system-groups/".concat(e),method:"DELETE"}),invalidatesTags:["System Groups","System"]})})})},6557:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return J}});var l=s(24246),a=s(96306),n=s(27378),i=s(35287),r=s(58754),o=s(30952),d=s(25980),u=s(34090),c=s(83766),p=s.n(c),m=s(55484),g=s(97181),y=s(40324),h=s(28079),v=s(1315),x=s(21910);let f={[x.Ej.TAXONOMY_WHITE]:"default",[x.Ej.TAXONOMY_RED]:"error",[x.Ej.TAXONOMY_ORANGE]:"warning",[x.Ej.TAXONOMY_YELLOW]:"caution",[x.Ej.TAXONOMY_GREEN]:"success",[x.Ej.TAXONOMY_BLUE]:"info",[x.Ej.TAXONOMY_PURPLE]:"alert",[x.Ej.SANDSTONE]:"sandstone",[x.Ej.MINOS]:"minos"},j={[x.Ej.TAXONOMY_WHITE]:"White",[x.Ej.TAXONOMY_RED]:"Red",[x.Ej.TAXONOMY_ORANGE]:"Orange",[x.Ej.TAXONOMY_YELLOW]:"Yellow",[x.Ej.TAXONOMY_GREEN]:"Green",[x.Ej.TAXONOMY_BLUE]:"Blue",[x.Ej.TAXONOMY_PURPLE]:"Purple",[x.Ej.SANDSTONE]:"Sandstone",[x.Ej.MINOS]:"Minos"},k=e=>{let{color:t,...s}=e;return(0,l.jsx)("span",{"aria-hidden":!0,className:"mr-2 inline-block size-4 rounded-lg align-middle",style:{backgroundColor:"var(--fidesui-bg-".concat(f[t],")"),border:t===x.Ej.TAXONOMY_WHITE?"1px solid var(--fidesui-neutral-200)":"none",...s.style}})},b=e=>{let t=null==e?void 0:e.value,s=null==e?void 0:e.label;return(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(k,{color:t}),(0,l.jsx)("span",{children:s})]})};var S=e=>{let t=Object.values(x.Ej).map(e=>({value:e,label:j[e]})),[s,a]=(0,n.useState)(void 0);return(0,l.jsx)(g.d,{...e,options:t,optionRender:b,layout:"stacked",value:s,onChange:e=>{a(e)},prefix:(0,l.jsx)(k,{color:null!=s?s:x.Ej.TAXONOMY_WHITE,style:{marginBottom:"2px"}})})};let _="all-suggested";var C=e=>{let{options:t,loading:s,name:i,suggestedDataUses:r,...o}=e,[d,c,{setValue:m}]=(0,u.U$)(i),g=!!(c.touched&&c.error),h=(0,n.useMemo)(()=>{let e=[],s=[];return null==t||t.forEach(t=>{r.includes(t.value)?e.push(t):s.push(t)}),{suggested:e,all:s}},[t,r]);return(0,l.jsxs)(a.jqI,{vertical:!0,gap:"small",children:[(0,l.jsx)(a.jqI,{align:"center",children:(0,l.jsx)(y.__,{htmlFor:o.id||i,fontSize:"xs",my:0,mr:1,children:"Data uses"})}),(0,l.jsx)(a.WPr,{options:[{label:"Select all suggested",value:_},{label:(0,l.jsxs)(a.jqI,{gap:"small",align:"center",children:[(0,l.jsx)(a.QMR,{}),(0,l.jsx)("strong",{children:"Suggested data uses"})]}),value:"suggested",options:h.suggested},{label:(0,l.jsxs)(a.jqI,{gap:"small",align:"center",children:[(0,l.jsx)(a.PJP.BBB,{}),(0,l.jsx)("strong",{children:"All data uses"})]}),value:"all",options:h.all}],mode:"multiple",placeholder:"Select data uses",allowClear:!0,loading:s,value:d.value,onChange:e=>{e.includes(_)?m(p()([...r,...e.filter(e=>e!==_)])):m(e)},status:g?"error":void 0,virtual:!1,...o}),(0,l.jsx)(y.Bc,{isInvalid:g,message:c.error,fieldName:d.name})]})};let E=m.Ry().shape({name:m.Z_().required("Name is required").label("Name"),label_color:m.Z_().required("Color is required").label("Color"),systems:m.IX().of(m.Z_()).label("Systems"),data_uses:m.IX().of(m.Z_()).label("Data uses")});var w=e=>{let{selectedSystemKeys:t=[],onSubmit:s,onCancel:i,isSubmitting:r=!1}=e,{data:o=[],isLoading:d}=(0,h.fd)(),{data:c,isLoading:m}=(0,v.K3)(),f=(0,n.useMemo)(()=>o.map(e=>({label:e.name||e.fides_key,value:e.fides_key})),[o]),j=(0,n.useMemo)(()=>{var e;let s=null!==(e=null==c?void 0:c.filter(e=>t.includes(e.fides_key)))&&void 0!==e?e:[];return p()(null==s?void 0:s.flatMap(e=>e.privacy_declarations.map(e=>e.data_use)))},[c,t]),k=(0,n.useMemo)(()=>{var e;return null!==(e=null==c?void 0:c.map(e=>({label:e.name||e.fides_key,value:e.fides_key})))&&void 0!==e?e:[]},[c]),b={name:"",description:"",label_color:x.Ej.TAXONOMY_WHITE,systems:t,data_uses:[],active:!0};return(0,l.jsx)(u.J9,{initialValues:b,validationSchema:E,onSubmit:s,enableReinitialize:!0,children:e=>{let{isValid:t,dirty:s}=e;return(0,l.jsx)(u.l0,{children:(0,l.jsxs)(a.jqI,{vertical:!0,gap:"middle",children:[(0,l.jsx)(a.AntTypography.Title,{level:2,children:"Create system group"}),(0,l.jsx)(y.j0,{name:"name",label:"Name",isRequired:!0,variant:"stacked",placeholder:"Enter system group name"}),(0,l.jsx)(y.Ks,{name:"description",label:"Description",variant:"stacked",placeholder:"Enter system group description",resize:!1}),(0,l.jsx)(g.d,{name:"systems",label:"Systems",mode:"multiple",placeholder:"Select systems",options:k,layout:"stacked",allowClear:!0,loading:m}),(0,l.jsx)(S,{name:"label_color",label:"Color"}),(0,l.jsx)(C,{name:"data_uses",options:f,loading:d,suggestedDataUses:j}),(0,l.jsxs)(a.jqI,{gap:"small",justify:"space-between",className:"pt-4",children:[(0,l.jsx)(a.wpx,{onClick:i,disabled:r,children:"Cancel"}),(0,l.jsx)(a.wpx,{type:"primary",htmlType:"submit",loading:r,disabled:!t||!s||r,"data-testid":"save-btn",children:"Create group"})]})]})})}})},N=s(812),T=s(65450),O=s(31793),I=s(31883),M=e=>{var t;let{selectedRowKeys:s}=e,[i,r]=a.Pg3.useMessage(),[o,d]=(0,n.useState)(!1),[u]=(0,T.WP)(),{data:c}=(0,O.wv)({page:1,size:100,username:""}),[p]=(0,T.C9)(),m=async e=>{let t=await u({data_steward:e,system_keys:s});(0,I.D4)(t)?i.error((0,N.e$)(t.error,"A problem occurred assigning stewards")):i.success("".concat(s.length," systems assigned to ").concat(e," successfully"))},g=async()=>{let e=await p(s);(0,I.D4)(e)?i.error((0,N.e$)(e.error,"A problem occurred deleting systems")):i.success("".concat(s.length," systems deleted successfully"))};return(0,l.jsxs)(l.Fragment,{children:[r,(0,l.jsx)(a.$zI,{open:o,onCancel:()=>d(!1),onOk:g,okText:"Delete",okType:"danger",centered:!0,children:(0,l.jsxs)(a.AntTypography.Paragraph,{children:["Delete ",s.length," systems? This action cannot be undone."]})}),(0,l.jsx)(a.S0p,{trigger:["click"],menu:{items:[{key:"assign-data-steward",label:"Assign data steward",children:null==c?void 0:null===(t=c.items)||void 0===t?void 0:t.map(e=>({key:e.username,label:e.username,onClick:()=>m(e.username)}))},{key:"delete",label:"Delete",onClick:()=>{d(!0)}}]},children:(0,l.jsx)(a.wpx,{disabled:0===s.length,icon:(0,l.jsx)(a.PJP._ME,{}),children:"Actions"})})]})},P=s(86677),D=s(19904),z=s(26070),A=s(3110),R=s(99640),q=s(8125),X=s(16394),F=s(33335),L=s(34929),W=e=>{let{privacyDeclarations:t,...s}=e,{getDataUseDisplayName:a}=(0,L.Z)(),n=t.map(e=>e.data_use).map(e=>({label:a(e),key:e}));return(0,l.jsx)(z.Q,{values:n,...s})},Y=s(56141),Z=s.n(Y);let G="update-system-groups-msg";var B=e=>{let{selectedGroups:t,allGroups:s,system:i,columnState:r,...o}=e,[d,u]=(0,n.useState)(!1),[c,p]=(0,n.useState)(t.map(e=>e.fides_key)),[m,g]=a.Pg3.useMessage(),[y]=(0,v.qQ)(),h=async()=>{if(u(!1),Z()(c,t.map(e=>e.fides_key)))return;m.open({key:G,type:"loading",content:"Updating groups for ".concat(i.name,"...")});let e=await y({...i,system_groups:c});(0,I.D4)(e)?m.open({key:G,type:"error",content:(0,N.e$)(e.error,"Failed to update system groups")}):m.open({key:G,type:"success",content:"Groups updated for ".concat(i.name)}),setTimeout(()=>{m.destroy(G)},3e3)};return(0,l.jsxs)(a.jqI,{gap:"small",...o,children:[g,!d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.j8w,{onClick:()=>u(!0),addable:!0,"data-testid":"group-add-btn","aria-label":"Add group"}),(0,l.jsx)(z.Q,{values:t.map(e=>e&&{label:e.name,key:e.fides_key,tagProps:{color:e.label_color?"".concat(f[e.label_color]):void 0,bordered:!1}}),columnState:r})]}),d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.WPr,{options:s.map(e=>({label:e.name,value:e.fides_key})),mode:"tags",defaultValue:t.map(e=>e.fides_key),defaultOpen:!0,onChange:e=>{p(e)}}),(0,l.jsx)(a.wpx,{icon:(0,l.jsx)(a.PJP.MCw,{}),onClick:h})]})]})},Q=s(95782),U=e=>{var t,s;let{isAlphaSystemGroupsEnabled:i}=e,{data:r}=(0,Q.QD)(),o=(0,n.useMemo)(()=>r?r.reduce((e,t)=>({...e,[t.fides_key]:t}),{}):{},[r]),{data:u}=(0,O.wv)({page:1,size:100,username:""}),[c]=(0,T.DW)(),[p]=(0,Q.Xz)(),[m]=(0,Q.Nr)(),[g,y]=(0,n.useState)(!1),[h,v]=(0,n.useState)(!1),[f,j]=(0,n.useState)(!1),[k,b]=(0,n.useState)(!1),[S,_]=(0,n.useState)(null),C=(0,q.o)({pagination:{defaultPageSize:25,pageSizeOptions:[25,50,100]},search:{defaultSearchQuery:""}}),{columnFilters:E,pageIndex:w,pageSize:M,searchQuery:L,updateSearch:Y}=C,{data:Z,isLoading:G,isFetching:U}=(0,T.xF)({page:w,size:M,search:L,system_group:null==E?void 0:null===(s=E.system_groups)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.toString(),...E}),K=(0,n.useMemo)(()=>{var e,t;return{enableSelection:!0,dataSource:null!==(e=null==Z?void 0:Z.items)&&void 0!==e?e:[],totalRows:null!==(t=null==Z?void 0:Z.total)&&void 0!==t?t:0,isLoading:G,isFetching:U,getRowKey:e=>e.fides_key}},[Z,G,U]),{tableProps:J,selectionProps:$}=(0,q.V)(C,K),{selectedRowKeys:V}=null!=$?$:{},[H,ee]=a.Pg3.useMessage(),{plus:et}=(0,d.hz)(),es=(0,P.useRouter)(),el=(0,D.Tg)([x.Sh.SYSTEM_DELETE]),ea=async e=>{let t=await c(e.fides_key);(0,I.D4)(t)?H.error((0,N.e$)(t.error,"Failed to delete system")):H.success("Successfully deleted system"),b(!1)},en=async e=>{let t={...e,fides_key:(0,F.E)(e.name),active:!0},s=await m(t);if((0,I.D4)(s))H.error((0,N.e$)(s.error));else{var l,a;let e="System group '".concat(s.data.name,"' created");(null===(l=s.data.systems)||void 0===l?void 0:l.length)===1?e+=" with system '".concat(s.data.systems[0],"'"):(null===(a=s.data.systems)||void 0===a?void 0:a.length)&&(e+=" with ".concat(s.data.systems.length," systems")),H.success(e)}j(!1)},ei=(0,n.useCallback)(async e=>{var t;if(!V)return;let s=o[e],l=await p({...s,systems:[...null!==(t=s.systems)&&void 0!==t?t:[],...V.map(e=>e.toString())]});(0,I.D4)(l)?H.error((0,N.e$)(l.error)):H.success("".concat(null==V?void 0:V.length," systems added to group '").concat(e,"'"))},[o,p,V,H]),er=(0,n.useMemo)(()=>{var e;return null!==(e=null==r?void 0:r.map(e=>({key:e.fides_key,label:e.name,onClick:()=>ei(e.fides_key)})))&&void 0!==e?e:[]},[r,ei]);return{tableProps:J,selectionProps:$,columns:(0,n.useMemo)(()=>{var e;return[{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,l.jsx)(R.Z,{href:"/systems/configure/".concat(t.fides_key),"data-testid":"system-link-".concat(t.fides_key),children:e||t.fides_key}),ellipsis:!0,fixed:"left"},{dataIndex:"system_groups",key:"system_groups",render:(e,t)=>{var s;return(0,l.jsx)(B,{selectedGroups:null!==(s=null==e?void 0:e.map(e=>null==o?void 0:o[e]).filter(e=>!!e))&&void 0!==s?s:[],allGroups:r,system:{...t,system_groups:null!=e?e:[]},columnState:{isWrapped:!0,isExpanded:g},className:"w-96"})},title:"Groups",hidden:!et||!i,menu:{items:A.DI,onClick:e=>{e.domEvent.stopPropagation(),"expand-all"===e.key?y(!0):"collapse-all"===e.key&&y(!1)}},filters:(0,X.nZ)(null==r?void 0:r.map(e=>e.fides_key),e=>{var t,s;return null!==(s=null===(t=o[e])||void 0===t?void 0:t.name)&&void 0!==s?s:e}),filteredValue:(null==E?void 0:E.system_groups)||null,filterMultiple:!1},{title:"Data uses",menu:{items:A.DI,onClick:e=>{e.domEvent.stopPropagation(),"expand-all"===e.key?v(!0):"collapse-all"===e.key&&v(!1)}},dataIndex:"privacy_declarations",key:"privacy_declarations",render:e=>(0,l.jsx)(W,{privacyDeclarations:e,columnState:{isWrapped:!0,isExpanded:h}})},{title:"Data stewards",dataIndex:"data_stewards",key:"data_steward",render:e=>(0,l.jsx)(z.v,{values:null!=e?e:[],valueSuffix:"users"}),filters:(0,X.nZ)(null==u?void 0:null===(e=u.items)||void 0===e?void 0:e.map(e=>e.username)),filteredValue:(null==E?void 0:E.data_steward)||null,filterMultiple:!1},{title:"Description",dataIndex:"description",key:"description",render:e=>(0,l.jsx)("div",{className:"max-w-96",children:(0,l.jsx)(a.AntTypography.Text,{ellipsis:{tooltip:e},children:e})}),ellipsis:!0},{title:"Actions",key:"actions",render:(e,t)=>(0,l.jsx)(a.kCb,{justify:"end",children:(0,l.jsx)(a.S0p,{trigger:["click"],menu:{items:[{key:"edit",label:"Edit",icon:(0,l.jsx)(a.PJP.I8b,{}),onClick:()=>es.push("/systems/configure/".concat(t.fides_key))},...el?[{key:"delete",label:"Delete",icon:(0,l.jsx)(a.PJP.ZNm,{}),onClick:()=>{_(t),b(!0)}}]:[]]},children:(0,l.jsx)(a.wpx,{size:"small",icon:(0,l.jsx)(a.PJP.r43,{}),"aria-label":"More actions",type:"text","data-testid":"system-actions-menu"})})}),fixed:"right"}]},[et,i,r,null==E?void 0:E.system_groups,null==E?void 0:E.data_steward,null==u?void 0:u.items,g,o,h,el,es]),searchQuery:L,updateSearch:Y,columnFilters:E,pageIndex:w,pageSize:M,createModalIsOpen:f,setCreateModalIsOpen:j,deleteModalIsOpen:k,setDeleteModalIsOpen:b,setSelectedSystemForDelete:_,handleCreateSystemGroup:en,handleDelete:ea,handleBulkAddToGroup:ei,messageContext:ee,groupMenuItems:er,selectedSystemForDelete:S}},K=()=>{var e,t;let{flags:{alphaSystemGroups:s}}=(0,d.Vb)(),{tableProps:n,selectionProps:i,columns:r,searchQuery:u,updateSearch:c,createModalIsOpen:p,setCreateModalIsOpen:m,deleteModalIsOpen:g,setDeleteModalIsOpen:y,handleCreateSystemGroup:h,handleDelete:v,groupMenuItems:x,messageContext:f,selectedSystemForDelete:j}=U({isAlphaSystemGroupsEnabled:s});return(0,l.jsxs)(l.Fragment,{children:[f,(0,l.jsxs)(a.jqI,{justify:"space-between",className:"mb-4",children:[(0,l.jsx)(o.f,{value:u,onChange:c,"data-testid":"system-search"}),(0,l.jsxs)(a.jqI,{gap:"small",children:[s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.S0p,{trigger:["click"],menu:{items:[{key:"new-group",label:"Create new group +",onClick:()=>m(!0)},{type:"divider"},...x]},children:(0,l.jsx)(a.wpx,{disabled:(null==i?void 0:i.selectedRowKeys.length)===0,icon:(0,l.jsx)(a.PJP._ME,{}),children:"Add to group"})}),(0,l.jsx)(a.$zI,{open:p,destroyOnHidden:!0,onCancel:()=>m(!1),centered:!0,width:768,footer:null,children:(0,l.jsx)(w,{selectedSystemKeys:null==i?void 0:i.selectedRowKeys.map(e=>e.toString()),onSubmit:h,onCancel:()=>m(!1)})})]}),(0,l.jsx)(M,{selectedRowKeys:null!==(e=null==i?void 0:i.selectedRowKeys)&&void 0!==e?e:[]}),(0,l.jsx)(a.$zI,{open:g,onCancel:()=>y(!1),onOk:()=>!!j&&v(j),okText:"Delete",okType:"danger",cancelText:"Cancel",centered:!0,children:(0,l.jsxs)(a.AntTypography.Paragraph,{children:["Are you sure you want to delete"," ",null!==(t=null==j?void 0:j.name)&&void 0!==t?t:null==j?void 0:j.fides_key,"? This action cannot be undone."]})})]})]}),(0,l.jsx)(a.V5H,{...n,columns:r,rowSelection:i})]})},J=()=>(0,l.jsx)(i.Z,{title:"System inventory",children:(0,l.jsxs)(a.xuv,{"data-testid":"system-management",children:[(0,l.jsx)(r.Z,{heading:"System inventory",breadcrumbItems:[{title:"All systems"}]}),(0,l.jsx)(K,{})]})})},31883:function(e,t,s){"use strict";s.d(t,{Bw:function(){return l.Bw},D4:function(){return l.D4}});var l=s(19043)}},function(e){e.O(0,[431,8765,9278,5163,1896,1841,2888,9774,179],function(){return e(e.s=90988)}),_N_E=e.O()}]);