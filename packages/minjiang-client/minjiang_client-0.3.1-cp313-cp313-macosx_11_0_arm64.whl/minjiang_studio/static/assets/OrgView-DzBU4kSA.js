import{d as A,c as B,e as U,f as v,aG as Ce,r as p,a as N,b as ke,z as ze,o as q,h as t,B as P,w as o,t as _,j as e,N as Y,x as j,n as x,O as W,a7 as Me,cG as Re,C as G,I as ee,J as Z,p as te,k as pe,l as J,cH as Ue,cE as Oe,bG as $e,a4 as Ee,cI as Ve,cJ as X,K as L,cx as fe,aK as oe,cK as ge,R as ne,aT as Q,cL as Ie,cM as Le,cN as De,cO as ae,Y as se,aL as ve,a0 as he,cP as be,cQ as Se,cR as ue,cS as Ae,cT as Be,cU as _e,Z as Pe,aM as Te,cV as Ne,cW as Ge,cX as je,i as qe}from"./index-BLXDI3Gt.js";import{C as Ke}from"./ChevronBack-ncga_bJT.js";import{U as we}from"./UserMultiple-CiKH-QEm.js";import{_ as le,a as ie}from"./FormItem-CL37dp1P.js";import{_ as K}from"./Space-DpsBKeZ3.js";import{_ as re}from"./Alert-qaFodki3.js";import{A as de}from"./Add-DqfqVE_I.js";import{_ as ce}from"./Popconfirm-xeEr7QSY.js";import{a as xe,b as ye}from"./Tabs-1RbgzstQ.js";import{i as He}from"./json-editor-vue-B0O4nFra.js";import"./Add-oJwA87FV.js";import"./debounce-BobGs9fy.js";const Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ze=A({name:"Devices",render:function(f,r){return U(),B("svg",Fe,r[0]||(r[0]=[v("path",{d:"M10 30H4a2 2 0 0 1-2-2V16a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 16v12h6V16z",fill:"currentColor"},null,-1),v("path",{d:"M28 4H6a2 2 0 0 0-2 2v6h2V6h22v14H14v2h2v4h-2v2h9v-2h-5v-4h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1)]))}}),Je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},me=A({name:"Settings",render:function(f,r){return U(),B("svg",Je,r[0]||(r[0]=[v("path",{d:"M27 16.76V16v-.77l1.92-1.68A2 2 0 0 0 29.3 11l-2.36-4a2 2 0 0 0-1.73-1a2 2 0 0 0-.64.1l-2.43.82a11.35 11.35 0 0 0-1.31-.75l-.51-2.52a2 2 0 0 0-2-1.61h-4.68a2 2 0 0 0-2 1.61l-.51 2.52a11.48 11.48 0 0 0-1.32.75l-2.38-.86A2 2 0 0 0 6.79 6a2 2 0 0 0-1.73 1L2.7 11a2 2 0 0 0 .41 2.51L5 15.24v1.53l-1.89 1.68A2 2 0 0 0 2.7 21l2.36 4a2 2 0 0 0 1.73 1a2 2 0 0 0 .64-.1l2.43-.82a11.35 11.35 0 0 0 1.31.75l.51 2.52a2 2 0 0 0 2 1.61h4.72a2 2 0 0 0 2-1.61l.51-2.52a11.48 11.48 0 0 0 1.32-.75l2.42.82a2 2 0 0 0 .64.1a2 2 0 0 0 1.73-1l2.28-4a2 2 0 0 0-.41-2.51zM25.21 24l-3.43-1.16a8.86 8.86 0 0 1-2.71 1.57L18.36 28h-4.72l-.71-3.55a9.36 9.36 0 0 1-2.7-1.57L6.79 24l-2.36-4l2.72-2.4a8.9 8.9 0 0 1 0-3.13L4.43 12l2.36-4l3.43 1.16a8.86 8.86 0 0 1 2.71-1.57L13.64 4h4.72l.71 3.55a9.36 9.36 0 0 1 2.7 1.57L25.21 8l2.36 4l-2.72 2.4a8.9 8.9 0 0 1 0 3.13L27.57 20z",fill:"currentColor"},null,-1),v("path",{d:"M16 22a6 6 0 1 1 6-6a5.94 5.94 0 0 1-6 6zm0-10a3.91 3.91 0 0 0-4 4a3.91 3.91 0 0 0 4 4a3.91 3.91 0 0 0 4-4a3.91 3.91 0 0 0-4-4z",fill:"currentColor"},null,-1)]))}}),Qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},We=A({name:"TwoFactorAuthentication",render:function(f,r){return U(),B("svg",Qe,r[0]||(r[0]=[v("path",{d:"M11 23.18l-2-2.001l-1.411 1.41L11 26l6-6l-1.41-1.41L11 23.18z",fill:"currentColor"},null,-1),v("path",{d:"M28 30h-4v-2h4V16h-4V8a4.005 4.005 0 0 0-4-4V2a6.007 6.007 0 0 1 6 6v6h2a2.002 2.002 0 0 1 2 2v12a2.002 2.002 0 0 1-2 2z",fill:"currentColor"},null,-1),v("path",{d:"M20 14h-2V8A6 6 0 0 0 6 8v6H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM8 8a4 4 0 0 1 8 0v6H8zm12 20H4V16h16z",fill:"currentColor"},null,-1)]))}}),Xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ye=A({name:"UserSettings",render:function(f,r){return U(),B("svg",Xe,r[0]||(r[0]=[v("path",{d:"M30 10V8h-2.101a4.968 4.968 0 0 0-.732-1.753l1.49-1.49l-1.414-1.414l-1.49 1.49A4.968 4.968 0 0 0 24 4.101V2h-2v2.101a4.968 4.968 0 0 0-1.753.732l-1.49-1.49l-1.414 1.414l1.49 1.49A4.968 4.968 0 0 0 18.101 8H16v2h2.101a4.968 4.968 0 0 0 .732 1.753l-1.49 1.49l1.414 1.414l1.49-1.49a4.968 4.968 0 0 0 1.753.732V16h2v-2.101a4.968 4.968 0 0 0 1.753-.732l1.49 1.49l1.414-1.414l-1.49-1.49A4.968 4.968 0 0 0 27.899 10zm-7 2a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z",fill:"currentColor"},null,-1),v("path",{d:"M16 30h-2v-5a3.003 3.003 0 0 0-3-3H7a3.003 3.003 0 0 0-3 3v5H2v-5a5.006 5.006 0 0 1 5-5h4a5.006 5.006 0 0 1 5 5z",fill:"currentColor"},null,-1),v("path",{d:"M9 10a3 3 0 1 1-3 3a3 3 0 0 1 3-3m0-2a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1)]))}}),et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},tt=A({name:"Checkmark12Regular",render:function(f,r){return U(),B("svg",et,r[0]||(r[0]=[v("g",{fill:"none"},[v("path",{d:"M9.854 3.146a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L5 7.293l4.146-4.147a.5.5 0 0 1 .708 0z",fill:"currentColor"})],-1)]))}}),H=Ce("org",()=>({info:p()})),ot={class:"flex items-center justify-start gap-2"},nt={class:"flex flex-1 justify-center items-center gap-5"},at={class:"text-2xl flex items-center justify-center gap-1"},st={key:0,class:"flex items-center gap-1"},lt={class:"flex items-center gap-1"},it={class:"flex items-center gap-1"},rt=A({__name:"OrgInfo",setup(D){const f=H(),{t:r}=N(),h=ke(),s=ze(),u=async()=>{const y=s.query.id;if(!y)return;const[d,b]=await Re({org_id:+y});!d&&(b==null?void 0:b.status)===0&&f.$patch({info:b.data})},M=()=>{h.push({name:"orgList"})};return q(()=>{u()}),(y,d)=>{var V;const b=Y,R=P,E=Me;return U(),B("div",ot,[t(R,{onClick:M,quaternary:""},{icon:o(()=>[t(b,{size:"26"},{default:o(()=>[t(e(Ke))]),_:1})]),default:o(()=>[v("span",null,_(e(r)("org.backOrgList")),1)]),_:1}),v("div",nt,[v("div",at,[t(b,{component:e(W)},null,8,["component"]),x(" "+_((V=e(f).info)==null?void 0:V.organization_name),1)]),e(f).info?(U(),B("div",st,[t(E,{bordered:!1,size:"small",type:"success"},{default:o(()=>{var C;return[x(" ID "+_((C=e(f).info)==null?void 0:C.organization_id),1)]}),_:1}),t(E,{bordered:!1,type:"warning",size:"small"},{default:o(()=>{var C;return[v("div",lt,[t(b,{component:e(we)},null,8,["component"]),x(" "+_((C=e(f).info)==null?void 0:C.member_count)+" "+_(e(r)("org.cmember")),1)])]}),_:1}),t(E,{bordered:!1,type:"info",size:"small"},{default:o(()=>{var C;return[v("div",it,[t(b,{component:e(W)},null,8,["component"]),x(" "+_((C=e(f).info)==null?void 0:C.device_count)+" "+_(e(r)("org.cdevice")),1)])]}),_:1})])):j("",!0)])])}}}),ct={class:"flex justify-end"},ut=A({__name:"InsertMember",props:{type:{}},emits:["success"],setup(D,{expose:f,emit:r}){const h=H(),s=p(),{t:u}=N(),M=r,y=[{label:u("org.admin"),value:"ORG_ADMIN"},{label:u("org.member"),value:"ORG_MEMBER"}],d=p(!1),b=p(!1),R=()=>{b.value=!1,O.value={user_name:void 0,org_role:void 0}},E=()=>{b.value=!0},V=p({user_name:{required:!0,message:u("common.required")},org_role:{required:!0,message:u("common.required")}}),C=p(null),O=p({user_name:void 0,org_role:void 0}),w=()=>{var m;(m=C.value)==null||m.validate(async n=>{var c;if(n)return;const[a,i]=await Ue({...O.value,org_id:(c=h.info)==null?void 0:c.organization_id});!a&&(i==null?void 0:i.status)===0&&(M("success"),R())})},k=async()=>{var a;const[m,n]=await Oe();!m&&(n==null?void 0:n.status)===0&&(s.value=(a=n.data)==null?void 0:a.map(i=>({...i,label:i.user_name,value:i.user_id})))};return q(()=>{k()}),f({open:E,close:R}),(m,n)=>{const a=ie,i=pe,c=J,g=le,l=P,z=K,$=te,I=ee;return U(),G(I,{show:e(b),"onUpdate:show":n[2]||(n[2]=S=>Z(b)?b.value=S:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t($,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(g,{ref_key:"formRef",ref:C,model:e(O),rules:e(V),size:"small"},{default:o(()=>[t(a,{label:e(u)("org.orgName"),path:"name"},{default:o(()=>{var S;return[x(_((S=e(h).info)==null?void 0:S.organization_name),1)]}),_:1},8,["label"]),t(a,{label:e(u)("org.username"),path:"user_name"},{default:o(()=>[t(i,{value:e(O).user_name,"onUpdate:value":n[0]||(n[0]=S=>e(O).user_name=S)},null,8,["value"])]),_:1},8,["label"]),t(a,{label:e(u)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(c,{value:e(O).org_role,"onUpdate:value":n[1]||(n[1]=S=>e(O).org_role=S),options:y},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),v("div",ct,[t(z,null,{default:o(()=>[t(l,{onClick:R,loading:e(d)},{default:o(()=>[x(_(e(u)("common.cancel")),1)]),_:1},8,["loading"]),t(l,{type:"primary",onClick:w,loading:e(d)},{default:o(()=>[x(_(e(u)("org.omtab.invite")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),_t={class:"flex justify-end"},dt={class:"my-10 text-center"},mt={class:"flex justify-end"},pt=A({__name:"InsertUser",props:{type:{}},emits:["success"],setup(D,{expose:f,emit:r}){const h=H(),{t:s}=N(),u=r,M=[{label:s("org.admin"),value:"ORG_ADMIN"},{label:s("org.member"),value:"ORG_MEMBER"}],y=p(!1),d=p(!1),b=()=>{d.value=!1,C.value={user_name:void 0,org_role:void 0}},R=()=>{d.value=!0},E=p({user_name:{required:!0,message:s("common.required")},org_role:{required:!0,message:s("common.required")}}),V=p(null),C=p({user_name:void 0,org_role:void 0}),O=p(""),w=p(!1),k=()=>{w.value=!1,O.value=""},m=()=>{var n;(n=V.value)==null||n.validate(async a=>{var g,l;if(a)return;const[i,c]=await Ve({...C.value,org_id:(g=h.info)==null?void 0:g.organization_id});!i&&(c==null?void 0:c.status)===0&&(w.value=!0,O.value=(l=c.data)==null?void 0:l.token,u("success"),b())})};return $e(()=>{O.value=""}),f({open:R,close:b}),(n,a)=>{const i=ie,c=pe,g=J,l=le,z=K,$=te,I=ee,S=re;return U(),B(Ee,null,[t(I,{show:e(d),"onUpdate:show":a[2]||(a[2]=T=>Z(d)?d.value=T:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t($,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(l,{ref_key:"formRef",ref:V,model:e(C),rules:e(E),size:"small"},{default:o(()=>[t(i,{label:e(s)("org.orgName"),path:"name"},{default:o(()=>{var T;return[x(_((T=e(h).info)==null?void 0:T.organization_name),1)]}),_:1},8,["label"]),t(i,{label:e(s)("org.omtab.user"),path:"user_name"},{default:o(()=>[t(c,{value:e(C).user_name,"onUpdate:value":a[0]||(a[0]=T=>e(C).user_name=T)},null,8,["value"])]),_:1},8,["label"]),t(i,{label:e(s)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(g,{value:e(C).org_role,"onUpdate:value":a[1]||(a[1]=T=>e(C).org_role=T),options:M},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),v("div",_t,[t(z,null,{default:o(()=>[t(e(P),{onClick:b,loading:e(y)},{default:o(()=>[x(_(e(s)("common.cancel")),1)]),_:1},8,["loading"]),t(e(P),{type:"primary",onClick:m,loading:e(y)},{default:o(()=>[x(_(e(s)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"]),t(I,{show:e(w),"onUpdate:show":a[3]||(a[3]=T=>Z(w)?w.value=T:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t($,{bordered:!1,"content-class":"!px-5",style:{width:"500px"}},{default:o(()=>[t(S,{type:"info"},{default:o(()=>[x(_(e(s)("org.omtab.tokenTips")),1)]),_:1}),v("div",dt,_(e(O)),1),v("div",mt,[t(z,null,{default:o(()=>[t(e(P),{type:"primary",onClick:k,loading:e(y)},{default:o(()=>[x(_(e(s)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}}),ft="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_0)'%20customFrame='url(%23clipPath_0)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_0'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_1'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2049'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(51,49,64)'%20fill-opacity='0.5'%20/%3e%3cg%20id='Stroke%202/edit-write-alt'%20clip-path='url(%23clipPath_1)'%20customFrame='url(%23clipPath_1)'%3e%3crect%20id='Stroke%202/edit-write-alt'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20fill-opacity='0'%20/%3e%3cpath%20id='Vector'%20d='M9.75%2032.25L32.25%2032.25'%20stroke='rgb(108,92,231)'%20stroke-width='2'%20/%3e%3cpath%20id='Vector'%20d='M24.125%2010.375C25.1605%209.3395%2026.8395%209.3395%2027.875%2010.375C28.9105%2011.4106%2028.9105%2013.0895%2027.875%2014.125L15.375%2026.625L10.375%2027.875L11.625%2022.875L24.125%2010.375Z'%20fill-rule='evenodd'%20stroke='rgb(108,92,231)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",gt="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_2)'%20customFrame='url(%23clipPath_2)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_2'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_3'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2048'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,0,0)'%20fill-opacity='0.25'%20/%3e%3cg%20id='Icon%20/%20delete%20user%2024%20Outline'%20clip-path='url(%23clipPath_3)'%20customFrame='url(%23clipPath_3)'%3e%3crect%20id='Icon%20/%20delete%20user%2024%20Outline'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20/%3e%3cpath%20id='Vector'%20d='M22.625%2021.275C23.292%2020.6977%2023.8269%2019.9836%2024.1936%2019.1813C24.5602%2018.379%2024.75%2017.5071%2024.75%2016.625C24.75%2014.9674%2024.0915%2013.3777%2022.9194%2012.2056C21.7473%2011.0335%2020.1576%2010.375%2018.5%2010.375C16.8424%2010.375%2015.2527%2011.0335%2014.0806%2012.2056C12.9085%2013.3777%2012.25%2014.9674%2012.25%2016.625C12.25%2017.5071%2012.4398%2018.379%2012.8064%2019.1813C13.1731%2019.9836%2013.708%2020.6977%2014.375%2021.275C12.6252%2022.0674%2011.1406%2023.3469%2010.0987%2024.9607C9.05687%2026.5745%208.50184%2028.4541%208.5%2030.375C8.5%2030.7065%208.6317%2031.0245%208.86612%2031.2589C9.10054%2031.4933%209.41848%2031.625%209.75%2031.625C10.0815%2031.625%2010.3995%2031.4933%2010.6339%2031.2589C10.8683%2031.0245%2011%2030.7065%2011%2030.375C11%2028.3859%2011.7902%2026.4782%2013.1967%2025.0717C14.6032%2023.6652%2016.5109%2022.875%2018.5%2022.875C20.4891%2022.875%2022.3968%2023.6652%2023.8033%2025.0717C25.2098%2026.4782%2026%2028.3859%2026%2030.375C26%2030.7065%2026.1317%2031.0245%2026.3661%2031.2589C26.6005%2031.4933%2026.9185%2031.625%2027.25%2031.625C27.5815%2031.625%2027.8995%2031.4933%2028.1339%2031.2589C28.3683%2031.0245%2028.5%2030.7065%2028.5%2030.375C28.4982%2028.4541%2027.9431%2026.5745%2026.9013%2024.9607C25.8594%2023.3469%2024.3748%2022.0674%2022.625%2021.275ZM18.5%2020.375C17.7583%2020.375%2017.0333%2020.1551%2016.4166%2019.743C15.7999%2019.331%2015.3193%2018.7453%2015.0355%2018.0601C14.7516%2017.3748%2014.6774%2016.6208%2014.8221%2015.8934C14.9667%2015.166%2015.3239%2014.4978%2015.8483%2013.9734C16.3728%2013.4489%2017.041%2013.0918%2017.7684%2012.9471C18.4958%2012.8024%2019.2498%2012.8766%2019.9351%2013.1605C20.6203%2013.4443%2021.206%2013.9249%2021.618%2014.5416C22.0301%2015.1583%2022.25%2015.8833%2022.25%2016.625C22.25%2017.6196%2021.8549%2018.5734%2021.1516%2019.2767C20.4484%2019.9799%2019.4946%2020.375%2018.5%2020.375ZM32.1375%2021L33.1375%2020.0125C33.254%2019.896%2033.3465%2019.7576%2033.4096%2019.6053C33.4726%2019.453%2033.5051%2019.2898%2033.5051%2019.125C33.5051%2018.9602%2033.4726%2018.797%2033.4096%2018.6447C33.3465%2018.4924%2033.254%2018.354%2033.1375%2018.2375C33.0209%2018.121%2032.8826%2018.0285%2032.7303%2017.9654C32.578%2017.9024%2032.4148%2017.8699%2032.25%2017.8699C32.0852%2017.8699%2031.922%2017.9024%2031.7697%2017.9654C31.6174%2018.0285%2031.479%2018.121%2031.3625%2018.2375L30.375%2019.2375L29.3875%2018.2375C29.2709%2018.121%2029.1326%2018.0285%2028.9803%2017.9654C28.828%2017.9024%2028.6648%2017.8699%2028.5%2017.8699C28.1671%2017.8699%2027.8479%2018.0021%2027.6125%2018.2375C27.4959%2018.354%2027.4035%2018.4924%2027.3404%2018.6447C27.2773%2018.797%2027.2449%2018.9602%2027.2449%2019.125C27.2449%2019.4579%2027.3771%2019.7771%2027.6125%2020.0125L28.6125%2021L27.6125%2021.9875C27.4953%2022.1037%2027.4023%2022.242%2027.3389%2022.3943C27.2754%2022.5466%2027.2427%2022.71%2027.2427%2022.875C27.2427%2023.04%2027.2754%2023.2034%2027.3389%2023.3557C27.4023%2023.508%2027.4953%2023.6463%2027.6125%2023.7625C27.7287%2023.8797%2027.867%2023.9727%2028.0193%2024.0361C28.1716%2024.0996%2028.335%2024.1323%2028.5%2024.1323C28.665%2024.1323%2028.8284%2024.0996%2028.9807%2024.0361C29.133%2023.9727%2029.2713%2023.8797%2029.3875%2023.7625L30.375%2022.7625L31.3625%2023.7625C31.4787%2023.8797%2031.6169%2023.9727%2031.7693%2024.0361C31.9216%2024.0996%2032.085%2024.1323%2032.25%2024.1323C32.415%2024.1323%2032.5784%2024.0996%2032.7307%2024.0361C32.883%2023.9727%2033.0213%2023.8797%2033.1375%2023.7625C33.2547%2023.6463%2033.3476%2023.508%2033.4111%2023.3557C33.4746%2023.2034%2033.5072%2023.04%2033.5072%2022.875C33.5072%2022.71%2033.4746%2022.5466%2033.4111%2022.3943C33.3476%2022.242%2033.2547%2022.1037%2033.1375%2021.9875L32.1375%2021Z'%20fill='rgb(214,48,49)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",vt=A({__name:"OMember",setup(D){const f=p(!1),r=p(!1),h=H(),{t:s}=N(),u=X("insertMemberRef"),M=X("insertUserRef"),y=p(!1),d=p(!1),b=()=>{y.value=!0,Q(()=>{var l;(l=u.value)==null||l.open()})},R=()=>{d.value=!0,Q(()=>{var l;(l=M.value)==null||l.open()})},E=()=>{g()},V=()=>{g()},C=p(),O=async l=>{var I;const[z,$]=await Ie({user_id:l,org_id:(I=h.info)==null?void 0:I.organization_id});!z&&($==null?void 0:$.status)===0&&g()},w=p(),k=[{label:s("org.admin"),value:"ORG_ADMIN"},{label:s("org.member"),value:"ORG_MEMBER"}],m=l=>{const z=Le[l.value].color;return L("div",{class:"px-1 rounded-full border text-xs inline-block w-[80px] inline-flex items-center justify-center",style:{color:z,borderColor:z}},l.label)},n=(l,z)=>{w.value={userId:l,value:z}},a=l=>{w.value={...w.value,value:l}},i=async()=>{var $,I,S;const[l,z]=await De({org_id:($=h.info)==null?void 0:$.organization_id,user_id:(I=w.value)==null?void 0:I.userId,org_role:(S=w.value)==null?void 0:S.value});!l&&(z==null?void 0:z.status)===0&&(w.value={userId:void 0,value:void 0},g())},c=[{title:"ID",key:"user_id",width:"20%"},{title:s("org.omtab.name"),key:"user_name",width:"25%"},{title:s("org.omtab.role"),key:"org_role",width:"30%",render(l){var z;return((z=w.value)==null?void 0:z.userId)===l.user_id?L("div",{class:"flex items-center gap-2"},[L(J,{options:k,renderLabel:m,defaultValue:w.value.value,onUpdateValue:a,style:{width:"200px"}}),L(P,{size:"small",onClick:()=>w.value={userId:void 0,value:void 0}},{default:()=>"x"}),L(P,{size:"small",onClick:i},{icon:()=>L(tt)})]):L(fe,{role:l.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:s("org.omtab.options"),key:"options",width:"25%",render(l){return L("div",{class:"flex items-center gap-2"},[L("img",{src:ft,class:"w-[30px] cursor-pointer",onClick:()=>n(l.user_id,l.org_role)}),L(ce,{onPositiveClick:()=>O(l.user_id)},{default:()=>s("groupDetail.parameterManager.removeConfirm"),trigger:()=>L("img",{src:gt,class:"w-[30px] cursor-pointer"})})])}}],g=async()=>{var I;if(f.value)return;f.value=!0;const l=(I=h.info)==null?void 0:I.organization_id;if(!l){f.value=!1;return}const[z,$]=await ae({organization_id:l});f.value=!1,!z&&($==null?void 0:$.status)===0&&(C.value=$.data)};return oe(()=>{var l;return(l=h.info)==null?void 0:l.organization_id},l=>{l&&g()}),q(()=>{const l=ge();l!=null&&l.is_sys_admin&&(r.value=!0),g()}),(l,z)=>{const $=K,I=ne;return U(),B("div",null,[t($,null,{default:o(()=>[t(e(P),{type:"primary",onClick:b},{icon:o(()=>[t(e(de))]),default:o(()=>[x(" "+_(e(s)("org.omtab.insertMember")),1)]),_:1}),e(r)?(U(),G(e(P),{key:0,type:"primary",onClick:R},{icon:o(()=>[t(e(de))]),default:o(()=>[x(" "+_(e(s)("org.omtab.insertUser")),1)]),_:1})):j("",!0)]),_:1}),e(y)?(U(),G(ut,{key:0,ref_key:"insertMemberRef",ref:u,type:"insert",onSuccess:E},null,512)):j("",!0),e(d)?(U(),G(pt,{key:1,ref_key:"insertUserRef",ref:M,type:"insert",onSuccess:V},null,512)):j("",!0),t(I,{lading:e(f),class:"mt-5",columns:c,data:e(C)},null,8,["lading","data"])])}}}),ht={class:"flex items-center my-4"},bt={class:"flex items-center gap-2 mr-4"},wt=A({__name:"AuthByMember",setup(D){const f=se(),{t:r}=N(),h=H(),s=p(!1),u=p(),M=k=>{u.value=k},y=async(k,m)=>{var i;if(s.value)return;s.value=!0;const[n,a]=await be({org_id:(i=h.info)==null?void 0:i.organization_id,user_id:u.value,device_group_id:m,permission:k?"EDIT":"READ"});!n&&(a==null?void 0:a.status)===0?V():s.value=!1},d=[{title:r("org.oatab.device"),key:"device",render(k){return L("div",{class:""},[L("div",{class:"text-lg"},k.device_group_name),L("div",{class:""},`${r("org.deviceGroup")}: ${k.device_group_id}`)])}},{title:r("org.oatab.auth"),key:"auth",render(k){return L(ve,{railStyle:({checked:m})=>{const n={};return m?n.background="#638EE2":n.background="#7964E3",n},value:k.permission==="EDIT",onUpdateValue:m=>y(m,k.device_group_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],b=p(),R=async()=>{var n;const[k,m]=await ae({organization_id:(n=h.info)==null?void 0:n.organization_id});!k&&(m==null?void 0:m.status)===0&&m.data&&(b.value=m.data.map(a=>({...a,label:a.user_name,value:a.user_id})))},E=p(),V=async()=>{var n;s.value=!0;const[k,m]=await Se({organization_id:(n=h.info)==null?void 0:n.organization_id,user_id:u.value});s.value=!1,!k&&m&&m.status===0&&(E.value=m.data.device_group_list)},C=async()=>{var n;if(s.value)return;s.value=!0;const[k,m]=await ue({org_id:(n=h.info)==null?void 0:n.organization_id,user_id:u.value,permission:"EDIT"});!k&&(m==null?void 0:m.status)===0?V():s.value=!1},O=async()=>{var n;if(s.value)return;s.value=!0;const[k,m]=await ue({org_id:(n=h.info)==null?void 0:n.organization_id,user_id:u.value,permission:"READ"});!k&&(m==null?void 0:m.status)===0?V():s.value=!1},w=()=>{};return q(()=>{R()}),oe(u,k=>{k&&V()}),(k,m)=>{const n=re,a=J,i=P,c=ce,g=K,l=ne;return U(),B("div",null,[t(n,{type:"info",class:"my-4"},{default:o(()=>[x(_(e(r)("org.oatab.tips")),1)]),_:1}),v("div",ht,[v("div",bt,[v("div",{style:he({color:e(f).primaryColor})},_(e(r)("org.oatab.selectUser"))+": ",5),t(a,{style:{width:"200px"},onUpdateValue:M,options:e(b)},null,8,["options"])]),t(g,null,{default:o(()=>[t(c,{onPositiveClick:C,onNegativeClick:w,disabled:!e(u)},{trigger:o(()=>[t(i,{class:"!bg-[#638EE2] text-white",disabled:!e(u)},{default:o(()=>[x(_(e(r)("org.oatab.allDeviceEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[x(" "+_(e(r)("org.oatab.confirmDeviceEdit")),1)]),_:1},8,["disabled"]),t(c,{onPositiveClick:O,onNegativeClick:w,disabled:!e(u)},{trigger:o(()=>[t(i,{class:"!bg-[#7964E3] text-white",disabled:!e(u)},{default:o(()=>[x(_(e(r)("org.oatab.allDeviceRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[x(" "+_(e(r)("org.oatab.confirmDeviceRead")),1)]),_:1},8,["disabled"])]),_:1})]),t(l,{loading:e(s),columns:d,data:e(E)},null,8,["loading","data"])])}}}),xt={class:"flex items-center my-2"},yt={class:"flex items-center gap-2 mr-4"},Ct=A({__name:"AuthByDevice",setup(D){const f=se(),{t:r}=N(),h=H(),s=p(!1),u=p(),M=n=>{u.value=n},y=p(),d=async(n,a)=>{var g;if(s.value)return;s.value=!0;const[i,c]=await be({org_id:(g=h.info)==null?void 0:g.organization_id,user_id:a,device_group_id:u.value,permission:n?"EDIT":"READ"});!i&&(c==null?void 0:c.status)===0?C():s.value=!1},b=[{title:r("org.oatab.member"),key:"user_name"},{title:r("org.oatab.role"),key:"role",render(n){return L(fe,{role:n.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:r("org.oatab.auth"),key:"auth",render(n){return L(ve,{railStyle:({checked:a})=>{const i={};return a?i.background="#638EE2":i.background="#7964E3",i},value:n.permission==="EDIT",onUpdateValue:a=>d(a,n.user_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],R=p(),E=async()=>{var i;const[n,a]=await Ae({organization_id:(i=h.info)==null?void 0:i.organization_id});!n&&(a==null?void 0:a.status)===0&&a.data&&(R.value=a.data.map(c=>({...c,label:c.device_group_name,value:c.device_group_id})))},V=p(),C=async()=>{var i;s.value=!0;const[n,a]=await Be({organization_id:(i=h.info)==null?void 0:i.organization_id,device_group_id:u.value});s.value=!1,!n&&a&&a.status===0&&(V.value=a.data.user_list.map(c=>{var g,l;return{...c,org_role:(l=(g=y.value)==null?void 0:g.find(z=>z.user_id===c.user_id))==null?void 0:l.org_role}}))},O=async()=>{var i;if(s.value)return;s.value=!0;const[n,a]=await _e({org_id:(i=h.info)==null?void 0:i.organization_id,device_group_id:u.value,permission:"EDIT"});!n&&(a==null?void 0:a.status)===0?C():s.value=!1},w=async()=>{var i;if(s.value)return;s.value=!0;const[n,a]=await _e({org_id:(i=h.info)==null?void 0:i.organization_id,device_group_id:u.value,permission:"READ"});!n&&(a==null?void 0:a.status)===0?C():s.value=!1},k=()=>{},m=async()=>{var i;const[n,a]=await ae({organization_id:(i=h.info)==null?void 0:i.organization_id});!n&&(a==null?void 0:a.status)===0&&(y.value=a.data)};return q(()=>{E(),m()}),oe(u,n=>{n&&C()}),(n,a)=>{const i=J,c=P,g=ce,l=K,z=ne;return U(),B("div",null,[v("div",xt,[v("div",yt,[v("div",{style:he({color:e(f).primaryColor})},_(e(r)("org.oatab.selectDevice"))+": ",5),t(i,{style:{width:"200px"},onUpdateValue:M,options:e(R)},null,8,["options"])]),t(l,null,{default:o(()=>[t(g,{onPositiveClick:O,onNegativeClick:k,disabled:!e(u)},{trigger:o(()=>[t(c,{class:"!bg-[#638EE2] text-white",disabled:!e(u)},{default:o(()=>[x(_(e(r)("org.oatab.allUserEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[x(" "+_(e(r)("org.oatab.confirmMemberRead")),1)]),_:1},8,["disabled"]),t(g,{onPositiveClick:w,onNegativeClick:k,disabled:!e(u)},{trigger:o(()=>[t(c,{class:"!bg-[#7964E3] text-white",disabled:!e(u)},{default:o(()=>[x(_(e(r)("org.oatab.allUserRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[x(" "+_(e(r)("org.oatab.confirmMemberEdit")),1)]),_:1},8,["disabled"])]),_:1})]),t(z,{loading:e(s),columns:b,data:e(V)},null,8,["loading","data"])])}}}),kt={class:"flex items-center gap-1"},zt={class:"flex items-center gap-1"},Mt=A({__name:"OAuth",setup(D){const{t:f}=N();return(r,h)=>{const s=Y,u=ye,M=xe;return U(),B("div",null,[t(M,{type:"card","pane-class":"!pl-0"},{default:o(()=>[t(u,{name:"byuser"},{tab:o(()=>[v("div",kt,[t(s,{component:e(Ye)},null,8,["component"]),x(" "+_(e(f)("org.oatab.tab1")),1)])]),default:o(()=>[t(wt)]),_:1}),t(u,{name:"bydevice"},{tab:o(()=>[v("div",zt,[t(s,{component:e(Ze)},null,8,["component"]),x(" "+_(e(f)("org.oatab.tab2")),1)])]),default:o(()=>[t(Ct)]),_:1})]),_:1})])}}}),Rt={class:"w-full"},Ut={class:"flex justify-end"},Ot=A({__name:"OSSModal",props:{isGlobal:{type:Boolean}},emits:["close"],setup(D,{expose:f,emit:r}){const h=D,s=r,u=se(),M=Pe(),y=H(),{t:d}=N(),b=p(!1),R=p(!1),E=()=>{R.value=!1,Q(()=>{setTimeout(()=>{w.value={if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}},200)}),s("close")},V=()=>{R.value=!0},C=p({user_id:{required:!0,message:d("common.required")},org_role:{required:!0,message:d("common.required")}}),O=p(null),w=p({if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}),k=()=>{var i;(i=O.value)==null||i.validate(async c=>{var z;if(c)return;const[g,l]=await Ne({...w.value,if_global:h.isGlobal,organization_id:(z=y.info)==null?void 0:z.organization_id});!g&&(l==null?void 0:l.status)===0&&(M.success(d("org.ootab.successfully")),E())})},m=i=>{i||E()},n=async()=>{var g;const[i,c]=await Ge({organization_id:(g=y.info)==null?void 0:g.organization_id});if(!i&&(c==null?void 0:c.status)===0){const l=c.data.auth_text;w.value={...w.value,auth_text:l}}},a=async()=>{const[i,c]=await je();if(!i&&(c==null?void 0:c.status)===0){const g=c.data.auth_text;w.value={...w.value,if_global:!0,auth_text:g}}};return q(()=>{h.isGlobal?a():n()}),f({open:V,close:E}),(i,c)=>{const g=ie,l=re,z=le,$=P,I=K,S=te,T=ee;return U(),G(T,{show:e(R),"onUpdate:show":c[1]||(c[1]=F=>Z(R)?R.value=F:null),"close-on-esc":!1,onUpdateShow:m},{default:o(()=>[t(S,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(z,{ref_key:"formRef",ref:O,model:e(w),rules:e(C),size:"small"},{default:o(()=>[e(w).if_global?j("",!0):(U(),G(g,{key:0,label:e(d)("org.orgName"),path:"name"},{default:o(()=>{var F;return[x(_((F=e(y).info)==null?void 0:F.organization_name),1)]}),_:1},8,["label"])),t(g,{label:e(d)(`org.ootab.${i.isGlobal?"globalCfg":"orgCfg"}`),path:"auth_text"},{default:o(()=>[v("div",Rt,[t(l,{type:"info",title:e(d)("org.ootab.osstips"),class:"whitespace-pre-line w-full"},{default:o(()=>c[2]||(c[2]=[x(_(`{
                    host: 'oss.example.com',
                    bucket: 'minjiang',
                    access_key: 'AK',
                    secret_key: 'SK',
                    secure: true,
                    region: 'cn-shanghai',
                }`))])),_:1},8,["title"]),t(e(He),{class:Te(["!w-full mt-5",[e(u).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"300px"},modelValue:e(w).auth_text,"onUpdate:modelValue":c[0]||(c[0]=F=>e(w).auth_text=F),mode:"text"},null,8,["class","modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules"]),v("div",Ut,[t(I,null,{default:o(()=>[t($,{type:"primary",onClick:k,loading:e(b)},{default:o(()=>[x(_(e(d)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),$t=A({__name:"OOrg",setup(D){const f=X("ossRef"),r=p(!1),{t:h}=N(),s=p(!1),u=p(!1),M=(y=!1)=>{s.value=!0,u.value=y,Q(()=>{setTimeout(()=>{var d;(d=f.value)==null||d.open()},100)})};return q(()=>{const y=ge();y!=null&&y.is_sys_admin&&(r.value=!0)}),(y,d)=>{const b=P,R=K;return U(),B("div",null,[t(R,null,{default:o(()=>[t(b,{type:"primary",onClick:d[0]||(d[0]=()=>M())},{icon:o(()=>[t(e(me))]),default:o(()=>[x(" "+_(e(h)("org.ootab.setOss")),1)]),_:1}),e(r)?(U(),G(b,{key:0,type:"primary",onClick:d[1]||(d[1]=()=>M(!0))},{icon:o(()=>[t(e(me))]),default:o(()=>[x(" "+_(e(h)("org.ootab.setGlobalOss")),1)]),_:1})):j("",!0)]),_:1}),e(s)?(U(),G(Ot,{key:0,ref_key:"ossRef",ref:f,"is-global":e(u),onClose:d[2]||(d[2]=E=>s.value=!1)},null,8,["is-global"])):j("",!0)])}}}),Et={class:"flex items-center gap-1"},Vt={class:"flex items-center gap-1"},It={class:"flex items-center gap-1"},Ht=A({__name:"OrgView",setup(D){const{t:f}=N(),r=p("member");return(h,s)=>{const u=qe,M=Y,y=ye,d=xe;return U(),B("div",null,[t(rt),t(u),t(d,{type:"line",value:e(r),"onUpdate:value":s[0]||(s[0]=b=>Z(r)?r.value=b:null),placement:"left","pane-class":"!pl-5"},{default:o(()=>[t(y,{name:"member"},{tab:o(()=>[v("div",Et,[t(M,{component:e(we)},null,8,["component"]),x(" "+_(e(f)("org.omember")),1)])]),default:o(()=>[t(vt)]),_:1}),t(y,{name:"auth"},{tab:o(()=>[v("div",Vt,[t(M,{component:e(We)},null,8,["component"]),x(" "+_(e(f)("org.oauth")),1)])]),default:o(()=>[t(Mt)]),_:1}),t(y,{name:"organization"},{tab:o(()=>[v("div",It,[t(M,{component:e(W)},null,8,["component"]),x(" "+_(e(f)("org.oorganization")),1)])]),default:o(()=>[t($t)]),_:1})]),_:1},8,["value"])])}}});export{Ht as default};
