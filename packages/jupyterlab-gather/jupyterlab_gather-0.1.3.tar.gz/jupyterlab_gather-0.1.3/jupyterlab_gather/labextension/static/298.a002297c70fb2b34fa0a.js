"use strict";(self.webpackChunkjupyterlab_gather=self.webpackChunkjupyterlab_gather||[]).push([[298],{298:(e,t,i)=>{i.r(t),i.d(t,{ConnectivityState:()=>l.jc,DeviceType:()=>l.bq,Diagnostics:()=>l.rE,DomainCategory:()=>l.TN,EventBus:()=>l.l7,HLSPlaylistType:()=>l.ae,HLSStreamType:()=>l.yN,HMSAudioDeviceCategory:()=>l.T7,HMSAudioMode:()=>l.ui,HMSAudioPluginType:()=>l.QX,HMSLogLevel:()=>l.JZ,HMSMessageType:()=>l.WZ,HMSNotificationSeverity:()=>l.t$,HMSNotificationTypes:()=>l.fP,HMSPeerType:()=>l.Rl,HMSPlaylistType:()=>l.hw,HMSPluginUnsupportedTypes:()=>l.sn,HMSReactiveStore:()=>l.JC,HMSRecordingState:()=>l.Jl,HMSRoomProvider:()=>p,HMSRoomState:()=>l.zb,HMSStats:()=>l.W9,HMSTrackExceptionTrackType:()=>l.OR,HMSTranscriptionMode:()=>l.Gp,HMSTranscriptionState:()=>l.gG,HMSVideoPluginCanvasContextType:()=>l.iu,HMSVideoPluginType:()=>l.Nq,createDefaultStatsStore:()=>l.km,createDefaultStoreState:()=>l.qK,getAudioDeviceCategory:()=>l.p,getPeersWithTiles:()=>Ee,parsedUserAgent:()=>l.IP,selectAppData:()=>l.oz,selectAppDataByPath:()=>l.qr,selectAudioPlaylist:()=>l.BR,selectAudioPlaylistTrackByPeerID:()=>l.a9,selectAudioTrackByID:()=>l.g$,selectAudioTrackByPeerID:()=>l.uW,selectAudioTrackVolume:()=>l._x,selectAudioVolumeByPeerID:()=>l.To,selectAuxiliaryAudioByPeerID:()=>l.lF,selectAuxiliaryTracksByPeerID:()=>l.dX,selectAvailableRoleNames:()=>l.yu,selectBroadcastMessages:()=>l.mI,selectBroadcastMessagesUnreadCount:()=>l.aB,selectCameraStreamByPeerID:()=>l.Kd,selectConnectionQualities:()=>l.cE,selectConnectionQualityByPeerID:()=>l.iV,selectDegradedTracks:()=>l.P8,selectDevices:()=>l.ox,selectDidIJoinWithin:()=>l.n4,selectDominantSpeaker:()=>l._j,selectEffectsKey:()=>l.M5,selectErrors:()=>l.Ot,selectFullAppData:()=>l.RB,selectHLSState:()=>l.TI,selectHMSBroadcastMessages:()=>l.UG,selectHMSMessages:()=>l.NT,selectHMSMessagesCount:()=>l.wM,selectHMSStats:()=>l.Z5,selectHandRaisedPeers:()=>l.DX,selectHasPeerHandRaised:()=>l.Qe,selectIsAllowedToPreviewMedia:()=>l.s6,selectIsAllowedToPublish:()=>l.VO,selectIsAllowedToSubscribe:()=>l.EW,selectIsAudioLocallyMuted:()=>l.Ic,selectIsConnectedToRoom:()=>l.a3,selectIsEffectsEnabled:()=>l.yF,selectIsInPreview:()=>l.Ob,selectIsLargeRoom:()=>l.nm,selectIsLocalAudioEnabled:()=>l.VP,selectIsLocalAudioPluginPresent:()=>l.Qx,selectIsLocalScreenShared:()=>l.L1,selectIsLocalVideoDisplayEnabled:()=>l.yG,selectIsLocalVideoEnabled:()=>l.wB,selectIsLocalVideoPluginPresent:()=>l.JP,selectIsLocallyMutedByPeerID:()=>l.WD,selectIsPeerAudioEnabled:()=>l.Kr,selectIsPeerVideoEnabled:()=>l.Ns,selectIsRoleAllowedToPublish:()=>l.ly,selectIsScreenShareLocallyMutedByPeerID:()=>l.X_,selectIsSomeoneScreenSharing:()=>l.rZ,selectIsTranscriptionAllowedByMode:()=>l.H0,selectIsTranscriptionEnabled:()=>l.GM,selectIsVBEnabled:()=>l.cg,selectLocalAudioTrackID:()=>l.bX,selectLocalMediaSettings:()=>l.pA,selectLocalPeer:()=>l.s3,selectLocalPeerID:()=>l.Ze,selectLocalPeerName:()=>l.Di,selectLocalPeerRole:()=>l.Yl,selectLocalPeerRoleName:()=>l.ow,selectLocalTrackIDs:()=>l.Pe,selectLocalVideoTrackID:()=>l.R7,selectMessageByMessageID:()=>l.DN,selectMessageIDsInOrder:()=>l.VR,selectMessagesByPeerID:()=>l.do,selectMessagesByRole:()=>l.CO,selectMessagesMap:()=>l.nT,selectMessagesUnreadCountByPeerID:()=>l.BO,selectMessagesUnreadCountByRole:()=>l.i8,selectPeerAudioByID:()=>l.j7,selectPeerByCondition:()=>l.nZ,selectPeerByID:()=>l.BI,selectPeerCount:()=>l.de,selectPeerMetadata:()=>l.SO,selectPeerName:()=>l.cY,selectPeerNameByID:()=>l.a$,selectPeerScreenSharing:()=>l.dr,selectPeerSharingAudio:()=>l.p$,selectPeerSharingAudioPlaylist:()=>l.$p,selectPeerSharingVideoPlaylist:()=>l.ao,selectPeerTypeByID:()=>l.PH,selectPeers:()=>l.ws,selectPeersByCondition:()=>l.cb,selectPeersByRole:()=>l.Tw,selectPeersByRoles:()=>l.yW,selectPeersMap:()=>l._Q,selectPeersScreenSharing:()=>l.k6,selectPeersWithAudioStatus:()=>l.QS,selectPermissions:()=>l.b,selectPollByID:()=>l.am,selectPolls:()=>l.B4,selectPollsMap:()=>l.JQ,selectPreviewRole:()=>l.X4,selectPreviewRoleName:()=>l.cT,selectRTMPState:()=>l.zS,selectRecentError:()=>l.EB,selectRecordingState:()=>l.vz,selectRemotePeers:()=>l.Oq,selectRoleByRoleName:()=>l.wi,selectRoleChangeRequest:()=>l.cO,selectRolesMap:()=>l.ym,selectRoom:()=>l.Gz,selectRoomID:()=>l.vm,selectRoomStartTime:()=>l.bW,selectRoomStarted:()=>l.PS,selectRoomState:()=>l.VH,selectScreenAudioTrackByID:()=>l.UT,selectScreenShareAudioByPeerID:()=>l.mx,selectScreenShareByPeerID:()=>l.sj,selectScreenSharesByPeerId:()=>l.Fu,selectScreenVideoTrackByID:()=>l.j6,selectScreenshareAudioVolumeByPeerID:()=>l.Qp,selectSessionId:()=>l.eJ,selectSessionMetadata:()=>l.My,selectSessionStore:()=>l.q8,selectSimulcastLayerByTrack:()=>l.Xj,selectSpeakers:()=>l.ZD,selectTemplateAppData:()=>l.mX,selectTrackAudioByID:()=>l.yz,selectTrackByID:()=>l._8,selectTracksMap:()=>l.FM,selectTranscriptionsState:()=>l.v1,selectUnreadHMSBroadcastMessagesCount:()=>l.K6,selectUnreadHMSMessagesCount:()=>l.vX,selectVideoPlaylist:()=>l.Gn,selectVideoPlaylistAudioTrackByPeerID:()=>l.DU,selectVideoPlaylistVideoTrackByPeerID:()=>l.Ki,selectVideoTrackByID:()=>l.kU,selectVideoTrackByPeerID:()=>l.Xi,selectWhiteboard:()=>l.wQ,selectWhiteboards:()=>l.pv,simulcastMapping:()=>l.yi,throwErrorHandler:()=>R,useAVToggle:()=>T,useAudioLevelStyles:()=>Ie,useAudioMode:()=>je,useAutoplayError:()=>Ce,useAwayNotifications:()=>Fe,useCustomEvent:()=>He,useDevices:()=>ke,useEmbedShare:()=>Ae,useHMSActions:()=>w,useHMSNotifications:()=>P,useHMSStatsStore:()=>m,useHMSStore:()=>y,useHMSVanillaNotifications:()=>S,useHMSVanillaStore:()=>b,usePDFShare:()=>Ne,usePaginatedParticipants:()=>Le,useParticipantList:()=>Oe,useParticipants:()=>De,usePreviewJoin:()=>O,useRecordingStreaming:()=>Te,useRemoteAVToggle:()=>A,useScreenShare:()=>H,useTranscript:()=>Ve,useVideo:()=>C,useVideoList:()=>Re,useWhiteboard:()=>We});var r,n,o=i(3345),s=i.n(o),a=i(7460),c=i.n(a),l=i(8006);function u(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(let r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(t,i[r])||!Object.is(e[i[r]],t[i[r]]))return!1;return!0}(n=r||(r={}))[n.VERBOSE=0]="VERBOSE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.NONE=5]="NONE";class d{static v(e,...t){this.log(r.VERBOSE,e,...t)}static d(e,...t){this.log(r.DEBUG,e,...t)}static i(e,...t){this.log(r.INFO,e,...t)}static w(e,...t){this.log(r.WARN,e,...t)}static e(e,...t){this.log(r.ERROR,e,...t)}static log(e,t,...i){if(!(this.level.valueOf()>e.valueOf()))switch(e){case r.VERBOSE:console.log("HMSui-components: ",t,...i);break;case r.DEBUG:console.debug("HMSui-components: ",t,...i);break;case r.INFO:console.info("HMSui-components: ",t,...i);break;case r.WARN:console.warn("HMSui-components: ",t,...i);break;case r.ERROR:console.error("HMSui-components: ",t,...i)}}}d.level=r.VERBOSE;var f=d;const h="It seems like you forgot to add your component within a top level HMSRoomProvider, please refer to 100ms react docs(https://www.100ms.live/docs/javascript/v2/how-to-guides/install-the-sdk/integration#react-hooks) to check on the required steps for using this hook. If the provider is present\n  at the top level, check the yarn.lock/package-lock.json, if there are multiple versions of @100mslive/react-sdk. Please ensure the versions of @100mslive/react-sdk and @100mslive/roomkit-react are the same versions from the release notes(https://www.100ms.live/docs/javascript/v2/changelog/release-notes) that you are trying to update to.",v="undefined"!=typeof window,g=(0,o.createContext)(null),p=({children:e,actions:t,store:i,notifications:r,stats:n,isHMSStatsOn:a=!1,leaveOnUnload:u=!0})=>{const d=(0,o.useMemo)(()=>{let e;const o=()=>{throw new Error("modifying store is not allowed")};if(t&&i)e={actions:t,store:c()(Object.assign(Object.assign({},i),{setState:o,destroy:o}))},r&&(e.notifications=r),n&&(e.statsStore=c()({getState:n.getState,subscribe:n.subscribe,setState:o,destroy:o}));else{const t=new l.JC;if(e={actions:t.getActions(),store:c()(Object.assign(Object.assign({},t.getStore()),{setState:o,destroy:o})),notifications:t.getNotifications()},a){const i=t.getStats();e.statsStore=c()({getState:i.getState,subscribe:i.subscribe,setState:o,destroy:o})}}return e.actions.setFrameworkInfo({type:"react-web",version:s().version,sdkVersion:"0.10.35"}),e},[t,i,r,n,a]);return(0,o.useEffect)(()=>{if(v&&u){const e=()=>d.actions.leave();return window.addEventListener("unload",e),()=>{window.removeEventListener("unload",e)}}return()=>{}},[u,d]),s().createElement(g.Provider,{value:d},e)},y=function(e){return(t,i=u)=>{t||f.w("fetching full store without passing any selector may have a heavy performance impact on your website.");const r=(0,o.useContext)(e);if(!r)throw new Error(h);return(0,r.store)(t,i)}}(g),m=function(e){return(t,i=u)=>{t||f.w("fetching full store without passing any selector may have a heavy performance impact on your website.");const r=(0,o.useContext)(e);if(!r)throw new Error(h);const n=r.statsStore;return null==n?void 0:n(t,i)}}(g),b=()=>{const e=(0,o.useContext)(g);if(!e)throw new Error(h);return e.store},S=()=>{const e=(0,o.useContext)(g);if(!e)throw new Error(h);return e.notifications},w=()=>{const e=(0,o.useContext)(g);if(!e)throw new Error(h);return e.actions},P=e=>{const t=(0,o.useContext)(g),[i,r]=(0,o.useState)(null);if(!t)throw new Error(h);return(0,o.useEffect)(()=>{if(t.notifications)return t.notifications.onNotification(e=>{r(e)},e)},[t.notifications,e]),i};function E(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const M=(e,t)=>f.e("react-sdk",t,e),R=e=>{throw e};function I(e){const t=(0,o.useRef)();return(0,o.useEffect)(()=>{t.current=e}),t.current}const k=["blink"].some(e=>{var t,i;return(null===(i=null===(t=l.IP.getEngine())||void 0===t?void 0:t.name)||void 0===i?void 0:i.toLowerCase())===e}),O=({name:e="",token:t,metadata:i,handleError:r=M,initEndpoint:n,initialSettings:s,captureNetworkQualityInPreview:a,asRole:c,autoManageVideo:u,autoManageWakeLock:d,iceServers:f})=>{const h=w(),v=y(l.VH),g=y(l.a3)||!1,p=v===l.zb.Preview,m=(0,o.useMemo)(()=>({userName:e,authToken:t,metaData:i,rememberDeviceSelection:!0,settings:s,initEndpoint:n,asRole:c,captureNetworkQualityInPreview:a,autoManageVideo:u,autoManageWakeLock:d,iceServers:f}),[e,t,i,n,s,a,c,u,d,f]),b=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){if(t)try{(g||v!==l.zb.Disconnected)&&(yield h.leave().catch(()=>{})),yield h.preview(m)}catch(e){r(e,"preview")}}),[t,g,v,h,m,r]);return{enableJoin:p,join:(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){if(t)try{yield h.join(m)}catch(e){r(e,"join")}}),[h,m,r,t]),isConnected:g,preview:b}},T=(e=M)=>{const t=y(l.VP),i=y(l.wB),r=y(l.Ob),n=y(r?l.s6:l.VO),s=w(),a=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){try{yield s.setLocalAudioEnabled(!t)}catch(t){e(t,"toggleAudio")}}),[s,t,e]),c=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){try{yield s.setLocalVideoEnabled(!i)}catch(t){e(t,"toggleVideo")}}),[s,i,e]);return{isLocalAudioEnabled:t,isLocalVideoEnabled:i,toggleAudio:(null==n?void 0:n.audio)?a:void 0,toggleVideo:(null==n?void 0:n.video)?c:void 0}},C=({trackId:e,attach:t})=>{const i=w(),r=(0,o.useRef)(null),n=y((0,l.kU)(e)),s=(0,o.useRef)(),a=(0,o.useCallback)(e=>{e&&(r.current=e)},[]);return(0,o.useEffect)(()=>{s.current?(null==n?void 0:n.id)&&s.current!==(null==n?void 0:n.id)&&E(void 0,void 0,void 0,function*(){if(r.current)try{f.d("detaching because different track is passed"),yield i.detachVideo(s.current,r.current)}catch(e){f.w("detach video error for track",s.current,e)}s.current=null==n?void 0:n.id}):s.current=null==n?void 0:n.id},[null==n?void 0:n.id,i]),(0,o.useEffect)(()=>{E(void 0,void 0,void 0,function*(){(null==n?void 0:n.id)&&r.current&&(!1!==t?yield i.attachVideo(n.id,r.current):yield i.detachVideo(n.id,r.current))})},[n,t,i]),(0,o.useEffect)(()=>()=>{E(void 0,void 0,void 0,function*(){if(r.current&&n)try{yield i.detachVideo(n.id,r.current)}catch(e){f.w("detach video error for track",n.id,e)}})},[]),{videoRef:a}},H=(e=M)=>{var t,i;const r=w(),n=y(l.L1),s=y(l.dr),a=y((0,l.Fu)(null==s?void 0:s.id)),c=(0,o.useCallback)(t=>E(void 0,void 0,void 0,function*(){try{yield r.setScreenShareEnabled(!n,t)}catch(t){e(t,"toggleScreenShare")}}),[r,n,e]);return{amIScreenSharing:n,screenSharingPeerId:null==s?void 0:s.id,screenSharingPeerName:null==s?void 0:s.name,screenShareVideoTrackId:null===(t=null==a?void 0:a.video)||void 0===t?void 0:t.id,screenShareAudioTrackId:null===(i=null==a?void 0:a.audio)||void 0===i?void 0:i.id,toggleScreenShare:c}},D=(e,t,i)=>E(void 0,void 0,void 0,function*(){if(t)try{yield e.setRemoteTrackEnabled(t.id,!t.enabled)}catch(e){i(e,"remoteToggle")}}),A=(e,t,i=M)=>{const r=w(),n=y((0,l.g$)(e)),s=y((0,l.kU)(t)),a=y((0,l._x)(null==n?void 0:n.id)),c=y(l.b),u=(null==s?void 0:s.enabled)?null==c?void 0:c.mute:null==c?void 0:c.unmute,d=(null==n?void 0:n.enabled)?null==c?void 0:c.mute:null==c?void 0:c.unmute,f=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){yield D(r,n,i)}),[r,n,i]),h=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){yield D(r,s,i)}),[r,i,s]),v=(0,o.useCallback)(e=>{n&&r.setVolume(e,n.id)},[r,n]);return{isAudioEnabled:!!(null==n?void 0:n.enabled),isVideoEnabled:!!(null==s?void 0:s.enabled),volume:a,toggleAudio:n&&d?f:void 0,toggleVideo:"regular"===(null==s?void 0:s.source)&&u?h:void 0,setVolume:n?v:void 0}};var N=i(7628),B=function(e,t){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},B(e,t)};var L=function(){return L=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},L.apply(this,arguments)};var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},F=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},V="object"==typeof W&&W&&W.Object===Object&&W,j="object"==typeof self&&self&&self.Object===Object&&self,x=V||j||Function("return this")(),q=x,z=/\s/,U=/^\s+/,_=x.Symbol,G=_,J=Object.prototype,Q=J.hasOwnProperty,X=J.toString,$=G?G.toStringTag:void 0,Z=Object.prototype.toString,K=function(e){var t=Q.call(e,$),i=e[$];try{e[$]=void 0;var r=!0}catch(e){}var n=X.call(e);return r&&(t?e[$]=i:delete e[$]),n},Y=_?_.toStringTag:void 0,ee=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Y&&Y in Object(e)?K(e):function(e){return Z.call(e)}(e)},te=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&z.test(e.charAt(t)););return t}(e)+1).replace(U,""):e},ie=F,re=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,oe=/^0o[0-7]+$/i,se=parseInt,ae=F,ce=function(){return q.Date.now()},le=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==ee(e)}(e))return NaN;if(ie(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ie(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=te(e);var i=ne.test(e);return i||oe.test(e)?se(e.slice(2),i?2:8):re.test(e)?NaN:+e},ue=Math.max,de=Math.min,fe=function(e,t,i){var r,n,o,s,a,c,l=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var i=r,o=n;return r=n=void 0,l=t,s=e.apply(o,i)}function v(e){var i=e-c;return void 0===c||i>=t||i<0||d&&e-l>=o}function g(){var e=ce();if(v(e))return p(e);a=setTimeout(g,function(e){var i=t-(e-c);return d?de(i,o-(e-l)):i}(e))}function p(e){return a=void 0,f&&r?h(e):(r=n=void 0,s)}function y(){var e=ce(),i=v(e);if(r=arguments,n=this,c=e,i){if(void 0===a)return function(e){return l=e,a=setTimeout(g,t),u?h(e):s}(c);if(d)return clearTimeout(a),a=setTimeout(g,t),h(c)}return void 0===a&&(a=setTimeout(g,t)),s}return t=le(t)||0,ae(i)&&(u=!!i.leading,o=(d="maxWait"in i)?ue(le(i.maxWait)||0,t):o,f="trailing"in i?!!i.trailing:f),y.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=n=a=void 0},y.flush=function(){return void 0===a?s:p(ce())},y},he=fe,ve=F,ge=function(e,t,i,r){switch(t){case"debounce":return fe(e,i,r);case"throttle":return function(e,t,i){var r=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ve(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),he(e,t,{leading:r,maxWait:t,trailing:n})}(e,i,r);default:return e}},pe=function(e){return"function"==typeof e},ye=function(){return"undefined"==typeof window},me=function(e){return e instanceof Element||e instanceof HTMLDocument},be=function(e,t,i,r){return function(n){var o=n.width,s=n.height;t(function(t){return t.width===o&&t.height===s||t.width===o&&!r||t.height===s&&!i?t:(e&&pe(e)&&e(o,s),{width:o,height:s})})}};!function(e){function t(t){var i=e.call(this,t)||this;i.cancelHandler=function(){i.resizeHandler&&i.resizeHandler.cancel&&(i.resizeHandler.cancel(),i.resizeHandler=null)},i.attachObserver=function(){var e=i.props,t=e.targetRef,r=e.observerOptions;if(!ye()){t&&t.current&&(i.targetRef.current=t.current);var n=i.getElement();n&&(i.observableElement&&i.observableElement===n||(i.observableElement=n,i.resizeObserver.observe(n,r)))}},i.getElement=function(){var e=i.props,t=e.querySelector,r=e.targetDomEl;if(ye())return null;if(t)return document.querySelector(t);if(r&&me(r))return r;if(i.targetRef&&me(i.targetRef.current))return i.targetRef.current;var n=(0,N.findDOMNode)(i);if(!n)return null;switch(i.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return n;default:return n.parentElement}},i.createResizeHandler=function(e){var t=i.props,r=t.handleWidth,n=void 0===r||r,o=t.handleHeight,s=void 0===o||o,a=t.onResize;if(n||s){var c=be(a,i.setState.bind(i),n,s);e.forEach(function(e){var t=e&&e.contentRect||{},r=t.width,n=t.height;!i.skipOnMount&&!ye()&&c({width:r,height:n}),i.skipOnMount=!1})}},i.getRenderType=function(){var e=i.props,t=e.render,r=e.children;return pe(t)?"renderProp":pe(r)?"childFunction":(0,o.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"};var r=t.skipOnMount,n=t.refreshMode,s=t.refreshRate,a=void 0===s?1e3:s,c=t.refreshOptions;return i.state={width:void 0,height:void 0},i.skipOnMount=r,i.targetRef=(0,o.createRef)(),i.observableElement=null,ye()||(i.resizeHandler=ge(i.createResizeHandler,n,a,c),i.resizeObserver=new window.ResizeObserver(i.resizeHandler)),i}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){ye()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,i=t.render,r=t.children,n=t.nodeType,s=void 0===n?"div":n,a=this.state,c={width:a.width,height:a.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return i&&i(c);case"childFunction":return(e=r)(c);case"child":if((e=r).type&&"string"==typeof e.type){var l=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i}(c,["targetRef"]);return(0,o.cloneElement)(e,l)}return(0,o.cloneElement)(e,c);case"childArray":return(e=r).map(function(e){return!!e&&(0,o.cloneElement)(e,c)});default:return o.createElement(s,null)}}}(o.PureComponent);var Se=ye()?o.useEffect:o.useLayoutEffect;const we=e=>function(e){if(0===e.length)return null;const t={};let i=e[0],r=1;for(let n=0;n<e.length;n++){const o=e[n];null===t[o]?t[o]=1:t[o]++,t[o]>r&&(i=o,r=t[o])}return i}(e.filter(e=>{var t,i;return(null===(t=e.track)||void 0===t?void 0:t.width)&&(null===(i=e.track)||void 0===i?void 0:i.height)}).map(e=>{var t,i;return((null===(t=e.track)||void 0===t?void 0:t.width)||1)/((null===(i=e.track)||void 0===i?void 0:i.height)||1)})),Pe=(e,t,i,r,n)=>{if(e<0||t<0)throw new Error("Container must have a non-negative area");if(i<1||!Number.isInteger(i))throw new Error("Number of shapes to place must be a positive integer");const o=r&&n&&r/n;if(void 0!==o&&isNaN(o))throw new Error("Aspect ratio must be a number");let s={area:0,cols:0,rows:0,width:0,height:0};if(void 0!==o)for(let r=i;r>0;r+=-1){const n=Math.ceil(i/r);let a,c;e/(r*o)<=t/n?(a=e/r,c=a/o):(c=t/n,a=c*o);const l=a*c;l>s.area&&(s={area:l,width:a,height:c,rows:n,cols:r})}return s};const Ee=(e,t,i,r=!0)=>{if(!e||!t||!i)return[];const n=[];for(const o of e)if(void 0===o.videoTrack&&o.audioTrack&&t[o.audioTrack]?n.push({peer:o}):o.videoTrack&&t[o.videoTrack]?n.push({track:t[o.videoTrack],peer:o}):r||n.push({peer:o}),o.auxiliaryTracks.length>0&&o.auxiliaryTracks.forEach(e=>{const i=t[e];"video"===(null==i?void 0:i.type)&&"regular"===(null==i?void 0:i.source)&&n.push({track:i,peer:o})}),i(o)&&o.auxiliaryTracks.length>0){const e=o.auxiliaryTracks.find(e=>{const i=t[e];return"video"===(null==i?void 0:i.type)&&"screen"===(null==i?void 0:i.source)});e&&n.push({track:t[e],peer:o})}return n},Me={width:1,height:1},Re=({peers:e,maxTileCount:t,maxColCount:i,maxRowCount:r,includeScreenShareForPeer:n=()=>!1,aspectRatio:s=Me,filterNonPublishingPeers:a=!0,offsetY:c=0})=>{const{width:u=0,height:d=0,ref:f}=function(e){void 0===e&&(e={});var t=e.skipOnMount,i=void 0!==t&&t,r=e.refreshMode,n=e.refreshRate,s=void 0===n?1e3:n,a=e.refreshOptions,c=e.handleWidth,l=void 0===c||c,u=e.handleHeight,d=void 0===u||u,f=e.targetRef,h=e.observerOptions,v=e.onResize,g=(0,o.useRef)(i),p=(0,o.useRef)(null),y=null!=f?f:p,m=(0,o.useRef)(),b=(0,o.useState)({width:void 0,height:void 0}),S=b[0],w=b[1];return Se(function(){if(!ye()){var e=be(v,w,l,d);m.current=ge(function(t){(l||d)&&t.forEach(function(t){var i=t&&t.contentRect||{},r=i.width,n=i.height;!g.current&&!ye()&&e({width:r,height:n}),g.current=!1})},r,s,a);var t=new window.ResizeObserver(m.current);return y.current&&t.observe(y.current,h),function(){t.disconnect();var e=m.current;e&&e.cancel&&e.cancel()}}},[r,s,a,l,d,v,h,y.current]),L({ref:y},S)}(),h=b().getState(l.FM),v=Ee(e,h,n,a),g=(0,o.useMemo)(()=>s||{width:we(v)||1,height:1},[s,v]),p=v.length,{tilesInFirstPage:y,defaultWidth:m,defaultHeight:S,lastPageWidth:w,lastPageHeight:P,isLastPageDifferentFromFirstPage:E}=(0,o.useMemo)(()=>function({count:e,parentWidth:t,parentHeight:i,maxTileCount:r,maxRowCount:n,maxColCount:o,aspectRatio:s}){let a=0,c=0,l=0,u=0,d=!1,f=0;if(0===e)return{tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d};if(r)({tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}=(({parentWidth:e,parentHeight:t,count:i,maxCount:r,aspectRatio:n})=>{let o=0,s=0,a=0,c=0,l=!1,u=0,d=0;const{width:f,height:h}=Pe(e,t,Math.min(i,r),n.width,n.height);if(o=f,s=h,u=Math.min(i,r),d=i%r,l=d>0&&i>r,l){const{width:i,height:r}=Pe(e,t,d,n.width,n.height);a=i,c=r}return{tilesInFirstPage:u,defaultWidth:o,defaultHeight:s,lastPageWidth:a,lastPageHeight:c,isLastPageDifferentFromFirstPage:l}})({parentWidth:t,parentHeight:i,count:e,maxCount:r,aspectRatio:s}));else if(n)({tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}=(({parentWidth:e,parentHeight:t,count:i,maxCount:r,aspectRatio:n})=>{let o=0,s=0,a=0,c=0,l=!1,u=0,d=0;const f=Math.min(Math.ceil(Math.sqrt(i*(n.width/n.height)/(e/t))),r),h=t/f,v=h*(n.width/n.height),g=Math.floor(e/v);if(o=v,s=h,u=Math.min(i,f*g),d=i%(f*g),l=d>0&&i>f*g,l){const i=t/Math.min(Math.ceil(Math.sqrt(d*(n.width/n.height)/(e/t))),r);c=i,a=i*(n.width/n.height)}return{tilesInFirstPage:u,defaultWidth:o,defaultHeight:s,lastPageWidth:a,lastPageHeight:c,isLastPageDifferentFromFirstPage:l}})({parentWidth:t,parentHeight:i,count:e,maxCount:n,aspectRatio:s}));else if(o)({tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}=(({parentWidth:e,parentHeight:t,count:i,maxCount:r,aspectRatio:n})=>{let o=0,s=0,a=0,c=0,l=!1,u=0,d=0;const f=Math.min(Math.ceil(Math.sqrt(i*(e/t)/(n.width/n.height))),r);let h=e/f,v=h/(n.width/n.height);v>t&&(v=t,h=v/(n.height/n.width));const g=Math.floor(t/v);if(s=v,o=h,u=Math.min(i,g*f),d=i%(g*f),l=d>0&&i>g*f,l){let i=e/Math.min(Math.ceil(Math.sqrt(d*(e/t)/(n.width/n.height))),r),o=i/(n.width/n.height);o>t&&(o=t,i=o/(n.height/n.width)),c=o,a=i}return{tilesInFirstPage:u,defaultWidth:o,defaultHeight:s,lastPageWidth:a,lastPageHeight:c,isLastPageDifferentFromFirstPage:l}})({parentWidth:t,parentHeight:i,count:e,maxCount:o,aspectRatio:s}));else{const{width:r,height:n}=Pe(t,i,e,s.width,s.height);a=r,c=n,f=e}return{tilesInFirstPage:f,defaultWidth:a,defaultHeight:c,lastPageWidth:l,lastPageHeight:u,isLastPageDifferentFromFirstPage:d}}({count:p,parentWidth:Math.floor(u),parentHeight:Math.floor(d)-Math.min(d,c),maxTileCount:t,maxRowCount:r,maxColCount:i,aspectRatio:g}),[p,u,d,t,r,i,g,c]);return{pagesWithTiles:(0,o.useMemo)(()=>(({elements:e,tilesInFirstPage:t,onlyOnePage:i,isLastPageDifferentFromFirstPage:r,defaultWidth:n,defaultHeight:o,lastPageWidth:s,lastPageHeight:a})=>{const c=((e,t,i)=>e.reduce((e,r,n)=>{const o=Math.floor(n/t);return o>0&&i||(e[o]||(e[o]=[]),e[o].push(r)),e},[]))(e,t,i);return c.map((e,t)=>e.map(e=>{const i=t===c.length-1,l=r&&i?s:n,u=r&&i?a:o;return Object.assign(Object.assign({},e),{height:u,width:l})}))})({elements:v,tilesInFirstPage:y,onlyOnePage:!1,isLastPageDifferentFromFirstPage:E,defaultWidth:m,defaultHeight:S,lastPageWidth:w,lastPageHeight:P}),[v,y,E,m,S,w,P]),ref:f}};function Ie({trackId:e,getStyle:t,ref:i}){const r=b();(0,o.useEffect)(()=>r.subscribe(e=>{if(!i.current)return;const r=t(e);for(const e in r)i.current.style[e]=r[e]},(0,l.yz)(e)),[t,i,r,e])}const ke=(e=M)=>{const t=w(),i=y(l.ox),r=y(l.pA),n=y(l.Ob),s=y(n?l.s6:l.VO),a={[l.bq.audioOutput]:r.audioOutputDeviceId},c={[l.bq.audioOutput]:i.audioOutput};return s.video&&(c[l.bq.videoInput]=i.videoInput,a[l.bq.videoInput]=r.videoInputDeviceId),s.audio&&(c[l.bq.audioInput]=i.audioInput,a[l.bq.audioInput]=r.audioInputDeviceId),{allDevices:c,selectedDeviceIDs:a,updateDevice:(0,o.useCallback)(i=>E(void 0,[i],void 0,function*({deviceType:i,deviceId:r}){try{switch(i){case l.bq.audioInput:yield t.setAudioSettings({deviceId:r});break;case l.bq.videoInput:yield t.setVideoSettings({deviceId:r});break;case l.bq.audioOutput:yield t.setAudioOutputDevice(r)}}catch(i){e(i,"updateDevices")}}),[e,t])}},Oe=()=>{const e=y(l.a3),t=y(e?l.ws:l.Oq),i=y(l.de),r=(0,o.useMemo)(()=>(e=>e&&Array.isArray(e)&&0!==e.length?e.reduce((e,t)=>t.roleName?(e[t.roleName]||(e[t.roleName]=[]),e[t.roleName].push(t),e):e,{}):{})(t),[t]);return{roles:Object.keys(r),participantsByRoles:r,peerCount:i,isConnected:e}},Te=()=>{const e=y(l.vz),t=y(l.zS),i=y(l.TI),r=e.server.running,n=e.browser.running,o=e.hls.running,s=r||n||o;return{isServerRecordingOn:r,isBrowserRecordingOn:n,isHLSRecordingOn:o,isStreamingOn:i.running||t.running,isHLSRunning:i.running,isRTMPRunning:t.running,isRecordingOn:s}},Ce=()=>{const e=P(l.fP.ERROR),[t,i]=(0,o.useState)(""),r=w(),n=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){yield r.unblockAudio()}),[r]);return(0,o.useEffect)(()=>{3008===(null==e?void 0:e.data.code)&&i(null==e?void 0:e.data.message)},[e]),{error:t,unblockAudio:n,resetError:()=>i("")}},He=({type:e,json:t=!0,onEvent:i,handleError:r=M})=>{const n=w(),s=S();return(0,o.useEffect)(()=>{n.ignoreMessageTypes([e])},[n,e]),(0,o.useEffect)(()=>{if(s)return s.onNotification(n=>{const o=n.data;if(o&&o.type===e)try{const e=t?JSON.parse(o.message):o.message;null==i||i(e)}catch(n){r(n,"handleCustomEvent")}},l.fP.NEW_MESSAGE)},[s,e,t,i,r]),{sendEvent:(0,o.useCallback)((o,s)=>E(void 0,void 0,void 0,function*(){try{const r=((e,t)=>t?JSON.stringify(e||""):e)(o,t);s&&Array.isArray(null==s?void 0:s.roleNames)?yield n.sendGroupMessage(r,s.roleNames,e):"string"==typeof(null==s?void 0:s.peerId)?yield n.sendDirectMessage(r,s.peerId,e):yield n.sendBroadcastMessage(r,e),null==i||i(o)}catch(e){r(e,"sendCustomEvent")}}),[n,r,i,e,t])}},De=e=>{var t;const i=y(l.a3),r=y(l.de),n=y(l.yu);let o=y(i?l.ws:l.Oq);const s=Array.from(new Set(o.map(e=>e.roleName))),a=b();if((null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.isHandRaised)&&(o=o.filter(e=>a.getState((0,l.SO)(e.id)).isHandRaised)),(null==e?void 0:e.role)&&n.includes(e.role)&&(o=o.filter(t=>t.roleName===e.role)),null==e?void 0:e.search){const t=e.search.toLowerCase();o=o.filter(e=>{var i;return(null===(i=e.roleName)||void 0===i?void 0:i.toLowerCase().includes(t))||e.name.toLowerCase().includes(t)})}return{participants:o,isConnected:i,peerCount:r,rolesWithParticipants:s}},Ae=e=>{const t=(0,o.useRef)(null),[i,r]=(0,o.useState)(!1),n=(0,o.useCallback)(()=>{throw new Error("unable to start screen share")},[]),s=(0,o.useRef)(!1),{amIScreenSharing:a,toggleScreenShare:c}=H(n),l=I(a),u=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){a&&(yield null==c?void 0:c(),t.current=null)}),[a,c]),d=(0,o.useCallback)(e=>E(void 0,void 0,void 0,function*(){if(!s.current){if(!e)throw new Error("URL not found");if(a)throw new Error("You are already sharing");if(!t.current)throw new Error("Attach a reference `iframeRef` to iframe for sharing");t.current.src=e,s.current=!0,r(!0),yield null==c?void 0:c({forceCurrentTab:k,cropElement:t.current,preferCurrentTab:k})}}),[a,c]);return(0,o.useEffect)(()=>{l&&!a&&(null==e||e(),t.current&&(t.current.src=""),s.current=!1,r(!1))},[a,l,e]),{startEmbedShare:d,stopEmbedShare:u,iframeRef:t,isEmbedShareInProgress:i}},Ne=e=>{const t=(0,o.useRef)(null),[i,r]=(0,o.useState)(!1),n=(0,o.useCallback)(()=>{throw new Error("unable to start screen share")},[]),s=(0,o.useRef)(!1),{amIScreenSharing:a,toggleScreenShare:c}=H(n),l=I(a),u=(0,o.useCallback)(e=>{var i;t.current&&(null===(i=t.current.contentWindow)||void 0===i||i.postMessage({theme:2,file:e},"*"))},[]),d=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){a&&(yield null==c?void 0:c())}),[a,c]),f=(0,o.useCallback)(e=>E(void 0,void 0,void 0,function*(){if(s.current)return;if(!e)throw new Error("File or url not found");if(a)throw new Error("You are already sharing");if(!t.current)throw new Error("Attach a reference `iframeRef` to iframe for sharing");t.current.src="https://pdf-annotation.100ms.live/generic/web/viewer.html"+("string"==typeof e?`?file=${e}`:""),t.current.onload=()=>{requestAnimationFrame(()=>{e instanceof File&&u(e)})},s.current=!0,r(!0);const i=window.self!==window.top;yield null==c?void 0:c({forceCurrentTab:k&&!i,cropElement:t.current,preferCurrentTab:k&&!i})}),[a,u,c]);return(0,o.useEffect)(()=>{l&&!a&&(null==e||e(),t.current&&t.current.removeAttribute("src"),s.current=!1,r(!1))},[a,l,e]),{startPDFShare:f,stopPDFShare:d,iframeRef:t,isPDFShareInProgress:i}},Be=e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),Le=e=>{const t=w(),i=(0,o.useRef)(t.getPeerListIterator(e)),[r,n]=(0,o.useState)({}),[s,a]=(0,o.useState)(0);return{loadPeers:()=>i.current.findPeers().then(e=>{n(Be(e)),a(i.current.getTotal())}),loadMorePeers:()=>i.current.next().then(e=>{n(t=>Object.assign(Object.assign({},t),Be(e))),a(i.current.getTotal())}),hasNext:()=>i.current.hasNext(),total:s,peers:Object.values(r)}},We=(e=!1)=>{var t,i;const r=y(l.a3),n=null===(t=y(l.s3))||void 0===t?void 0:t.customerUserId,s=y(l.wQ),a=y((0,l.oz)("disableNotifications")),c=!!(null==s?void 0:s.open),u=(null==s?void 0:s.owner)===n,d=w(),[f,h]=(0,o.useState)(!1),v=null===(i=y(l.b))||void 0===i?void 0:i.whiteboard,g=!!(null==v?void 0:v.includes("admin"));(0,o.useEffect)(()=>{r&&h(d.interactivityCenter.whiteboard.isEnabled)},[r,d]);const p=(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){r&&g&&(c?u&&(yield d.interactivityCenter.whiteboard.close()):yield d.interactivityCenter.whiteboard.open())}),[d,u,g,c,r]);return{open:c,token:null==s?void 0:s.token,endpoint:null==s?void 0:s.addr,isOwner:u,isAdmin:g,zoomToContent:a||e,toggle:f&&g?p:void 0}},Fe=()=>{const e=b();return{requestPermission:(0,o.useCallback)(()=>E(void 0,void 0,void 0,function*(){if(!("Notification"in window)||navigator.webdriver)return void console.debug("Request Permsissions : Notifications not supported or headless browser");if("granted"===(null===Notification||void 0===Notification?void 0:Notification.permission)||"denied"===(null===Notification||void 0===Notification?void 0:Notification.permission))return;const t=e.subscribe(e=>E(void 0,void 0,void 0,function*(){e&&"__internal_recorder"!==e&&(yield Notification.requestPermission(),null==t||t())}),l.ow)}),[e]),showNotification:(0,o.useCallback)((e,t)=>{if(!("Notification"in window))return void console.debug("Show Notifications: Notifications not supported or headless browser");if("denied"===(null===Notification||void 0===Notification?void 0:Notification.permission)||"visible"===document.visibilityState&&document.hasFocus())return;const i=new Notification(e,t),r=()=>{"visible"===document.visibilityState&&document.hasFocus()&&(null==i||i.close(),document.removeEventListener("visibilitychange",r))};document.addEventListener("visibilitychange",r)},[])}},Ve=({onTranscript:e,handleError:t=M})=>{const i="hms_transcript",r=S();(0,o.useEffect)(()=>{if(r)return r.onNotification(r=>{const n=r.data;if(n&&n.type===i)try{const t=JSON.parse(n.message).results;null==e||e(t)}catch(r){t(r,"handleCaptionEvent")}},l.fP.NEW_MESSAGE)},[r,i,t,e])},je=()=>{const e=w(),{audioMode:t}=y(l.pA),i=t===l.ui.MUSIC;return{toggleMusicMode:()=>E(void 0,void 0,void 0,function*(){return yield e.setAudioSettings({audioMode:i?l.ui.VOICE:l.ui.MUSIC})}),isMusicModeEnabled:i}}}}]);