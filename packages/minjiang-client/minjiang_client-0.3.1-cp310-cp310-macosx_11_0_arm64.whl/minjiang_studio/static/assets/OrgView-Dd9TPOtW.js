import{d as q,c as D,e as O,f as b,aG as Me,r as f,a as T,b as Re,z as j,o as K,h as t,B as S,w as o,t as p,j as e,N as te,x as G,n as w,O as X,a7 as Ue,cH as ze,C as N,I as oe,J,p as ne,k as ge,l as Y,cI as Oe,cE as $e,bG as Ee,a4 as Ve,cJ as Ie,cK as ee,K as I,cx as ve,aK as se,cL as he,R as ae,aT as Q,cM as Le,cN as qe,cO as De,cP as le,Y as re,aL as be,a0 as ye,cQ as we,cR as Se,cS as _e,cT as Ae,cU as Be,cV as me,Z as Pe,aM as Te,cW as Ne,cX as Ge,cY as je,i as Ke}from"./index-ChTleDhw.js";import{C as He}from"./ChevronBack-DvJPvu7i.js";import{U as xe}from"./UserMultiple-vmR2IR-Z.js";import{_ as ie,a as ce}from"./FormItem-BK3tKCvZ.js";import{_ as H}from"./Space-Bq2UnF1R.js";import{_ as ue}from"./Alert-Cm9qyd89.js";import{A as pe}from"./Add-Dqdr5YaM.js";import{_ as de}from"./Popconfirm-BQNgmoai.js";import{a as Ce,b as ke}from"./Tabs-BkVjPmre.js";import{i as Fe}from"./json-editor-vue-ChB2oJRH.js";import"./Add-DKo-R1VL.js";import"./debounce-L8Si4ASF.js";const Ze={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Je=q({name:"Devices",render:function(g,a){return O(),D("svg",Ze,a[0]||(a[0]=[b("path",{d:"M10 30H4a2 2 0 0 1-2-2V16a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 16v12h6V16z",fill:"currentColor"},null,-1),b("path",{d:"M28 4H6a2 2 0 0 0-2 2v6h2V6h22v14H14v2h2v4h-2v2h9v-2h-5v-4h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1)]))}}),Ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},fe=q({name:"Settings",render:function(g,a){return O(),D("svg",Ye,a[0]||(a[0]=[b("path",{d:"M27 16.76V16v-.77l1.92-1.68A2 2 0 0 0 29.3 11l-2.36-4a2 2 0 0 0-1.73-1a2 2 0 0 0-.64.1l-2.43.82a11.35 11.35 0 0 0-1.31-.75l-.51-2.52a2 2 0 0 0-2-1.61h-4.68a2 2 0 0 0-2 1.61l-.51 2.52a11.48 11.48 0 0 0-1.32.75l-2.38-.86A2 2 0 0 0 6.79 6a2 2 0 0 0-1.73 1L2.7 11a2 2 0 0 0 .41 2.51L5 15.24v1.53l-1.89 1.68A2 2 0 0 0 2.7 21l2.36 4a2 2 0 0 0 1.73 1a2 2 0 0 0 .64-.1l2.43-.82a11.35 11.35 0 0 0 1.31.75l.51 2.52a2 2 0 0 0 2 1.61h4.72a2 2 0 0 0 2-1.61l.51-2.52a11.48 11.48 0 0 0 1.32-.75l2.42.82a2 2 0 0 0 .64.1a2 2 0 0 0 1.73-1l2.28-4a2 2 0 0 0-.41-2.51zM25.21 24l-3.43-1.16a8.86 8.86 0 0 1-2.71 1.57L18.36 28h-4.72l-.71-3.55a9.36 9.36 0 0 1-2.7-1.57L6.79 24l-2.36-4l2.72-2.4a8.9 8.9 0 0 1 0-3.13L4.43 12l2.36-4l3.43 1.16a8.86 8.86 0 0 1 2.71-1.57L13.64 4h4.72l.71 3.55a9.36 9.36 0 0 1 2.7 1.57L25.21 8l2.36 4l-2.72 2.4a8.9 8.9 0 0 1 0 3.13L27.57 20z",fill:"currentColor"},null,-1),b("path",{d:"M16 22a6 6 0 1 1 6-6a5.94 5.94 0 0 1-6 6zm0-10a3.91 3.91 0 0 0-4 4a3.91 3.91 0 0 0 4 4a3.91 3.91 0 0 0 4-4a3.91 3.91 0 0 0-4-4z",fill:"currentColor"},null,-1)]))}}),Qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},We=q({name:"TwoFactorAuthentication",render:function(g,a){return O(),D("svg",Qe,a[0]||(a[0]=[b("path",{d:"M11 23.18l-2-2.001l-1.411 1.41L11 26l6-6l-1.41-1.41L11 23.18z",fill:"currentColor"},null,-1),b("path",{d:"M28 30h-4v-2h4V16h-4V8a4.005 4.005 0 0 0-4-4V2a6.007 6.007 0 0 1 6 6v6h2a2.002 2.002 0 0 1 2 2v12a2.002 2.002 0 0 1-2 2z",fill:"currentColor"},null,-1),b("path",{d:"M20 14h-2V8A6 6 0 0 0 6 8v6H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM8 8a4 4 0 0 1 8 0v6H8zm12 20H4V16h16z",fill:"currentColor"},null,-1)]))}}),Xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},e0=q({name:"UserSettings",render:function(g,a){return O(),D("svg",Xe,a[0]||(a[0]=[b("path",{d:"M30 10V8h-2.101a4.968 4.968 0 0 0-.732-1.753l1.49-1.49l-1.414-1.414l-1.49 1.49A4.968 4.968 0 0 0 24 4.101V2h-2v2.101a4.968 4.968 0 0 0-1.753.732l-1.49-1.49l-1.414 1.414l1.49 1.49A4.968 4.968 0 0 0 18.101 8H16v2h2.101a4.968 4.968 0 0 0 .732 1.753l-1.49 1.49l1.414 1.414l1.49-1.49a4.968 4.968 0 0 0 1.753.732V16h2v-2.101a4.968 4.968 0 0 0 1.753-.732l1.49 1.49l1.414-1.414l-1.49-1.49A4.968 4.968 0 0 0 27.899 10zm-7 2a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z",fill:"currentColor"},null,-1),b("path",{d:"M16 30h-2v-5a3.003 3.003 0 0 0-3-3H7a3.003 3.003 0 0 0-3 3v5H2v-5a5.006 5.006 0 0 1 5-5h4a5.006 5.006 0 0 1 5 5z",fill:"currentColor"},null,-1),b("path",{d:"M9 10a3 3 0 1 1-3 3a3 3 0 0 1 3-3m0-2a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1)]))}}),t0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},o0=q({name:"Checkmark12Regular",render:function(g,a){return O(),D("svg",t0,a[0]||(a[0]=[b("g",{fill:"none"},[b("path",{d:"M9.854 3.146a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L5 7.293l4.146-4.147a.5.5 0 0 1 .708 0z",fill:"currentColor"})],-1)]))}}),W=Me("org",()=>({info:f()})),n0={class:"flex items-center justify-start gap-2"},s0={class:"flex flex-1 justify-center items-center gap-5"},a0={class:"text-2xl flex items-center justify-center gap-1"},l0={key:0,class:"flex items-center gap-1"},r0={class:"flex items-center gap-1"},i0={class:"flex items-center gap-1"},c0=q({__name:"OrgInfo",setup(L){const g=W(),{t:a}=T(),d=Re(),l=j(),r=async()=>{const k=l.query.id;if(!k)return;const[v,y]=await ze({org_id:+k});!v&&(y==null?void 0:y.status)===0&&g.$patch({info:y.data})},M=()=>{d.push({name:"orgList"})};return K(()=>{r()}),(k,v)=>{var $;const y=te,U=S,R=Ue;return O(),D("div",n0,[t(U,{onClick:M,quaternary:""},{icon:o(()=>[t(y,{size:"26"},{default:o(()=>[t(e(He))]),_:1})]),default:o(()=>[b("span",null,p(e(a)("org.backOrgList")),1)]),_:1}),b("div",s0,[b("div",a0,[t(y,{component:e(X)},null,8,["component"]),w(" "+p(($=e(g).info)==null?void 0:$.organization_name),1)]),e(g).info?(O(),D("div",l0,[t(R,{bordered:!1,size:"small",type:"success"},{default:o(()=>[w(" ID "+p(+e(l).query.id),1)]),_:1}),t(R,{bordered:!1,type:"warning",size:"small"},{default:o(()=>{var z;return[b("div",r0,[t(y,{component:e(xe)},null,8,["component"]),w(" "+p((z=e(g).info)==null?void 0:z.member_count)+" "+p(e(a)("org.cmember")),1)])]}),_:1}),t(R,{bordered:!1,type:"info",size:"small"},{default:o(()=>{var z;return[b("div",i0,[t(y,{component:e(X)},null,8,["component"]),w(" "+p((z=e(g).info)==null?void 0:z.device_count)+" "+p(e(a)("org.cdevice")),1)])]}),_:1})])):G("",!0)])])}}}),u0={class:"flex justify-end"},d0=q({__name:"InsertMember",props:{type:{}},emits:["success"],setup(L,{expose:g,emit:a}){const d=W(),l=f(),{t:r}=T(),M=j(),k=a,v=[{label:r("org.admin"),value:"ORG_ADMIN"},{label:r("org.member"),value:"ORG_MEMBER"}],y=f(!1),U=f(!1),R=()=>{U.value=!1,x.value={user_name:void 0,org_role:void 0}},$=()=>{U.value=!0},z=f({user_name:{required:!0,message:r("common.required")},org_role:{required:!0,message:r("common.required")}}),V=f(null),x=f({user_name:void 0,org_role:void 0}),c=()=>{var i;(i=V.value)==null||i.validate(async n=>{if(n)return;const[_,m]=await Oe({...x.value,org_id:+M.query.id});!_&&(m==null?void 0:m.status)===0&&(k("success"),R())})},h=async()=>{var _;const[i,n]=await $e();!i&&(n==null?void 0:n.status)===0&&(l.value=(_=n.data)==null?void 0:_.map(m=>({...m,label:m.user_name,value:m.user_id})))};return K(()=>{h()}),g({open:$,close:R}),(i,n)=>{const _=ce,m=ge,u=Y,s=ie,C=S,E=H,P=ne,F=oe;return O(),N(F,{show:e(U),"onUpdate:show":n[2]||(n[2]=A=>J(U)?U.value=A:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(P,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(s,{ref_key:"formRef",ref:V,model:e(x),rules:e(z),size:"small"},{default:o(()=>[t(_,{label:e(r)("org.orgName"),path:"name"},{default:o(()=>{var A;return[w(p((A=e(d).info)==null?void 0:A.organization_name),1)]}),_:1},8,["label"]),t(_,{label:e(r)("org.username"),path:"user_name"},{default:o(()=>[t(m,{value:e(x).user_name,"onUpdate:value":n[0]||(n[0]=A=>e(x).user_name=A)},null,8,["value"])]),_:1},8,["label"]),t(_,{label:e(r)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(u,{value:e(x).org_role,"onUpdate:value":n[1]||(n[1]=A=>e(x).org_role=A),options:v},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",u0,[t(E,null,{default:o(()=>[t(C,{onClick:R,loading:e(y)},{default:o(()=>[w(p(e(r)("common.cancel")),1)]),_:1},8,["loading"]),t(C,{type:"primary",onClick:c,loading:e(y)},{default:o(()=>[w(p(e(r)("org.omtab.invite")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),_0={class:"flex justify-end"},m0={class:"my-10 text-center"},p0={class:"flex justify-end"},f0=q({__name:"InsertUser",props:{type:{}},emits:["success"],setup(L,{expose:g,emit:a}){const d=W(),{t:l}=T(),r=j(),M=a,k=[{label:l("org.admin"),value:"ORG_ADMIN"},{label:l("org.member"),value:"ORG_MEMBER"}],v=f(!1),y=f(!1),U=()=>{y.value=!1,V.value={user_name:void 0,org_role:void 0}},R=()=>{y.value=!0},$=f({user_name:{required:!0,message:l("common.required")},org_role:{required:!0,message:l("common.required")}}),z=f(null),V=f({user_name:void 0,org_role:void 0}),x=f(""),c=f(!1),h=()=>{c.value=!1,x.value=""},i=()=>{var n;(n=z.value)==null||n.validate(async _=>{var s;if(_)return;const[m,u]=await Ie({...V.value,org_id:+r.query.id});!m&&(u==null?void 0:u.status)===0&&(c.value=!0,x.value=(s=u.data)==null?void 0:s.token,M("success"),U())})};return Ee(()=>{x.value=""}),g({open:R,close:U}),(n,_)=>{const m=ce,u=ge,s=Y,C=ie,E=H,P=ne,F=oe,A=ue;return O(),D(Ve,null,[t(F,{show:e(y),"onUpdate:show":_[2]||(_[2]=B=>J(y)?y.value=B:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(P,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(C,{ref_key:"formRef",ref:z,model:e(V),rules:e($),size:"small"},{default:o(()=>[t(m,{label:e(l)("org.orgName"),path:"name"},{default:o(()=>{var B;return[w(p((B=e(d).info)==null?void 0:B.organization_name),1)]}),_:1},8,["label"]),t(m,{label:e(l)("org.omtab.user"),path:"user_name"},{default:o(()=>[t(u,{value:e(V).user_name,"onUpdate:value":_[0]||(_[0]=B=>e(V).user_name=B)},null,8,["value"])]),_:1},8,["label"]),t(m,{label:e(l)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(s,{value:e(V).org_role,"onUpdate:value":_[1]||(_[1]=B=>e(V).org_role=B),options:k},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",_0,[t(E,null,{default:o(()=>[t(e(S),{onClick:U,loading:e(v)},{default:o(()=>[w(p(e(l)("common.cancel")),1)]),_:1},8,["loading"]),t(e(S),{type:"primary",onClick:i,loading:e(v)},{default:o(()=>[w(p(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"]),t(F,{show:e(c),"onUpdate:show":_[3]||(_[3]=B=>J(c)?c.value=B:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(P,{bordered:!1,"content-class":"!px-5",style:{width:"500px"}},{default:o(()=>[t(A,{type:"info"},{default:o(()=>[w(p(e(l)("org.omtab.tokenTips")),1)]),_:1}),b("div",m0,p(e(x)),1),b("div",p0,[t(E,null,{default:o(()=>[t(e(S),{type:"primary",onClick:h,loading:e(v)},{default:o(()=>[w(p(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}}),g0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_0)'%20customFrame='url(%23clipPath_0)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_0'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_1'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2049'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(51,49,64)'%20fill-opacity='0.5'%20/%3e%3cg%20id='Stroke%202/edit-write-alt'%20clip-path='url(%23clipPath_1)'%20customFrame='url(%23clipPath_1)'%3e%3crect%20id='Stroke%202/edit-write-alt'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20fill-opacity='0'%20/%3e%3cpath%20id='Vector'%20d='M9.75%2032.25L32.25%2032.25'%20stroke='rgb(108,92,231)'%20stroke-width='2'%20/%3e%3cpath%20id='Vector'%20d='M24.125%2010.375C25.1605%209.3395%2026.8395%209.3395%2027.875%2010.375C28.9105%2011.4106%2028.9105%2013.0895%2027.875%2014.125L15.375%2026.625L10.375%2027.875L11.625%2022.875L24.125%2010.375Z'%20fill-rule='evenodd'%20stroke='rgb(108,92,231)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",v0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_2)'%20customFrame='url(%23clipPath_2)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_2'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_3'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2048'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,0,0)'%20fill-opacity='0.25'%20/%3e%3cg%20id='Icon%20/%20delete%20user%2024%20Outline'%20clip-path='url(%23clipPath_3)'%20customFrame='url(%23clipPath_3)'%3e%3crect%20id='Icon%20/%20delete%20user%2024%20Outline'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20/%3e%3cpath%20id='Vector'%20d='M22.625%2021.275C23.292%2020.6977%2023.8269%2019.9836%2024.1936%2019.1813C24.5602%2018.379%2024.75%2017.5071%2024.75%2016.625C24.75%2014.9674%2024.0915%2013.3777%2022.9194%2012.2056C21.7473%2011.0335%2020.1576%2010.375%2018.5%2010.375C16.8424%2010.375%2015.2527%2011.0335%2014.0806%2012.2056C12.9085%2013.3777%2012.25%2014.9674%2012.25%2016.625C12.25%2017.5071%2012.4398%2018.379%2012.8064%2019.1813C13.1731%2019.9836%2013.708%2020.6977%2014.375%2021.275C12.6252%2022.0674%2011.1406%2023.3469%2010.0987%2024.9607C9.05687%2026.5745%208.50184%2028.4541%208.5%2030.375C8.5%2030.7065%208.6317%2031.0245%208.86612%2031.2589C9.10054%2031.4933%209.41848%2031.625%209.75%2031.625C10.0815%2031.625%2010.3995%2031.4933%2010.6339%2031.2589C10.8683%2031.0245%2011%2030.7065%2011%2030.375C11%2028.3859%2011.7902%2026.4782%2013.1967%2025.0717C14.6032%2023.6652%2016.5109%2022.875%2018.5%2022.875C20.4891%2022.875%2022.3968%2023.6652%2023.8033%2025.0717C25.2098%2026.4782%2026%2028.3859%2026%2030.375C26%2030.7065%2026.1317%2031.0245%2026.3661%2031.2589C26.6005%2031.4933%2026.9185%2031.625%2027.25%2031.625C27.5815%2031.625%2027.8995%2031.4933%2028.1339%2031.2589C28.3683%2031.0245%2028.5%2030.7065%2028.5%2030.375C28.4982%2028.4541%2027.9431%2026.5745%2026.9013%2024.9607C25.8594%2023.3469%2024.3748%2022.0674%2022.625%2021.275ZM18.5%2020.375C17.7583%2020.375%2017.0333%2020.1551%2016.4166%2019.743C15.7999%2019.331%2015.3193%2018.7453%2015.0355%2018.0601C14.7516%2017.3748%2014.6774%2016.6208%2014.8221%2015.8934C14.9667%2015.166%2015.3239%2014.4978%2015.8483%2013.9734C16.3728%2013.4489%2017.041%2013.0918%2017.7684%2012.9471C18.4958%2012.8024%2019.2498%2012.8766%2019.9351%2013.1605C20.6203%2013.4443%2021.206%2013.9249%2021.618%2014.5416C22.0301%2015.1583%2022.25%2015.8833%2022.25%2016.625C22.25%2017.6196%2021.8549%2018.5734%2021.1516%2019.2767C20.4484%2019.9799%2019.4946%2020.375%2018.5%2020.375ZM32.1375%2021L33.1375%2020.0125C33.254%2019.896%2033.3465%2019.7576%2033.4096%2019.6053C33.4726%2019.453%2033.5051%2019.2898%2033.5051%2019.125C33.5051%2018.9602%2033.4726%2018.797%2033.4096%2018.6447C33.3465%2018.4924%2033.254%2018.354%2033.1375%2018.2375C33.0209%2018.121%2032.8826%2018.0285%2032.7303%2017.9654C32.578%2017.9024%2032.4148%2017.8699%2032.25%2017.8699C32.0852%2017.8699%2031.922%2017.9024%2031.7697%2017.9654C31.6174%2018.0285%2031.479%2018.121%2031.3625%2018.2375L30.375%2019.2375L29.3875%2018.2375C29.2709%2018.121%2029.1326%2018.0285%2028.9803%2017.9654C28.828%2017.9024%2028.6648%2017.8699%2028.5%2017.8699C28.1671%2017.8699%2027.8479%2018.0021%2027.6125%2018.2375C27.4959%2018.354%2027.4035%2018.4924%2027.3404%2018.6447C27.2773%2018.797%2027.2449%2018.9602%2027.2449%2019.125C27.2449%2019.4579%2027.3771%2019.7771%2027.6125%2020.0125L28.6125%2021L27.6125%2021.9875C27.4953%2022.1037%2027.4023%2022.242%2027.3389%2022.3943C27.2754%2022.5466%2027.2427%2022.71%2027.2427%2022.875C27.2427%2023.04%2027.2754%2023.2034%2027.3389%2023.3557C27.4023%2023.508%2027.4953%2023.6463%2027.6125%2023.7625C27.7287%2023.8797%2027.867%2023.9727%2028.0193%2024.0361C28.1716%2024.0996%2028.335%2024.1323%2028.5%2024.1323C28.665%2024.1323%2028.8284%2024.0996%2028.9807%2024.0361C29.133%2023.9727%2029.2713%2023.8797%2029.3875%2023.7625L30.375%2022.7625L31.3625%2023.7625C31.4787%2023.8797%2031.6169%2023.9727%2031.7693%2024.0361C31.9216%2024.0996%2032.085%2024.1323%2032.25%2024.1323C32.415%2024.1323%2032.5784%2024.0996%2032.7307%2024.0361C32.883%2023.9727%2033.0213%2023.8797%2033.1375%2023.7625C33.2547%2023.6463%2033.3476%2023.508%2033.4111%2023.3557C33.4746%2023.2034%2033.5072%2023.04%2033.5072%2022.875C33.5072%2022.71%2033.4746%2022.5466%2033.4111%2022.3943C33.3476%2022.242%2033.2547%2022.1037%2033.1375%2021.9875L32.1375%2021Z'%20fill='rgb(214,48,49)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",h0=q({__name:"OMember",setup(L){const g=f(!1),a=f(!1),{t:d}=T(),l=j(),r=ee("insertMemberRef"),M=ee("insertUserRef"),k=f(!1),v=f(!1),y=()=>{k.value=!0,Q(()=>{var s;(s=r.value)==null||s.open()})},U=()=>{v.value=!0,Q(()=>{var s;(s=M.value)==null||s.open()})},R=()=>{u()},$=()=>{u()},z=f(),V=async s=>{const[C,E]=await Le({user_id:s,org_id:+l.query.id});!C&&(E==null?void 0:E.status)===0&&u()},x=f(),c=[{label:d("org.admin"),value:"ORG_ADMIN"},{label:d("org.member"),value:"ORG_MEMBER"}],h=s=>{const C=qe[s.value].color;return I("div",{class:"px-1 rounded-full border text-xs inline-block w-[80px] inline-flex items-center justify-center",style:{color:C,borderColor:C}},s.label)},i=(s,C)=>{x.value={userId:s,value:C}},n=s=>{x.value={...x.value,value:s}},_=async()=>{var E,P;const[s,C]=await De({org_id:+l.query.id,user_id:(E=x.value)==null?void 0:E.userId,org_role:(P=x.value)==null?void 0:P.value});!s&&(C==null?void 0:C.status)===0&&(x.value={userId:void 0,value:void 0},u())},m=[{title:"ID",key:"user_id",width:"20%"},{title:d("org.omtab.name"),key:"user_name",width:"25%"},{title:d("org.omtab.role"),key:"org_role",width:"30%",render(s){var C;return((C=x.value)==null?void 0:C.userId)===s.user_id?I("div",{class:"flex items-center gap-2"},[I(Y,{options:c,renderLabel:h,defaultValue:x.value.value,onUpdateValue:n,style:{width:"200px"}}),I(S,{size:"small",onClick:()=>x.value={userId:void 0,value:void 0}},{default:()=>"x"}),I(S,{size:"small",onClick:_},{icon:()=>I(o0)})]):I(ve,{role:s.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:d("org.omtab.options"),key:"options",width:"25%",render(s){return I("div",{class:"flex items-center gap-2"},[I("img",{src:g0,class:"w-[30px] cursor-pointer",onClick:()=>i(s.user_id,s.org_role)}),I(de,{onPositiveClick:()=>V(s.user_id)},{default:()=>d("groupDetail.parameterManager.removeConfirm"),trigger:()=>I("img",{src:v0,class:"w-[30px] cursor-pointer"})})])}}],u=async()=>{if(g.value)return;g.value=!0;const s=+l.query.id;if(!s){g.value=!1;return}const[C,E]=await le({organization_id:s});g.value=!1,!C&&(E==null?void 0:E.status)===0&&(z.value=E.data)};return se(()=>+l.query.id,s=>{s&&u()}),K(()=>{const s=he();s!=null&&s.is_sys_admin&&(a.value=!0),u()}),(s,C)=>{const E=H,P=ae;return O(),D("div",null,[t(E,null,{default:o(()=>[t(e(S),{type:"primary",onClick:y},{icon:o(()=>[t(e(pe))]),default:o(()=>[w(" "+p(e(d)("org.omtab.insertMember")),1)]),_:1}),e(a)?(O(),N(e(S),{key:0,type:"primary",onClick:U},{icon:o(()=>[t(e(pe))]),default:o(()=>[w(" "+p(e(d)("org.omtab.insertUser")),1)]),_:1})):G("",!0)]),_:1}),e(k)?(O(),N(d0,{key:0,ref_key:"insertMemberRef",ref:r,type:"insert",onSuccess:R},null,512)):G("",!0),e(v)?(O(),N(f0,{key:1,ref_key:"insertUserRef",ref:M,type:"insert",onSuccess:$},null,512)):G("",!0),t(P,{lading:e(g),class:"mt-5",columns:m,data:e(z)},null,8,["lading","data"])])}}}),b0={class:"flex items-center my-4"},y0={class:"flex items-center gap-2 mr-4"},w0=q({__name:"AuthByMember",setup(L){const g=re(),{t:a}=T(),d=j(),l=f(!1),r=f(),M=c=>{r.value=c},k=async(c,h)=>{if(l.value)return;l.value=!0;const[i,n]=await we({org_id:+d.query.id,user_id:r.value,device_group_id:h,permission:c?"EDIT":"READ"});!i&&(n==null?void 0:n.status)===0?$():l.value=!1},v=[{title:a("org.oatab.device"),key:"device",render(c){return I("div",{class:""},[I("div",{class:"text-lg"},c.device_group_name),I("div",{class:""},`${a("org.deviceGroup")}: ${c.device_group_id}`)])}},{title:a("org.oatab.auth"),key:"auth",render(c){return I(be,{railStyle:({checked:h})=>{const i={};return h?i.background="#638EE2":i.background="#7964E3",i},value:c.permission==="EDIT",onUpdateValue:h=>k(h,c.device_group_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],y=f(),U=async()=>{const[c,h]=await le({organization_id:+d.query.id});!c&&(h==null?void 0:h.status)===0&&h.data&&(y.value=h.data.map(i=>({...i,label:i.user_name,value:i.user_id})))},R=f(),$=async()=>{l.value=!0;const[c,h]=await Se({organization_id:+d.query.id,user_id:r.value});l.value=!1,!c&&h&&h.status===0&&(R.value=h.data.device_group_list)},z=async()=>{if(l.value)return;l.value=!0;const[c,h]=await _e({org_id:+d.query.id,user_id:r.value,permission:"EDIT"});!c&&(h==null?void 0:h.status)===0?$():l.value=!1},V=async()=>{if(l.value)return;l.value=!0;const[c,h]=await _e({org_id:+d.query.id,user_id:r.value,permission:"READ"});!c&&(h==null?void 0:h.status)===0?$():l.value=!1},x=()=>{};return K(()=>{U()}),se(r,c=>{c&&$()}),(c,h)=>{const i=ue,n=Y,_=S,m=de,u=H,s=ae;return O(),D("div",null,[t(i,{type:"info",class:"my-4"},{default:o(()=>[w(p(e(a)("org.oatab.tips")),1)]),_:1}),b("div",b0,[b("div",y0,[b("div",{style:ye({color:e(g).primaryColor})},p(e(a)("org.oatab.selectUser"))+": ",5),t(n,{style:{width:"200px"},onUpdateValue:M,options:e(y)},null,8,["options"])]),t(u,null,{default:o(()=>[t(m,{onPositiveClick:z,onNegativeClick:x,disabled:!e(r)},{trigger:o(()=>[t(_,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[w(p(e(a)("org.oatab.allDeviceEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+p(e(a)("org.oatab.confirmDeviceEdit")),1)]),_:1},8,["disabled"]),t(m,{onPositiveClick:V,onNegativeClick:x,disabled:!e(r)},{trigger:o(()=>[t(_,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[w(p(e(a)("org.oatab.allDeviceRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+p(e(a)("org.oatab.confirmDeviceRead")),1)]),_:1},8,["disabled"])]),_:1})]),t(s,{loading:e(l),columns:v,data:e(R)},null,8,["loading","data"])])}}}),x0={class:"flex items-center my-2"},C0={class:"flex items-center gap-2 mr-4"},k0=q({__name:"AuthByDevice",setup(L){const g=re(),{t:a}=T(),d=f(!1),l=j(),r=f(),M=i=>{r.value=i},k=f(),v=async(i,n)=>{if(d.value)return;d.value=!0;const[_,m]=await we({org_id:+l.query.id,user_id:n,device_group_id:r.value,permission:i?"EDIT":"READ"});!_&&(m==null?void 0:m.status)===0?z():d.value=!1},y=[{title:a("org.oatab.member"),key:"user_name"},{title:a("org.oatab.role"),key:"role",render(i){return I(ve,{role:i.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:a("org.oatab.auth"),key:"auth",render(i){return I(be,{railStyle:({checked:n})=>{const _={};return n?_.background="#638EE2":_.background="#7964E3",_},value:i.permission==="EDIT",onUpdateValue:n=>v(n,i.user_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],U=f(),R=async()=>{const[i,n]=await Ae({organization_id:+l.query.id});!i&&(n==null?void 0:n.status)===0&&n.data&&(U.value=n.data.map(_=>({..._,label:_.device_group_name,value:_.device_group_id})))},$=f(),z=async()=>{d.value=!0;const[i,n]=await Be({organization_id:+l.query.id,device_group_id:r.value});d.value=!1,!i&&n&&n.status===0&&($.value=n.data.user_list.map(_=>{var m,u;return{..._,org_role:(u=(m=k.value)==null?void 0:m.find(s=>s.user_id===_.user_id))==null?void 0:u.org_role}}))},V=async()=>{if(d.value)return;d.value=!0;const[i,n]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"EDIT"});!i&&(n==null?void 0:n.status)===0?z():d.value=!1},x=async()=>{if(d.value)return;d.value=!0;const[i,n]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"READ"});!i&&(n==null?void 0:n.status)===0?z():d.value=!1},c=()=>{},h=async()=>{const[i,n]=await le({organization_id:+l.query.id});!i&&(n==null?void 0:n.status)===0&&(k.value=n.data)};return K(()=>{R(),h()}),se(r,i=>{i&&z()}),(i,n)=>{const _=Y,m=S,u=de,s=H,C=ae;return O(),D("div",null,[b("div",x0,[b("div",C0,[b("div",{style:ye({color:e(g).primaryColor})},p(e(a)("org.oatab.selectDevice"))+": ",5),t(_,{style:{width:"200px"},onUpdateValue:M,options:e(U)},null,8,["options"])]),t(s,null,{default:o(()=>[t(u,{onPositiveClick:V,onNegativeClick:c,disabled:!e(r)},{trigger:o(()=>[t(m,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[w(p(e(a)("org.oatab.allUserEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+p(e(a)("org.oatab.confirmMemberRead")),1)]),_:1},8,["disabled"]),t(u,{onPositiveClick:x,onNegativeClick:c,disabled:!e(r)},{trigger:o(()=>[t(m,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[w(p(e(a)("org.oatab.allUserRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[w(" "+p(e(a)("org.oatab.confirmMemberEdit")),1)]),_:1},8,["disabled"])]),_:1})]),t(C,{loading:e(d),columns:y,data:e($)},null,8,["loading","data"])])}}}),M0={class:"flex items-center gap-1"},R0={class:"flex items-center gap-1"},U0=q({__name:"OAuth",setup(L){const{t:g}=T();return(a,d)=>{const l=te,r=ke,M=Ce;return O(),D("div",null,[t(M,{type:"card","pane-class":"!pl-0"},{default:o(()=>[t(r,{name:"byuser"},{tab:o(()=>[b("div",M0,[t(l,{component:e(e0)},null,8,["component"]),w(" "+p(e(g)("org.oatab.tab1")),1)])]),default:o(()=>[t(w0)]),_:1}),t(r,{name:"bydevice"},{tab:o(()=>[b("div",R0,[t(l,{component:e(Je)},null,8,["component"]),w(" "+p(e(g)("org.oatab.tab2")),1)])]),default:o(()=>[t(k0)]),_:1})]),_:1})])}}}),z0={class:"w-full"},O0={class:"flex justify-end"},$0=q({__name:"OSSModal",props:{isGlobal:{type:Boolean}},emits:["close"],setup(L,{expose:g,emit:a}){const d=L,l=a,r=re(),M=Pe(),k=W(),{t:v}=T(),y=j(),U=f(!1),R=f(!1),$=()=>{R.value=!1,Q(()=>{setTimeout(()=>{c.value={if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}},200)}),l("close")},z=()=>{R.value=!0},V=f({user_id:{required:!0,message:v("common.required")},org_role:{required:!0,message:v("common.required")}}),x=f(null),c=f({if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}),h=()=>{var m;(m=x.value)==null||m.validate(async u=>{if(u)return;const[s,C]=await Ne({...c.value,if_global:d.isGlobal,organization_id:+y.query.id});!s&&(C==null?void 0:C.status)===0&&(M.success(v("org.ootab.successfully")),$())})},i=m=>{m||$()},n=async()=>{const[m,u]=await Ge({organization_id:+y.query.id});if(!m&&(u==null?void 0:u.status)===0){const s=u.data.auth_text;c.value={...c.value,auth_text:s}}},_=async()=>{const[m,u]=await je();if(!m&&(u==null?void 0:u.status)===0){const s=u.data.auth_text;c.value={...c.value,if_global:!0,auth_text:s}}};return K(()=>{d.isGlobal?_():n()}),g({open:z,close:$}),(m,u)=>{const s=ce,C=ue,E=ie,P=S,F=H,A=ne,B=oe;return O(),N(B,{show:e(R),"onUpdate:show":u[1]||(u[1]=Z=>J(R)?R.value=Z:null),"close-on-esc":!1,onUpdateShow:i},{default:o(()=>[t(A,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(E,{ref_key:"formRef",ref:x,model:e(c),rules:e(V),size:"small"},{default:o(()=>[e(c).if_global?G("",!0):(O(),N(s,{key:0,label:e(v)("org.orgName"),path:"name"},{default:o(()=>{var Z;return[w(p((Z=e(k).info)==null?void 0:Z.organization_name),1)]}),_:1},8,["label"])),t(s,{label:e(v)(`org.ootab.${m.isGlobal?"globalCfg":"orgCfg"}`),path:"auth_text"},{default:o(()=>[b("div",z0,[t(C,{type:"info",title:e(v)("org.ootab.osstips"),class:"whitespace-pre-line w-full"},{default:o(()=>u[2]||(u[2]=[w(p(`{
                    "host": "oss.example.com",
                    "bucket": "minjiang",
                    "access_key": "AK",
                    "secret_key": "SK",
                    "secure": true,
                    "region": "cn-shanghai"
                }`))])),_:1},8,["title"]),t(e(Fe),{class:Te(["!w-full mt-5",[e(r).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"300px"},modelValue:e(c).auth_text,"onUpdate:modelValue":u[0]||(u[0]=Z=>e(c).auth_text=Z),mode:"text"},null,8,["class","modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules"]),b("div",O0,[t(F,null,{default:o(()=>[t(P,{type:"primary",onClick:h,loading:e(U)},{default:o(()=>[w(p(e(v)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),E0=q({__name:"OOrg",setup(L){const g=ee("ossRef"),a=f(!1),{t:d}=T(),l=f(!1),r=f(!1),M=(k=!1)=>{l.value=!0,r.value=k,Q(()=>{setTimeout(()=>{var v;(v=g.value)==null||v.open()},100)})};return K(()=>{const k=he();k!=null&&k.is_sys_admin&&(a.value=!0)}),(k,v)=>{const y=S,U=H;return O(),D("div",null,[t(U,null,{default:o(()=>[t(y,{type:"primary",onClick:v[0]||(v[0]=()=>M())},{icon:o(()=>[t(e(fe))]),default:o(()=>[w(" "+p(e(d)("org.ootab.setOss")),1)]),_:1}),e(a)?(O(),N(y,{key:0,type:"primary",onClick:v[1]||(v[1]=()=>M(!0))},{icon:o(()=>[t(e(fe))]),default:o(()=>[w(" "+p(e(d)("org.ootab.setGlobalOss")),1)]),_:1})):G("",!0)]),_:1}),e(l)?(O(),N($0,{key:0,ref_key:"ossRef",ref:g,"is-global":e(r),onClose:v[2]||(v[2]=R=>l.value=!1)},null,8,["is-global"])):G("",!0)])}}}),V0={class:"flex items-center gap-1"},I0={class:"flex items-center gap-1"},L0={class:"flex items-center gap-1"},F0=q({__name:"OrgView",setup(L){const{t:g}=T(),a=f("member");return(d,l)=>{const r=Ke,M=te,k=ke,v=Ce;return O(),D("div",null,[t(c0),t(r),t(v,{type:"line",value:e(a),"onUpdate:value":l[0]||(l[0]=y=>J(a)?a.value=y:null),placement:"left","pane-class":"!pl-5"},{default:o(()=>[t(k,{name:"member"},{tab:o(()=>[b("div",V0,[t(M,{component:e(xe)},null,8,["component"]),w(" "+p(e(g)("org.omember")),1)])]),default:o(()=>[t(h0)]),_:1}),t(k,{name:"auth"},{tab:o(()=>[b("div",I0,[t(M,{component:e(We)},null,8,["component"]),w(" "+p(e(g)("org.oauth")),1)])]),default:o(()=>[t(U0)]),_:1}),t(k,{name:"organization"},{tab:o(()=>[b("div",L0,[t(M,{component:e(X)},null,8,["component"]),w(" "+p(e(g)("org.oorganization")),1)])]),default:o(()=>[t(E0)]),_:1})]),_:1},8,["value"])])}}});export{F0 as default};
