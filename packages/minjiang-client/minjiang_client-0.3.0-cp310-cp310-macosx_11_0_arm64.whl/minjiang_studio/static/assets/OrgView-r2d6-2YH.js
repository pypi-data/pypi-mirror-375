import{d as B,c as P,e as O,f as w,aF as xe,r as m,a as T,b as ke,z as Ce,o as j,h as t,B as N,w as o,t as p,j as e,N as Y,x as G,n as k,d9 as Q,a6 as ze,dj as Ue,A as q,I as W,J as H,p as ee,k as te,l as J,dk as Me,dh as Re,bF as Oe,a3 as $e,dl as Ee,dm as X,K as D,da as _e,aJ as oe,dn as me,Q as ne,aS as Z,dp as Ie,dq as Le,dr as Ve,ds as se,X as pe,aK as fe,$ as ge,dt as ve,du as De,dv as re,dw as Se,dx as Ae,dy as ce,Y as Be,dz as Pe,dA as Ne,dB as Te,i as qe}from"./index-B2xfjOzF.js";import{C as Ge}from"./ChevronBack-Dd-Qd36m.js";import{U as he}from"./UserMultiple-dBqgjuQS.js";import{_ as ae,a as le}from"./FormItem-Ct9xzd5D.js";import{_ as K}from"./Space-CTHl3IEW.js";import{_ as be}from"./Alert-BDlK74zR.js";import{A as ue}from"./Add-jjALUlFz.js";import{_ as ie}from"./Popconfirm-BozMpYqQ.js";import{a as we,b as ye}from"./Tabs-Bx15qgEn.js";import"./Add-D4qD_bnP.js";import"./debounce-D7Ri4zDg.js";const je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Ke=B({name:"Devices",render:function(f,r){return O(),P("svg",je,r[0]||(r[0]=[w("path",{d:"M10 30H4a2 2 0 0 1-2-2V16a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 16v12h6V16z",fill:"currentColor"},null,-1),w("path",{d:"M28 4H6a2 2 0 0 0-2 2v6h2V6h22v14H14v2h2v4h-2v2h9v-2h-5v-4h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1)]))}}),Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},de=B({name:"Settings",render:function(f,r){return O(),P("svg",Fe,r[0]||(r[0]=[w("path",{d:"M27 16.76V16v-.77l1.92-1.68A2 2 0 0 0 29.3 11l-2.36-4a2 2 0 0 0-1.73-1a2 2 0 0 0-.64.1l-2.43.82a11.35 11.35 0 0 0-1.31-.75l-.51-2.52a2 2 0 0 0-2-1.61h-4.68a2 2 0 0 0-2 1.61l-.51 2.52a11.48 11.48 0 0 0-1.32.75l-2.38-.86A2 2 0 0 0 6.79 6a2 2 0 0 0-1.73 1L2.7 11a2 2 0 0 0 .41 2.51L5 15.24v1.53l-1.89 1.68A2 2 0 0 0 2.7 21l2.36 4a2 2 0 0 0 1.73 1a2 2 0 0 0 .64-.1l2.43-.82a11.35 11.35 0 0 0 1.31.75l.51 2.52a2 2 0 0 0 2 1.61h4.72a2 2 0 0 0 2-1.61l.51-2.52a11.48 11.48 0 0 0 1.32-.75l2.42.82a2 2 0 0 0 .64.1a2 2 0 0 0 1.73-1l2.28-4a2 2 0 0 0-.41-2.51zM25.21 24l-3.43-1.16a8.86 8.86 0 0 1-2.71 1.57L18.36 28h-4.72l-.71-3.55a9.36 9.36 0 0 1-2.7-1.57L6.79 24l-2.36-4l2.72-2.4a8.9 8.9 0 0 1 0-3.13L4.43 12l2.36-4l3.43 1.16a8.86 8.86 0 0 1 2.71-1.57L13.64 4h4.72l.71 3.55a9.36 9.36 0 0 1 2.7 1.57L25.21 8l2.36 4l-2.72 2.4a8.9 8.9 0 0 1 0 3.13L27.57 20z",fill:"currentColor"},null,-1),w("path",{d:"M16 22a6 6 0 1 1 6-6a5.94 5.94 0 0 1-6 6zm0-10a3.91 3.91 0 0 0-4 4a3.91 3.91 0 0 0 4 4a3.91 3.91 0 0 0 4-4a3.91 3.91 0 0 0-4-4z",fill:"currentColor"},null,-1)]))}}),He={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Je=B({name:"TwoFactorAuthentication",render:function(f,r){return O(),P("svg",He,r[0]||(r[0]=[w("path",{d:"M11 23.18l-2-2.001l-1.411 1.41L11 26l6-6l-1.41-1.41L11 23.18z",fill:"currentColor"},null,-1),w("path",{d:"M28 30h-4v-2h4V16h-4V8a4.005 4.005 0 0 0-4-4V2a6.007 6.007 0 0 1 6 6v6h2a2.002 2.002 0 0 1 2 2v12a2.002 2.002 0 0 1-2 2z",fill:"currentColor"},null,-1),w("path",{d:"M20 14h-2V8A6 6 0 0 0 6 8v6H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM8 8a4 4 0 0 1 8 0v6H8zm12 20H4V16h16z",fill:"currentColor"},null,-1)]))}}),Ze={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Qe=B({name:"UserSettings",render:function(f,r){return O(),P("svg",Ze,r[0]||(r[0]=[w("path",{d:"M30 10V8h-2.101a4.968 4.968 0 0 0-.732-1.753l1.49-1.49l-1.414-1.414l-1.49 1.49A4.968 4.968 0 0 0 24 4.101V2h-2v2.101a4.968 4.968 0 0 0-1.753.732l-1.49-1.49l-1.414 1.414l1.49 1.49A4.968 4.968 0 0 0 18.101 8H16v2h2.101a4.968 4.968 0 0 0 .732 1.753l-1.49 1.49l1.414 1.414l1.49-1.49a4.968 4.968 0 0 0 1.753.732V16h2v-2.101a4.968 4.968 0 0 0 1.753-.732l1.49 1.49l1.414-1.414l-1.49-1.49A4.968 4.968 0 0 0 27.899 10zm-7 2a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z",fill:"currentColor"},null,-1),w("path",{d:"M16 30h-2v-5a3.003 3.003 0 0 0-3-3H7a3.003 3.003 0 0 0-3 3v5H2v-5a5.006 5.006 0 0 1 5-5h4a5.006 5.006 0 0 1 5 5z",fill:"currentColor"},null,-1),w("path",{d:"M9 10a3 3 0 1 1-3 3a3 3 0 0 1 3-3m0-2a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1)]))}}),Xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},Ye=B({name:"Checkmark12Regular",render:function(f,r){return O(),P("svg",Xe,r[0]||(r[0]=[w("g",{fill:"none"},[w("path",{d:"M9.854 3.146a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L5 7.293l4.146-4.147a.5.5 0 0 1 .708 0z",fill:"currentColor"})],-1)]))}}),F=xe("org",()=>({info:m()})),We={class:"flex items-center justify-start gap-2"},e0={class:"flex flex-1 justify-center items-center gap-5"},t0={class:"text-2xl flex items-center justify-center gap-1"},o0={key:0,class:"flex items-center gap-1"},n0={class:"flex items-center gap-1"},s0={class:"flex items-center gap-1"},a0=B({__name:"OrgInfo",setup(S){const f=F(),{t:r}=T(),b=ke(),l=Ce(),c=async()=>{const h=l.query.id;if(!h)return;const[y,g]=await Ue({org_id:+h});!y&&(g==null?void 0:g.status)===0&&f.$patch({info:g.data})},U=()=>{b.push({name:"orgList"})};return j(()=>{c()}),(h,y)=>{var I;const g=Y,$=N,L=ze;return O(),P("div",We,[t($,{onClick:U,quaternary:""},{icon:o(()=>[t(g,{size:"26"},{default:o(()=>[t(e(Ge))]),_:1})]),default:o(()=>[w("span",null,p(e(r)("org.backOrgList")),1)]),_:1}),w("div",e0,[w("div",t0,[t(g,{component:e(Q)},null,8,["component"]),k(" "+p((I=e(f).info)==null?void 0:I.organization_name),1)]),e(f).info?(O(),P("div",o0,[t(L,{bordered:!1,size:"tiny",type:"success"},{default:o(()=>{var x;return[k(" ID "+p((x=e(f).info)==null?void 0:x.organization_id),1)]}),_:1}),t(L,{bordered:!1,type:"warning",size:"tiny"},{default:o(()=>{var x;return[w("div",n0,[t(g,{component:e(he)},null,8,["component"]),k(" "+p((x=e(f).info)==null?void 0:x.member_count)+" "+p(e(r)("org.cmember")),1)])]}),_:1}),t(L,{bordered:!1,type:"info",size:"tiny"},{default:o(()=>{var x;return[w("div",s0,[t(g,{component:e(Q)},null,8,["component"]),k(" "+p((x=e(f).info)==null?void 0:x.device_count)+" "+p(e(r)("org.cdevice")),1)])]}),_:1})])):G("",!0)])])}}}),l0={class:"flex justify-end"},i0=B({__name:"InsertMember",props:{type:{}},emits:["success"],setup(S,{expose:f,emit:r}){const b=F(),l=m(),{t:c}=T(),U=r,h=[{label:c("org.admin"),value:"ORG_ADMIN"},{label:c("org.member"),value:"ORG_MEMBER"}],y=m(!1),g=m(!1),$=()=>{g.value=!1,v.value={user_name:void 0,org_role:void 0}},L=()=>{g.value=!0},I=m({user_name:{required:!0,message:c("common.required")},org_role:{required:!0,message:c("common.required")}}),x=m(null),v=m({user_name:void 0,org_role:void 0}),M=()=>{var _;(_=x.value)==null||_.validate(async a=>{var u;if(a)return;const[n,s]=await Me({...v.value,org_id:(u=b.info)==null?void 0:u.organization_id});!n&&(s==null?void 0:s.status)===0&&(U("success"),$())})},C=async()=>{var n;const[_,a]=await Re();!_&&(a==null?void 0:a.status)===0&&(l.value=(n=a.data)==null?void 0:n.map(s=>({...s,label:s.user_name,value:s.user_id})))};return j(()=>{C()}),f({open:L,close:$}),(_,a)=>{const n=le,s=te,u=J,d=ae,i=N,z=K,E=ee,V=W;return O(),q(V,{show:e(g),"onUpdate:show":a[2]||(a[2]=A=>H(g)?g.value=A:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(E,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(d,{ref_key:"formRef",ref:x,model:e(v),rules:e(I),size:"small"},{default:o(()=>[t(n,{label:e(c)("org.orgName"),path:"name"},{default:o(()=>{var A;return[k(p((A=e(b).info)==null?void 0:A.organization_name),1)]}),_:1},8,["label"]),t(n,{label:e(c)("org.username"),path:"user_name"},{default:o(()=>[t(s,{value:e(v).user_name,"onUpdate:value":a[0]||(a[0]=A=>e(v).user_name=A)},null,8,["value"])]),_:1},8,["label"]),t(n,{label:e(c)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(u,{value:e(v).org_role,"onUpdate:value":a[1]||(a[1]=A=>e(v).org_role=A),options:h},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),w("div",l0,[t(z,null,{default:o(()=>[t(i,{onClick:$,loading:e(y)},{default:o(()=>[k(p(e(c)("common.cancel")),1)]),_:1},8,["loading"]),t(i,{type:"primary",onClick:M,loading:e(y)},{default:o(()=>[k(p(e(c)("org.omtab.invite")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),r0={class:"flex justify-end"},c0={class:"my-10 text-center"},u0={class:"flex justify-end"},d0=B({__name:"InsertUser",props:{type:{}},emits:["success"],setup(S,{expose:f,emit:r}){const b=F(),{t:l}=T(),c=r,U=[{label:l("org.admin"),value:"ORG_ADMIN"},{label:l("org.member"),value:"ORG_MEMBER"}],h=m(!1),y=m(!1),g=()=>{y.value=!1,x.value={user_name:void 0,org_role:void 0}},$=()=>{y.value=!0},L=m({user_name:{required:!0,message:l("common.required")},org_role:{required:!0,message:l("common.required")}}),I=m(null),x=m({user_name:void 0,org_role:void 0}),v=m(""),M=m(!1),C=()=>{M.value=!1,v.value=""},_=()=>{var a;(a=I.value)==null||a.validate(async n=>{var d,i;if(n)return;const[s,u]=await Ee({...x.value,org_id:(d=b.info)==null?void 0:d.organization_id});!s&&(u==null?void 0:u.status)===0&&(M.value=!0,v.value=(i=u.data)==null?void 0:i.token,c("success"),g())})};return Oe(()=>{v.value=""}),f({open:$,close:g}),(a,n)=>{const s=le,u=te,d=J,i=ae,z=K,E=ee,V=W,A=be;return O(),P($e,null,[t(V,{show:e(y),"onUpdate:show":n[2]||(n[2]=R=>H(y)?y.value=R:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(E,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(i,{ref_key:"formRef",ref:I,model:e(x),rules:e(L),size:"small"},{default:o(()=>[t(s,{label:e(l)("org.orgName"),path:"name"},{default:o(()=>{var R;return[k(p((R=e(b).info)==null?void 0:R.organization_name),1)]}),_:1},8,["label"]),t(s,{label:e(l)("org.omtab.user"),path:"user_name"},{default:o(()=>[t(u,{value:e(x).user_name,"onUpdate:value":n[0]||(n[0]=R=>e(x).user_name=R)},null,8,["value"])]),_:1},8,["label"]),t(s,{label:e(l)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(d,{value:e(x).org_role,"onUpdate:value":n[1]||(n[1]=R=>e(x).org_role=R),options:U},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),w("div",r0,[t(z,null,{default:o(()=>[t(e(N),{onClick:g,loading:e(h)},{default:o(()=>[k(p(e(l)("common.cancel")),1)]),_:1},8,["loading"]),t(e(N),{type:"primary",onClick:_,loading:e(h)},{default:o(()=>[k(p(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"]),t(V,{show:e(M),"onUpdate:show":n[3]||(n[3]=R=>H(M)?M.value=R:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(E,{bordered:!1,"content-class":"!px-5",style:{width:"500px"}},{default:o(()=>[t(A,{type:"info"},{default:o(()=>[k(p(e(l)("org.omtab.tokenTips")),1)]),_:1}),w("div",c0,p(e(v)),1),w("div",u0,[t(z,null,{default:o(()=>[t(e(N),{type:"primary",onClick:C,loading:e(h)},{default:o(()=>[k(p(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}}),_0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_0)'%20customFrame='url(%23clipPath_0)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_0'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_1'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2049'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(51,49,64)'%20fill-opacity='0.5'%20/%3e%3cg%20id='Stroke%202/edit-write-alt'%20clip-path='url(%23clipPath_1)'%20customFrame='url(%23clipPath_1)'%3e%3crect%20id='Stroke%202/edit-write-alt'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20fill-opacity='0'%20/%3e%3cpath%20id='Vector'%20d='M9.75%2032.25L32.25%2032.25'%20stroke='rgb(108,92,231)'%20stroke-width='2'%20/%3e%3cpath%20id='Vector'%20d='M24.125%2010.375C25.1605%209.3395%2026.8395%209.3395%2027.875%2010.375C28.9105%2011.4106%2028.9105%2013.0895%2027.875%2014.125L15.375%2026.625L10.375%2027.875L11.625%2022.875L24.125%2010.375Z'%20fill-rule='evenodd'%20stroke='rgb(108,92,231)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",m0="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_2)'%20customFrame='url(%23clipPath_2)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_2'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_3'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2048'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,0,0)'%20fill-opacity='0.25'%20/%3e%3cg%20id='Icon%20/%20delete%20user%2024%20Outline'%20clip-path='url(%23clipPath_3)'%20customFrame='url(%23clipPath_3)'%3e%3crect%20id='Icon%20/%20delete%20user%2024%20Outline'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20/%3e%3cpath%20id='Vector'%20d='M22.625%2021.275C23.292%2020.6977%2023.8269%2019.9836%2024.1936%2019.1813C24.5602%2018.379%2024.75%2017.5071%2024.75%2016.625C24.75%2014.9674%2024.0915%2013.3777%2022.9194%2012.2056C21.7473%2011.0335%2020.1576%2010.375%2018.5%2010.375C16.8424%2010.375%2015.2527%2011.0335%2014.0806%2012.2056C12.9085%2013.3777%2012.25%2014.9674%2012.25%2016.625C12.25%2017.5071%2012.4398%2018.379%2012.8064%2019.1813C13.1731%2019.9836%2013.708%2020.6977%2014.375%2021.275C12.6252%2022.0674%2011.1406%2023.3469%2010.0987%2024.9607C9.05687%2026.5745%208.50184%2028.4541%208.5%2030.375C8.5%2030.7065%208.6317%2031.0245%208.86612%2031.2589C9.10054%2031.4933%209.41848%2031.625%209.75%2031.625C10.0815%2031.625%2010.3995%2031.4933%2010.6339%2031.2589C10.8683%2031.0245%2011%2030.7065%2011%2030.375C11%2028.3859%2011.7902%2026.4782%2013.1967%2025.0717C14.6032%2023.6652%2016.5109%2022.875%2018.5%2022.875C20.4891%2022.875%2022.3968%2023.6652%2023.8033%2025.0717C25.2098%2026.4782%2026%2028.3859%2026%2030.375C26%2030.7065%2026.1317%2031.0245%2026.3661%2031.2589C26.6005%2031.4933%2026.9185%2031.625%2027.25%2031.625C27.5815%2031.625%2027.8995%2031.4933%2028.1339%2031.2589C28.3683%2031.0245%2028.5%2030.7065%2028.5%2030.375C28.4982%2028.4541%2027.9431%2026.5745%2026.9013%2024.9607C25.8594%2023.3469%2024.3748%2022.0674%2022.625%2021.275ZM18.5%2020.375C17.7583%2020.375%2017.0333%2020.1551%2016.4166%2019.743C15.7999%2019.331%2015.3193%2018.7453%2015.0355%2018.0601C14.7516%2017.3748%2014.6774%2016.6208%2014.8221%2015.8934C14.9667%2015.166%2015.3239%2014.4978%2015.8483%2013.9734C16.3728%2013.4489%2017.041%2013.0918%2017.7684%2012.9471C18.4958%2012.8024%2019.2498%2012.8766%2019.9351%2013.1605C20.6203%2013.4443%2021.206%2013.9249%2021.618%2014.5416C22.0301%2015.1583%2022.25%2015.8833%2022.25%2016.625C22.25%2017.6196%2021.8549%2018.5734%2021.1516%2019.2767C20.4484%2019.9799%2019.4946%2020.375%2018.5%2020.375ZM32.1375%2021L33.1375%2020.0125C33.254%2019.896%2033.3465%2019.7576%2033.4096%2019.6053C33.4726%2019.453%2033.5051%2019.2898%2033.5051%2019.125C33.5051%2018.9602%2033.4726%2018.797%2033.4096%2018.6447C33.3465%2018.4924%2033.254%2018.354%2033.1375%2018.2375C33.0209%2018.121%2032.8826%2018.0285%2032.7303%2017.9654C32.578%2017.9024%2032.4148%2017.8699%2032.25%2017.8699C32.0852%2017.8699%2031.922%2017.9024%2031.7697%2017.9654C31.6174%2018.0285%2031.479%2018.121%2031.3625%2018.2375L30.375%2019.2375L29.3875%2018.2375C29.2709%2018.121%2029.1326%2018.0285%2028.9803%2017.9654C28.828%2017.9024%2028.6648%2017.8699%2028.5%2017.8699C28.1671%2017.8699%2027.8479%2018.0021%2027.6125%2018.2375C27.4959%2018.354%2027.4035%2018.4924%2027.3404%2018.6447C27.2773%2018.797%2027.2449%2018.9602%2027.2449%2019.125C27.2449%2019.4579%2027.3771%2019.7771%2027.6125%2020.0125L28.6125%2021L27.6125%2021.9875C27.4953%2022.1037%2027.4023%2022.242%2027.3389%2022.3943C27.2754%2022.5466%2027.2427%2022.71%2027.2427%2022.875C27.2427%2023.04%2027.2754%2023.2034%2027.3389%2023.3557C27.4023%2023.508%2027.4953%2023.6463%2027.6125%2023.7625C27.7287%2023.8797%2027.867%2023.9727%2028.0193%2024.0361C28.1716%2024.0996%2028.335%2024.1323%2028.5%2024.1323C28.665%2024.1323%2028.8284%2024.0996%2028.9807%2024.0361C29.133%2023.9727%2029.2713%2023.8797%2029.3875%2023.7625L30.375%2022.7625L31.3625%2023.7625C31.4787%2023.8797%2031.6169%2023.9727%2031.7693%2024.0361C31.9216%2024.0996%2032.085%2024.1323%2032.25%2024.1323C32.415%2024.1323%2032.5784%2024.0996%2032.7307%2024.0361C32.883%2023.9727%2033.0213%2023.8797%2033.1375%2023.7625C33.2547%2023.6463%2033.3476%2023.508%2033.4111%2023.3557C33.4746%2023.2034%2033.5072%2023.04%2033.5072%2022.875C33.5072%2022.71%2033.4746%2022.5466%2033.4111%2022.3943C33.3476%2022.242%2033.2547%2022.1037%2033.1375%2021.9875L32.1375%2021Z'%20fill='rgb(214,48,49)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",p0=B({__name:"OMember",setup(S){const f=m(!1),r=m(!1),b=F(),{t:l}=T(),c=X("insertMemberRef"),U=X("insertUserRef"),h=m(!1),y=m(!1),g=()=>{h.value=!0,Z(()=>{var i;(i=c.value)==null||i.open()})},$=()=>{y.value=!0,Z(()=>{var i;(i=U.value)==null||i.open()})},L=()=>{d()},I=()=>{d()},x=m(),v=async i=>{var V;const[z,E]=await Ie({user_id:i,org_id:(V=b.info)==null?void 0:V.organization_id});!z&&(E==null?void 0:E.status)===0&&d()},M=m(),C=[{label:l("org.admin"),value:"ORG_ADMIN"},{label:l("org.member"),value:"ORG_MEMBER"}],_=i=>{const z=Le[i.value].color;return D("div",{class:"px-1 rounded-full border text-xs inline-block w-[80px] inline-flex items-center justify-center",style:{color:z,borderColor:z}},i.label)},a=(i,z)=>{M.value={userId:i,value:z}},n=i=>{M.value={...M.value,value:i}},s=async()=>{var E,V,A;const[i,z]=await Ve({org_id:(E=b.info)==null?void 0:E.organization_id,user_id:(V=M.value)==null?void 0:V.userId,org_role:(A=M.value)==null?void 0:A.value});!i&&(z==null?void 0:z.status)===0&&(M.value={userId:void 0,value:void 0},d())},u=[{title:"ID",key:"user_id",width:"20%"},{title:l("org.omtab.name"),key:"user_name",width:"25%"},{title:l("org.omtab.role"),key:"org_role",width:"30%",render(i){var z;return((z=M.value)==null?void 0:z.userId)===i.user_id?D("div",{class:"flex items-center gap-2"},[D(J,{options:C,renderLabel:_,defaultValue:M.value.value,onUpdateValue:n,style:{width:"200px"}}),D(N,{size:"small",onClick:()=>M.value={userId:void 0,value:void 0}},{default:()=>"x"}),D(N,{size:"small",onClick:s},{icon:()=>D(Ye)})]):D(_e,{role:i.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:l("org.omtab.options"),key:"options",width:"25%",render(i){return D("div",{class:"flex items-center gap-2"},[D("img",{src:_0,class:"w-[30px] cursor-pointer",onClick:()=>a(i.user_id,i.org_role)}),D(ie,{onPositiveClick:()=>v(i.user_id)},{default:()=>l("groupDetail.parameterManager.removeConfirm"),trigger:()=>D("img",{src:m0,class:"w-[30px] cursor-pointer"})})])}}],d=async()=>{var V;if(f.value)return;f.value=!0;const i=(V=b.info)==null?void 0:V.organization_id;if(!i){f.value=!1;return}const[z,E]=await se({organization_id:i});f.value=!1,!z&&(E==null?void 0:E.status)===0&&(x.value=E.data)};return oe(()=>{var i;return(i=b.info)==null?void 0:i.organization_id},i=>{i&&d()}),j(()=>{const i=me();i!=null&&i.is_sys_admin&&(r.value=!0),d()}),(i,z)=>{const E=K,V=ne;return O(),P("div",null,[t(E,null,{default:o(()=>[t(e(N),{type:"primary",onClick:g},{icon:o(()=>[t(e(ue))]),default:o(()=>[k(" "+p(e(l)("org.omtab.insertMember")),1)]),_:1}),e(r)?(O(),q(e(N),{key:0,type:"primary",onClick:$},{icon:o(()=>[t(e(ue))]),default:o(()=>[k(" "+p(e(l)("org.omtab.insertUser")),1)]),_:1})):G("",!0)]),_:1}),e(h)?(O(),q(i0,{key:0,ref_key:"insertMemberRef",ref:c,type:"insert",onSuccess:L},null,512)):G("",!0),e(y)?(O(),q(d0,{key:1,ref_key:"insertUserRef",ref:U,type:"insert",onSuccess:I},null,512)):G("",!0),t(V,{lading:e(f),class:"mt-5",columns:u,data:e(x)},null,8,["lading","data"])])}}}),f0={class:"flex items-center my-4"},g0={class:"flex items-center gap-2 mr-4"},v0=B({__name:"AuthByMember",setup(S){const f=pe(),{t:r}=T(),b=F(),l=m(!1),c=m(),U=C=>{c.value=C},h=async(C,_)=>{var s;if(l.value)return;l.value=!0;const[a,n]=await ve({org_id:(s=b.info)==null?void 0:s.organization_id,user_id:c.value,device_group_id:_,permission:C?"EDIT":"READ"});!a&&(n==null?void 0:n.status)===0?I():l.value=!1},y=[{title:r("org.oatab.device"),key:"device",render(C){return D("div",{class:""},[D("div",{class:"text-lg"},C.device_group_name),D("div",{class:""},`${r("org.deviceGroup")}: ${C.device_group_id}`)])}},{title:r("org.oatab.auth"),key:"auth",render(C){return D(fe,{railStyle:({checked:_})=>{const a={};return _?a.background="#638EE2":a.background="#7964E3",a},value:C.permission==="EDIT",onUpdateValue:_=>h(_,C.device_group_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],g=m(),$=async()=>{var a;const[C,_]=await se({organization_id:(a=b.info)==null?void 0:a.organization_id});!C&&(_==null?void 0:_.status)===0&&_.data&&(g.value=_.data.map(n=>({...n,label:n.user_name,value:n.user_id})))},L=m(),I=async()=>{var a;l.value=!0;const[C,_]=await De({organization_id:(a=b.info)==null?void 0:a.organization_id,user_id:c.value});l.value=!1,!C&&_&&_.status===0&&(L.value=_.data.device_group_list)},x=async()=>{var a;if(l.value)return;l.value=!0;const[C,_]=await re({org_id:(a=b.info)==null?void 0:a.organization_id,user_id:c.value,permission:"EDIT"});!C&&(_==null?void 0:_.status)===0?I():l.value=!1},v=async()=>{var a;if(l.value)return;l.value=!0;const[C,_]=await re({org_id:(a=b.info)==null?void 0:a.organization_id,user_id:c.value,permission:"READ"});!C&&(_==null?void 0:_.status)===0?I():l.value=!1},M=()=>{};return j(()=>{$()}),oe(c,C=>{C&&I()}),(C,_)=>{const a=be,n=J,s=N,u=ie,d=K,i=ne;return O(),P("div",null,[t(a,{type:"info",class:"my-4"},{default:o(()=>[k(p(e(r)("org.oatab.tips")),1)]),_:1}),w("div",f0,[w("div",g0,[w("div",{style:ge({color:e(f).primaryColor})},p(e(r)("org.oatab.selectUser"))+": ",5),t(n,{style:{width:"200px"},onUpdateValue:U,options:e(g)},null,8,["options"])]),t(d,null,{default:o(()=>[t(u,{onPositiveClick:x,onNegativeClick:M,disabled:!e(c)},{trigger:o(()=>[t(s,{class:"!bg-[#638EE2] text-white",disabled:!e(c)},{default:o(()=>[k(p(e(r)("org.oatab.allDeviceEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[k(" "+p(e(r)("org.oatab.confirmDeviceEdit")),1)]),_:1},8,["disabled"]),t(u,{onPositiveClick:v,onNegativeClick:M,disabled:!e(c)},{trigger:o(()=>[t(s,{class:"!bg-[#7964E3] text-white",disabled:!e(c)},{default:o(()=>[k(p(e(r)("org.oatab.allDeviceRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[k(" "+p(e(r)("org.oatab.confirmDeviceRead")),1)]),_:1},8,["disabled"])]),_:1})]),t(i,{loading:e(l),columns:y,data:e(L)},null,8,["loading","data"])])}}}),h0={class:"flex items-center my-2"},b0={class:"flex items-center gap-2 mr-4"},w0=B({__name:"AuthByDevice",setup(S){const f=pe(),{t:r}=T(),b=F(),l=m(!1),c=m(),U=a=>{c.value=a},h=m(),y=async(a,n)=>{var d;if(l.value)return;l.value=!0;const[s,u]=await ve({org_id:(d=b.info)==null?void 0:d.organization_id,user_id:n,device_group_id:c.value,permission:a?"EDIT":"READ"});!s&&(u==null?void 0:u.status)===0?x():l.value=!1},g=[{title:r("org.oatab.member"),key:"user_name"},{title:r("org.oatab.role"),key:"role",render(a){return D(_e,{role:a.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:r("org.oatab.auth"),key:"auth",render(a){return D(fe,{railStyle:({checked:n})=>{const s={};return n?s.background="#638EE2":s.background="#7964E3",s},value:a.permission==="EDIT",onUpdateValue:n=>y(n,a.user_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],$=m(),L=async()=>{var s;const[a,n]=await Se({organization_id:(s=b.info)==null?void 0:s.organization_id});!a&&(n==null?void 0:n.status)===0&&n.data&&($.value=n.data.map(u=>({...u,label:u.device_group_name,value:u.device_group_id})))},I=m(),x=async()=>{var s;l.value=!0;const[a,n]=await Ae({organization_id:(s=b.info)==null?void 0:s.organization_id,device_group_id:c.value});l.value=!1,!a&&n&&n.status===0&&(I.value=n.data.user_list.map(u=>{var d,i;return{...u,org_role:(i=(d=h.value)==null?void 0:d.find(z=>z.user_id===u.user_id))==null?void 0:i.org_role}}))},v=async()=>{var s;if(l.value)return;l.value=!0;const[a,n]=await ce({org_id:(s=b.info)==null?void 0:s.organization_id,device_group_id:c.value,permission:"EDIT"});!a&&(n==null?void 0:n.status)===0?x():l.value=!1},M=async()=>{var s;if(l.value)return;l.value=!0;const[a,n]=await ce({org_id:(s=b.info)==null?void 0:s.organization_id,device_group_id:c.value,permission:"READ"});!a&&(n==null?void 0:n.status)===0?x():l.value=!1},C=()=>{},_=async()=>{var s;const[a,n]=await se({organization_id:(s=b.info)==null?void 0:s.organization_id});!a&&(n==null?void 0:n.status)===0&&(h.value=n.data)};return j(()=>{L(),_()}),oe(c,a=>{a&&x()}),(a,n)=>{const s=J,u=N,d=ie,i=K,z=ne;return O(),P("div",null,[w("div",h0,[w("div",b0,[w("div",{style:ge({color:e(f).primaryColor})},p(e(r)("org.oatab.selectDevice"))+": ",5),t(s,{style:{width:"200px"},onUpdateValue:U,options:e($)},null,8,["options"])]),t(i,null,{default:o(()=>[t(d,{onPositiveClick:v,onNegativeClick:C,disabled:!e(c)},{trigger:o(()=>[t(u,{class:"!bg-[#638EE2] text-white",disabled:!e(c)},{default:o(()=>[k(p(e(r)("org.oatab.allUserEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[k(" "+p(e(r)("org.oatab.confirmMemberRead")),1)]),_:1},8,["disabled"]),t(d,{onPositiveClick:M,onNegativeClick:C,disabled:!e(c)},{trigger:o(()=>[t(u,{class:"!bg-[#7964E3] text-white",disabled:!e(c)},{default:o(()=>[k(p(e(r)("org.oatab.allUserRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[k(" "+p(e(r)("org.oatab.confirmMemberEdit")),1)]),_:1},8,["disabled"])]),_:1})]),t(z,{loading:e(l),columns:g,data:e(I)},null,8,["loading","data"])])}}}),y0={class:"flex items-center gap-1"},x0={class:"flex items-center gap-1"},k0=B({__name:"OAuth",setup(S){const{t:f}=T();return(r,b)=>{const l=Y,c=ye,U=we;return O(),P("div",null,[t(U,{type:"card","pane-class":"!pl-0"},{default:o(()=>[t(c,{name:"byuser"},{tab:o(()=>[w("div",y0,[t(l,{component:e(Qe)},null,8,["component"]),k(" "+p(e(f)("org.oatab.tab1")),1)])]),default:o(()=>[t(v0)]),_:1}),t(c,{name:"bydevice"},{tab:o(()=>[w("div",x0,[t(l,{component:e(Ke)},null,8,["component"]),k(" "+p(e(f)("org.oatab.tab2")),1)])]),default:o(()=>[t(w0)]),_:1})]),_:1})])}}}),C0={class:"flex justify-end"},z0=B({__name:"OSSModal",props:{isGlobal:{type:Boolean}},emits:["close"],setup(S,{expose:f,emit:r}){const b=S,l=r,c=Be(),U=F(),{t:h}=T(),y=m(!1),g=m(!1),$=()=>{g.value=!1,Z(()=>{setTimeout(()=>{v.value={if_global:void 0,disabled:void 0,organization_id:void 0,oss_server:void 0,oss_bucket:void 0,oss_ak:void 0,oss_sk:void 0}},200)}),l("close")},L=()=>{g.value=!0},I=m({user_id:{required:!0,message:h("common.required")},org_role:{required:!0,message:h("common.required")}}),x=m(null),v=m({if_global:void 0,disabled:void 0,organization_id:void 0,oss_server:void 0,oss_bucket:void 0,oss_ak:void 0,oss_sk:void 0}),M=()=>{var n;(n=x.value)==null||n.validate(async s=>{var i;if(s)return;const[u,d]=await Pe({...v.value,if_global:b.isGlobal,organization_id:(i=U.info)==null?void 0:i.organization_id});!u&&(d==null?void 0:d.status)===0&&(c.success(h("org.ootab.successfully")),$())})},C=n=>{n||$()},_=async()=>{var u;const[n,s]=await Ne({organization_id:(u=U.info)==null?void 0:u.organization_id});if(!n&&(s==null?void 0:s.status)===0){const d=s.data.auth_text,i=typeof d=="string"?JSON.parse(d):d;v.value={...v.value,if_global:void 0,oss_server:i.host,oss_bucket:i.bucket,oss_ak:i.access_key,oss_sk:i.secret_key}}},a=async()=>{const[n,s]=await Te();if(!n&&(s==null?void 0:s.status)===0){const u=s.data.auth_text,d=typeof u=="string"?JSON.parse(u):u;v.value={...v.value,if_global:!0,oss_server:d.host,oss_bucket:d.bucket,oss_ak:d.access_key,oss_sk:d.secret_key}}};return j(()=>{b.isGlobal?a():_()}),f({open:L,close:$}),(n,s)=>{const u=le,d=te,i=ae,z=N,E=K,V=ee,A=W;return O(),q(A,{show:e(g),"onUpdate:show":s[4]||(s[4]=R=>H(g)?g.value=R:null),"close-on-esc":!1,onUpdateShow:C},{default:o(()=>[t(V,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(i,{ref_key:"formRef",ref:x,model:e(v),rules:e(I),size:"small"},{default:o(()=>[e(v).if_global?G("",!0):(O(),q(u,{key:0,label:e(h)("org.orgName"),path:"name"},{default:o(()=>{var R;return[k(p((R=e(U).info)==null?void 0:R.organization_name),1)]}),_:1},8,["label"])),t(u,{label:"oss_server",path:"oss_server"},{default:o(()=>[t(d,{value:e(v).oss_server,"onUpdate:value":s[0]||(s[0]=R=>e(v).oss_server=R)},null,8,["value"])]),_:1}),t(u,{label:"bucket",path:"oss_bucket"},{default:o(()=>[t(d,{value:e(v).oss_bucket,"onUpdate:value":s[1]||(s[1]=R=>e(v).oss_bucket=R)},null,8,["value"])]),_:1}),t(u,{label:"AK",path:"oss_ak"},{default:o(()=>[t(d,{value:e(v).oss_ak,"onUpdate:value":s[2]||(s[2]=R=>e(v).oss_ak=R)},null,8,["value"])]),_:1}),t(u,{label:"SK",path:"oss_sk"},{default:o(()=>[t(d,{value:e(v).oss_sk,"onUpdate:value":s[3]||(s[3]=R=>e(v).oss_sk=R)},null,8,["value"])]),_:1})]),_:1},8,["model","rules"]),w("div",C0,[t(E,null,{default:o(()=>[t(z,{type:"primary",onClick:M,loading:e(y)},{default:o(()=>[k(p(e(h)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),U0=B({__name:"OOrg",setup(S){const f=X("ossRef"),r=m(!1),{t:b}=T(),l=m(!1),c=m(!1),U=(h=!1)=>{l.value=!0,c.value=h,Z(()=>{setTimeout(()=>{var y;(y=f.value)==null||y.open()},100)})};return j(()=>{const h=me();h!=null&&h.is_sys_admin&&(r.value=!0)}),(h,y)=>{const g=N,$=K;return O(),P("div",null,[t($,null,{default:o(()=>[t(g,{type:"primary",onClick:y[0]||(y[0]=()=>U())},{icon:o(()=>[t(e(de))]),default:o(()=>[k(" "+p(e(b)("org.ootab.setOss")),1)]),_:1}),e(r)?(O(),q(g,{key:0,type:"primary",onClick:y[1]||(y[1]=()=>U(!0))},{icon:o(()=>[t(e(de))]),default:o(()=>[k(" "+p(e(b)("org.ootab.setGlobalOss")),1)]),_:1})):G("",!0)]),_:1}),e(l)?(O(),q(z0,{key:0,ref_key:"ossRef",ref:f,"is-global":e(c),onClose:y[2]||(y[2]=L=>l.value=!1)},null,8,["is-global"])):G("",!0)])}}}),M0={class:"flex items-center gap-1"},R0={class:"flex items-center gap-1"},O0={class:"flex items-center gap-1"},T0=B({__name:"OrgView",setup(S){const{t:f}=T(),r=m("member");return(b,l)=>{const c=qe,U=Y,h=ye,y=we;return O(),P("div",null,[t(a0),t(c),t(y,{type:"line",value:e(r),"onUpdate:value":l[0]||(l[0]=g=>H(r)?r.value=g:null),placement:"left","pane-class":"!pl-5"},{default:o(()=>[t(h,{name:"member"},{tab:o(()=>[w("div",M0,[t(U,{component:e(he)},null,8,["component"]),k(" "+p(e(f)("org.omember")),1)])]),default:o(()=>[t(p0)]),_:1}),t(h,{name:"auth"},{tab:o(()=>[w("div",R0,[t(U,{component:e(Je)},null,8,["component"]),k(" "+p(e(f)("org.oauth")),1)])]),default:o(()=>[t(k0)]),_:1}),t(h,{name:"organization"},{tab:o(()=>[w("div",O0,[t(U,{component:e(Q)},null,8,["component"]),k(" "+p(e(f)("org.oorganization")),1)])]),default:o(()=>[t(U0)]),_:1})]),_:1},8,["value"])])}}});export{T0 as default};
