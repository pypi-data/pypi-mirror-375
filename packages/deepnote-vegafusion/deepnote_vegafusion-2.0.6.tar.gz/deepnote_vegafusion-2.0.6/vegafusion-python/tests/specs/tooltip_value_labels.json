{
    "layer": [
        {
            "layer": [
                {
                    "layer": [
                        {
                            "mark": {
                                "clip": true,
                                "type": "bar",
                                "color": "#2266D3",
                                "tooltip": false
                            },
                            "encoding": {
                                "x": {
                                    "sort": "descending",
                                    "type": "nominal",
                                    "field": "product_category",
                                    "scale": {
                                        "type": "linear"
                                    }
                                },
                                "y": {
                                    "axis": {
                                        "format": {
                                            "type": "default",
                                            "decimals": null
                                        },
                                        "formatType": "numberFormatFromNumberType"
                                    },
                                    "type": "quantitative",
                                    "field": "order_total",
                                    "scale": {
                                        "type": "linear"
                                    },
                                    "format": {
                                        "type": "default",
                                        "decimals": null
                                    },
                                    "aggregate": "sum",
                                    "formatType": "numberFormatFromNumberType"
                                },
                                "color": {
                                    "type": "nominal",
                                    "datum": "Orders",
                                    "scale": {
                                        "range": [
                                            "#2266D3"
                                        ],
                                        "domain": [
                                            "Orders"
                                        ]
                                    }
                                },
                                "tooltip": [
                                    {
                                        "type": "quantitative",
                                        "field": "discount",
                                        "aggregate": "sum"
                                    },
                                    {
                                        "type": "quantitative",
                                        "field": "order_total",
                                        "format": {
                                            "type": "default",
                                            "decimals": null
                                        },
                                        "aggregate": "sum"
                                    }
                                ],
                                "xOffset": {
                                    "datum": "series_0"
                                },
                                "opacity": {
                                    "condition": {
                                        "test": {
                                            "and": [
                                                {
                                                    "param": "legend_size_0"
                                                },
                                                {
                                                    "param": "legend_color_0"
                                                },
                                                {
                                                    "param": "interval_selection"
                                                }
                                            ]
                                        },
                                        "value": 1
                                    },
                                    "value": 0.2
                                }
                            },
                            "transform": [],
                            "params": [
                                {
                                    "name": "legend_size_0",
                                    "select": {
                                        "type": "point",
                                        "encodings": [
                                            "size"
                                        ],
                                        "toggle": "true"
                                    },
                                    "bind": "legend"
                                },
                                {
                                    "name": "legend_color_0",
                                    "select": {
                                        "type": "point",
                                        "encodings": [
                                            "color"
                                        ],
                                        "toggle": "true"
                                    },
                                    "bind": "legend"
                                },
                                {
                                    "name": "interval_selection",
                                    "select": {
                                        "type": "interval",
                                        "encodings": [
                                            "x",
                                            "y"
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "mark": {
                                "dx": 0,
                                "dy": -1,
                                "fill": "black",
                                "type": "text",
                                "align": "center",
                                "baseline": "bottom"
                            },
                            "encoding": {
                                "x": {
                                    "sort": "descending",
                                    "type": "nominal",
                                    "field": "product_category",
                                    "scale": {
                                        "type": "linear"
                                    }
                                },
                                "y": {
                                    "axis": {
                                        "format": {
                                            "type": "default",
                                            "decimals": null
                                        },
                                        "formatType": "numberFormatFromNumberType"
                                    },
                                    "type": "quantitative",
                                    "field": "order_total",
                                    "scale": {
                                        "type": "linear"
                                    },
                                    "format": {
                                        "type": "default",
                                        "decimals": null
                                    },
                                    "aggregate": "sum",
                                    "formatType": "numberFormatFromNumberType"
                                },
                                "text": {
                                    "type": "quantitative",
                                    "field": "order_total",
                                    "aggregate": "sum"
                                },
                                "color": {
                                    "type": "nominal",
                                    "datum": "Orders",
                                    "scale": {
                                        "range": [
                                            "#2266D3"
                                        ],
                                        "domain": [
                                            "Orders"
                                        ]
                                    }
                                },
                                "tooltip": [
                                    {
                                        "type": "quantitative",
                                        "field": "discount",
                                        "aggregate": "sum"
                                    },
                                    {
                                        "type": "quantitative",
                                        "field": "order_total",
                                        "format": {
                                            "type": "default",
                                            "decimals": null
                                        },
                                        "aggregate": "sum"
                                    }
                                ],
                                "xOffset": {
                                    "datum": "series_0"
                                }
                            },
                            "transform": [],
                            "params": [
                                {
                                    "name": "legend_size_0_0",
                                    "select": {
                                        "type": "point",
                                        "encodings": [
                                            "size"
                                        ],
                                        "toggle": "true"
                                    },
                                    "bind": "legend"
                                },
                                {
                                    "name": "legend_color_0_0",
                                    "select": {
                                        "type": "point",
                                        "encodings": [
                                            "color"
                                        ],
                                        "toggle": "true"
                                    },
                                    "bind": "legend"
                                }
                            ]
                        }
                    ]
                }
            ],
            "resolve": {
                "scale": {
                    "color": "independent"
                }
            }
        }
    ],
    "title": "",
    "config": {
        "legend": {
            "disable": false
        },
        "axisQuantitative": {
            "tickCount": 5
        },
        "area": {
            "line": true
        },
        "mark": {
            "color": "#2266D3"
        },
        "customFormatTypes": true
    },
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "encoding": {},
    "usermeta": {
        "seriesNames": [
            "Orders"
        ],
        "seriesOrder": [
            0
        ],
        "specSchemaVersion": 2,
        "tooltipDefaultMode": false
    },
    "height": "container",
    "width": "container",
    "autosize": {
        "type": "fit"
    },
    "data": {
        "url": "vegafusion+dataset://sales_data_1kk"
    }
}
