import{S as He,i as Be,s as Me,l as x,C as R,e as $,o as Ae,d as u,p as W,D as Y,c as b,a as y,f as m,g as B,E as q,y as oe,r as H,u as ie,q as T,F as G,k as ce,v as Oe,V as Fe,w as Pe,n as fe,H as xe,I as We,h as _,L as ye,G as pe,K as Re,t as K,b as z,j as Q,Y as Ye,P as De}from"../chunks/FaFaOjVd.js";import"../chunks/IHki7fMi.js";import{W as qe,s as Ee,m as Ge,u as Je,k as Xe}from"../chunks/D3JQ9yZ2.js";import{U as Ke}from"../chunks/Decl6oF0.js";import{g as ze}from"../chunks/D0QH3NT1.js";import{e as he,u as Qe,o as Ze}from"../chunks/-qHmRVoF.js";import{t as ae}from"../chunks/2--pGubN.js";import{f as et}from"../chunks/CRoizkMV.js";import{F as tt}from"../chunks/CU2r43ac.js";import{h as lt,E as rt}from"../chunks/DgQt7EMU.js";import{d as ue,r as st}from"../chunks/I1CDPYOB.js";import"../chunks/BXP-4RTu.js";import{d as at}from"../chunks/BQWQRICs.js";import{g as nt}from"../chunks/JldNL9ai.js";import{g as ot,c as Ie,d as it}from"../chunks/DomGO4xz.js";import{f as ft,g as ct,m as ut,h as Ne}from"../chunks/CUP5ppBP.js";import{E as dt}from"../chunks/CN3FKE3a.js";import{C as mt}from"../chunks/BgH4UeW-.js";import{S as ht}from"../chunks/22dSWuQJ.js";import{P as pt}from"../chunks/CZkcVTod.js";import{S as _t}from"../chunks/g2Ud3Ipo.js";import{T as ke}from"../chunks/N6zyuT7D.js";import{N as vt}from"../chunks/HXJn0CIp.js";import{F as gt}from"../chunks/9BrIEweV.js";import{X as $t}from"../chunks/OBlpjaGw.js";import{S as bt}from"../chunks/CeoDdupG.js";const{document:we}=ze;function Ve(f,e,t){const r=f.slice();return r[31]=e[t],r}function Te(f,e,t){const r=f.slice();return r[34]=e[t],r[36]=t,r}function wt(f){let e,t,r;return t=new _t({props:{className:"size-5"}}),{c(){e=$("div"),R(t.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=y(e);Y(t.$$.fragment,a),a.forEach(u),this.h()},h(){m(e,"class","w-full h-full flex justify-center items-center")},m(l,a){B(l,e,a),q(t,e,null),r=!0},p:fe,i(l){r||(T(t.$$.fragment,l),r=!0)},o(l){H(t.$$.fragment,l),r=!1},d(l){l&&u(e),G(t)}}}function kt(f){let e,t,r,l,a,s,n,o,h,d,D,i,p,g,M,S,j,I,E,N,V,F,P,J;function Z(v){f[14](v)}let ee={title:f[1].t("Delete note?"),$$slots:{default:[yt]},$$scope:{ctx:f}};f[5]!==void 0&&(ee.show=f[5]),e=new mt({props:ee}),xe.push(()=>We(e,"show",Z)),e.$on("confirm",f[15]),o=new ht({props:{className:"size-3.5"}});let L=f[0]&&Se(f);const X=[Et,Dt],A=[];function ne(v,w){return w[0]&16&&(M=null),M==null&&(M=Object.keys(v[4]).length>0),M?0:1}return S=ne(f,[-1,-1]),j=A[S]=X[S](f),V=new ke({props:{content:f[1].t("Create Note"),$$slots:{default:[St]},$$scope:{ctx:f}}}),{c(){R(e.$$.fragment),r=x(),l=$("div"),a=$("div"),s=$("div"),n=$("div"),R(o.$$.fragment),h=x(),d=$("input"),i=x(),L&&L.c(),p=x(),g=$("div"),j.c(),I=x(),E=$("div"),N=$("div"),R(V.$$.fragment),this.h()},l(v){Y(e.$$.fragment,v),r=W(v),l=b(v,"DIV",{class:!0});var w=y(l);a=b(w,"DIV",{class:!0});var U=y(a);s=b(U,"DIV",{class:!0});var c=y(s);n=b(c,"DIV",{class:!0});var k=y(n);Y(o.$$.fragment,k),k.forEach(u),h=W(c),d=b(c,"INPUT",{class:!0,placeholder:!0}),i=W(c),L&&L.l(c),c.forEach(u),U.forEach(u),w.forEach(u),p=W(v),g=b(v,"DIV",{class:!0});var C=y(g);j.l(C),C.forEach(u),I=W(v),E=b(v,"DIV",{class:!0});var O=y(E);N=b(O,"DIV",{class:!0});var te=y(N);Y(V.$$.fragment,te),te.forEach(u),O.forEach(u),this.h()},h(){m(n,"class","self-center ml-1 mr-3"),m(d,"class","w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent"),m(d,"placeholder",D=f[1].t("Search Notes")),m(s,"class","flex flex-1 items-center"),m(a,"class","flex flex-1 items-center w-full space-x-2"),m(l,"class","flex flex-col gap-1 px-3.5"),m(g,"class","px-4.5 @container h-full pt-2"),m(N,"class","flex gap-0.5 justify-end w-full"),m(E,"class","absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end")},m(v,w){q(e,v,w),B(v,r,w),B(v,l,w),_(l,a),_(a,s),_(s,n),q(o,n,null),_(s,h),_(s,d),ye(d,f[0]),_(s,i),L&&L.m(s,null),B(v,p,w),B(v,g,w),A[S].m(g,null),B(v,I,w),B(v,E,w),_(E,N),q(V,N,null),F=!0,P||(J=pe(d,"input",f[16]),P=!0)},p(v,w){const U={};w[0]&2&&(U.title=v[1].t("Delete note?")),w[0]&10|w[1]&64&&(U.$$scope={dirty:w,ctx:v}),!t&&w[0]&32&&(t=!0,U.show=v[5],Re(()=>t=!1)),e.$set(U),(!F||w[0]&2&&D!==(D=v[1].t("Search Notes")))&&m(d,"placeholder",D),w[0]&1&&d.value!==v[0]&&ye(d,v[0]),v[0]?L?(L.p(v,w),w[0]&1&&T(L,1)):(L=Se(v),L.c(),T(L,1),L.m(s,null)):L&&(oe(),H(L,1,1,()=>{L=null}),ie());let c=S;S=ne(v,w),S===c?A[S].p(v,w):(oe(),H(A[c],1,1,()=>{A[c]=null}),ie(),j=A[S],j?j.p(v,w):(j=A[S]=X[S](v),j.c()),T(j,1),j.m(g,null));const k={};w[0]&2&&(k.content=v[1].t("Create Note")),w[1]&64&&(k.$$scope={dirty:w,ctx:v}),V.$set(k)},i(v){F||(T(e.$$.fragment,v),T(o.$$.fragment,v),T(L),T(j),T(V.$$.fragment,v),F=!0)},o(v){H(e.$$.fragment,v),H(o.$$.fragment,v),H(L),H(j),H(V.$$.fragment,v),F=!1},d(v){v&&(u(r),u(l),u(p),u(g),u(I),u(E)),G(e,v),G(o),L&&L.d(),A[S].d(),G(V),P=!1,J()}}}function yt(f){let e,t=f[1].t("This will delete")+"",r,l,a,s=f[3].title+"",n,o;return{c(){e=$("div"),r=K(t),l=x(),a=$("span"),n=K(s),o=K("."),this.h()},l(h){e=b(h,"DIV",{class:!0});var d=y(e);r=z(d,t),l=W(d),a=b(d,"SPAN",{class:!0});var D=y(a);n=z(D,s),D.forEach(u),o=z(d,"."),d.forEach(u),this.h()},h(){m(a,"class","font-semibold"),m(e,"class","text-sm text-gray-500")},m(h,d){B(h,e,d),_(e,r),_(e,l),_(e,a),_(a,n),_(e,o)},p(h,d){d[0]&2&&t!==(t=h[1].t("This will delete")+"")&&Q(r,t),d[0]&8&&s!==(s=h[3].title+"")&&Q(n,s)},d(h){h&&u(e)}}}function Se(f){let e,t,r,l,a,s;return r=new $t({props:{className:"size-3",strokeWidth:"2"}}),{c(){e=$("div"),t=$("button"),R(r.$$.fragment),this.h()},l(n){e=b(n,"DIV",{class:!0});var o=y(e);t=b(o,"BUTTON",{class:!0});var h=y(t);Y(r.$$.fragment,h),h.forEach(u),o.forEach(u),this.h()},h(){m(t,"class","p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"),m(e,"class","self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent")},m(n,o){B(n,e,o),_(e,t),q(r,t,null),l=!0,a||(s=pe(t,"click",f[17]),a=!0)},p:fe,i(n){l||(T(r.$$.fragment,n),l=!0)},o(n){H(r.$$.fragment,n),l=!1},d(n){n&&u(e),G(r),a=!1,s()}}}function Dt(f){let e,t,r,l=f[1].t("No Notes")+"",a,s,n,o=f[1].t("Create your first note by clicking on the plus button below.")+"",h;return{c(){e=$("div"),t=$("div"),r=$("div"),a=K(l),s=x(),n=$("div"),h=K(o),this.h()},l(d){e=b(d,"DIV",{class:!0});var D=y(e);t=b(D,"DIV",{class:!0});var i=y(t);r=b(i,"DIV",{class:!0});var p=y(r);a=z(p,l),p.forEach(u),s=W(i),n=b(i,"DIV",{class:!0});var g=y(n);h=z(g,o),g.forEach(u),i.forEach(u),D.forEach(u),this.h()},h(){m(r,"class","text-xl font-medium text-gray-400 dark:text-gray-600"),m(n,"class","mt-1 text-sm text-gray-300 dark:text-gray-700"),m(t,"class","pb-20 text-center"),m(e,"class","w-full h-full flex flex-col items-center justify-center")},m(d,D){B(d,e,D),_(e,t),_(t,r),_(r,a),_(t,s),_(t,n),_(n,h)},p(d,D){D[0]&2&&l!==(l=d[1].t("No Notes")+"")&&Q(a,l),D[0]&2&&o!==(o=d[1].t("Create your first note by clicking on the plus button below.")+"")&&Q(h,o)},i:fe,o:fe,d(d){d&&u(e)}}}function Et(f){let e,t,r=he(Object.keys(f[4])),l=[];for(let s=0;s<r.length;s+=1)l[s]=Ue(Ve(f,r,s));const a=s=>H(l[s],1,1,()=>{l[s]=null});return{c(){e=$("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var n=y(e);for(let o=0;o<l.length;o+=1)l[o].l(n);n.forEach(u),this.h()},h(){m(e,"class","pb-10")},m(s,n){B(s,e,n);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(s,n){if(n[0]&1082){r=he(Object.keys(s[4]));let o;for(o=0;o<r.length;o+=1){const h=Ve(s,r,o);l[o]?(l[o].p(h,n),T(l[o],1)):(l[o]=Ue(h),l[o].c(),T(l[o],1),l[o].m(e,null))}for(oe(),o=r.length;o<l.length;o+=1)a(o);ie()}},i(s){if(!t){for(let n=0;n<r.length;n+=1)T(l[n]);t=!0}},o(s){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)H(l[n]);t=!1},d(s){s&&u(e),Ye(l,s)}}}function It(f){let e,t,r;return t=new dt({props:{className:"size-5"}}),{c(){e=$("button"),R(t.$$.fragment),this.h()},l(l){e=b(l,"BUTTON",{class:!0,type:!0});var a=y(e);Y(t.$$.fragment,a),a.forEach(u),this.h()},h(){m(e,"class","self-center w-fit text-sm p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),m(e,"type","button")},m(l,a){B(l,e,a),q(t,e,null),r=!0},p:fe,i(l){r||(T(t.$$.fragment,l),r=!0)},o(l){H(t.$$.fragment,l),r=!1},d(l){l&&u(e),G(t)}}}function Nt(f){let e=f[1].t("No content")+"",t;return{c(){t=K(e)},l(r){t=z(r,e)},m(r,l){B(r,t,l)},p(r,l){l[0]&2&&e!==(e=r[1].t("No content")+"")&&Q(t,e)},d(r){r&&u(t)}}}function Vt(f){var r,l;let e=((l=(r=f[34].data)==null?void 0:r.content)==null?void 0:l.md)+"",t;return{c(){t=K(e)},l(a){t=z(a,e)},m(a,s){B(a,t,s)},p(a,s){var n,o;s[0]&16&&e!==(e=((o=(n=a[34].data)==null?void 0:n.content)==null?void 0:o.md)+"")&&Q(t,e)},d(a){a&&u(t)}}}function Tt(f){var l,a,s,n;let e,t=f[1].t("By {{name}}",{name:Ne(((a=(l=f[34])==null?void 0:l.user)==null?void 0:a.name)??((n=(s=f[34])==null?void 0:s.user)==null?void 0:n.email)??f[1].t("Deleted User"))})+"",r;return{c(){e=$("div"),r=K(t),this.h()},l(o){e=b(o,"DIV",{class:!0});var h=y(e);r=z(h,t),h.forEach(u),this.h()},h(){m(e,"class","shrink-0 text-gray-500")},m(o,h){B(o,e,h),_(e,r)},p(o,h){var d,D,i,p;h[0]&18&&t!==(t=o[1].t("By {{name}}",{name:Ne(((D=(d=o[34])==null?void 0:d.user)==null?void 0:D.name)??((p=(i=o[34])==null?void 0:i.user)==null?void 0:p.email)??o[1].t("Deleted User"))})+"")&&Q(r,t)},d(o){o&&u(e)}}}function Ce(f,e){var ne,v;let t,r,l,a,s,n,o=e[34].title+"",h,d,D,i,p,g,M,S,j,I=ue(e[34].updated_at/1e6).fromNow()+"",E,N,V,F,P;function J(...w){return e[18](e[34],...w)}function Z(){return e[19](e[34])}function ee(){return e[20](e[34])}i=new vt({props:{onDownload:J,onCopyLink:Z,onDelete:ee,$$slots:{default:[It]},$$scope:{ctx:e}}});function L(w,U){var c,k;return(k=(c=w[34].data)==null?void 0:c.content)!=null&&k.md?Vt:Nt}let X=L(e),A=X(e);return V=new ke({props:{content:((v=(ne=e[34])==null?void 0:ne.user)==null?void 0:v.email)??e[1].t("Deleted User"),className:"flex shrink-0",placement:"top-start",$$slots:{default:[Tt]},$$scope:{ctx:e}}}),{key:f,first:null,c(){t=$("div"),r=$("div"),l=$("a"),a=$("div"),s=$("div"),n=$("div"),h=K(o),d=x(),D=$("div"),R(i.$$.fragment),p=x(),g=$("div"),A.c(),M=x(),S=$("div"),j=$("div"),E=K(I),N=x(),R(V.$$.fragment),this.h()},l(w){t=b(w,"DIV",{class:!0});var U=y(t);r=b(U,"DIV",{class:!0});var c=y(r);l=b(c,"A",{href:!0,class:!0});var k=y(l);a=b(k,"DIV",{class:!0});var C=y(a);s=b(C,"DIV",{class:!0});var O=y(s);n=b(O,"DIV",{class:!0});var te=y(n);h=z(te,o),te.forEach(u),d=W(O),D=b(O,"DIV",{});var se=y(D);Y(i.$$.fragment,se),se.forEach(u),O.forEach(u),p=W(C),g=b(C,"DIV",{class:!0});var le=y(g);A.l(le),le.forEach(u),C.forEach(u),M=W(k),S=b(k,"DIV",{class:!0});var re=y(S);j=b(re,"DIV",{});var de=y(j);E=z(de,I),de.forEach(u),N=W(re),Y(V.$$.fragment,re),re.forEach(u),k.forEach(u),c.forEach(u),U.forEach(u),this.h()},h(){m(n,"class","font-semibold line-clamp-1 capitalize"),m(s,"class","flex items-center gap-2 self-center mb-1 justify-between"),m(g,"class","text-xs text-gray-500 dark:text-gray-500 mb-3 line-clamp-3 min-h-10"),m(a,"class","flex-1"),m(S,"class","text-xs px-0.5 w-full flex justify-between items-center"),m(l,"href",F=`/notes/${e[34].id}`),m(l,"class","w-full -translate-y-0.5 flex flex-col justify-between"),m(r,"class","flex flex-1 space-x-4 cursor-pointer w-full"),m(t,"class","flex space-x-4 cursor-pointer w-full px-4.5 py-4 bg-gray-50 dark:bg-gray-850 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl transition"),this.first=t},m(w,U){B(w,t,U),_(t,r),_(r,l),_(l,a),_(a,s),_(s,n),_(n,h),_(s,d),_(s,D),q(i,D,null),_(a,p),_(a,g),A.m(g,null),_(l,M),_(l,S),_(S,j),_(j,E),_(S,N),q(V,S,null),P=!0},p(w,U){var C,O;e=w,(!P||U[0]&16)&&o!==(o=e[34].title+"")&&Q(h,o);const c={};U[0]&24&&(c.onDownload=J),U[0]&18&&(c.onCopyLink=Z),U[0]&56&&(c.onDelete=ee),U[1]&64&&(c.$$scope={dirty:U,ctx:e}),i.$set(c),X===(X=L(e))&&A?A.p(e,U):(A.d(1),A=X(e),A&&(A.c(),A.m(g,null))),(!P||U[0]&16)&&I!==(I=ue(e[34].updated_at/1e6).fromNow()+"")&&Q(E,I);const k={};U[0]&18&&(k.content=((O=(C=e[34])==null?void 0:C.user)==null?void 0:O.email)??e[1].t("Deleted User")),U[0]&18|U[1]&64&&(k.$$scope={dirty:U,ctx:e}),V.$set(k),(!P||U[0]&16&&F!==(F=`/notes/${e[34].id}`))&&m(l,"href",F)},i(w){P||(T(i.$$.fragment,w),T(V.$$.fragment,w),P=!0)},o(w){H(i.$$.fragment,w),H(V.$$.fragment,w),P=!1},d(w){w&&u(t),G(i),A.d(),G(V)}}}function Ue(f){let e,t=f[1].t(f[31])+"",r,l,a,s=[],n=new Map,o,h,d=he(f[4][f[31]]);const D=i=>i[34].id;for(let i=0;i<d.length;i+=1){let p=Te(f,d,i),g=D(p);n.set(g,s[i]=Ce(g,p))}return{c(){e=$("div"),r=K(t),l=x(),a=$("div");for(let i=0;i<s.length;i+=1)s[i].c();o=x(),this.h()},l(i){e=b(i,"DIV",{class:!0});var p=y(e);r=z(p,t),p.forEach(u),l=W(i),a=b(i,"DIV",{class:!0});var g=y(a);for(let M=0;M<s.length;M+=1)s[M].l(g);o=W(g),g.forEach(u),this.h()},h(){m(e,"class","w-full text-xs text-gray-500 dark:text-gray-500 font-medium pb-2.5"),m(a,"class","mb-5 gap-2.5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5")},m(i,p){B(i,e,p),_(e,r),B(i,l,p),B(i,a,p);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(a,null);_(a,o),h=!0},p(i,p){(!h||p[0]&18)&&t!==(t=i[1].t(i[31])+"")&&Q(r,t),p[0]&1082&&(d=he(i[4][i[31]]),oe(),s=Qe(s,p,D,1,i,d,n,a,Ze,Ce,o,Te),ie())},i(i){if(!h){for(let p=0;p<d.length;p+=1)T(s[p]);h=!0}},o(i){for(let p=0;p<s.length;p+=1)H(s[p]);h=!1},d(i){i&&(u(e),u(l),u(a));for(let p=0;p<s.length;p+=1)s[p].d()}}}function St(f){let e,t,r,l,a;return t=new pt({props:{className:"size-4.5",strokeWidth:"2.5"}}),{c(){e=$("button"),R(t.$$.fragment),this.h()},l(s){e=b(s,"BUTTON",{class:!0,type:!0});var n=y(e);Y(t.$$.fragment,n),n.forEach(u),this.h()},h(){m(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"),m(e,"type","button")},m(s,n){B(s,e,n),q(t,e,null),r=!0,l||(a=pe(e,"click",f[21]),l=!0)},p:fe,i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){H(t.$$.fragment,s),r=!1},d(s){s&&u(e),G(t),l=!1,a()}}}function Ct(f){let e,t,r,l,a,s,n,o;we.title=e=`
		`+f[1].t("Notes")+" • "+f[7]+`
	`,r=new gt({props:{show:f[6]}});const h=[kt,wt],d=[];function D(i,p){return i[2]?0:1}return s=D(f),n=d[s]=h[s](f),{c(){t=x(),R(r.$$.fragment),l=x(),a=$("div"),n.c(),this.h()},l(i){Ae("svelte-16ir3op",we.head).forEach(u),t=W(i),Y(r.$$.fragment,i),l=W(i),a=b(i,"DIV",{id:!0,class:!0});var g=y(a);n.l(g),g.forEach(u),this.h()},h(){m(a,"id","notes-container"),m(a,"class","w-full min-h-full h-full")},m(i,p){B(i,t,p),q(r,i,p),B(i,l,p),B(i,a,p),d[s].m(a,null),o=!0},p(i,p){(!o||p[0]&130)&&e!==(e=`
		`+i[1].t("Notes")+" • "+i[7]+`
	`)&&(we.title=e);const g={};p[0]&64&&(g.show=i[6]),r.$set(g);let M=s;s=D(i),s===M?d[s].p(i,p):(oe(),H(d[M],1,1,()=>{d[M]=null}),ie(),n=d[s],n?n.p(i,p):(n=d[s]=h[s](i),n.c()),T(n,1),n.m(a,null))},i(i){o||(T(r.$$.fragment,i),T(n),o=!0)},o(i){H(r.$$.fragment,i),H(n),o=!1},d(i){i&&(u(t),u(l),u(a)),G(r,i),d[s].d()}}}function Ut(f,e,t){let r,l;ce(f,qe,c=>t(7,l=c));const{saveAs:a}=et;ue.extend(at),ue.extend(st);async function s(c){for(const k of c)try{ue.locale(k);break}catch(C){`${k}`}}const n=Oe("i18n");ce(f,n,c=>t(1,r=c));let o=!1,h="",d=[],D=null,i=null,p={},g=!1;const M=c=>{if(!Array.isArray(c))return{};const k={};for(const C of c){const O=ct(C.updated_at/1e9);k[O]||(k[O]=[]),k[O].push({...C,timeRange:O})}return k},S=async()=>{t(12,d=await ot(localStorage.token,!0)),t(13,D=new tt(d,{keys:["title"]}))},j=async()=>{const c=await Ie(localStorage.token,{title:ue().format("YYYY-MM-DD"),data:{content:{json:null,html:"",md:""}},meta:null,access_control:{}}).catch(k=>(ae.error(`${k}`),null));c&&nt(`/notes/${c.id}`)},I=async c=>{if(c==="md"){const k=new Blob([i.data.content.md],{type:"text/markdown"});a(k,`${i.title}.md`)}else c==="pdf"&&await E(i)},E=async c=>{var k,C;try{const se=((C=(k=c.data)==null?void 0:k.content)==null?void 0:C.html)??"";let le;se instanceof HTMLElement?le=se:(le=document.createElement("div"),le.innerHTML=se,document.body.appendChild(le));const re=await lt(le,{useCORS:!0,scale:2,width:1024,windowWidth:1024,windowHeight:1400});se instanceof HTMLElement||document.body.removeChild(le);const de=re.toDataURL("image/jpeg",.7),me=new rt("p","mm","a4"),_e=210,ve=297,ge=re.height*_e/re.width;let $e=ge,be=0;for(me.addImage(de,"JPEG",0,be,_e,ge),$e-=ve;$e>0;)be-=ve,me.addPage(),me.addImage(de,"JPEG",0,be,_e,ge),$e-=ve;me.save(`${c.title}.pdf`)}catch(O){ae.error(`${O}`)}},N=async c=>{await it(localStorage.token,c).catch(C=>(ae.error(`${C}`),null))&&S()},V=async c=>{for(const k of c){if(k.type!=="text/markdown"){ae.error(r.t("Only markdown files are allowed"));return}const C=new FileReader;C.onload=async O=>{const te=O.target.result;let se=k.name.replace(/\.md$/,"");if(typeof te!="string"){ae.error(r.t("Invalid file content"));return}await Ie(localStorage.token,{title:se,data:{content:{json:null,html:ut.parse(te??""),md:te}},meta:null,access_control:{}}).catch(re=>(ae.error(`${re}`),null))&&S()},C.readAsText(k)}};let F=!1;const P=c=>{var k,C;c.preventDefault(),(C=(k=c.dataTransfer)==null?void 0:k.types)!=null&&C.includes("Files")?t(6,F=!0):t(6,F=!1)},J=()=>{t(6,F=!1)},Z=async c=>{var k,C;if(c.preventDefault(),(k=c.dataTransfer)!=null&&k.files){const O=Array.from((C=c.dataTransfer)==null?void 0:C.files);O&&O.length>0&&V(O)}t(6,F=!1)};Fe(()=>{const c=document.getElementById("notes-container");c&&(c==null||c.removeEventListener("dragover",P),c==null||c.removeEventListener("drop",Z),c==null||c.removeEventListener("dragleave",J))}),Pe(async()=>{await S(),t(2,o=!0);const c=document.getElementById("notes-container");c==null||c.addEventListener("dragover",P),c==null||c.addEventListener("drop",Z),c==null||c.addEventListener("dragleave",J)});function ee(c){g=c,t(5,g)}const L=()=>{N(i.id),t(5,g=!1)};function X(){h=this.value,t(0,h)}const A=()=>{t(0,h="")},ne=(c,k)=>{t(3,i=c),I(k)},v=async c=>{const k=window.location.origin;await ft(`${k}/notes/${c.id}`)?ae.success(r.t("Copied link to clipboard")):ae.error(r.t("Failed to copy link"))},w=c=>{t(3,i=c),t(5,g=!0)},U=async()=>{j()};return f.$$.update=()=>{f.$$.dirty[0]&2&&s(r.languages),f.$$.dirty[0]&12289&&D&&t(4,p=M(h?D.search(h).map(c=>c.item):d))},[h,r,o,i,p,g,F,l,n,j,I,N,d,D,ee,L,X,A,ne,v,w,U]}class jt extends He{constructor(e){super(),Be(this,e,Ut,Ct,Me,{},null,[-1,-1])}}function je(f){let e,t,r,l;return t=new ke({props:{content:f[0]?f[2].t("Close Sidebar"):f[2].t("Open Sidebar"),interactive:!0,$$slots:{default:[Lt]},$$scope:{ctx:f}}}),{c(){e=$("div"),R(t.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var s=y(e);Y(t.$$.fragment,s),s.forEach(u),this.h()},h(){m(e,"class",r=(f[0]?"md:hidden":"")+" flex flex-none items-center")},m(a,s){B(a,e,s),q(t,e,null),l=!0},p(a,s){const n={};s&5&&(n.content=a[0]?a[2].t("Close Sidebar"):a[2].t("Open Sidebar")),s&129&&(n.$$scope={dirty:s,ctx:a}),t.$set(n),(!l||s&1&&r!==(r=(a[0]?"md:hidden":"")+" flex flex-none items-center"))&&m(e,"class",r)},i(a){l||(T(t.$$.fragment,a),l=!0)},o(a){H(t.$$.fragment,a),l=!1},d(a){a&&u(e),G(t)}}}function Lt(f){let e,t,r,l,a,s;return r=new bt({}),{c(){e=$("button"),t=$("div"),R(r.$$.fragment),this.h()},l(n){e=b(n,"BUTTON",{id:!0,class:!0});var o=y(e);t=b(o,"DIV",{class:!0});var h=y(t);Y(r.$$.fragment,h),h.forEach(u),o.forEach(u),this.h()},h(){m(t,"class","self-center p-1.5"),m(e,"id","sidebar-toggle-button"),m(e,"class","cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition cursor-")},m(n,o){B(n,e,o),_(e,t),q(r,t,null),l=!0,a||(s=pe(e,"click",f[5]),a=!0)},p:fe,i(n){l||(T(r.$$.fragment,n),l=!0)},o(n){H(r.$$.fragment,n),l=!1},d(n){n&&u(e),G(r),a=!1,s()}}}function Le(f){var r;let e,t;return e=new Ke({props:{className:"max-w-[240px]",role:(r=f[3])==null?void 0:r.role,help:!0,$$slots:{default:[Ht]},$$scope:{ctx:f}}}),e.$on("show",f[6]),{c(){R(e.$$.fragment)},l(l){Y(e.$$.fragment,l)},m(l,a){q(e,l,a),t=!0},p(l,a){var n;const s={};a&8&&(s.role=(n=l[3])==null?void 0:n.role),a&136&&(s.$$scope={dirty:a,ctx:l}),e.$set(s)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){G(e,l)}}}function Ht(f){let e,t,r,l;return{c(){e=$("button"),t=$("div"),r=$("img"),this.h()},l(a){e=b(a,"BUTTON",{class:!0,"aria-label":!0});var s=y(e);t=b(s,"DIV",{class:!0});var n=y(t);r=b(n,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),n.forEach(u),s.forEach(u),this.h()},h(){var a;De(r.src,l=(a=f[3])==null?void 0:a.profile_image_url)||m(r,"src",l),m(r,"class","size-6 object-cover rounded-full"),m(r,"alt","User profile"),m(r,"draggable","false"),m(t,"class","self-center"),m(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","User Menu")},m(a,s){B(a,e,s),_(e,t),_(t,r)},p(a,s){var n;s&8&&!De(r.src,l=(n=a[3])==null?void 0:n.profile_image_url)&&m(r,"src",l)},d(a){a&&u(e)}}}function Bt(f){let e,t,r,l,a,s,n,o,h=f[2].t("Notes")+"",d,D,i,p,g,M,S,j,I=f[1]&&je(f),E=f[3]!==void 0&&f[3]!==null&&Le(f);return M=new jt({}),{c(){e=$("div"),t=$("nav"),r=$("div"),I&&I.c(),l=x(),a=$("div"),s=$("div"),n=$("div"),o=$("a"),d=K(h),D=x(),i=$("div"),E&&E.c(),p=x(),g=$("div"),R(M.$$.fragment),this.h()},l(N){e=b(N,"DIV",{class:!0});var V=y(e);t=b(V,"NAV",{class:!0});var F=y(t);r=b(F,"DIV",{class:!0});var P=y(r);I&&I.l(P),l=W(P),a=b(P,"DIV",{class:!0});var J=y(a);s=b(J,"DIV",{class:!0});var Z=y(s);n=b(Z,"DIV",{class:!0});var ee=y(n);o=b(ee,"A",{class:!0,href:!0});var L=y(o);d=z(L,h),L.forEach(u),ee.forEach(u),Z.forEach(u),D=W(J),i=b(J,"DIV",{class:!0});var X=y(i);E&&E.l(X),X.forEach(u),J.forEach(u),P.forEach(u),F.forEach(u),p=W(V),g=b(V,"DIV",{class:!0});var A=y(g);Y(M.$$.fragment,A),A.forEach(u),V.forEach(u),this.h()},h(){m(o,"class","min-w-fit transition"),m(o,"href","/notes"),m(n,"class","flex gap-1 scrollbar-none overflow-x-auto w-fit text-center text-sm font-medium bg-transparent py-1 touch-auto pointer-events-auto"),m(s,"class",""),m(i,"class","self-center flex items-center gap-1"),m(a,"class","ml-2 py-0.5 self-center flex items-center justify-between w-full"),m(r,"class","flex items-center"),m(t,"class","px-2 pt-1.5 backdrop-blur-xl w-full drag-region"),m(g,"class","pb-1 flex-1 max-h-full overflow-y-auto @container"),m(e,"class",S="flex flex-col w-full h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(f[0]?"md:max-w-[calc(100%-260px)]":"")+" max-w-full")},m(N,V){B(N,e,V),_(e,t),_(t,r),I&&I.m(r,null),_(r,l),_(r,a),_(a,s),_(s,n),_(n,o),_(o,d),_(a,D),_(a,i),E&&E.m(i,null),_(e,p),_(e,g),q(M,g,null),j=!0},p(N,[V]){N[1]?I?(I.p(N,V),V&2&&T(I,1)):(I=je(N),I.c(),T(I,1),I.m(r,l)):I&&(oe(),H(I,1,1,()=>{I=null}),ie()),(!j||V&4)&&h!==(h=N[2].t("Notes")+"")&&Q(d,h),N[3]!==void 0&&N[3]!==null?E?(E.p(N,V),V&8&&T(E,1)):(E=Le(N),E.c(),T(E,1),E.m(i,null)):E&&(oe(),H(E,1,1,()=>{E=null}),ie()),(!j||V&1&&S!==(S="flex flex-col w-full h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(N[0]?"md:max-w-[calc(100%-260px)]":"")+" max-w-full"))&&m(e,"class",S)},i(N){j||(T(I),T(E),T(M.$$.fragment,N),j=!0)},o(N){H(I),H(E),H(M.$$.fragment,N),j=!1},d(N){N&&u(e),I&&I.d(),E&&E.d(),G(M)}}}function Mt(f,e,t){let r,l,a,s;ce(f,Ee,d=>t(0,r=d)),ce(f,Ge,d=>t(1,l=d)),ce(f,Je,d=>t(3,s=d));const n=Oe("i18n");return ce(f,n,d=>t(2,a=d)),[r,l,a,s,n,()=>{Ee.set(!r)},d=>{d.detail==="archived-chat"&&Xe.set(!0)}]}class cl extends He{constructor(e){super(),Be(this,e,Mt,Bt,Me,{})}}export{cl as component};
//# sourceMappingURL=24.mRrEx66q.js.map
