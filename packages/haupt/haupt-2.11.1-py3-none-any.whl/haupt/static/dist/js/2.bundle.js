"use strict";(self.webpackChunk_polyaxon_app=self.webpackChunk_polyaxon_app||[]).push([[919],{15300:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se,mapDispatchToProps:()=>re,mapStateToProps:()=>le});var a=n(79824),l=n(86090),r=n(87374),s=n(41594),i=n(50377),o=n(19393),c=n(16825),u=n(21435),m=n(9165),E=n(45667),p=n(99669),g=n(34051),A=n(56161),d=n(89114),h=n(43269),S=n(10707),v=n(2403),_=n(41191),P=n(92259),N=n(3410),w=n(61613),L=n(17204),F=n(49557),y=n(90349),T=n(96529),C=n(4540),M=n(9962),f=n(29580),z=n(71096),R=n(91833),b=n(86147),O=n(85755),U=n(9440),I=n(91100),x=n(68266);class H extends s.Component{componentDidUpdate(){this.props.success&&this.props.onClose()}render(){const e=this.props.organization?.plan||{},t={email:e.email||"",fullname:e.fullname||""},n=s.createElement(z.l1,{initialValues:t,onSubmit:(e,t)=>{this.props.onPost(e),t.setTouched({})}},(e=>s.createElement(R.l,{error:(0,x.GX)(this.props.errors),isInvalid:(0,x.yF)(this.props.errors)},s.createElement("form",{onSubmit:e.handleSubmit},s.createElement(x.LP,{props:e,errors:this.props.errors,fieldName:"email",compressed:!1,fullWidth:!0}),s.createElement(x.A_,{props:e,errors:this.props.errors,fieldName:"fullname",label:"The fullname of the company",compressed:!1,fullWidth:!0}),s.createElement(c.$,null),s.createElement(g.ZQ,{justifyContent:"flexEnd",gutterSize:"none"},s.createElement(h.Fo,{type:"submit",fill:!0,size:"s",color:"primary",disabled:this.props.isLoading},"Save"))))));return s.createElement(b.u,{onClose:this.props.onClose},s.createElement(O.v,null,s.createElement(U.d,null,"Billing details")),s.createElement(I.u,null,n))}}var B=n(36377),k=n(10930),D=n(41619),$=n(84525);const Q=(0,l.y)((0,a.Ng)((function(e,t){const n=t.match.params.owner,a=(0,k.R)(e.loadingIndicators.organizations.byUuids,n,B.k.PLAN);return{isLoading:a,errors:(0,D.x)(e.alerts.organizations.byUuids,a,n,B.k.PLAN),success:(0,T.Hn)((0,$.d)(e.alerts.organizations.byUuids,a,n,B.k.PLAN)),organization:e.organizations.byUuids[n].data,onClose:t.onClose}}),(function(e,t){return{onPost:n=>e(r.mD.postOrganizationPlan(t.match.params.owner,"billing_details",n))}}))(H));var Y=n(80243),G=n(15465);class j extends s.Component{componentDidMount(){this.props.onPost()}render(){const e=this.props.organization?.plan||{};if(!e.key||!r.AA.IS_CLOUD)return null;const t=(0,G.loadStripe)(e.key);return s.createElement(Y.Elements,{stripe:t},this.props.children)}}const V=(0,l.y)((0,a.Ng)((function(e,t){const n=t.match.params.owner,a=(0,k.R)(e.loadingIndicators.organizations.byUuids,n,B.k.PLAN);return{isLoading:a,errors:(0,D.x)(e.alerts.organizations.byUuids,a,n,B.k.PLAN),success:(0,T.Hn)((0,$.d)(e.alerts.organizations.byUuids,a,n,B.k.PLAN)),organization:e.organizations.byUuids[n].data}}),(function(e,t){return{onPost:()=>e(r.mD.postOrganizationPlan(t.match.params.owner,"billing_key",{}))}}))(j)),J=e=>{const t=(0,Y.useStripe)(),n=(0,Y.useElements)(),[a,l]=s.useState(!1),[r,i]=s.useState("");if(!t||!n)return null;const o={style:{base:{color:(0,T.cP)(e.theme)?"#fff":"#000",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px"}}};return s.createElement(R.l,{style:{minWidth:500}},r&&s.createElement("div",null,s.createElement(_.zO,{title:"Sorry, there was an error",color:"danger",iconType:"alert",size:"s"}),s.createElement(c.$,null)),s.createElement("form",{onSubmit:a=>{a.preventDefault(),l(!0),t.createPaymentMethod({type:"card",card:n.getElement(Y.CardElement)}).then((({paymentMethod:t})=>{t&&t.id&&e.onPost({method:t.id})})).catch((e=>{console.log("got error",e)}))}},s.createElement(Y.CardElement,{options:o,onChange:e=>{e.error?i(e.error.message):i("")}}),s.createElement(c.$,{size:"s"}),"Payments are processed securely through"," ",s.createElement(w.z,{href:"https://stripe.com/",external:!0},"Stripe"),s.createElement(c.$,null),s.createElement(g.ZQ,{justifyContent:"flexEnd",gutterSize:"none"},s.createElement(h.Fo,{type:"submit",fill:!0,size:"s",color:"primary",disabled:!t||a||""!==r},"Save"))))};class K extends s.Component{componentDidMount(){this.props.current&&this.props.onPost({})}componentDidUpdate(){const e=this.props.organization?.plan||{};this.props.success&&"billing_method"===e.handler&&!this.props.current&&this.props.onClose()}render(){const e=this.props.organization?.plan||{};return s.createElement(b.u,{onClose:this.props.onClose},s.createElement(O.v,null,s.createElement(U.d,null,"Payment method")),s.createElement(I.u,null,this.props.errors&&s.createElement("div",null,s.createElement(_.zO,{title:"Sorry, there was an error",color:"danger",iconType:"alert",size:"s"},s.createElement("p",null,this.props.errors)),s.createElement(c.$,null)),this.props.current?(()=>{const t=(e.payment_method||{}).card||{};return s.createElement(g.ZQ,{justifyContent:"spaceAround",gutterSize:"none"},s.createElement(c.$,{size:"xxl"}),Object.keys(t).length&&s.createElement(P.U,{size:"m"},s.createElement("strong",null,t.brand)," **** ",s.createElement("strong",null,t.last4)),s.createElement(c.$,{size:"xxl"}))})():s.createElement(V,null,s.createElement(J,{onPost:e=>this.props.onPost(e),theme:this.props.theme}))))}}const W=(0,l.y)((0,a.Ng)((function(e,t){const n=t.match.params.owner,a=(0,k.R)(e.loadingIndicators.organizations.byUuids,n,B.k.PLAN);return{isLoading:a,errors:(0,D.x)(e.alerts.organizations.byUuids,a,n,B.k.PLAN),success:(0,T.Hn)((0,$.d)(e.alerts.organizations.byUuids,a,n,B.k.PLAN)),theme:(0,T.O4)(e.users.currentUser),current:t.current,organization:e.organizations.byUuids[n].data,onClose:t.onClose}}),(function(e,t){return{onPost:n=>e(r.mD.postOrganizationPlan(t.match.params.owner,"billing_method",n))}}))(K));class Z extends s.Component{constructor(e){super(e),this.state={isEditing:!0}}render(){const e=T.vw.getQuotaFeature(this.props.orgPlan,T.vw.PLAN_MEMBERS_QUOTA),t=T.vw.getQuotaFeature(this.props.orgPlan,T.vw.PLAN_MEMBERS_RO_QUOTA),n=T.vw.getQuotaFeature(this.props.orgPlan,T.vw.PLAN_AGENTS_QUOTA),a=T.vw.getKeyFeature(this.props.orgPlan,T.vw.PLAN_KEYS_NAME),l=T.vw.getKeyFeature(this.props.orgPlan,T.vw.PLAN_KEYS_CYCLE),r=T.vw.getKeyFeature(this.props.orgPlan,T.vw.PLAN_KEYS_USAGE)||"",i=T.vw.hasFlagFeature(this.props.orgPlan,T.vw.PLAN_CAN_ACTIVATE_COUPON),o=this.props.orgPlan.new_price,u=s=>s.cycle===l&&s.plan===a&&s.usage===r&&parseInt(s.seats,10)===e&&parseInt(s.seats_ro,10)===t&&parseInt(s.agents,10)===n,m=e=>!!this.props.isLoading||!T.vw.ShouldConfirmPayment(this.props.orgPlan.status)&&u(e),E=e=>{if(this.props.isLoading)return!0;const t=(0,T.gD)(e.confirmation)||o!==parseInt(e.confirmation,10);return T.vw.ShouldConfirmPayment(this.props.orgPlan.status)?t:!!u(e)||t},p={cycle:l||T.vw.PLAN_KEYS_PRICE_MONTHLY,plan:a||T.vw.PLAN_NAMES_STARTER,usage:r,seats:e||3,seats_ro:t||0,agents:n||1},S=e=>{const t={};t.cycle=e.cycle,t.plan=e.plan,t.usage=e.usage,t.seats=parseInt(e.seats,10),t.seats_ro=parseInt(e.seats_ro,10),t.agents=parseInt(e.agents,10),e.coupon&&(t.coupon=e.coupon),this.state.isEditing?this.setState({isEditing:!1},(()=>this.props.onPreview(t))):this.props.onPost(t)},v=e=>e===T.vw.PLAN_NAMES_STARTER?3:e===T.vw.PLAN_NAMES_PLATFORM?6:e===T.vw.PLAN_NAMES_TEAMS?12:3,P=e=>e===T.vw.PLAN_NAMES_PLATFORM||e===T.vw.PLAN_NAMES_TEAMS?2:1;return s.createElement(z.l1,{initialValues:p,onSubmit:(e,t)=>{e.plan===T.vw.PLAN_NAMES_STARTER&&(delete e.seats_ro,delete e.usage,delete e.agents),S(e),t.setTouched({})}},(e=>{return s.createElement(R.l,{error:(0,x.GX)(this.props.errors),isInvalid:(0,x.yF)(this.props.errors),style:{minWidth:400}},s.createElement("form",{onSubmit:e.handleSubmit},this.state.isEditing&&s.createElement(s.Fragment,null,s.createElement(x.zM,{props:e,errors:this.props.errors,fieldName:"plan",options:[{value:T.vw.PLAN_NAMES_PLATFORM,text:"Platform"},{value:T.vw.PLAN_NAMES_TEAMS,text:"Teams"}],fullWidth:!0}),s.createElement(x.zM,{props:e,errors:this.props.errors,fieldName:"cycle",options:[{value:T.vw.PLAN_KEYS_PRICE_MONTHLY,text:"Monthly"},{value:T.vw.PLAN_KEYS_PRICE_YEARLY,text:"Yearly"}],fullWidth:!0}),s.createElement(x.AK,{props:e,errors:this.props.errors,fieldName:"seats",helpText:"All developer seats, including the developer seats that come with the plan",minValue:(t=e.values.plan,t===T.vw.PLAN_NAMES_STARTER||t===T.vw.PLAN_NAMES_PLATFORM?3:t===T.vw.PLAN_NAMES_TEAMS?6:3),maxValue:v(e.values.plan),compressed:!0,fullWidth:!0}),e.values.plan!==T.vw.PLAN_NAMES_STARTER&&s.createElement(x.AK,{props:e,errors:this.props.errors,fieldName:"seats_ro",label:"Read-Only Seats",helpText:"Read only seats",minValue:0,compressed:!0,fullWidth:!0}),e.values.plan!==T.vw.PLAN_NAMES_STARTER&&s.createElement(x.AK,{props:e,errors:this.props.errors,fieldName:"agents",helpText:"All agents, including the agent that comes with the plan",minValue:1,maxValue:P(e.values.plan),compressed:!0,fullWidth:!0}),e.values.plan!==T.vw.PLAN_NAMES_STARTER&&s.createElement(x.zM,{props:e,errors:this.props.errors,fieldName:"usage",label:"additional usage",helpText:"Optional additional concurrency, queues, and schedules",options:[{value:"",text:"None"},{value:T.vw.PLAN_NAMES_USAGE_S,text:"S"},{value:T.vw.PLAN_NAMES_USAGE_M,text:"M"},{value:T.vw.PLAN_NAMES_USAGE_L,text:"L"},{value:T.vw.PLAN_NAMES_USAGE_XL,text:"XL"}],fullWidth:!0}),i&&s.createElement(x.A_,{props:e,errors:this.props.errors,fieldName:"coupon",label:"coupon",helpText:"Optional discount code",compressed:!0,fullWidth:!0})),s.createElement(c.$,null),this.state.isEditing?s.createElement(s.Fragment,null,!m(e.values)&&s.createElement(_.zO,{size:"s",title:"Review plan price",iconType:"pin"},s.createElement("p",null,"In order to confirm the changes you need to review the price first")),s.createElement(c.$,null),s.createElement(h.Fo,{fullWidth:!0,fill:!0,color:"primary",size:"s",type:"submit",disabled:m(e.values)},"Review plan changes")):s.createElement(s.Fragment,null,s.createElement(_.zO,{size:"s",title:"Please note that by confirming a new invoice will be generated",iconType:"pin"},s.createElement("ul",null,s.createElement("li",null,"The subscription price for this configuration is ",s.createElement("strong",null,`$${o}`)," billed"," ",s.createElement("strong",null,e.values.cycle===T.vw.PLAN_KEYS_PRICE_MONTHLY?"monthly":"annually")),s.createElement("li",null,"Stripe will automatically collect a payment or make proration adjustments based on your current balance"))),s.createElement(c.$,null),s.createElement(x.oz,{props:e,errors:this.props.errors,fieldName:"confirmation",label:"confirmation",helpText:"Please confirm the changes by entering the plan's price",compressed:!0,fullWidth:!0}),s.createElement(c.$,null),s.createElement(g.ZQ,{gutterSize:"s",justifyContent:"spaceBetween"},s.createElement(A.v,{grow:!1},s.createElement(d.Sl,{onClick:()=>this.setState({isEditing:!0})},"Keep editing")),s.createElement(A.v,{grow:!1},s.createElement(h.Fo,{type:"submit",fill:!0,color:"success",disabled:E(e.values)},"Confirm plan"))))));var t}))}}var X=n(89967);const q=e=>{const t=(0,Y.useStripe)(),[n,a]=s.useState(!1),[l,r]=s.useState({});return t?s.createElement(R.l,{style:{minWidth:500}},s.createElement("form",{onSubmit:n=>{n.preventDefault(),a(!0),t.confirmCardPayment(e.intent.client_secret).then((t=>{t.error?(r(t.error),e.onCleanIntent()):"succeeded"===t.paymentIntent?.status&&e.onPost()})).catch((e=>{r(e)}))}},s.createElement(c.$,{size:"s"}),"Subscription payment authentication",s.createElement(c.$,{size:"s"}),l&&(e=>{if(!e)return null;let t="";return"message"in e?t=e.message:"code"in e?t=e.code:"status"in e&&(t=e.status),t?s.createElement(X.k,null,t):null})(l),s.createElement(c.$,null),s.createElement(g.ZQ,{justifyContent:"flexEnd",gutterSize:"none"},s.createElement(h.Fo,{type:"submit",fill:!0,size:"s",color:"primary",disabled:!t||n},"Authenticate Payment")))):null};class ee extends s.Component{componentDidMount(){const e=this.props.organization?.plan||{};T.vw.isFailedPayment(e.status)&&this.props.onPostInvoice()}componentDidUpdate(){const e=this.props.organization?.plan||{};this.props.success&&"billing_subscription"===e.handler&&e.status&&e.status.toString()===T.vw.PLAN_STATUS_ACTIVE&&this.props.onClose()}render(){const e=this.props.organization?.plan||{};return s.createElement(b.u,{onClose:this.props.onClose},s.createElement(O.v,null,s.createElement(U.d,null,"Subscription management")),s.createElement(I.u,null,T.vw.isFailedPayment(e.status)?s.createElement(V,null,s.createElement(q,{intent:e.payment_intent,onPost:this.props.onPostInvoice,onCleanIntent:this.props.onCleanIntent})):s.createElement(Z,{orgPlan:e,isLoading:this.props.isLoading,errors:this.props.errors,success:this.props.success,onPost:this.props.onPostSubscription,onPreview:this.props.onPostPreview,onCleanPreview:this.props.onCleanPreview,onClose:this.props.onClose})))}}const te=(0,l.y)((0,a.Ng)((function(e,t){const n=t.match.params.owner,a=(0,k.R)(e.loadingIndicators.organizations.byUuids,n,B.k.PLAN);return{isLoading:a,errors:(0,D.x)(e.alerts.organizations.byUuids,a,n,B.k.PLAN),success:(0,T.Hn)((0,$.d)(e.alerts.organizations.byUuids,a,n,B.k.PLAN)),organization:e.organizations.byUuids[n].data,onClose:t.onClose}}),(function(e,t){return{onPostSubscription:n=>e(r.mD.postOrganizationPlan(t.match.params.owner,"billing_subscription",n)),onPostInvoice:()=>e(r.mD.postOrganizationPlan(t.match.params.owner,"billing_subscription",{})),onPostPreview:n=>e(r.mD.postOrganizationPlan(t.match.params.owner,"billing_preview",n)),onCleanIntent:()=>e(r.mD.initOrganizationPlanCleanIntent(t.match.params.owner)),onCleanPreview:()=>e(r.mD.initOrganizationPlanNewPrice(t.match.params.owner))}}))(ee));var ne=n(51542);class ae extends s.Component{constructor(e){super(e),this.state={billingModal:void 0}}setBillingModal=e=>{this.setState({billingModal:e})};closeModal=()=>{this.setBillingModal(void 0)};getFeatureFlag=(e,t,n)=>({color:!n||T.vw.hasFlagFeature(e,n)?"success":"danger",title:t});getFeaturePlan=(e,t,n)=>({color:T.vw.hasPlan(e,n)?"success":"danger",title:t});getFlagBilling=e=>s.createElement("div",null,e.map((e=>s.createElement(s.Fragment,{key:e.title},s.createElement(o.X,{color:e.color},e.title),s.createElement(c.$,null)))));render(){const e=this.props.organization,t=e?.plan||{},n=[T.vw.PLAN_NAMES_BUSINESS,T.vw.PLAN_NAMES_ENTERPRISE].indexOf(t.name)>-1,a=t.discount||0,l=e?.usage||{},o=t.payment_method||{},z=(0,ne.YE)(e.role),R=T.vw.hasFlagFeature(t,T.vw.PLAN_HAS_DIFFERENT_SEATS),b=T.vw.getQuotaFeature(t,T.vw.PLAN_MEMBERS_RO_QUOTA),O=T.vw.getQuotaFeature(t,T.vw.PLAN_MEMBERS_BILL_QUOTA),U=R||b>0,I=(e,n,a,r)=>{const o=T.vw.hasQuotaFeature(t,n),p=a?T.vw.getUsageFeature(l,a):0,g=a?T.vw.getUsageFeature(l,a):"-",A=T.vw.getQuotaFeature(t,n),d=T.vw.hasQuotaFeature(t,n,p>0?p-1:0),h=o?d?"success":"accent":"danger",S=o?d?"check":"alert":"minusInCircleFilled",v=a?p/A*100:100;return s.createElement(u.Js,null,s.createElement(m.r_,{title:`${g}/${A}`,description:e,titleColor:h,textAlign:"left",isLoading:this.props.isLoading},s.createElement(i.sv,{type:S,color:h}),s.createElement(c.$,{size:"s"}),o?s.createElement(E.wc,{valueText:!!a||"-",max:100,color:h,size:"s",value:v.toFixed(2)}):r?"No quota":"Feature not enabled",s.createElement(c.$,{size:"m"})))},x=[this.getFeatureFlag(t,"Archives",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Bookmarks",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Unlimited Projects",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Unlimited Runs",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Project Level Searches",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Project Level Dashboards",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Organization Level Searches",T.vw.PLAN_HAS_SEARCHES),this.getFeatureFlag(t,"Organization Level Dashboards",T.vw.PLAN_HAS_DASHBOARDS),this.getFeatureFlag(t,"Organization Level Scheduling Presets",T.vw.PLAN_HAS_PRESETS),this.getFeatureFlag(t,"Component Hub",T.vw.PLAN_HAS_HUB),this.getFeatureFlag(t,"Model Registry",T.vw.PLAN_HAS_REGISTRY),this.getFeatureFlag(t,"Optimization Engine",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Flow Engine",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Automation Helpers",T.vw.PLAN_HAS_PROJECTS)],H=[this.getFeatureFlag(t,"Unlimited Connections",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Connections Viewer",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Connections Manager",T.vw.PLAN_HAS_PROJECTS),this.getFeaturePlan(t,"Multi-Agent Support",[T.vw.PLAN_NAMES_PLATFORM,T.vw.PLAN_NAMES_TEAMS,T.vw.PLAN_NAMES_BUSINESS,T.vw.PLAN_NAMES_ENTERPRISE])],B=[this.getFeatureFlag(t,"Basic Stats",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Advanced Analytics",T.vw.PLAN_HAS_ANALYTICS),this.getFeatureFlag(t,"Consumption Breakdown",T.vw.PLAN_HAS_ANALYTICS),this.getFeatureFlag(t,"Cross-Project Runs Management",T.vw.PLAN_HAS_ANALYTICS)],k=[this.getFeatureFlag(t,"Developer Seats",T.vw.PLAN_HAS_PROJECTS),this.getFeaturePlan(t,"Read Only Seats",[T.vw.PLAN_NAMES_PLATFORM,T.vw.PLAN_NAMES_TEAMS,T.vw.PLAN_NAMES_BUSINESS,T.vw.PLAN_NAMES_ENTERPRISE]),this.getFeaturePlan(t,"Billing Seat",[T.vw.PLAN_NAMES_PLATFORM,T.vw.PLAN_NAMES_TEAMS,T.vw.PLAN_NAMES_BUSINESS,T.vw.PLAN_NAMES_ENTERPRISE]),this.getFeatureFlag(t,"Owner, Admin, Member, & Viewer Roles",T.vw.PLAN_HAS_PROJECTS),this.getFeatureFlag(t,"Manager & Outsider Roles",T.vw.PLAN_HAS_TEAMS),this.getFeatureFlag(t,"Service Accounts",T.vw.PLAN_HAS_SERVICE_ACCOUNTS),this.getFeatureFlag(t,"Scopes & Services Restrictions",T.vw.PLAN_HAS_RESTRICTIONS),this.getFeatureFlag(t,"Advanced Restrictions",T.vw.PLAN_HAS_RESTRICTIONS),this.getFeatureFlag(t,"Teams Management",T.vw.PLAN_HAS_TEAMS),this.getFeatureFlag(t,"Teams Spaces",T.vw.PLAN_HAS_TEAMS_SPACES),this.getFeatureFlag(t,"Activity Logs (3 mths retention)",T.vw.PLAN_HAS_ACTIVITIES),this.getFeatureFlag(t,"IP Addresses Allow List",T.vw.PLAN_HAS_IP_RESTRICTIONS)],D=[this.getFeatureFlag(t,"Tokens Management"),this.getFeatureFlag(t,"User/Password"),this.getFeatureFlag(t,"Google Auth"),this.getFeatureFlag(t,"Github Organizations"),this.getFeatureFlag(t,"SAML Support",T.vw.PLAN_HAS_SAML)],$=[this.getFeatureFlag(t,"Community Support"),this.getFeatureFlag(t,"Email Support"),this.getFeatureFlag(t,"Priority Support",T.vw.PLAN_HAS_PRIORITY_SUPPORT),this.getFeatureFlag(t,"SLAs",T.vw.PLAN_HAS_SLAS)],Y=s.createElement(N.l,null,!r.AA.IS_CLOUD&&!n&&s.createElement(g.ZQ,{className:"mb-4"},s.createElement(A.v,null,s.createElement(_.zO,{size:"s",color:"warning",title:s.createElement("p",null,"This is a read-only view! You can manage payment related details using your account on"," ",s.createElement(w.z,{href:"https://cloud.polyaxon.com",external:!0},"https://cloud.polyaxon.com")),iconType:"pin"}))),s.createElement(g.ZQ,{direction:"column"},s.createElement(A.v,null,s.createElement(L.ij,{columns:3},s.createElement(A.v,null,(()=>{const l=T.vw.ShouldConfirmPayment(t.status)||T.vw.isFailedPayment(t.status)?"success":"primary",i=T.vw.ShouldConfirmPayment(t.status)?"Setup Subscription":T.vw.isFailedPayment(t.status)?"Authenticate Payment":"Manage";return s.createElement(p.tV,{textAlign:"left",title:"Current Plan",footer:s.createElement(g.ZQ,{justifyContent:"flexEnd"},!n&&s.createElement(A.v,{grow:!1},s.createElement(d.Sl,{href:"https://polyaxon.com/pricing",iconType:"popout",target:"_blank",iconSide:"right"},"See pricing")),s.createElement(A.v,{grow:!1},s.createElement(h.Fo,{onClick:()=>this.setBillingModal("subscription"),disabled:!r.AA.IS_CLOUD||0===Object.keys(o).length||!T.vw.canManageSubscription(t.name),color:l},i)))},!n&&s.createElement(S.D9,null,s.createElement("h1",null,s.createElement("span",{style:t.status.toString()===T.vw.PLAN_STATUS_SPONSORED?{textDecoration:"line-through"}:{}},s.createElement(v.N,{color:"success"},`$${t.price||"-"}`)))),s.createElement(c.$,{size:"xs"}),a>0&&s.createElement(f.IN,{icon:"tagApp",name:"Discount",value:s.createElement(v.N,{color:"success"},`-$${a}`)}),s.createElement(f.IN,{icon:"apps",name:"Name",value:"ee"===t.name?"EE":(0,T.ZH)(t.name)}),s.createElement(f.IN,{icon:"wrench",name:"Cycle",value:t.cycle===T.vw.PLAN_KEYS_PRICE_YEARLY?"Yearly":"Monthly"}),s.createElement(f.Zh,{name:"Started",value:e.created_at}),s.createElement(f.nj,{value:t.status.toString()}),s.createElement(c.$,{size:"xs"}))})()),s.createElement(A.v,null,(()=>s.createElement(p.tV,{textAlign:"left",title:"Billing Email",footer:s.createElement(g.ZQ,{justifyContent:"flexEnd"},s.createElement(A.v,{grow:!1},s.createElement(h.Fo,{onClick:()=>this.setBillingModal("email"),disabled:!r.AA.IS_CLOUD||!T.vw.canManageSubscription(t.name)},"Update")))},t.email?s.createElement(s.Fragment,null,s.createElement(_.zO,{size:"s",title:"All billing related information will be sent to:",color:"primary",iconType:"email"}),s.createElement("br",null),s.createElement(P.U,{size:"m"},s.createElement("strong",null,"Email:")," ",t.email),s.createElement(P.U,{size:"m"},s.createElement("strong",null,"Fullname:")," ",t.fullname)):s.createElement(_.zO,{size:"s",title:"Your billing information is not set correctly.",color:"warning",iconType:"email"},"Please set a billing email!")))()),s.createElement(A.v,null,(()=>{const e=Object.keys(o).length>0,n=e&&o.type?o.type:void 0;return s.createElement(p.tV,{textAlign:"left",title:"Payment Information",footer:s.createElement(g.ZQ,{justifyContent:"flexEnd"},e&&"invoice"!==n&&s.createElement(A.v,{grow:!1},s.createElement(d.Sl,{onClick:()=>this.setBillingModal("methodView"),iconType:"eye"},"View details")),s.createElement(A.v,{grow:!1},s.createElement(h.Fo,{onClick:()=>this.setBillingModal("method"),disabled:!r.AA.IS_CLOUD||!T.vw.canManageSubscription(t.name)},"Update")))},e?s.createElement(s.Fragment,null,s.createElement(_.zO,{title:"You are all set.",color:"success",iconType:"check",size:"s"}),s.createElement("br",null),n&&s.createElement(P.U,{size:"m"},s.createElement("strong",null,"Type:")," ",n)):s.createElement(_.zO,{title:"Payment method not set.",color:"warning",iconType:"alert",size:"s"},"We could not find any payment details associated with this account."))})()))),s.createElement(c.$,{size:"m"}),s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Features Usage",icon:"controlsVertical"}))),s.createElement(A.v,null,s.createElement(L.ij,{columns:4,gutterSize:"l"},s.createElement(A.v,null,I("Concurrency",T.vw.PLAN_CONCURRENCY_QUOTA,T.vw.PLAN_CONCURRENCY_USAGE)),s.createElement(A.v,null,I("Agents",T.vw.PLAN_AGENTS_QUOTA,T.vw.PLAN_AGENTS_USAGE)),s.createElement(A.v,null,I("Queues",T.vw.PLAN_QUEUES_QUOTA,T.vw.PLAN_QUEUES_USAGE)),s.createElement(A.v,null,I("Schedules",T.vw.PLAN_SCHEDULES_QUOTA,T.vw.PLAN_SCHEDULES_USAGE)))),s.createElement(c.$,{size:"m"}),s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Members",icon:"user"}))),s.createElement(A.v,null,s.createElement(L.ij,{columns:4,gutterSize:"l"},s.createElement(A.v,null,I("Developer Seats",T.vw.PLAN_MEMBERS_QUOTA,T.vw.PLAN_MEMBERS_USAGE)),U&&s.createElement(s.Fragment,null,(R||b>0)&&s.createElement(A.v,null,I("Read Only Seats",T.vw.PLAN_MEMBERS_RO_QUOTA,T.vw.PLAN_MEMBERS_RO_USAGE,T.vw.hasPlan(t,[T.vw.PLAN_NAMES_PLATFORM,T.vw.PLAN_NAMES_TEAMS]))),(R||O>0)&&s.createElement(A.v,null,I("Billing Seats",T.vw.PLAN_MEMBERS_BILL_QUOTA,T.vw.PLAN_MEMBERS_BILL_USAGE))))),s.createElement(c.$,{size:"m"}),s.createElement(A.v,null,s.createElement(g.ZQ,{gutterSize:"xl",justifyContent:"spaceEvenly"},s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Enabled Features",icon:"checkInCircleFilled"})),s.createElement(c.$,{size:"l"}),s.createElement(A.v,null,this.getFlagBilling(x))),s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Agent Features",icon:"logoKubernetes"})),s.createElement(c.$,{size:"l"}),s.createElement(A.v,null,this.getFlagBilling(H))),s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Analytics Features",icon:"analyticsApp"})),s.createElement(c.$,{size:"l"}),s.createElement(A.v,null,this.getFlagBilling(B))),s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Security Features",icon:"securityApp"})),s.createElement(c.$,{size:"l"}),s.createElement(A.v,null,this.getFlagBilling(k))),s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Auth Options",icon:"exit"})),s.createElement(c.$,{size:"l"}),s.createElement(A.v,null,this.getFlagBilling(D))),s.createElement(A.v,null,s.createElement(A.v,{grow:!1},s.createElement(M.U,{title:"Support Options",icon:"help"})),s.createElement(c.$,{size:"l"}),s.createElement(A.v,null,this.getFlagBilling($)))),s.createElement(c.$,{size:"xl"}))),"email"===this.state.billingModal&&s.createElement(Q,{onClose:this.closeModal}),"method"===this.state.billingModal&&s.createElement(W,{current:!1,onClose:this.closeModal}),"methodView"===this.state.billingModal&&s.createElement(W,{current:!0,onClose:this.closeModal}),"subscription"===this.state.billingModal&&s.createElement(te,{onClose:this.closeModal}));return s.createElement(s.Fragment,null,s.createElement(F.G,null,s.createElement(y.F,null,s.createElement(C.A,{organization:e}))),z?Y:null)}}function le(e,t){const n=t.match.params.owner;return{isLoading:(0,k.R)(e.loadingIndicators.organizations.byUuids,n,B.k.GET),organization:e.organizations.byUuids[n].data}}function re(e,t){return{onDelete:()=>e(r.mD.deleteOrganization(t.match.params.owner)),onUpdate:n=>e(r.mD.updateOrganization(t.match.params.owner,n))}}const se=(0,l.y)((0,a.Ng)(le,re)(ae))}}]);