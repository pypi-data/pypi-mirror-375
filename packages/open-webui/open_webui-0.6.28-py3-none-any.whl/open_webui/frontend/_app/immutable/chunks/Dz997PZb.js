import{e as se,d as He,c as Ye,u as Xe}from"./z-3lFV1q.js";import{S as _e,i as ge,s as we,N as Me,O as Fe,a as E,d as u,f as c,g as j,h as d,n as ze,H as ie,I as fe,C as R,D as J,E as K,K as ue,q as V,r as B,F as q,k as re,v as De,e as y,t as O,l as N,c as $,b as M,p as x,G as ee,j as z,y as $e,u as Ee,U as Qe,x as Ze,z as et,A as tt,B as rt,M as st,L as Le,J as lt,Q as nt}from"./FaFaOjVd.js";import"./IHki7fMi.js";import{t as Ie}from"./Al1IfFUq.js";import{a as ke,s as at,b as ot}from"./KnyNOV6V.js";import{f as it}from"./CAwIqUZT.js";import{M as Ke}from"./CtyAcC0Y.js";import{L as ft}from"./BR_-y1pK.js";import{X as qe}from"./OBlpjaGw.js";import"./wGQmBrky.js";import{b as ut,c as ye}from"./CnqObagz.js";import{f as ct}from"./kDFS4CBV.js";import{D as dt}from"./bYfkUZZv.js";import{G as mt}from"./DBlNIt-I.js";import{P as ht}from"./DH1nlrxk.js";import{T as pt}from"./N6zyuT7D.js";import{A as _t}from"./CRoizkMV.js";import{S as gt}from"./g2Ud3Ipo.js";import"./CcMnZvd9.js";import{T as wt}from"./BZyedR-_.js";import{K as bt}from"./a-XHatcO.js";const cr=async(a,e)=>{let t=null;const r=await fetch(`${se}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify(e)}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(t=s.detail,null));if(t)throw t;return r},dr=async(a="")=>{let e=null;const t=await fetch(`${se}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`}}).then(async r=>{if(!r.ok)throw await r.json();return r.json()}).then(r=>r).catch(r=>(e=r.detail,null));if(e)throw e;return t},mr=async(a,e,t)=>{let r=null;const s=await fetch(`${se}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify(t)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return s},hr=async(a,e,t)=>{let r=null;const s=await fetch(`${se}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify({is_expanded:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return s},pr=async(a,e,t)=>{let r=null;const s=await fetch(`${se}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify({parent_id:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return s},_r=async(a,e)=>{let t=null;const r=await fetch(`${se}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).then(s=>s).catch(s=>(t=s.detail,null));if(t)throw t;return r};function vt(a){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(r){e=Fe(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=E(e);t=Fe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(u),s.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",a[1]),c(e,"stroke","currentColor"),c(e,"class",a[0])},m(r,s){j(r,e,s),d(e,t)},p(r,[s]){s&2&&c(e,"stroke-width",r[1]),s&1&&c(e,"class",r[0])},i:ze,o:ze,d(r){r&&u(e)}}}function kt(a,e,t){let{className:r="size-4"}=e,{strokeWidth:s="1.5"}=e;return a.$$set=o=>{"className"in o&&t(0,r=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[r,s]}class gr extends _e{constructor(e){super(),ge(this,e,kt,vt,we,{className:0,strokeWidth:1})}}function Pe(a){var W;let e,t,r,s,o,n,l,i,g,p,_,m,h;function w(f,k){return f[2].share_id?$t:yt}let D=w(a),S=D(a),b=((W=a[4])==null?void 0:W.features.enable_community_sharing)&&We(a);g=new ft({});function I(f,k){return f[2].share_id?It:Et}let v=I(a),T=v(a);return{c(){e=y("div"),t=y("div"),S.c(),r=N(),s=y("div"),o=y("div"),n=y("div"),b&&b.c(),l=N(),i=y("button"),R(g.$$.fragment),p=N(),T.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var k=E(e);t=$(k,"DIV",{class:!0});var L=E(t);S.l(L),L.forEach(u),r=x(k),s=$(k,"DIV",{class:!0});var X=E(s);o=$(X,"DIV",{class:!0});var te=E(o);n=$(te,"DIV",{class:!0});var G=E(n);b&&b.l(G),l=x(G),i=$(G,"BUTTON",{class:!0,type:!0,id:!0});var P=E(i);J(g.$$.fragment,P),p=x(P),T.l(P),P.forEach(u),G.forEach(u),te.forEach(u),X.forEach(u),k.forEach(u),this.h()},h(){c(t,"class","text-sm dark:text-gray-300 mb-1"),c(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),c(i,"type","button"),c(i,"id","copy-and-share-chat-button"),c(n,"class","flex gap-1"),c(o,"class","flex flex-col items-end space-x-1 mt-3"),c(s,"class","flex justify-end"),c(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(f,k){j(f,e,k),d(e,t),S.m(t,null),d(e,r),d(e,s),d(s,o),d(o,n),b&&b.m(n,null),d(n,l),d(n,i),K(g,i,null),d(i,p),T.m(i,null),_=!0,m||(h=ee(i,"click",a[11]),m=!0)},p(f,k){var L;D===(D=w(f))&&S?S.p(f,k):(S.d(1),S=D(f),S&&(S.c(),S.m(t,null))),(L=f[4])!=null&&L.features.enable_community_sharing?b?b.p(f,k):(b=We(f),b.c(),b.m(n,l)):b&&(b.d(1),b=null),v===(v=I(f))&&T?T.p(f,k):(T.d(1),T=v(f),T&&(T.c(),T.m(i,null)))},i(f){_||(V(g.$$.fragment,f),_=!0)},o(f){B(g.$$.fragment,f),_=!1},d(f){f&&u(e),S.d(),b&&b.d(),q(g),T.d(),m=!1,h()}}}function yt(a){let e=a[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",t;return{c(){t=O(e)},l(r){t=M(r,e)},m(r,s){j(r,t,s)},p(r,s){s&8&&e!==(e=r[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&z(t,e)},d(r){r&&u(t)}}}function $t(a){let e,t=a[3].t("You have shared this chat")+"",r,s,o,n=a[3].t("before")+"",l,i,g,p,_=a[3].t("Click here to")+"",m,h,w,D=a[3].t("delete this link")+"",S,b,I=a[3].t("and create a new shared link.")+"",v,T,W;return{c(){e=y("a"),r=O(t),s=N(),o=y("span"),l=O(n),i=O("."),p=N(),m=O(_),h=N(),w=y("button"),S=O(D),b=N(),v=O(I),this.h()},l(f){e=$(f,"A",{href:!0,target:!0});var k=E(e);r=M(k,t),s=x(k),o=$(k,"SPAN",{class:!0});var L=E(o);l=M(L,n),L.forEach(u),i=M(k,"."),k.forEach(u),p=x(f),m=M(f,_),h=x(f),w=$(f,"BUTTON",{class:!0});var X=E(w);S=M(X,D),X.forEach(u),b=x(f),v=M(f,I),this.h()},h(){c(o,"class","underline"),c(e,"href",g="/s/"+a[2].share_id),c(e,"target","_blank"),c(w,"class","underline")},m(f,k){j(f,e,k),d(e,r),d(e,s),d(e,o),d(o,l),d(e,i),j(f,p,k),j(f,m,k),j(f,h,k),j(f,w,k),d(w,S),j(f,b,k),j(f,v,k),T||(W=ee(w,"click",a[9]),T=!0)},p(f,k){k&8&&t!==(t=f[3].t("You have shared this chat")+"")&&z(r,t),k&8&&n!==(n=f[3].t("before")+"")&&z(l,n),k&4&&g!==(g="/s/"+f[2].share_id)&&c(e,"href",g),k&8&&_!==(_=f[3].t("Click here to")+"")&&z(m,_),k&8&&D!==(D=f[3].t("delete this link")+"")&&z(S,D),k&8&&I!==(I=f[3].t("and create a new shared link.")+"")&&z(v,I)},d(f){f&&(u(e),u(p),u(m),u(h),u(w),u(b),u(v)),T=!1,W()}}}function We(a){let e,t=a[3].t("Share to Open WebUI Community")+"",r,s,o;return{c(){e=y("button"),r=O(t),this.h()},l(n){e=$(n,"BUTTON",{class:!0,type:!0});var l=E(e);r=M(l,t),l.forEach(u),this.h()},h(){c(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),c(e,"type","button")},m(n,l){j(n,e,l),d(e,r),s||(o=ee(e,"click",a[10]),s=!0)},p(n,l){l&8&&t!==(t=n[3].t("Share to Open WebUI Community")+"")&&z(r,t)},d(n){n&&u(e),s=!1,o()}}}function Et(a){let e=a[3].t("Copy Link")+"",t;return{c(){t=O(e)},l(r){t=M(r,e)},m(r,s){j(r,t,s)},p(r,s){s&8&&e!==(e=r[3].t("Copy Link")+"")&&z(t,e)},d(r){r&&u(t)}}}function It(a){let e=a[3].t("Update and Copy Link")+"",t;return{c(){t=O(e)},l(r){t=M(r,e)},m(r,s){j(r,t,s)},p(r,s){s&8&&e!==(e=r[3].t("Update and Copy Link")+"")&&z(t,e)},d(r){r&&u(t)}}}function Dt(a){let e,t,r,s=a[3].t("Share Chat")+"",o,n,l,i,g,p,_,m;i=new qe({props:{className:"size-5"}});let h=a[2]&&Pe(a);return{c(){e=y("div"),t=y("div"),r=y("div"),o=O(s),n=N(),l=y("button"),R(i.$$.fragment),g=N(),h&&h.c(),this.h()},l(w){e=$(w,"DIV",{});var D=E(e);t=$(D,"DIV",{class:!0});var S=E(t);r=$(S,"DIV",{class:!0});var b=E(r);o=M(b,s),b.forEach(u),n=x(S),l=$(S,"BUTTON",{class:!0});var I=E(l);J(i.$$.fragment,I),I.forEach(u),S.forEach(u),g=x(D),h&&h.l(D),D.forEach(u),this.h()},h(){c(r,"class","text-lg font-medium self-center"),c(l,"class","self-center"),c(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(w,D){j(w,e,D),d(e,t),d(t,r),d(r,o),d(t,n),d(t,l),K(i,l,null),d(e,g),h&&h.m(e,null),p=!0,_||(m=ee(l,"click",a[8]),_=!0)},p(w,D){(!p||D&8)&&s!==(s=w[3].t("Share Chat")+"")&&z(o,s),w[2]?h?(h.p(w,D),D&4&&V(h,1)):(h=Pe(w),h.c(),V(h,1),h.m(e,null)):h&&($e(),B(h,1,1,()=>{h=null}),Ee())},i(w){p||(V(i.$$.fragment,w),V(h),p=!0)},o(w){B(i.$$.fragment,w),B(h),p=!1},d(w){w&&u(e),q(i),h&&h.d(),_=!1,m()}}}function St(a){let e,t,r;function s(n){a[12](n)}let o={size:"md",$$slots:{default:[Dt]},$$scope:{ctx:a}};return a[0]!==void 0&&(o.show=a[0]),e=new Ke({props:o}),ie.push(()=>fe(e,"show",s)),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){K(e,n,l),r=!0},p(n,[l]){const i={};l&65567&&(i.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,i.show=n[0],ue(()=>t=!1)),e.$set(i)},i(n){r||(V(e.$$.fragment,n),r=!0)},o(n){B(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ct(a,e,t){let r,s,o;re(a,He,v=>t(14,r=v)),re(a,Ye,v=>t(4,o=v));let{chatId:n}=e,l=null,i=null;const g=De("i18n");re(a,g,v=>t(3,s=v));const p=async()=>{const v=await at(localStorage.token,n);return i=`${window.location.origin}/s/${v.id}`,t(2,l=await ke(localStorage.token,n)),i},_=async()=>{const v=l.chat;Ie.success(s.t("Redirecting you to Open WebUI Community"));const T="https://openwebui.com",W=await window.open(`${T}/chats/upload`,"_blank");window.addEventListener("message",f=>{f.origin===T&&f.data==="loaded"&&W.postMessage(JSON.stringify({chat:v,models:r.filter(k=>v.models.includes(k.id))}),"*")},!1)};let{show:m=!1}=e;const h=v=>l?v?l.id!==v.id||l.share_id!==v.share_id:!1:!0,w=()=>{t(0,m=!1)},D=async()=>{await ot(localStorage.token,n)&&t(2,l=await ke(localStorage.token,n))},S=()=>{_(),t(0,m=!1)},b=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const T=async()=>{const W=await p();return new Blob([W],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":T()})]).then(()=>!0).catch(W=>!1)}else it(await p());Ie.success(s.t("Copied shared chat URL to clipboard!")),t(0,m=!1)};function I(v){m=v,t(0,m)}return a.$$set=v=>{"chatId"in v&&t(1,n=v.chatId),"show"in v&&t(0,m=v.show)},a.$$.update=()=>{a.$$.dirty&7&&m&&(async()=>{if(n){const v=await ke(localStorage.token,n);h(v)&&t(2,l=v)}else t(2,l=null)})()},[m,n,l,s,o,g,p,_,w,D,S,b,I]}class wr extends _e{constructor(e){super(),ge(this,e,Ct,St,we,{chatId:1,show:0})}}function jt(a){let e;const t=a[8].default,r=Ze(t,a,a[14],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o&16384)&&et(r,t,s,s[14],e?rt(t,s[14],o,null):tt(s[14]),null)},i(s){e||(V(r,s),e=!0)},o(s){B(r,s),e=!1},d(s){r&&r.d(s)}}}function Tt(a){let e,t;return e=new pt({props:{content:a[5].t("More"),$$slots:{default:[jt]},$$scope:{ctx:a}}}),{c(){R(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,s){K(e,r,s),t=!0},p(r,s){const o={};s&32&&(o.content=r[5].t("More")),s&16384&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){t||(V(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Vt(a){let e,t,r,s=a[5].t("Edit")+"",o,n;return e=new ht({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),t=N(),r=y("div"),o=O(s),this.h()},l(l){J(e.$$.fragment,l),t=x(l),r=$(l,"DIV",{class:!0});var i=E(r);o=M(i,s),i.forEach(u),this.h()},h(){c(r,"class","flex items-center")},m(l,i){K(e,l,i),j(l,t,i),j(l,r,i),d(r,o),n=!0},p(l,i){(!n||i&32)&&s!==(s=l[5].t("Edit")+"")&&z(o,s)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){l&&(u(t),u(r)),q(e,l)}}}function Bt(a){let e,t,r,s=a[5].t("Export")+"",o,n;return e=new _t({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),t=N(),r=y("div"),o=O(s),this.h()},l(l){J(e.$$.fragment,l),t=x(l),r=$(l,"DIV",{class:!0});var i=E(r);o=M(i,s),i.forEach(u),this.h()},h(){c(r,"class","flex items-center")},m(l,i){K(e,l,i),j(l,t,i),j(l,r,i),d(r,o),n=!0},p(l,i){(!n||i&32)&&s!==(s=l[5].t("Export")+"")&&z(o,s)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){l&&(u(t),u(r)),q(e,l)}}}function Nt(a){let e,t,r,s=a[5].t("Delete")+"",o,n;return e=new mt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),t=N(),r=y("div"),o=O(s),this.h()},l(l){J(e.$$.fragment,l),t=x(l),r=$(l,"DIV",{class:!0});var i=E(r);o=M(i,s),i.forEach(u),this.h()},h(){c(r,"class","flex items-center")},m(l,i){K(e,l,i),j(l,t,i),j(l,r,i),d(r,o),n=!0},p(l,i){(!n||i&32)&&s!==(s=l[5].t("Delete")+"")&&z(o,s)},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){l&&(u(t),u(r)),q(e,l)}}}function xt(a){let e,t,r,s,o,n;return e=new ye({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Vt]},$$scope:{ctx:a}}}),e.$on("click",a[9]),r=new ye({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Bt]},$$scope:{ctx:a}}}),r.$on("click",a[10]),o=new ye({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Nt]},$$scope:{ctx:a}}}),o.$on("click",a[11]),{c(){R(e.$$.fragment),t=N(),R(r.$$.fragment),s=N(),R(o.$$.fragment)},l(l){J(e.$$.fragment,l),t=x(l),J(r.$$.fragment,l),s=x(l),J(o.$$.fragment,l)},m(l,i){K(e,l,i),j(l,t,i),K(r,l,i),j(l,s,i),K(o,l,i),n=!0},p(l,i){const g={};i&16416&&(g.$$scope={dirty:i,ctx:l}),e.$set(g);const p={};i&16416&&(p.$$scope={dirty:i,ctx:l}),r.$set(p);const _={};i&16416&&(_.$$scope={dirty:i,ctx:l}),o.$set(_)},i(l){n||(V(e.$$.fragment,l),V(r.$$.fragment,l),V(o.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),B(r.$$.fragment,l),B(o.$$.fragment,l),n=!1},d(l){l&&(u(t),u(s)),q(e,l),q(r,l),q(o,l)}}}function Ut(a){let e,t,r;return t=new ut({props:{class:"w-full max-w-[170px] rounded-lg px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:a[0],transition:ct,$$slots:{default:[xt]},$$scope:{ctx:a}}}),{c(){e=y("div"),R(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{slot:!0});var o=E(e);J(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"slot","content")},m(s,o){j(s,e,o),K(t,e,null),r=!0},p(s,o){const n={};o&1&&(n.align=s[0]),o&16430&&(n.$$scope={dirty:o,ctx:s}),t.$set(n)},i(s){r||(V(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){s&&u(e),q(t)}}}function At(a){let e,t,r;function s(n){a[12](n)}let o={$$slots:{content:[Ut],default:[Tt]},$$scope:{ctx:a}};return a[4]!==void 0&&(o.show=a[4]),e=new dt({props:o}),ie.push(()=>fe(e,"show",s)),e.$on("change",a[13]),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){K(e,n,l),r=!0},p(n,[l]){const i={};l&16431&&(i.$$scope={dirty:l,ctx:n}),!t&&l&16&&(t=!0,i.show=n[4],ue(()=>t=!1)),e.$set(i)},i(n){r||(V(e.$$.fragment,n),r=!0)},o(n){B(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ot(a,e,t){let r,{$$slots:s={},$$scope:o}=e;const n=De("i18n");re(a,n,I=>t(5,r=I));const l=Qe();let{align:i="start"}=e,{onEdit:g=()=>{}}=e,{onExport:p=()=>{}}=e,{onDelete:_=()=>{}}=e,m=!1;const h=()=>{g()},w=()=>{p()},D=()=>{_()};function S(I){m=I,t(4,m)}const b=I=>{I.detail===!1&&l("close")};return a.$$set=I=>{"align"in I&&t(0,i=I.align),"onEdit"in I&&t(1,g=I.onEdit),"onExport"in I&&t(2,p=I.onExport),"onDelete"in I&&t(3,_=I.onDelete),"$$scope"in I&&t(14,o=I.$$scope)},[i,g,p,_,m,r,n,l,s,h,w,D,S,b,o]}class br extends _e{constructor(e){super(),ge(this,e,Ot,At,we,{align:0,onEdit:1,onExport:2,onDelete:3})}}function Mt(a){let e=a[5].t("Create Folder")+"",t;return{c(){t=O(e)},l(r){t=M(r,e)},m(r,s){j(r,t,s)},p(r,s){s&32&&e!==(e=r[5].t("Create Folder")+"")&&z(t,e)},d(r){r&&u(t)}}}function Ft(a){let e=a[5].t("Edit Folder")+"",t;return{c(){t=O(e)},l(r){t=M(r,e)},m(r,s){j(r,t,s)},p(r,s){s&32&&e!==(e=r[5].t("Edit Folder")+"")&&z(t,e)},d(r){r&&u(t)}}}function Re(a){let e,t,r=a[5].t("System Prompt")+"",s,o,n,l,i,g;function p(m){a[13](m)}let _={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:a[5].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`),maxSize:200};return a[3].system_prompt!==void 0&&(_.value=a[3].system_prompt),l=new wt({props:_}),ie.push(()=>fe(l,"value",p)),{c(){e=y("div"),t=y("div"),s=O(r),o=N(),n=y("div"),R(l.$$.fragment),this.h()},l(m){e=$(m,"DIV",{class:!0});var h=E(e);t=$(h,"DIV",{class:!0});var w=E(t);s=M(w,r),w.forEach(u),o=x(h),n=$(h,"DIV",{});var D=E(n);J(l.$$.fragment,D),D.forEach(u),h.forEach(u),this.h()},h(){c(t,"class","mb-2 text-xs text-gray-500"),c(e,"class","my-1")},m(m,h){j(m,e,h),d(e,t),d(t,s),d(e,o),d(e,n),K(l,n,null),g=!0},p(m,h){(!g||h&32)&&r!==(r=m[5].t("System Prompt")+"")&&z(s,r);const w={};h&32&&(w.placeholder=m[5].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`)),!i&&h&8&&(i=!0,w.value=m[3].system_prompt,ue(()=>i=!1)),l.$set(w)},i(m){g||(V(l.$$.fragment,m),g=!0)},o(m){B(l.$$.fragment,m),g=!1},d(m){m&&u(e),q(l)}}}function zt(a){let e,t,r,s=a[5].t("Knowledge")+"",o;return{c(){e=y("div"),t=y("div"),r=y("div"),o=O(s),this.h()},l(n){e=$(n,"DIV",{slot:!0});var l=E(e);t=$(l,"DIV",{class:!0});var i=E(t);r=$(i,"DIV",{class:!0});var g=E(r);o=M(g,s),g.forEach(u),i.forEach(u),l.forEach(u),this.h()},h(){c(r,"class","mb-2 text-xs text-gray-500"),c(t,"class","flex w-full justify-between"),c(e,"slot","label")},m(n,l){j(n,e,l),d(e,t),d(t,r),d(r,o)},p(n,l){l&32&&s!==(s=n[5].t("Knowledge")+"")&&z(o,s)},d(n){n&&u(e)}}}function Je(a){let e,t,r;return t=new gt({}),{c(){e=y("div"),R(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=E(e);J(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","ml-2 self-center")},m(s,o){j(s,e,o),K(t,e,null),r=!0},i(s){r||(V(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){s&&u(e),q(t)}}}function Lt(a){var Te,Ve,Be;let e,t,r,s,o,n,l,i,g,p,_,m,h=a[5].t("Folder Name")+"",w,D,S,b,I,v,T,W,f,k,L,X,te,G,P,le=a[5].t("Save")+"",ce,be,de,Q,ve,Se;function Ce(C,U){return C[1]?Ft:Mt}let me=Ce(a),H=me(a);n=new qe({props:{className:"size-5"}});let A=(((Te=a[6])==null?void 0:Te.role)==="admin"||(((Be=(Ve=a[6])==null?void 0:Ve.permissions.chat)==null?void 0:Be.system_prompt)??!0))&&Re(a);function Ge(C){a[14](C)}let je={$$slots:{label:[zt]},$$scope:{ctx:a}};a[3].files!==void 0&&(je.selectedItems=a[3].files),L=new bt({props:je}),ie.push(()=>fe(L,"selectedItems",Ge));let F=a[4]&&Je();return{c(){e=y("div"),t=y("div"),r=y("div"),H.c(),s=N(),o=y("button"),R(n.$$.fragment),l=N(),i=y("div"),g=y("div"),p=y("form"),_=y("div"),m=y("div"),w=O(h),D=N(),S=y("div"),b=y("input"),v=N(),T=y("hr"),W=N(),A&&A.c(),f=N(),k=y("div"),R(L.$$.fragment),te=N(),G=y("div"),P=y("button"),ce=O(le),be=N(),F&&F.c(),this.h()},l(C){e=$(C,"DIV",{});var U=E(e);t=$(U,"DIV",{class:!0});var Z=E(t);r=$(Z,"DIV",{class:!0});var ne=E(r);H.l(ne),ne.forEach(u),s=x(Z),o=$(Z,"BUTTON",{class:!0});var ae=E(o);J(n.$$.fragment,ae),ae.forEach(u),Z.forEach(u),l=x(U),i=$(U,"DIV",{class:!0});var oe=E(i);g=$(oe,"DIV",{class:!0});var Ne=E(g);p=$(Ne,"FORM",{class:!0});var Y=E(p);_=$(Y,"DIV",{class:!0});var he=E(_);m=$(he,"DIV",{class:!0});var xe=E(m);w=M(xe,h),xe.forEach(u),D=x(he),S=$(he,"DIV",{class:!0});var Ue=E(S);b=$(Ue,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0,autocomplete:!0}),Ue.forEach(u),he.forEach(u),v=x(Y),T=$(Y,"HR",{class:!0}),W=x(Y),A&&A.l(Y),f=x(Y),k=$(Y,"DIV",{class:!0});var Ae=E(k);J(L.$$.fragment,Ae),Ae.forEach(u),te=x(Y),G=$(Y,"DIV",{class:!0});var Oe=E(G);P=$(Oe,"BUTTON",{class:!0,type:!0});var pe=E(P);ce=M(pe,le),be=x(pe),F&&F.l(pe),pe.forEach(u),Oe.forEach(u),Y.forEach(u),Ne.forEach(u),oe.forEach(u),U.forEach(u),this.h()},h(){c(r,"class","text-lg font-medium self-center"),c(o,"class","self-center"),c(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),c(m,"class","mb-1 text-xs text-gray-500"),c(b,"id","folder-name"),c(b,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),c(b,"type","text"),c(b,"placeholder",I=a[5].t("Enter folder name")),c(b,"autocomplete","off"),c(S,"class","flex-1"),c(_,"class","flex flex-col w-full mt-1"),c(T,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),c(k,"class","my-2"),c(P,"class",de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(a[4]?" cursor-not-allowed":"")),c(P,"type","submit"),P.disabled=a[4],c(G,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),c(p,"class","flex flex-col w-full"),c(g,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),c(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(C,U){j(C,e,U),d(e,t),d(t,r),H.m(r,null),d(t,s),d(t,o),K(n,o,null),d(e,l),d(e,i),d(i,g),d(g,p),d(p,_),d(_,m),d(m,w),d(_,D),d(_,S),d(S,b),Le(b,a[2]),d(p,v),d(p,T),d(p,W),A&&A.m(p,null),d(p,f),d(p,k),K(L,k,null),d(p,te),d(p,G),d(G,P),d(P,ce),d(P,be),F&&F.m(P,null),Q=!0,ve||(Se=[ee(o,"click",a[11]),ee(b,"input",a[12]),ee(p,"submit",lt(a[15]))],ve=!0)},p(C,U){var ne,ae,oe;me===(me=Ce(C))&&H?H.p(C,U):(H.d(1),H=me(C),H&&(H.c(),H.m(r,null))),(!Q||U&32)&&h!==(h=C[5].t("Folder Name")+"")&&z(w,h),(!Q||U&32&&I!==(I=C[5].t("Enter folder name")))&&c(b,"placeholder",I),U&4&&b.value!==C[2]&&Le(b,C[2]),((ne=C[6])==null?void 0:ne.role)==="admin"||(((oe=(ae=C[6])==null?void 0:ae.permissions.chat)==null?void 0:oe.system_prompt)??!0)?A?(A.p(C,U),U&64&&V(A,1)):(A=Re(C),A.c(),V(A,1),A.m(p,f)):A&&($e(),B(A,1,1,()=>{A=null}),Ee());const Z={};U&524320&&(Z.$$scope={dirty:U,ctx:C}),!X&&U&8&&(X=!0,Z.selectedItems=C[3].files,ue(()=>X=!1)),L.$set(Z),(!Q||U&32)&&le!==(le=C[5].t("Save")+"")&&z(ce,le),C[4]?F?U&16&&V(F,1):(F=Je(),F.c(),V(F,1),F.m(P,null)):F&&($e(),B(F,1,1,()=>{F=null}),Ee()),(!Q||U&16&&de!==(de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(C[4]?" cursor-not-allowed":"")))&&c(P,"class",de),(!Q||U&16)&&(P.disabled=C[4])},i(C){Q||(V(n.$$.fragment,C),V(A),V(L.$$.fragment,C),V(F),Q=!0)},o(C){B(n.$$.fragment,C),B(A),B(L.$$.fragment,C),B(F),Q=!1},d(C){C&&u(e),H.d(),q(n),A&&A.d(),q(L),F&&F.d(),ve=!1,nt(Se)}}}function Pt(a){let e,t,r;function s(n){a[16](n)}let o={size:"md",$$slots:{default:[Lt]},$$scope:{ctx:a}};return a[0]!==void 0&&(o.show=a[0]),e=new Ke({props:o}),ie.push(()=>fe(e,"show",s)),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){K(e,n,l),r=!0},p(n,[l]){const i={};l&524415&&(i.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,i.show=n[0],ue(()=>t=!1)),e.$set(i)},i(n){r||(V(e.$$.fragment,n),r=!0)},o(n){B(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Wt(a,e,t){let r,s;re(a,Xe,f=>t(6,s=f));const o=De("i18n");re(a,o,f=>t(5,r=f));let{show:n=!1}=e,{onSubmit:l=f=>{}}=e,{edit:i=!1}=e,{folder:g=null}=e,p="",_={system_prompt:"",files:[]},m=!1;const h=async()=>{if(t(4,m=!0),((_==null?void 0:_.files)??[]).some(f=>f.status==="uploading")){Ie.error(r.t("Please wait until all files are uploaded.")),t(4,m=!1);return}await l({name:p,data:_}),t(0,n=!1),t(4,m=!1)},w=()=>{t(2,p=g.name),t(3,_=g.data||{system_prompt:"",files:[]})},D=async()=>{await st();const f=document.getElementById("folder-name");f&&(f.focus(),f.select())},S=()=>{t(0,n=!1)};function b(){p=this.value,t(2,p),t(0,n),t(1,i)}function I(f){a.$$.not_equal(_.system_prompt,f)&&(_.system_prompt=f,t(3,_),t(0,n),t(1,i))}function v(f){a.$$.not_equal(_.files,f)&&(_.files=f,t(3,_),t(0,n),t(1,i))}const T=()=>{h()};function W(f){n=f,t(0,n)}return a.$$set=f=>{"show"in f&&t(0,n=f.show),"onSubmit"in f&&t(9,l=f.onSubmit),"edit"in f&&t(1,i=f.edit),"folder"in f&&t(10,g=f.folder)},a.$$.update=()=>{a.$$.dirty&1&&n&&D(),a.$$.dirty&1024&&g&&w(),a.$$.dirty&3&&!n&&!i&&(t(2,p=""),t(3,_={system_prompt:"",files:[]}))},[n,i,p,_,m,r,s,o,h,l,g,S,b,I,v,T,W]}class vr extends _e{constructor(e){super(),ge(this,e,Wt,Pt,we,{show:0,onSubmit:9,edit:1,folder:10})}}export{gr as F,wr as S,vr as a,br as b,hr as c,_r as d,pr as e,cr as f,dr as g,mr as u};
//# sourceMappingURL=Dz997PZb.js.map
