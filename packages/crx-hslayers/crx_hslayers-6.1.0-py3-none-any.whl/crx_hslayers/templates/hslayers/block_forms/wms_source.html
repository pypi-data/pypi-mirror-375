{% load wagtailadmin_tags %}

<div class="{{ classname }}">
    {% if help_text %}
        <span>
            <div class="help">
                {% icon name="help" class_name="default" %}
                {{ help_text }}
            </div>
        </span>
    {% endif %}

    {% for child in children.values %}
        <div class="wms-url-field field {% if child.block.required %}required{% endif %}" data-contentpath="{{ child.block.name }}">
            {% if child.block.label and child.block.name != "layers" %}
                <label class="field__label" {% if child.id_for_label %}for="{{ child.id_for_label }}"{% endif %}>{{ child.block.label }}</label>                
            {% endif %}

            {{ child.render_form }}                 
            
            {% if child.block.name == "url" %}
            <button id="{{ prefix }}-load" class="button button--icon" type="button">
                <i class="icon icon-spinner" style="display: none"></i>
                Load layers
            </button>
            {% endif %}
        </div>

        {% if child.block.name == "url" %}       
        <div id="{{ prefix }}-layer-selector-container" class="wms-layers"></div>
        {% endif %}
    {% endfor %}
</div>
