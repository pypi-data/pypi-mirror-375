# pyproject.toml (at monorepo root)
# Black configuration for a monorepo with multiple Python subprojects
# Compatible with Black 24.8.0+ (latest as of April 2025)

[tool.black]
# Line length: Use 88 for consistency across subprojects
# Override in subproject pyproject.toml if needed (e.g., service_a might use 100)
line-length = 120

# Target Python versions: Include all supported versions across subprojects
# Example: py38 for legacy, py310 for modern services
# Adjust based on your monorepo's Python requirements
target-version = ["py312"]

# Include: Format Python files in specific subproject directories
# Targets packages/* and scripts/, but can be customized
include = '''
(
    python-packages/.*\.pyi?$
)
'''

# Exclude: Skip common non-source directories across all subprojects
# Includes virtual environments, build artifacts, and project-specific exclusions
exclude = '''
/(
    \.git
  | \.venv
  | venv
  | \.tox
  | build
  | cdk
  | dist
  | __pycache__
  | \.mypy_cache
  | \.pytest_cache
  | node_modules
)/
'''

# Skip string normalization: Preserve quotes for consistency
# Set true if subprojects have mixed quote styles
skip-string-normalization = false

# Skip magic trailing comma: Add commas for diff minimization
# Set true if you prefer no trailing commas
skip-magic-trailing-comma = false

# Preview mode: Disable for stable formatting across subprojects
preview = false

# Black version
required-version = "25.1.0"

# Force exclude: Override includes for specific generated files
force-exclude = '''
packages/.*/generated/.*\.py$
'''