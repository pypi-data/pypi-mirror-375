(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(e,t,n){var r=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var r=n(11611),s=n(82846),i=n(91936),o=Math.max,a=Math.min;e.exports=function(e,t,n){var u,c,l,d,m,f,p=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw TypeError("Expected a function");function h(t){var n=u,r=c;return u=c=void 0,p=t,d=e.apply(r,n)}function x(e){var n=e-f,r=e-p;return void 0===f||n>=t||n<0||g&&r>=l}function j(){var e,n,r,i=s();if(x(i))return _(i);m=setTimeout(j,(e=i-f,n=i-p,r=t-e,g?a(r,l-n):r))}function _(e){return(m=void 0,y&&u)?h(e):(u=c=void 0,d)}function T(){var e,n=s(),r=x(n);if(u=arguments,c=this,f=n,r){if(void 0===m)return p=e=f,m=setTimeout(j,t),v?h(e):d;if(g)return clearTimeout(m),m=setTimeout(j,t),h(f)}return void 0===m&&(m=setTimeout(j,t)),d}return t=i(t)||0,r(n)&&(v=!!n.leading,l=(g="maxWait"in n)?o(i(n.maxWait)||0,t):l,y="trailing"in n?!!n.trailing:y),T.cancel=function(){void 0!==m&&clearTimeout(m),p=0,u=f=c=m=void 0},T.flush=function(){return void 0===m?d:_(s())},T}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var r=n(99736),s=n(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==r(e)}},82846:function(e,t,n){var r=n(77400);e.exports=function(){return r.Date.now()}},91936:function(e,t,n){var r=n(74833),s=n(11611),i=n(55193),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=u.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):a.test(e)?o:+e}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(2656)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(24246),s=n(66726),i=n.n(s),o=n(27378),a=n(26917);let u=e=>{let{value:t,onChange:n,placeholder:s,...u}=e,[c,l]=(0,o.useState)(t);(0,o.useEffect)(()=>{l(t||"")},[t]);let d=i()(n,500),m=(0,o.useCallback)(e=>{l(e),d(e)},[]);return(0,r.jsx)(a.Z,{value:c,onChange:m,onClear:()=>{l(""),n("")},placeholder:s,...u})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(24246),s=n(96306),i=n(88038),o=n.n(i),a=n(86677);n(27378);var u=n(25980),c=n(90867),l=n(77830),d=()=>{let e=(0,a.useRouter)();return(0,r.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(s.xuv,{children:[(0,r.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(s.wpx,{onClick:()=>{e.push(l.fz)},children:"Configure"})]}),(0,r.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:n,padded:i=!0,mainProps:l}=e,m=(0,u.hz)(),f=(0,a.useRouter)(),p="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,v=!(m.flags.privacyRequestsConfiguration&&p),{data:g}=(0,c.JE)(void 0,{skip:v}),{data:y}=(0,c.PW)(void 0,{skip:v}),h=m.flags.privacyRequestsConfiguration&&(!g||!y)&&p;return(0,r.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(o(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(s.kCb,{as:"main",direction:"column",py:i?6:0,px:i?10:0,h:i?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...l,children:[h?(0,r.jsx)(d,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var r=n(24246),s=n(96306),i=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:a,rightContent:u,style:c,...l}=e;return(0,r.jsxs)("div",{...l,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,r.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(s.lQT,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,u&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:u})]}),!!n&&(0,r.jsx)(i.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var r=n(24246),s=n(96306),i=n(79894),o=n.n(i),a=n(27378);let{Text:u}=s.AntTypography,c=e=>{let{items:t,...n}=e,i=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let i=n===t.length-1,a={...e},c=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,r.jsx)(u,{style:{color:"inherit",maxWidth:i?void 0:400},ellipsis:!i,id:i?"breadcrumb-current-page":void 0,children:a.title})),c)?a.title=(0,r.jsx)(s.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,r.jsx)(o(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,r.jsx)(s.zrq,{items:i,...n})}},54762:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(24246),s=n(96306),i=n(62165),o=n(21910);let a=e=>{let{consentStatus:t}=e,{flags:n}=(0,i.hz)(),{assetConsentStatusLabels:a}=n;return a&&(null==t?void 0:t.status)===o.pF.ALERT?(0,r.jsx)(s.esZ,{title:null==t?void 0:t.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,r.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,r.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},37059:function(e,t,n){"use strict";n.d(t,{Ak:function(){return g},EY:function(){return m},Tj:function(){return p},Ud:function(){return a},Vr:function(){return y},WJ:function(){return c},mi:function(){return h},nP:function(){return d},nS:function(){return f},rs:function(){return l},sX:function(){return v},ut:function(){return x},wi:function(){return u}});var r=n(78780),s=n(16394),i=n(21910),o=n(98145);let{useGetAggregateMonitorResultsQuery:a,useGetDiscoveredSystemAggregateQuery:u,useGetDiscoveredAssetsQuery:c,useAddMonitorResultSystemsMutation:l,useIgnoreMonitorResultSystemsMutation:d,useAddMonitorResultAssetsMutation:m,useIgnoreMonitorResultAssetsMutation:f,useRestoreMonitorResultAssetsMutation:p,useUpdateAssetsSystemMutation:v,useUpdateAssetsDataUseMutation:g,useUpdateAssetsMutation:y,useGetConsentBreakdownQuery:h,useGetWebsiteMonitorResourceFiltersQuery:x}=r.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:r}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:r,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:n=1,size:r=20,search:s,diff_status:i}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:n,size:r,search:s,diff_status:i}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:r=1,size:a=20,search:u,diff_status:c=[i.LL.ADDITION],sort_by:l=[o.r6.CONSENT_AGGREGATED,"urn"],sort_asc:d=!0,resource_type:m,data_uses:f,locations:p,consent_aggregated:v}=e,g=Array.isArray(l)?l:[l],y=(0,s.$J)({sort_by:g,resource_type:m,data_uses:f,locations:p,consent_aggregated:v});return{url:"/plus/discovery-monitor/".concat(t,"/results?").concat(y.toString()),params:{resolved_system_id:n,page:r,size:a,search:u,diff_status:c,sort_asc:d}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,s.du)(n,"resolved_system_ids");return{url:"/plus/discovery-monitor/".concat(t,"/promote"),method:"POST",params:r?new URLSearchParams(r):new URLSearchParams}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,s.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),restoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams({status_to_set:i.LL.ADDITION});return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]}),getConsentBreakdown:e.query({query:e=>{let{stagedResourceUrn:t,status:n,page:r=1,size:s=20}=e;return{url:"/plus/discovery-monitor/staged_resource/".concat(encodeURIComponent(t),"/consent"),params:{status:n,page:r,size:s}}}}),getWebsiteMonitorResourceFilters:e.query({query:e=>{let{monitor_config_id:t,resolved_system_id:n,diff_status:r=[i.LL.ADDITION],search:o,resource_type:a,data_uses:u,locations:c,consent_aggregated:l}=e,d={monitor_config_id:t,resolved_system_id:n,diff_status:r};o&&(d.search=o);let m=(0,s.$J)({resource_type:a,data_uses:u,locations:c,consent_aggregated:l}).toString();return{url:m?"/plus/filters/website_monitor_resources?".concat(m):"/plus/filters/website_monitor_resources",params:d}},providesTags:["Discovery Monitor Results"]})})})},98145:function(e,t,n){"use strict";var r,s,i,o,a,u,c,l;n.d(t,{EI:function(){return o},X1:function(){return r},r6:function(){return s},vQ:function(){return i}}),(a=r||(r={})).WITH_CONSENT="With consent",a.WITHOUT_CONSENT="Without consent",a.EXEMPT="Exempt",a.UNKNOWN="Unknown",(u=s||(s={})).NAME="name",u.RESOURCE_TYPE="resource_type",u.SYSTEM="system",u.DATA_USES="data_uses",u.LOCATIONS="locations",u.DOMAIN="domain",u.PAGE="page",u.CONSENT_AGGREGATED="consent_aggregated",u.ACTIONS="actions",(c=i||(i={})).SYSTEM_NAME="system_name",c.TOTAL_UPDATES="total_updates",c.DATA_USE="data_use",c.LOCATIONS="locations",c.DOMAINS="domains",c.ACTIONS="actions",(l=o||(o={})).LOCATION="location",l.PAGE="page"},2656:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(24246),s=n(96306),i=n(79894),o=n.n(i),a=n(27378),u=n(30952),c=n(77213),l=n(77830),d=n(58754),m=n(47935),f=n(7426),p=n(37059);let v=e=>{let{isConfigLoading:t}=e;return(0,r.jsx)(c.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,r.jsx)(s.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,r.jsx)(s.$jN,{color:"primary.900"}):(0,r.jsx)(s.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},g=()=>(0,r.jsx)(s.oj8,{image:s.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,r.jsx)(o(),{href:l.KH,passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(s.wpx,{type:"primary",children:"Visit integrations"})})});var y=n(10969),h=n(60145),x=n(11558),j=n(70641),_=n(7317),T=n(85302),b=n(64892),S=n(16394),A=n(21910),E=n(54762);let{Text:N}=s.AntTypography,D=e=>{let{monitorSummary:t,showSkeleton:n,...i}=e,{name:u,consent_status:c,total_updates:d,updates:m,last_monitored:f,secrets:p,key:v,connection_type:g}=t,D=(0,a.useMemo)(()=>(null==p?void 0:p.url)?(0,S.ge)(p.url):void 0,[null==p?void 0:p.url]),w=(0,a.useMemo)(()=>D?(0,S.tl)(D,60):void 0,[D]),R=Object.entries(m).map(e=>"".concat(e[1]," ").concat(e[0],"s")).join(", "),C=f?(0,S.p6)(new Date(f)):void 0,P=f?function(e,t,n){let r;let s=(0,h.j)(),i=n?.locale??s.locale??y._,o=(0,T.U)(e,t);if(isNaN(o))throw RangeError("Invalid time value");let a=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o}),[u,c]=(0,_.d)(n?.in,...o>0?[t,e]:[e,t]),l=(0,x.u)(n?.roundingMethod??"round"),d=c.getTime()-u.getTime(),m=d/b.yJ,f=(d-((0,j.D)(c)-(0,j.D)(u)))/b.yJ,p=n?.unit;if("second"===(r=p||(m<1?"second":m<60?"minute":m<b.H_?"hour":f<b.fH?"day":f<b.UU?"month":"year"))){let e=l(d/1e3);return i.formatDistance("xSeconds",e,a)}if("minute"===r){let e=l(m);return i.formatDistance("xMinutes",e,a)}if("hour"===r){let e=l(m/60);return i.formatDistance("xHours",e,a)}if("day"===r){let e=l(f/b.H_);return i.formatDistance("xDays",e,a)}if("month"===r){let e=l(f/b.fH);return 12===e&&"month"!==p?i.formatDistance("xYears",1,a):i.formatDistance("xMonths",e,a)}{let e=l(f/b.UU);return i.formatDistance("xYears",e,a)}}(new Date(f),new Date,{addSuffix:!0}):void 0;return(0,r.jsx)(s.krs.Item,{"data-testid":"monitor-result-".concat(v),...i,children:(0,r.jsx)(s.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,r.jsxs)(s.bue,{gutter:12,className:"w-full",children:[(0,r.jsx)(s.JGx,{span:17,className:"align-middle",children:(0,r.jsx)(s.krs.Item.Meta,{avatar:(0,r.jsx)(s.t3Z,{src:w,size:30,icon:(0,r.jsx)(s.PJP.huD,{size:30}),style:{backgroundColor:"transparent",color:"var(--ant-color-text)"},alt:"".concat(D," icon")}),title:(0,r.jsxs)(s.jqI,{align:"center",gap:4,children:[(0,r.jsx)(o(),{href:"".concat(l.vi,"/").concat(v),className:"whitespace-nowrap",children:"".concat(d," assets detected").concat(D?" on ".concat(D):"")}),(0,r.jsx)(E.l,{consentStatus:c}),g===A.Rj.TEST_WEBSITE&&(0,r.jsx)(s.j8w,{color:"nectar",style:{fontWeight:"normal"},children:"test monitor"})]}),description:"".concat(R," detected.")})}),(0,r.jsx)(s.JGx,{span:4,className:"flex items-center justify-end",children:(0,r.jsx)(N,{ellipsis:{tooltip:u},children:u})}),(0,r.jsx)(s.JGx,{span:3,className:"flex items-center justify-end",children:!!P&&(0,r.jsx)(N,{"data-testid":"monitor-date",ellipsis:{tooltip:C},children:P})})]})})})};var w=()=>{var e;let t=(0,s.pmc)(),{PAGE_SIZES:n,pageSize:i,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x,onNextPageClick:j,isNextPageDisabled:_,startRange:T,endRange:b,pageIndex:S,setTotalPages:A,resetPageIndexToDefault:E}=(0,m.oi)(),[N,w]=(0,a.useState)(""),{data:R,isLoading:C}=(0,f.tB)({api_set:!1}),P=!!(null==R?void 0:null===(e=R.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,a.useEffect)(()=>{E()},[N,E]);let{data:M,isError:I,isLoading:k,isFetching:O}=(0,p.Ud)({page:S,size:i,search:N},{skip:C||!P});(0,a.useEffect)(()=>{I&&t&&P&&t({title:"Error fetching data",description:"Please try again later",status:"error"})},[I,t,P]),(0,a.useEffect)(()=>{if(M){var e;A(null!==(e=M.total)&&void 0!==e?e:1)}},[M,A]);let q=(null==M?void 0:M.items)||[],L=O?Array.from({length:i},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],U=(0,a.useCallback)(e=>[(0,r.jsx)(o(),{href:"".concat(l.vi,"/").concat(e),passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(s.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return P?(0,r.jsxs)(c.Z,{title:"Action center",children:[(0,r.jsx)(d.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,r.jsx)(s.jqI,{className:"justify-between py-6",children:(0,r.jsx)(u.f,{value:N,onChange:w})}),(0,r.jsx)(s.krs,{loading:k,dataSource:q||L,locale:{emptyText:(0,r.jsx)(g,{})},renderItem:e=>!!(null==e?void 0:e.key)&&(0,r.jsx)(D,{showSkeleton:O,monitorSummary:e,actions:U(e.key)},e.key)}),!!q&&!!(null==M?void 0:M.total)&&M.total>i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.htM,{className:"mb-6 mt-0"}),(0,r.jsx)(m.s8,{totalRows:(null==M?void 0:M.total)||0,pageSizes:n,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x||O,onNextPageClick:j,isNextPageDisabled:_||O,startRange:T,endRange:b})]})]}):(0,r.jsx)(v,{isConfigLoading:C})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);