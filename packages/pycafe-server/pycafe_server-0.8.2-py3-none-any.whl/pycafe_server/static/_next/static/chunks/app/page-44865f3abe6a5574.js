(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{11234:function(e,n,t){Promise.resolve().then(t.bind(t,62135))},62135:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _},dynamic:function(){return w}});var r=t(57437),a=t(2265),i=t(21740),o=t(22720),l=t(89),s=t(91929),d=t(34036);t(11404);var c=t(7032),u=t(97224),h=t(74069),f=t(52513),p=t(59605),g=t(14159),x=t(27648),m=t(99960);function v(e){let[n,t]=a.useState(e.file),[i,o]=a.useState("none"),[l,s]=a.useState(null),d=a.useRef(null),c=async e=>{e.preventDefault();let n=null;try{n=(await (0,m.AC)(e.dataTransfer.items[0].webkitGetAsEntry(),"")).fileList[0]}catch(e){console.error("Error uploading files",e),o("none"),s("".concat(e));return}if(n)"base64"===n.encoding&&(n.content=new TextDecoder().decode((0,m.tV)(n.content||"")));else{o("none"),s("No file found");return}o("none"),t(n)},u={};return(u="file"===i?{border:"2px solid green",background:"linear-gradient(110deg, transparent 0%, rgba(11, 216, 42, 0.207) 65%, rgba(11, 216, 42, 0.414) 100%)"}:"error"===i?{border:"2px solid lightcoral",background:"linear-gradient(110deg, transparent 0%, rgba(216, 11, 45, 0.207) 65%, rgba(216, 11, 45, 0.414) 100%)"}:{border:"var(--border-glass-elements)",background:"var(--background-gradient-1)"},a.useEffect(()=>{if(n&&d.current&&d.current.contentWindow){var e,t,r;null===(e=d.current.contentWindow)||void 0===e||e.document.open(),null===(t=d.current.contentWindow)||void 0===t||t.document.write(n.content||""),null===(r=d.current.contentWindow)||void 0===r||r.document.close()}},[n]),n)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{variant:"indeterminate"}),(0,r.jsxs)("span",{style:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:["Loading ",n.name,"..."]}),(0,r.jsx)("iframe",{ref:d,style:{height:0,border:"none"}})]}):(0,r.jsx)("div",{style:{flexGrow:1,padding:"50px"},onDrop:c,onDragOver:e=>{e.preventDefault(),e.dataTransfer&&e.dataTransfer.items&&1===e.dataTransfer.items.length&&"text/html"===e.dataTransfer.items[0].type?o("file"):o("error")},onDragLeave:()=>o("none"),children:(0,r.jsx)(x.default,{href:"/view",style:{color:"var(--color-text)",textDecoration:"none"},children:(0,r.jsxs)(p.Z,{className:"framework-box",style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",...u},children:[(0,r.jsx)("span",{style:{textTransform:"uppercase",textDecoration:"underline"},children:"Open the PyCafe viewer"}),(0,r.jsx)("span",{style:{fontSize:"0.9em"},children:"Or drag and drop a file here"}),l&&(0,r.jsx)("span",{style:{color:"crimson"},children:l})]})})})}var j=t(92344),y=t(50386),b=t(93646);let w="force-static";function k(e){var n,t;let a=null!==(n=e.showDescription)&&void 0!==n&&n,o=null!==(t=e.isMobile)&&void 0!==t&&t,l="dark"===e.theme.palette.mode,s=(0,u.aF)(),d=!s||s.info.is_editor;return(0,r.jsxs)("div",{className:"create-banner",children:[(0,r.jsx)("h2",{children:d?"Open the editor to create a new app":"You are not an editor, and cannot create projects"}),!d&&c.Xd.becomeEditorUrl&&(0,r.jsxs)("h2",{children:["Get editor access"," ",(0,r.jsx)("a",{href:c.Xd.becomeEditorUrl,target:"_blank",style:{color:"var(--header-logo-color)"},children:"here"})]}),(0,r.jsx)("div",{className:"create-buttons",children:d&&c.Xd.frameworks.map(e=>{let n=c.Ec[e];return(0,r.jsx)("a",{href:"/snippet/".concat(n.appType,"/v1"),style:{textDecoration:"none",color:"unset",display:"flex"},children:(0,r.jsx)(h.x,{title:n.name,description:a?n.description2:"",isMobile:o,image:(0,i.hB)(n.appType,a,l),actionIcon:"add",disabled:!d})},n.appType)})})]})}function _(e){let{params:n,searchParams:t}=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let i=(0,o.Z)(),h=(0,u.aF)(),p=(0,l.Z)("(max-width: 1200px)"),[g,x]=a.useState(null),[m,w]=a.useState(null),[_,E]=a.useState(!1);return a.useEffect(()=>{console.info("listening for messages"),window.parent.postMessage("ready","*");let e=async e=>{if("loadProject"===e.data.type){let n=e.data.projectData,t=n.signatureJwt;if(window===window.top&&E(!0),null===t){x(n.projectState),w("trial");return}await (0,b.gW)(n.projectState,t)?(x(n.projectState),w("valid")):w("invalid")}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,r.jsxs)(r.Fragment,{children:[c.Xd.trialmode&&(0,r.jsxs)("h3",{style:{textAlign:"center",backgroundColor:"var(--color-primary)",padding:"1em 0",margin:"0"},children:["PyCafe server is running in trial mode, please obtain a license key at"," ",(0,r.jsx)("a",{href:"https://py.cafe/contact",target:"_blank",style:{color:"var(--header-logo-color)"},children:"PyCafe"}),(0,r.jsx)(s.Z,{style:{marginLeft:"0.4em",verticalAlign:"text-bottom"},children:"keyboard_double_arrow_right"})]}),!g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.ZP,{noBranding:c.Xd.noAnonBranding&&null===h,subtitle:c.rv}),!c.Xd.requireAuth||h&&h.info.is_editor?(0,r.jsx)("div",{style:{textAlign:"right",paddingRight:"28px"},children:(0,r.jsx)("a",{href:"/api-keys",style:{color:"var(--header-logo-color)"},children:"API Keys"})}):null,(0,r.jsxs)("div",{className:"hero",children:[!c.Xd.requireAuth||h?(0,r.jsx)(k,{theme:i,showDescription:!0,isMobile:p}):null,!c.Xd.requireAuth||h?null:(0,r.jsx)(d.Z,{variant:"contained",color:"primary",href:"/_login",children:"Sign in"})]})]}),c.Xd.requireAuth&&!h||g?null:(0,r.jsx)(v,{file:void 0,setExternalStates:(e,n,t)=>{x(e),w(n),E(t)}}),"invalid"===m&&(0,r.jsx)("h1",{children:"Error: Invalid signature"}),g&&_?(0,r.jsx)(j.CheckUser,{children:(0,r.jsx)(y.jU,{initialProjectState:g,initialAppState:{appView:!1,sidebar:!1,editEnable:!0}})}):null]})}},92344:function(e,n,t){"use strict";t.d(n,{CheckUser:function(){return l}});var r=t(57437),a=t(7032),i=t(97224),o=t(34036);function l(e){let{children:n}=e,t=(0,i.aF)();return a.Xd.requireAuth&&null===t?(0,r.jsx)(o.Z,{variant:"contained",color:"primary",href:"/_login?next_url=".concat(window.location.pathname),children:"Sign in"}):!t||t.info.is_editor?n:(0,r.jsx)("h2",{children:"You are not an editor, and cannot create projects"})}}},function(e){e.O(0,[436,198,72,218,155,50,182,36,543,5,250,386,971,117,744],function(){return e(e.s=11234)}),_N_E=e.O()}]);