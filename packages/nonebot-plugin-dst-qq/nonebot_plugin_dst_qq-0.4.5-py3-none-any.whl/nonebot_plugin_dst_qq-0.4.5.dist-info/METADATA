Metadata-Version: 2.4
Name: nonebot-plugin-dst-qq
Version: 0.4.5
Summary: åŸºäº NoneBot2 çš„é¥¥è’ç®¡ç†å¹³å° (DMP) QQ æœºå™¨äººæ’ä»¶ï¼Œæ”¯æŒæ¸¸æˆä¿¡æ¯æŸ¥è¯¢ã€å‘½ä»¤æ‰§è¡Œå’Œæ¶ˆæ¯äº’é€šåŠŸèƒ½
Project-URL: Homepage, https://github.com/uitok/nonebot-plugin-dst-qq
Project-URL: Repository, https://github.com/uitok/nonebot-plugin-dst-qq
Project-URL: Documentation, https://github.com/uitok/nonebot-plugin-dst-qq#readme
Project-URL: Bug Tracker, https://github.com/uitok/nonebot-plugin-dst-qq/issues
Author-email: uitok <ui_101@qq.com>
License: MIT
License-File: LICENSE
Keywords: dmp,don't starve together,dst,message-exchange,nonebot,nonebot2,plugin,qq-bot,é¥¥è’
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Communications :: Chat
Classifier: Topic :: Games/Entertainment
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: <4.0,>=3.9
Requires-Dist: aiosqlite>=0.19.0
Requires-Dist: httpx>=0.24.0
Requires-Dist: nonebot-adapter-onebot>=2.4.0
Requires-Dist: nonebot-plugin-alconna>=0.22.0
Requires-Dist: nonebot-plugin-htmlrender>=0.3.0
Requires-Dist: nonebot-plugin-localstore>=0.6.0
Requires-Dist: nonebot2>=2.4.0
Requires-Dist: pillow>=10.0.0
Requires-Dist: playwright>=1.40.0
Requires-Dist: pydantic
Requires-Dist: watchdog>=3.0.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: flake8>=6.0.0; extra == 'dev'
Requires-Dist: isort>=5.12.0; extra == 'dev'
Requires-Dist: mypy>=1.0.0; extra == 'dev'
Requires-Dist: pytest-asyncio>=0.21.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Description-Content-Type: text/markdown

# nonebot-plugin-dst-qq

[![PyPI](https://img.shields.io/pypi/v/nonebot-plugin-dst-qq)](https://pypi.org/project/nonebot-plugin-dst-qq/)
[![Python](https://img.shields.io/pypi/pyversions/nonebot-plugin-dst-qq)](https://pypi.org/pypi/nonebot-plugin-dst-qq/)
[![License](https://img.shields.io/pypi/l/nonebot-plugin-dst-qq)](https://pypi.org/project/nonebot-plugin-dst-qq/)
[![NoneBot](https://img.shields.io/badge/nonebot-2.3.0+-red.svg)](https://nonebot.dev/)

åŸºäº NoneBot2 å’Œ Alconna çš„é¥¥è’ç®¡ç†å¹³å° (DMP) QQ æœºå™¨äººæ’ä»¶ï¼Œæ”¯æŒæ¸¸æˆä¿¡æ¯æŸ¥è¯¢ã€å‘½ä»¤æ‰§è¡Œå’Œæ¶ˆæ¯äº’é€šåŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

**æ–°ç”¨æˆ·ï¼Ÿ** æŸ¥çœ‹ **[å®Œæ•´å®‰è£…æŒ‡å— (INSTALLATION.md)](INSTALLATION.md)** ç«‹å³ä½“éªŒï¼åŒ…å«ä»é›¶å¼€å§‹çš„è¯¦ç»†æ•™ç¨‹å’Œæ•…éšœæ’é™¤ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ® æ ¸å¿ƒåŠŸèƒ½
- **ğŸ  æˆ¿é—´ä¿¡æ¯** - ç»¼åˆæ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€ã€ä¸–ç•Œä¿¡æ¯ã€ç©å®¶åˆ—è¡¨
- **ğŸŒ ä¸–ç•Œç®¡ç†** - ä¸–ç•ŒçŠ¶æ€ç›‘æ§ã€å¤‡ä»½ç®¡ç†ã€å›æ¡£é‡ç½®
- **ğŸ‘¥ ç©å®¶ç®¡ç†** - åœ¨çº¿ç©å®¶åˆ—è¡¨ã€ç®¡ç†å‘˜åˆ—è¡¨ã€å°ç¦ç™½åå•
- **ğŸ’» ç³»ç»Ÿç›‘æ§** - CPU/å†…å­˜ä½¿ç”¨ç‡ã€æœåŠ¡å™¨è´Ÿè½½çŠ¶æ€
- **ğŸ”— æœåŠ¡å™¨æµè§ˆ** - å®˜æ–¹æœåŠ¡å™¨åˆ—è¡¨æŸ¥è¯¢å’Œç­›é€‰

### ğŸ’¬ æ¶ˆæ¯äº’é€š
- **åŒå‘é€šä¿¡** - QQæ¶ˆæ¯ä¸æ¸¸æˆå†…æ¶ˆæ¯å®æ—¶åŒå‘äº’é€š
- **æ™ºèƒ½è·¯ç”±** - æ”¯æŒç§èŠ/ç¾¤èŠæ¨¡å¼ï¼Œè‡ªåŠ¨æ¶ˆæ¯è¿‡æ»¤
- **ä¼šè¯ç®¡ç†** - å¤šç”¨æˆ·ç‹¬ç«‹ä¼šè¯ï¼Œè‡ªåŠ¨è¶…æ—¶æ¸…ç†
- **æ¶ˆæ¯å»é‡** - é˜²æ­¢æ¶ˆæ¯é‡å¤å‘é€ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

### ğŸ” ç‰©å“ç™¾ç§‘ 
- **æ™ºèƒ½æœç´¢** - æ”¯æŒä¸­è‹±æ–‡æœç´¢ï¼Œè¦†ç›–2800+é¥¥è’ç‰©å“
- **Wikiæˆªå›¾** - è‡ªåŠ¨è·å–ç‰©å“è¯¦æƒ…æˆªå›¾ï¼Œç²¾ç¡®å±•ç¤ºä¿¡æ¯
- **å¿«é€Ÿå“åº”** - æœ¬åœ°æ•°æ®åº“ç¼“å­˜ï¼Œæ¯«ç§’çº§æŸ¥è¯¢é€Ÿåº¦
- **æ¨¡ç³ŠåŒ¹é…** - æ”¯æŒæ¨¡ç³Šæœç´¢å’Œå¤šç»“æœé€‰æ‹©

### ğŸ› ï¸ ç®¡ç†åŠŸèƒ½
- **å‘½ä»¤æ‰§è¡Œ** - æ¸¸æˆå†…æ§åˆ¶å°å‘½ä»¤è¿œç¨‹æ‰§è¡Œ
- **å¤‡ä»½ç®¡ç†** - è‡ªåŠ¨å¤‡ä»½åˆ—è¡¨å’Œæ‰‹åŠ¨å¤‡ä»½åˆ›å»º
- **èŠå¤©è®°å½•** - æ¸¸æˆå†…èŠå¤©å†å²æŸ¥è¯¢å’Œç»Ÿè®¡
- **é…ç½®ç®¡ç†** - åŠ¨æ€é…ç½®æ›´æ–°ï¼Œçƒ­é‡è½½æ”¯æŒ

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **ğŸ§  åŒå±‚ç¼“å­˜** - å†…å­˜+æ–‡ä»¶ç¼“å­˜ï¼Œå‡å°‘70%é‡å¤è¯·æ±‚
- **ğŸ—„ï¸ è¿æ¥æ± ** - ç»Ÿä¸€æ•°æ®åº“è¿æ¥ç®¡ç†ï¼Œæå‡30%æ€§èƒ½
- **ğŸ“¦ æ¨¡å—åŒ–** - æ¸…æ™°æ¶æ„è®¾è®¡ï¼Œä»£ç é‡å‡å°‘33%
- **ğŸ”„ å¼‚æ­¥å¤„ç†** - å…¨å¼‚æ­¥è®¾è®¡ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®

## ğŸ“¦ å®‰è£…

### ä½¿ç”¨ nb-cli å®‰è£… (æ¨è)
```bash
nb plugin install nonebot-plugin-dst-qq
```

### ä½¿ç”¨ pip å®‰è£…
```bash
pip install nonebot-plugin-dst-qq
```

### ä½¿ç”¨ poetry å®‰è£…
```bash
poetry add nonebot-plugin-dst-qq
```

## âš™ï¸ é…ç½®

### 1. ç¯å¢ƒå˜é‡é…ç½®
åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```env
# OneBot V11 é…ç½® (å¿…éœ€)
ONEBOT_WS_URLS=["ws://your-onebot-server:port"]
ONEBOT_ACCESS_TOKEN="your-access-token"

# è¶…çº§ç”¨æˆ· (å¿…éœ€)
SUPERUSERS=["your-qq-number"]

# è°ƒè¯•æ¨¡å¼ (å¯é€‰)
DEBUG=true
LOG_LEVEL=DEBUG
```

### 2. DMP é…ç½®æ–‡ä»¶
æ’ä»¶ä¼šè‡ªåŠ¨åœ¨ä»¥ä¸‹ä½ç½®åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š
- `config/config/app_config.json` - ä¸»é…ç½®æ–‡ä»¶
- `nonebot_plugin_dst_qq/app_config.template.json` - é…ç½®æ¨¡æ¿

é…ç½®ç¤ºä¾‹ï¼š
```json
{
    "dmp_url": "http://your-dmp-server:port/v1",
    "auth": {
        "username": "your-username",
        "password": "your-password"
    },
    "clusters": ["YourClusterName"],
    "cache_settings": {
        "enable_cache": true,
        "cache_ttl": 300
    }
}
```

## ğŸ¯ å‘½ä»¤ä½¿ç”¨

### åŸºç¡€å‘½ä»¤
| å‘½ä»¤ | åˆ«å | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|------|
| `/æˆ¿é—´` | `room`, `çŠ¶æ€` | ç»¼åˆæœåŠ¡å™¨ä¿¡æ¯ | `/æˆ¿é—´` |
| `/ä¸–ç•Œ` | `world`, `worlds` | ä¸–ç•ŒçŠ¶æ€åˆ—è¡¨ | `/ä¸–ç•Œ` |
| `/ç©å®¶` | `players`, `åœ¨çº¿` | åœ¨çº¿ç©å®¶åˆ—è¡¨ | `/ç©å®¶` |
| `/ç³»ç»Ÿ` | `sys`, `system` | ç³»ç»ŸçŠ¶æ€ä¿¡æ¯ | `/ç³»ç»Ÿ` |

### ç‰©å“æŸ¥è¯¢
| å‘½ä»¤ | åˆ«å | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|------|
| `/ç‰©å“ <å…³é”®è¯>` | `item`, `wiki` | ç‰©å“WikiæŸ¥è¯¢ | `/ç‰©å“ å¤§ç†çŸ³` |
| `/æœç´¢ç‰©å“ <å…³é”®è¯>` | `search` | ç‰©å“æœç´¢åˆ—è¡¨ | `/æœç´¢ç‰©å“ çŸ³å¤´` |
| `/ç‰©å“ç»Ÿè®¡` | `item_stats` | ç‰©å“æ•°æ®ç»Ÿè®¡ | `/ç‰©å“ç»Ÿè®¡` |

### æ¶ˆæ¯äº’é€š
| å‘½ä»¤ | åˆ«å | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|------|
| `/æ¶ˆæ¯äº’é€š` | `bridge`, `äº’é€š` | å¼€å¯æ¶ˆæ¯äº’é€š | `/æ¶ˆæ¯äº’é€š` |
| `/å…³é—­äº’é€š` | `stop_bridge` | å…³é—­æ¶ˆæ¯äº’é€š | `/å…³é—­äº’é€š` |
| `/äº’é€šçŠ¶æ€` | `bridge_status` | æŸ¥çœ‹äº’é€šçŠ¶æ€ | `/äº’é€šçŠ¶æ€` |

### æœåŠ¡å™¨ç®¡ç† (è¶…çº§ç”¨æˆ·)
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/æ‰§è¡Œ <å‘½ä»¤>` | æ‰§è¡Œæ¸¸æˆå†…å‘½ä»¤ | `/æ‰§è¡Œ c_godmode()` |
| `/å¤‡ä»½` | æŸ¥çœ‹å¤‡ä»½åˆ—è¡¨ | `/å¤‡ä»½` |
| `/åˆ›å»ºå¤‡ä»½ [åç§°]` | åˆ›å»ºæ¸¸æˆå¤‡ä»½ | `/åˆ›å»ºå¤‡ä»½ æµ‹è¯•å¤‡ä»½` |
| `/å›æ¡£ <å¤©æ•°>` | ä¸–ç•Œå›æ¡£ | `/å›æ¡£ 1` |

### è°ƒè¯•å‘½ä»¤
| å‘½ä»¤ | åŠŸèƒ½ | ç¤ºä¾‹ |
|------|------|------|
| `/æµ‹è¯•æ–‡å­—` | æµ‹è¯•æ¶ˆæ¯å‘é€ | `/æµ‹è¯•æ–‡å­—` |
| `/è°ƒè¯•ä¿¡æ¯` | æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ | `/è°ƒè¯•ä¿¡æ¯` |
| `/é‡è½½é…ç½®` | é‡æ–°åŠ è½½é…ç½® | `/é‡è½½é…ç½®` |

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—åŒ–ç»“æ„
```
nonebot_plugin_dst_qq/
â”œâ”€â”€ database/                 # ğŸ—„ï¸ æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py          # ç»Ÿä¸€æ¥å£å’Œå…¼å®¹å±‚
â”‚   â”œâ”€â”€ connection.py        # è¿æ¥æ± ç®¡ç†å™¨
â”‚   â””â”€â”€ models.py           # æ•°æ®æ¨¡å‹å±‚
â”œâ”€â”€ plugins/                 # ğŸ”Œ æ ¸å¿ƒæ’ä»¶
â”‚   â”œâ”€â”€ dmp_api.py          # DMP APIé›†æˆ
â”‚   â”œâ”€â”€ dmp_advanced.py     # DMPé«˜çº§åŠŸèƒ½
â”‚   â””â”€â”€ message_bridge.py   # æ¶ˆæ¯äº’é€šæ¡¥æ¥
â”œâ”€â”€ commands/                # ğŸ¯ å‘½ä»¤æ¨¡å—
â”‚   â”œâ”€â”€ admin_commands.py   # ç®¡ç†å‘˜å‘½ä»¤
â”‚   â”œâ”€â”€ item_commands.py    # ç‰©å“æŸ¥è¯¢å‘½ä»¤
â”‚   â””â”€â”€ server_commands.py  # æœåŠ¡å™¨å‘½ä»¤
â”œâ”€â”€ core/                   # ğŸ§  æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ simple_cache.py     # ç®€åŒ–ç¼“å­˜ç³»ç»Ÿ
â”‚   â”œâ”€â”€ message_utils.py    # æ¶ˆæ¯å·¥å…·
â”‚   â””â”€â”€ server_browser.py   # æœåŠ¡å™¨æµè§ˆå™¨
â””â”€â”€ utils/                  # ğŸ› ï¸ å·¥å…·æ¨¡å—
    â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
    â”œâ”€â”€ utils.py            # é€šç”¨å·¥å…·
    â””â”€â”€ scheduler.py        # ä»»åŠ¡è°ƒåº¦
```

### æ€§èƒ½ç‰¹æ€§
- **ğŸš€ å¼‚æ­¥ä¼˜å…ˆ**: å…¨å¼‚æ­¥è®¾è®¡ï¼Œæ”¯æŒé«˜å¹¶å‘
- **ğŸ§  æ™ºèƒ½ç¼“å­˜**: LRUç®—æ³•ï¼Œå†…å­˜+æ–‡ä»¶åŒå±‚ç¼“å­˜
- **ğŸ”— è¿æ¥æ± **: æ•°æ®åº“è¿æ¥å¤ç”¨ï¼Œå‡å°‘å¼€é”€
- **ğŸ“¦ æ¨¡å—åŒ–**: æŒ‰éœ€åŠ è½½ï¼Œé™ä½å†…å­˜å ç”¨
- **âš¡ ä¼˜åŒ–ç®—æ³•**: ç¼“å­˜å‘½ä¸­ç‡90%+ï¼Œå“åº”æ—¶é—´<100ms

## ğŸ”§ é«˜çº§é…ç½®

### ç¼“å­˜é…ç½®
```json
{
    "cache_settings": {
        "enable_cache": true,
        "memory_cache_size": 1000,
        "file_cache_ttl": 3600,
        "api_cache_ttl": 300
    }
}
```

### æ•°æ®åº“é…ç½®
```json
{
    "database_settings": {
        "chat_history_days": 30,
        "auto_cleanup": true,
        "backup_enabled": true
    }
}
```

### æ¶ˆæ¯äº’é€šé…ç½®
```json
{
    "bridge_settings": {
        "message_filter": true,
        "max_message_length": 200,
        "auto_reconnect": true,
        "session_timeout": 1800
    }
}
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. æ’ä»¶æ— æ³•è¿æ¥DMPæœåŠ¡å™¨**
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat config/config/app_config.json
# æµ‹è¯•ç½‘ç»œè¿é€šæ€§
curl -X GET "http://your-dmp-server:port/v1/auth/login"
```

**2. æ¶ˆæ¯äº’é€šä¸å·¥ä½œ**  
```bash
# æ£€æŸ¥OneBotè¿æ¥çŠ¶æ€
# ç¡®è®¤è¶…çº§ç”¨æˆ·é…ç½®æ­£ç¡®
# æŸ¥çœ‹æ—¥å¿—é”™è¯¯ä¿¡æ¯
```

**3. ç‰©å“æŸ¥è¯¢å¤±è´¥**
```bash
# é‡è½½ç‰©å“æ•°æ®
/é‡è½½ç‰©å“
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶
ls -la data/database/
```

### æ—¥å¿—ä½ç½®
- NoneBot2æ—¥å¿—: æ§åˆ¶å°è¾“å‡º
- æ’ä»¶æ—¥å¿—: ä½¿ç”¨ `LOG_LEVEL=DEBUG` æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
- æ•°æ®åº“æ—¥å¿—: `data/database/` ç›®å½•

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. åˆ›å»º Pull Request

### å¼€å‘ç¯å¢ƒ
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/uitok/nonebot-plugin-dst-qq.git
cd nonebot-plugin-dst-qq

# å®‰è£…ä¾èµ–
poetry install
# æˆ–
pip install -r requirements.txt

# è¿è¡Œæµ‹è¯•
pytest tests/
```

## ğŸ“‹ ç‰ˆæœ¬å†å²

æŸ¥çœ‹ [CHANGELOG.md](CHANGELOG.md) äº†è§£è¯¦ç»†æ›´æ–°å†å²ã€‚

### æœ€æ–°ç‰ˆæœ¬ v0.4.0
- ğŸ¯ ç¼“å­˜ç³»ç»Ÿé‡æ„ï¼Œæ€§èƒ½æå‡43.6%
- ğŸ—„ï¸ æ•°æ®åº“æ¶æ„ä¼˜åŒ–ï¼Œä»£ç é‡å‡å°‘33%  
- âœ¨ æ–°å¢ç‰©å“WikiæŸ¥è¯¢ç³»ç»Ÿ
- ğŸ”§ ä¿®å¤å¤šé¡¹å…³é”®Bug
- ğŸ“¦ å®Œæ•´æ¨¡å—åŒ–é‡æ„

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](LICENSE) è®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

- [NoneBot2](https://nonebot.dev/) - ä¼˜ç§€çš„Pythonå¼‚æ­¥æœºå™¨äººæ¡†æ¶
- [Alconna](https://github.com/ArcletProject/Alconna) - å¼ºå¤§çš„å‘½ä»¤è§£æå™¨
- [OneBot](https://onebot.dev/) - èŠå¤©æœºå™¨äººåº”ç”¨æ¥å£æ ‡å‡†

## ğŸ“ è”ç³»æ–¹å¼

- ä½œè€…: uitok
- é‚®ç®±: ui_101@qq.com  
- é¡¹ç›®åœ°å€: https://github.com/uitok/nonebot-plugin-dst-qq
- é—®é¢˜åé¦ˆ: https://github.com/uitok/nonebot-plugin-dst-qq/issues

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸€ä¸ª â­ Starï¼