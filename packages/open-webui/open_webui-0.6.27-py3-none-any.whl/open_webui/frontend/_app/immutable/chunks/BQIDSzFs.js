import{e as se,d as He,c as Ye,u as Xe}from"./D3JQ9yZ2.js";import{S as _e,i as ge,s as we,N as Me,O as Fe,a as E,d as f,f as u,g as T,h as d,n as ze,H as ie,I as fe,C as R,D as J,E as K,K as ue,q as B,r as N,F as q,k as re,v as De,e as y,t as M,l as x,c as $,b as F,p as U,G as ee,j as L,y as $e,u as Ee,U as Qe,x as Ze,z as et,A as tt,B as rt,L as Le,J as st,Q as lt}from"./FaFaOjVd.js";import"./IHki7fMi.js";import{t as Ie}from"./2--pGubN.js";import{a as ke,s as nt,b as at}from"./Cw2FLfTo.js";import{f as ot}from"./CUP5ppBP.js";import{M as Ke}from"./CtyAcC0Y.js";import{L as it}from"./BR_-y1pK.js";import{X as qe}from"./OBlpjaGw.js";import"./BSsvkfNC.js";import{b as ft,c as ye}from"./BWfaaZEQ.js";import{f as ut}from"./kDFS4CBV.js";import{D as ct}from"./lG6XWaHp.js";import{G as dt}from"./DBlNIt-I.js";import{P as mt}from"./DH1nlrxk.js";import{T as ht}from"./N6zyuT7D.js";import{A as pt}from"./CRoizkMV.js";import{S as _t}from"./g2Ud3Ipo.js";import"./JldNL9ai.js";import{T as gt}from"./BZyedR-_.js";import{K as wt}from"./Db9SazA9.js";const ur=async(a,e)=>{let t=null;const r=await fetch(`${se}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify(e)}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(t=s.detail,null));if(t)throw t;return r},cr=async(a="")=>{let e=null;const t=await fetch(`${se}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`}}).then(async r=>{if(!r.ok)throw await r.json();return r.json()}).then(r=>r).catch(r=>(e=r.detail,null));if(e)throw e;return t},dr=async(a,e,t)=>{let r=null;const s=await fetch(`${se}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify(t)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return s},mr=async(a,e,t)=>{let r=null;const s=await fetch(`${se}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify({is_expanded:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return s},hr=async(a,e,t)=>{let r=null;const s=await fetch(`${se}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify({parent_id:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(r=o.detail,null));if(r)throw r;return s},pr=async(a,e)=>{let t=null;const r=await fetch(`${se}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).then(s=>s).catch(s=>(t=s.detail,null));if(t)throw t;return r};function bt(a){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(r){e=Fe(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=E(e);t=Fe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(f),s.forEach(f),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",a[1]),u(e,"stroke","currentColor"),u(e,"class",a[0])},m(r,s){T(r,e,s),d(e,t)},p(r,[s]){s&2&&u(e,"stroke-width",r[1]),s&1&&u(e,"class",r[0])},i:ze,o:ze,d(r){r&&f(e)}}}function vt(a,e,t){let{className:r="size-4"}=e,{strokeWidth:s="1.5"}=e;return a.$$set=o=>{"className"in o&&t(0,r=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[r,s]}class _r extends _e{constructor(e){super(),ge(this,e,vt,bt,we,{className:0,strokeWidth:1})}}function Pe(a){var I;let e,t,r,s,o,n,l,i,g,p,_,m,h;function w(c,k){return c[2].share_id?yt:kt}let S=w(a),C=S(a),v=((I=a[4])==null?void 0:I.features.enable_community_sharing)&&We(a);g=new it({});function D(c,k){return c[2].share_id?Et:$t}let b=D(a),V=b(a);return{c(){e=y("div"),t=y("div"),C.c(),r=x(),s=y("div"),o=y("div"),n=y("div"),v&&v.c(),l=x(),i=y("button"),R(g.$$.fragment),p=x(),V.c(),this.h()},l(c){e=$(c,"DIV",{class:!0});var k=E(e);t=$(k,"DIV",{class:!0});var P=E(t);C.l(P),P.forEach(f),r=U(k),s=$(k,"DIV",{class:!0});var X=E(s);o=$(X,"DIV",{class:!0});var te=E(o);n=$(te,"DIV",{class:!0});var G=E(n);v&&v.l(G),l=U(G),i=$(G,"BUTTON",{class:!0,type:!0,id:!0});var W=E(i);J(g.$$.fragment,W),p=U(W),V.l(W),W.forEach(f),G.forEach(f),te.forEach(f),X.forEach(f),k.forEach(f),this.h()},h(){u(t,"class","text-sm dark:text-gray-300 mb-1"),u(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),u(i,"type","button"),u(i,"id","copy-and-share-chat-button"),u(n,"class","flex gap-1"),u(o,"class","flex flex-col items-end space-x-1 mt-3"),u(s,"class","flex justify-end"),u(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(c,k){T(c,e,k),d(e,t),C.m(t,null),d(e,r),d(e,s),d(s,o),d(o,n),v&&v.m(n,null),d(n,l),d(n,i),K(g,i,null),d(i,p),V.m(i,null),_=!0,m||(h=ee(i,"click",a[11]),m=!0)},p(c,k){var P;S===(S=w(c))&&C?C.p(c,k):(C.d(1),C=S(c),C&&(C.c(),C.m(t,null))),(P=c[4])!=null&&P.features.enable_community_sharing?v?v.p(c,k):(v=We(c),v.c(),v.m(n,l)):v&&(v.d(1),v=null),b===(b=D(c))&&V?V.p(c,k):(V.d(1),V=b(c),V&&(V.c(),V.m(i,null)))},i(c){_||(B(g.$$.fragment,c),_=!0)},o(c){N(g.$$.fragment,c),_=!1},d(c){c&&f(e),C.d(),v&&v.d(),q(g),V.d(),m=!1,h()}}}function kt(a){let e=a[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",t;return{c(){t=M(e)},l(r){t=F(r,e)},m(r,s){T(r,t,s)},p(r,s){s&8&&e!==(e=r[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&L(t,e)},d(r){r&&f(t)}}}function yt(a){let e,t=a[3].t("You have shared this chat")+"",r,s,o,n=a[3].t("before")+"",l,i,g,p,_=a[3].t("Click here to")+"",m,h,w,S=a[3].t("delete this link")+"",C,v,D=a[3].t("and create a new shared link.")+"",b,V,I;return{c(){e=y("a"),r=M(t),s=x(),o=y("span"),l=M(n),i=M("."),p=x(),m=M(_),h=x(),w=y("button"),C=M(S),v=x(),b=M(D),this.h()},l(c){e=$(c,"A",{href:!0,target:!0});var k=E(e);r=F(k,t),s=U(k),o=$(k,"SPAN",{class:!0});var P=E(o);l=F(P,n),P.forEach(f),i=F(k,"."),k.forEach(f),p=U(c),m=F(c,_),h=U(c),w=$(c,"BUTTON",{class:!0});var X=E(w);C=F(X,S),X.forEach(f),v=U(c),b=F(c,D),this.h()},h(){u(o,"class","underline"),u(e,"href",g="/s/"+a[2].share_id),u(e,"target","_blank"),u(w,"class","underline")},m(c,k){T(c,e,k),d(e,r),d(e,s),d(e,o),d(o,l),d(e,i),T(c,p,k),T(c,m,k),T(c,h,k),T(c,w,k),d(w,C),T(c,v,k),T(c,b,k),V||(I=ee(w,"click",a[9]),V=!0)},p(c,k){k&8&&t!==(t=c[3].t("You have shared this chat")+"")&&L(r,t),k&8&&n!==(n=c[3].t("before")+"")&&L(l,n),k&4&&g!==(g="/s/"+c[2].share_id)&&u(e,"href",g),k&8&&_!==(_=c[3].t("Click here to")+"")&&L(m,_),k&8&&S!==(S=c[3].t("delete this link")+"")&&L(C,S),k&8&&D!==(D=c[3].t("and create a new shared link.")+"")&&L(b,D)},d(c){c&&(f(e),f(p),f(m),f(h),f(w),f(v),f(b)),V=!1,I()}}}function We(a){let e,t=a[3].t("Share to Open WebUI Community")+"",r,s,o;return{c(){e=y("button"),r=M(t),this.h()},l(n){e=$(n,"BUTTON",{class:!0,type:!0});var l=E(e);r=F(l,t),l.forEach(f),this.h()},h(){u(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),u(e,"type","button")},m(n,l){T(n,e,l),d(e,r),s||(o=ee(e,"click",a[10]),s=!0)},p(n,l){l&8&&t!==(t=n[3].t("Share to Open WebUI Community")+"")&&L(r,t)},d(n){n&&f(e),s=!1,o()}}}function $t(a){let e=a[3].t("Copy Link")+"",t;return{c(){t=M(e)},l(r){t=F(r,e)},m(r,s){T(r,t,s)},p(r,s){s&8&&e!==(e=r[3].t("Copy Link")+"")&&L(t,e)},d(r){r&&f(t)}}}function Et(a){let e=a[3].t("Update and Copy Link")+"",t;return{c(){t=M(e)},l(r){t=F(r,e)},m(r,s){T(r,t,s)},p(r,s){s&8&&e!==(e=r[3].t("Update and Copy Link")+"")&&L(t,e)},d(r){r&&f(t)}}}function It(a){let e,t,r,s=a[3].t("Share Chat")+"",o,n,l,i,g,p,_,m;i=new qe({props:{className:"size-5"}});let h=a[2]&&Pe(a);return{c(){e=y("div"),t=y("div"),r=y("div"),o=M(s),n=x(),l=y("button"),R(i.$$.fragment),g=x(),h&&h.c(),this.h()},l(w){e=$(w,"DIV",{});var S=E(e);t=$(S,"DIV",{class:!0});var C=E(t);r=$(C,"DIV",{class:!0});var v=E(r);o=F(v,s),v.forEach(f),n=U(C),l=$(C,"BUTTON",{class:!0});var D=E(l);J(i.$$.fragment,D),D.forEach(f),C.forEach(f),g=U(S),h&&h.l(S),S.forEach(f),this.h()},h(){u(r,"class","text-lg font-medium self-center"),u(l,"class","self-center"),u(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(w,S){T(w,e,S),d(e,t),d(t,r),d(r,o),d(t,n),d(t,l),K(i,l,null),d(e,g),h&&h.m(e,null),p=!0,_||(m=ee(l,"click",a[8]),_=!0)},p(w,S){(!p||S&8)&&s!==(s=w[3].t("Share Chat")+"")&&L(o,s),w[2]?h?(h.p(w,S),S&4&&B(h,1)):(h=Pe(w),h.c(),B(h,1),h.m(e,null)):h&&($e(),N(h,1,1,()=>{h=null}),Ee())},i(w){p||(B(i.$$.fragment,w),B(h),p=!0)},o(w){N(i.$$.fragment,w),N(h),p=!1},d(w){w&&f(e),q(i),h&&h.d(),_=!1,m()}}}function Dt(a){let e,t,r;function s(n){a[12](n)}let o={size:"md",$$slots:{default:[It]},$$scope:{ctx:a}};return a[0]!==void 0&&(o.show=a[0]),e=new Ke({props:o}),ie.push(()=>fe(e,"show",s)),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){K(e,n,l),r=!0},p(n,[l]){const i={};l&65567&&(i.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,i.show=n[0],ue(()=>t=!1)),e.$set(i)},i(n){r||(B(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function St(a,e,t){let r,s,o;re(a,He,b=>t(14,r=b)),re(a,Ye,b=>t(4,o=b));let{chatId:n}=e,l=null,i=null;const g=De("i18n");re(a,g,b=>t(3,s=b));const p=async()=>{const b=await nt(localStorage.token,n);return i=`${window.location.origin}/s/${b.id}`,t(2,l=await ke(localStorage.token,n)),i},_=async()=>{const b=l.chat;Ie.success(s.t("Redirecting you to Open WebUI Community"));const V="https://openwebui.com",I=await window.open(`${V}/chats/upload`,"_blank");window.addEventListener("message",c=>{c.origin===V&&c.data==="loaded"&&I.postMessage(JSON.stringify({chat:b,models:r.filter(k=>b.models.includes(k.id))}),"*")},!1)};let{show:m=!1}=e;const h=b=>l?b?l.id!==b.id||l.share_id!==b.share_id:!1:!0,w=()=>{t(0,m=!1)},S=async()=>{await at(localStorage.token,n)&&t(2,l=await ke(localStorage.token,n))},C=()=>{_(),t(0,m=!1)},v=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const V=async()=>{const I=await p();return new Blob([I],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":V()})]).then(()=>!0).catch(I=>!1)}else ot(await p());Ie.success(s.t("Copied shared chat URL to clipboard!")),t(0,m=!1)};function D(b){m=b,t(0,m)}return a.$$set=b=>{"chatId"in b&&t(1,n=b.chatId),"show"in b&&t(0,m=b.show)},a.$$.update=()=>{a.$$.dirty&7&&m&&(async()=>{if(n){const b=await ke(localStorage.token,n);h(b)&&t(2,l=b)}else t(2,l=null)})()},[m,n,l,s,o,g,p,_,w,S,C,v,D]}class gr extends _e{constructor(e){super(),ge(this,e,St,Dt,we,{chatId:1,show:0})}}function Ct(a){let e;const t=a[8].default,r=Ze(t,a,a[14],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o&16384)&&et(r,t,s,s[14],e?rt(t,s[14],o,null):tt(s[14]),null)},i(s){e||(B(r,s),e=!0)},o(s){N(r,s),e=!1},d(s){r&&r.d(s)}}}function jt(a){let e,t;return e=new ht({props:{content:a[5].t("More"),$$slots:{default:[Ct]},$$scope:{ctx:a}}}),{c(){R(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,s){K(e,r,s),t=!0},p(r,s){const o={};s&32&&(o.content=r[5].t("More")),s&16384&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Tt(a){let e,t,r,s=a[5].t("Edit")+"",o,n;return e=new mt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),t=x(),r=y("div"),o=M(s),this.h()},l(l){J(e.$$.fragment,l),t=U(l),r=$(l,"DIV",{class:!0});var i=E(r);o=F(i,s),i.forEach(f),this.h()},h(){u(r,"class","flex items-center")},m(l,i){K(e,l,i),T(l,t,i),T(l,r,i),d(r,o),n=!0},p(l,i){(!n||i&32)&&s!==(s=l[5].t("Edit")+"")&&L(o,s)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){l&&(f(t),f(r)),q(e,l)}}}function Vt(a){let e,t,r,s=a[5].t("Export")+"",o,n;return e=new pt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),t=x(),r=y("div"),o=M(s),this.h()},l(l){J(e.$$.fragment,l),t=U(l),r=$(l,"DIV",{class:!0});var i=E(r);o=F(i,s),i.forEach(f),this.h()},h(){u(r,"class","flex items-center")},m(l,i){K(e,l,i),T(l,t,i),T(l,r,i),d(r,o),n=!0},p(l,i){(!n||i&32)&&s!==(s=l[5].t("Export")+"")&&L(o,s)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){l&&(f(t),f(r)),q(e,l)}}}function Bt(a){let e,t,r,s=a[5].t("Delete")+"",o,n;return e=new dt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),t=x(),r=y("div"),o=M(s),this.h()},l(l){J(e.$$.fragment,l),t=U(l),r=$(l,"DIV",{class:!0});var i=E(r);o=F(i,s),i.forEach(f),this.h()},h(){u(r,"class","flex items-center")},m(l,i){K(e,l,i),T(l,t,i),T(l,r,i),d(r,o),n=!0},p(l,i){(!n||i&32)&&s!==(s=l[5].t("Delete")+"")&&L(o,s)},i(l){n||(B(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){l&&(f(t),f(r)),q(e,l)}}}function Nt(a){let e,t,r,s,o,n;return e=new ye({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Tt]},$$scope:{ctx:a}}}),e.$on("click",a[9]),r=new ye({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Vt]},$$scope:{ctx:a}}}),r.$on("click",a[10]),o=new ye({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Bt]},$$scope:{ctx:a}}}),o.$on("click",a[11]),{c(){R(e.$$.fragment),t=x(),R(r.$$.fragment),s=x(),R(o.$$.fragment)},l(l){J(e.$$.fragment,l),t=U(l),J(r.$$.fragment,l),s=U(l),J(o.$$.fragment,l)},m(l,i){K(e,l,i),T(l,t,i),K(r,l,i),T(l,s,i),K(o,l,i),n=!0},p(l,i){const g={};i&16416&&(g.$$scope={dirty:i,ctx:l}),e.$set(g);const p={};i&16416&&(p.$$scope={dirty:i,ctx:l}),r.$set(p);const _={};i&16416&&(_.$$scope={dirty:i,ctx:l}),o.$set(_)},i(l){n||(B(e.$$.fragment,l),B(r.$$.fragment,l),B(o.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),N(r.$$.fragment,l),N(o.$$.fragment,l),n=!1},d(l){l&&(f(t),f(s)),q(e,l),q(r,l),q(o,l)}}}function xt(a){let e,t,r;return t=new ft({props:{class:"w-full max-w-[170px] rounded-lg px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:a[0],transition:ut,$$slots:{default:[Nt]},$$scope:{ctx:a}}}),{c(){e=y("div"),R(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{slot:!0});var o=E(e);J(t.$$.fragment,o),o.forEach(f),this.h()},h(){u(e,"slot","content")},m(s,o){T(s,e,o),K(t,e,null),r=!0},p(s,o){const n={};o&1&&(n.align=s[0]),o&16430&&(n.$$scope={dirty:o,ctx:s}),t.$set(n)},i(s){r||(B(t.$$.fragment,s),r=!0)},o(s){N(t.$$.fragment,s),r=!1},d(s){s&&f(e),q(t)}}}function Ut(a){let e,t,r;function s(n){a[12](n)}let o={$$slots:{content:[xt],default:[jt]},$$scope:{ctx:a}};return a[4]!==void 0&&(o.show=a[4]),e=new ct({props:o}),ie.push(()=>fe(e,"show",s)),e.$on("change",a[13]),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){K(e,n,l),r=!0},p(n,[l]){const i={};l&16431&&(i.$$scope={dirty:l,ctx:n}),!t&&l&16&&(t=!0,i.show=n[4],ue(()=>t=!1)),e.$set(i)},i(n){r||(B(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function At(a,e,t){let r,{$$slots:s={},$$scope:o}=e;const n=De("i18n");re(a,n,D=>t(5,r=D));const l=Qe();let{align:i="start"}=e,{onEdit:g=()=>{}}=e,{onExport:p=()=>{}}=e,{onDelete:_=()=>{}}=e,m=!1;const h=()=>{g()},w=()=>{p()},S=()=>{_()};function C(D){m=D,t(4,m)}const v=D=>{D.detail===!1&&l("close")};return a.$$set=D=>{"align"in D&&t(0,i=D.align),"onEdit"in D&&t(1,g=D.onEdit),"onExport"in D&&t(2,p=D.onExport),"onDelete"in D&&t(3,_=D.onDelete),"$$scope"in D&&t(14,o=D.$$scope)},[i,g,p,_,m,r,n,l,s,h,w,S,C,v,o]}class wr extends _e{constructor(e){super(),ge(this,e,At,Ut,we,{align:0,onEdit:1,onExport:2,onDelete:3})}}function Ot(a){let e=a[5].t("Create Folder")+"",t;return{c(){t=M(e)},l(r){t=F(r,e)},m(r,s){T(r,t,s)},p(r,s){s&32&&e!==(e=r[5].t("Create Folder")+"")&&L(t,e)},d(r){r&&f(t)}}}function Mt(a){let e=a[5].t("Edit Folder")+"",t;return{c(){t=M(e)},l(r){t=F(r,e)},m(r,s){T(r,t,s)},p(r,s){s&32&&e!==(e=r[5].t("Edit Folder")+"")&&L(t,e)},d(r){r&&f(t)}}}function Re(a){let e,t,r=a[5].t("System Prompt")+"",s,o,n,l,i,g;function p(m){a[13](m)}let _={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:a[5].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`),maxSize:200};return a[3].system_prompt!==void 0&&(_.value=a[3].system_prompt),l=new gt({props:_}),ie.push(()=>fe(l,"value",p)),{c(){e=y("div"),t=y("div"),s=M(r),o=x(),n=y("div"),R(l.$$.fragment),this.h()},l(m){e=$(m,"DIV",{class:!0});var h=E(e);t=$(h,"DIV",{class:!0});var w=E(t);s=F(w,r),w.forEach(f),o=U(h),n=$(h,"DIV",{});var S=E(n);J(l.$$.fragment,S),S.forEach(f),h.forEach(f),this.h()},h(){u(t,"class","mb-2 text-xs text-gray-500"),u(e,"class","my-1")},m(m,h){T(m,e,h),d(e,t),d(t,s),d(e,o),d(e,n),K(l,n,null),g=!0},p(m,h){(!g||h&32)&&r!==(r=m[5].t("System Prompt")+"")&&L(s,r);const w={};h&32&&(w.placeholder=m[5].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`)),!i&&h&8&&(i=!0,w.value=m[3].system_prompt,ue(()=>i=!1)),l.$set(w)},i(m){g||(B(l.$$.fragment,m),g=!0)},o(m){N(l.$$.fragment,m),g=!1},d(m){m&&f(e),q(l)}}}function Ft(a){let e,t,r,s=a[5].t("Knowledge")+"",o;return{c(){e=y("div"),t=y("div"),r=y("div"),o=M(s),this.h()},l(n){e=$(n,"DIV",{slot:!0});var l=E(e);t=$(l,"DIV",{class:!0});var i=E(t);r=$(i,"DIV",{class:!0});var g=E(r);o=F(g,s),g.forEach(f),i.forEach(f),l.forEach(f),this.h()},h(){u(r,"class","mb-2 text-xs text-gray-500"),u(t,"class","flex w-full justify-between"),u(e,"slot","label")},m(n,l){T(n,e,l),d(e,t),d(t,r),d(r,o)},p(n,l){l&32&&s!==(s=n[5].t("Knowledge")+"")&&L(o,s)},d(n){n&&f(e)}}}function Je(a){let e,t,r;return t=new _t({}),{c(){e=y("div"),R(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=E(e);J(t.$$.fragment,o),o.forEach(f),this.h()},h(){u(e,"class","ml-2 self-center")},m(s,o){T(s,e,o),K(t,e,null),r=!0},i(s){r||(B(t.$$.fragment,s),r=!0)},o(s){N(t.$$.fragment,s),r=!1},d(s){s&&f(e),q(t)}}}function zt(a){var Te,Ve,Be;let e,t,r,s,o,n,l,i,g,p,_,m,h=a[5].t("Folder Name")+"",w,S,C,v,D,b,V,I,c,k,P,X,te,G,W,le=a[5].t("Save")+"",ce,be,de,Q,ve,Se;function Ce(j,A){return j[1]?Mt:Ot}let me=Ce(a),H=me(a);n=new qe({props:{className:"size-5"}});let O=(((Te=a[6])==null?void 0:Te.role)==="admin"||(((Be=(Ve=a[6])==null?void 0:Ve.permissions.chat)==null?void 0:Be.system_prompt)??!0))&&Re(a);function Ge(j){a[14](j)}let je={$$slots:{label:[Ft]},$$scope:{ctx:a}};a[3].files!==void 0&&(je.selectedItems=a[3].files),P=new wt({props:je}),ie.push(()=>fe(P,"selectedItems",Ge));let z=a[4]&&Je();return{c(){e=y("div"),t=y("div"),r=y("div"),H.c(),s=x(),o=y("button"),R(n.$$.fragment),l=x(),i=y("div"),g=y("div"),p=y("form"),_=y("div"),m=y("div"),w=M(h),S=x(),C=y("div"),v=y("input"),b=x(),V=y("hr"),I=x(),O&&O.c(),c=x(),k=y("div"),R(P.$$.fragment),te=x(),G=y("div"),W=y("button"),ce=M(le),be=x(),z&&z.c(),this.h()},l(j){e=$(j,"DIV",{});var A=E(e);t=$(A,"DIV",{class:!0});var Z=E(t);r=$(Z,"DIV",{class:!0});var ne=E(r);H.l(ne),ne.forEach(f),s=U(Z),o=$(Z,"BUTTON",{class:!0});var ae=E(o);J(n.$$.fragment,ae),ae.forEach(f),Z.forEach(f),l=U(A),i=$(A,"DIV",{class:!0});var oe=E(i);g=$(oe,"DIV",{class:!0});var Ne=E(g);p=$(Ne,"FORM",{class:!0});var Y=E(p);_=$(Y,"DIV",{class:!0});var he=E(_);m=$(he,"DIV",{class:!0});var xe=E(m);w=F(xe,h),xe.forEach(f),S=U(he),C=$(he,"DIV",{class:!0});var Ue=E(C);v=$(Ue,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0}),Ue.forEach(f),he.forEach(f),b=U(Y),V=$(Y,"HR",{class:!0}),I=U(Y),O&&O.l(Y),c=U(Y),k=$(Y,"DIV",{class:!0});var Ae=E(k);J(P.$$.fragment,Ae),Ae.forEach(f),te=U(Y),G=$(Y,"DIV",{class:!0});var Oe=E(G);W=$(Oe,"BUTTON",{class:!0,type:!0});var pe=E(W);ce=F(pe,le),be=U(pe),z&&z.l(pe),pe.forEach(f),Oe.forEach(f),Y.forEach(f),Ne.forEach(f),oe.forEach(f),A.forEach(f),this.h()},h(){u(r,"class","text-lg font-medium self-center"),u(o,"class","self-center"),u(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),u(m,"class","mb-1 text-xs text-gray-500"),u(v,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),u(v,"type","text"),u(v,"placeholder",D=a[5].t("Enter folder name")),u(v,"autocomplete","off"),u(C,"class","flex-1"),u(_,"class","flex flex-col w-full mt-1"),u(V,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),u(k,"class","my-2"),u(W,"class",de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(a[4]?" cursor-not-allowed":"")),u(W,"type","submit"),W.disabled=a[4],u(G,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),u(p,"class","flex flex-col w-full"),u(g,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(j,A){T(j,e,A),d(e,t),d(t,r),H.m(r,null),d(t,s),d(t,o),K(n,o,null),d(e,l),d(e,i),d(i,g),d(g,p),d(p,_),d(_,m),d(m,w),d(_,S),d(_,C),d(C,v),Le(v,a[2]),d(p,b),d(p,V),d(p,I),O&&O.m(p,null),d(p,c),d(p,k),K(P,k,null),d(p,te),d(p,G),d(G,W),d(W,ce),d(W,be),z&&z.m(W,null),Q=!0,ve||(Se=[ee(o,"click",a[11]),ee(v,"input",a[12]),ee(p,"submit",st(a[15]))],ve=!0)},p(j,A){var ne,ae,oe;me===(me=Ce(j))&&H?H.p(j,A):(H.d(1),H=me(j),H&&(H.c(),H.m(r,null))),(!Q||A&32)&&h!==(h=j[5].t("Folder Name")+"")&&L(w,h),(!Q||A&32&&D!==(D=j[5].t("Enter folder name")))&&u(v,"placeholder",D),A&4&&v.value!==j[2]&&Le(v,j[2]),((ne=j[6])==null?void 0:ne.role)==="admin"||(((oe=(ae=j[6])==null?void 0:ae.permissions.chat)==null?void 0:oe.system_prompt)??!0)?O?(O.p(j,A),A&64&&B(O,1)):(O=Re(j),O.c(),B(O,1),O.m(p,c)):O&&($e(),N(O,1,1,()=>{O=null}),Ee());const Z={};A&262176&&(Z.$$scope={dirty:A,ctx:j}),!X&&A&8&&(X=!0,Z.selectedItems=j[3].files,ue(()=>X=!1)),P.$set(Z),(!Q||A&32)&&le!==(le=j[5].t("Save")+"")&&L(ce,le),j[4]?z?A&16&&B(z,1):(z=Je(),z.c(),B(z,1),z.m(W,null)):z&&($e(),N(z,1,1,()=>{z=null}),Ee()),(!Q||A&16&&de!==(de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(j[4]?" cursor-not-allowed":"")))&&u(W,"class",de),(!Q||A&16)&&(W.disabled=j[4])},i(j){Q||(B(n.$$.fragment,j),B(O),B(P.$$.fragment,j),B(z),Q=!0)},o(j){N(n.$$.fragment,j),N(O),N(P.$$.fragment,j),N(z),Q=!1},d(j){j&&f(e),H.d(),q(n),O&&O.d(),q(P),z&&z.d(),ve=!1,lt(Se)}}}function Lt(a){let e,t,r;function s(n){a[16](n)}let o={size:"md",$$slots:{default:[zt]},$$scope:{ctx:a}};return a[0]!==void 0&&(o.show=a[0]),e=new Ke({props:o}),ie.push(()=>fe(e,"show",s)),{c(){R(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){K(e,n,l),r=!0},p(n,[l]){const i={};l&262271&&(i.$$scope={dirty:l,ctx:n}),!t&&l&1&&(t=!0,i.show=n[0],ue(()=>t=!1)),e.$set(i)},i(n){r||(B(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Pt(a,e,t){let r,s;re(a,Xe,I=>t(6,s=I));const o=De("i18n");re(a,o,I=>t(5,r=I));let{show:n=!1}=e,{onSubmit:l=I=>{}}=e,{edit:i=!1}=e,{folder:g=null}=e,p="",_={system_prompt:"",files:[]},m=!1;const h=async()=>{if(t(4,m=!0),((_==null?void 0:_.files)??[]).some(I=>I.status==="uploading")){Ie.error(r.t("Please wait until all files are uploaded.")),t(4,m=!1);return}await l({name:p,data:_}),t(0,n=!1),t(4,m=!1)},w=()=>{t(2,p=g.name),t(3,_=g.data||{system_prompt:"",files:[]})},S=()=>{t(0,n=!1)};function C(){p=this.value,t(2,p),t(0,n),t(1,i)}function v(I){a.$$.not_equal(_.system_prompt,I)&&(_.system_prompt=I,t(3,_),t(0,n),t(1,i))}function D(I){a.$$.not_equal(_.files,I)&&(_.files=I,t(3,_),t(0,n),t(1,i))}const b=()=>{h()};function V(I){n=I,t(0,n)}return a.$$set=I=>{"show"in I&&t(0,n=I.show),"onSubmit"in I&&t(9,l=I.onSubmit),"edit"in I&&t(1,i=I.edit),"folder"in I&&t(10,g=I.folder)},a.$$.update=()=>{a.$$.dirty&1024&&g&&w(),a.$$.dirty&3&&!n&&!i&&(t(2,p=""),t(3,_={system_prompt:"",files:[]}))},[n,i,p,_,m,r,s,o,h,l,g,S,C,v,D,b,V]}class br extends _e{constructor(e){super(),ge(this,e,Pt,Lt,we,{show:0,onSubmit:9,edit:1,folder:10})}}export{_r as F,gr as S,br as a,wr as b,mr as c,pr as d,hr as e,ur as f,cr as g,dr as u};
//# sourceMappingURL=BQIDSzFs.js.map
