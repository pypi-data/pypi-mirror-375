import{d as Pt,c as ne,e as T,f as $,aR as at,aH as ca,r as V,z as da,b as pa,Y as _a,X as ga,a as ma,E as zt,ac as Vt,K as ee,l as ya,k as ha,a8 as va,B as he,aK as ba,N as wa,o as xa,a1 as It,bF as Ta,h as J,w as M,a3 as Ot,a4 as Et,j as i,A as te,S as Aa,J as Jt,t as Y,a9 as Ca,x as Ke,a0 as Ia,n as Oe,$ as Oa,aO as Ea,i as Pa,U as Ra,b0 as La,Q as Ma,p as Ua,aL as ka,I as Na,aS as rt,aT as Da}from"./index-B2xfjOzF.js";import{u as $a,g as Fa,v as Sa,w as Ka,x as qa,y as Ba,z as Ga}from"./exp-4R2p8HrG.js";import{_ as Ha}from"./DynamicForm.vue_vue_type_script_setup_true_lang-swP-NnX1.js";import{i as za}from"./json-editor-vue-D7okKxhc.js";import{u as Va}from"./exp-4dWFxoCT.js";import{c as Ja}from"./index-DgITQ6my.js";import{N as Ya}from"./InputNumber-DWMBgLyt.js";import{b as Xa,a as ja}from"./Tabs-Bx15qgEn.js";import{_ as Wa}from"./Popconfirm-BozMpYqQ.js";import"./FormItem-Ct9xzd5D.js";import"./Alert-BDlK74zR.js";import"./debounce-D7Ri4zDg.js";import"./Add-D4qD_bnP.js";const Qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Za=Pt({name:"Edit",render:function(X,A){return T(),ne("svg",Qa,A[0]||(A[0]=[$("path",{d:"M2 26h28v2H2z",fill:"currentColor"},null,-1),$("path",{d:"M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z",fill:"currentColor"},null,-1)]))}}),er={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},tr=Pt({name:"ArrowReset24Regular",render:function(X,A){return T(),ne("svg",er,A[0]||(A[0]=[$("g",{fill:"none"},[$("path",{d:"M6.78 2.72a.75.75 0 0 1 0 1.06L4.56 6h8.69a7.75 7.75 0 1 1-7.75 7.75a.75.75 0 0 1 1.5 0a6.25 6.25 0 1 0 6.25-6.25H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 0z",fill:"currentColor"})],-1)]))}});var qe={exports:{}};qe.exports;var Yt;function nr(){return Yt||(Yt=1,function(ve,X){var A=200,st="Expected a function",ke="__lodash_hash_undefined__",be=1,a=2,U=9007199254740991,pe="[object Arguments]",j="[object Array]",ae="[object Boolean]",we="[object Date]",re="[object Error]",se="[object Function]",it="[object GeneratorFunction]",W="[object Map]",Ne="[object Number]",ie="[object Object]",Be="[object Promise]",De="[object RegExp]",xe="[object Set]",le="[object String]",Ee="[object Symbol]",Te="[object WeakMap]",Pe="[object ArrayBuffer]",Re="[object DataView]",lt="[object Float32Array]",ut="[object Float64Array]",$e="[object Int8Array]",Le="[object Int16Array]",ot="[object Int32Array]",ft="[object Uint8Array]",ct="[object Uint8ClampedArray]",Ge="[object Uint16Array]",dt="[object Uint32Array]",p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,g=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/[\\^$.*+?()[\]{}|]/g,f=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,l={};l[lt]=l[ut]=l[$e]=l[Le]=l[ot]=l[ft]=l[ct]=l[Ge]=l[dt]=!0,l[pe]=l[j]=l[Pe]=l[ae]=l[Re]=l[we]=l[re]=l[se]=l[W]=l[Ne]=l[ie]=l[De]=l[xe]=l[le]=l[Te]=!1;var m=typeof at=="object"&&at&&at.Object===Object&&at,C=typeof self=="object"&&self&&self.Object===Object&&self,d=m||C||Function("return this")(),b=X&&!X.nodeType&&X,B=b&&!0&&ve&&!ve.nodeType&&ve,I=B&&B.exports===b,G=I&&m.process,k=function(){try{return G&&G.binding("util")}catch{}}(),H=k&&k.isTypedArray;function E(e,t,n,r){for(var u=-1,s=e?e.length:0;++u<s;){var c=e[u];t(r,c,n(c),e)}return r}function w(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function P(e){return function(t){return t==null?void 0:t[e]}}function R(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function N(e){return function(t){return e(t)}}function z(e,t){return e==null?void 0:e[t]}function F(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function He(e){var t=-1,n=Array(e.size);return e.forEach(function(r,u){n[++t]=[u,r]}),n}function _e(e,t){return function(n){return e(t(n))}}function pt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var _t=Array.prototype,jt=Function.prototype,ze=Object.prototype,gt=d["__core-js_shared__"],Rt=function(){var e=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Lt=jt.toString,ue=ze.hasOwnProperty,Me=ze.toString,Wt=RegExp("^"+Lt.call(ue).replace(y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mt=d.Symbol,Ut=d.Uint8Array,Qt=ze.propertyIsEnumerable,Zt=_t.splice,en=_e(Object.keys,Object),mt=Ue(d,"DataView"),Fe=Ue(d,"Map"),yt=Ue(d,"Promise"),ht=Ue(d,"Set"),vt=Ue(d,"WeakMap"),Se=Ue(Object,"create"),tn=Ce(mt),nn=Ce(Fe),an=Ce(yt),rn=Ce(ht),sn=Ce(vt),Ve=Mt?Mt.prototype:void 0,bt=Ve?Ve.valueOf:void 0,kt=Ve?Ve.toString:void 0;function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ln(){this.__data__=Se?Se(null):{}}function un(e){return this.has(e)&&delete this.__data__[e]}function on(e){var t=this.__data__;if(Se){var n=t[e];return n===ke?void 0:n}return ue.call(t,e)?t[e]:void 0}function fn(e){var t=this.__data__;return Se?t[e]!==void 0:ue.call(t,e)}function cn(e,t){var n=this.__data__;return n[e]=Se&&t===void 0?ke:t,this}Ae.prototype.clear=ln,Ae.prototype.delete=un,Ae.prototype.get=on,Ae.prototype.has=fn,Ae.prototype.set=cn;function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function dn(){this.__data__=[]}function pn(e){var t=this.__data__,n=Ye(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Zt.call(t,n,1),!0}function _n(e){var t=this.__data__,n=Ye(t,e);return n<0?void 0:t[n][1]}function gn(e){return Ye(this.__data__,e)>-1}function mn(e,t){var n=this.__data__,r=Ye(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}oe.prototype.clear=dn,oe.prototype.delete=pn,oe.prototype.get=_n,oe.prototype.has=gn,oe.prototype.set=mn;function fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function yn(){this.__data__={hash:new Ae,map:new(Fe||oe),string:new Ae}}function hn(e){return Xe(this,e).delete(e)}function vn(e){return Xe(this,e).get(e)}function bn(e){return Xe(this,e).has(e)}function wn(e,t){return Xe(this,e).set(e,t),this}fe.prototype.clear=yn,fe.prototype.delete=hn,fe.prototype.get=vn,fe.prototype.has=bn,fe.prototype.set=wn;function Je(e){var t=-1,n=e?e.length:0;for(this.__data__=new fe;++t<n;)this.add(e[t])}function xn(e){return this.__data__.set(e,ke),this}function Tn(e){return this.__data__.has(e)}Je.prototype.add=Je.prototype.push=xn,Je.prototype.has=Tn;function ce(e){this.__data__=new oe(e)}function An(){this.__data__=new oe}function Cn(e){return this.__data__.delete(e)}function In(e){return this.__data__.get(e)}function On(e){return this.__data__.has(e)}function En(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!Fe||r.length<A-1)return r.push([e,t]),this;n=this.__data__=new fe(r)}return n.set(e,t),this}ce.prototype.clear=An,ce.prototype.delete=Cn,ce.prototype.get=In,ce.prototype.has=On,ce.prototype.set=En;function Pn(e,t){var n=me(e)||Bt(e)?R(e.length,String):[],r=n.length,u=!!r;for(var s in e)ue.call(e,s)&&!(u&&(s=="length"||Ft(s,r)))&&n.push(s);return n}function Ye(e,t){for(var n=e.length;n--;)if(qt(e[n][0],t))return n;return-1}function Rn(e,t,n,r){return Ln(e,function(u,s,c){t(r,u,n(u),c)}),r}var Ln=Jn(Un),Mn=Yn();function Un(e,t){return e&&Mn(e,t,et)}function Nt(e,t){t=je(t,e)?[t]:Dt(t);for(var n=0,r=t.length;e!=null&&n<r;)e=e[We(t[n++])];return n&&n==r?e:void 0}function kn(e){return Me.call(e)}function Nn(e,t){return e!=null&&t in Object(e)}function wt(e,t,n,r,u){return e===t?!0:e==null||t==null||!Qe(e)&&!Ze(t)?e!==e&&t!==t:Dn(e,t,wt,n,r,u)}function Dn(e,t,n,r,u,s){var c=me(e),L=me(t),x=j,D=j;c||(x=ge(e),x=x==pe?ie:x),L||(D=ge(t),D=D==pe?ie:D);var K=x==ie&&!F(e),q=D==ie&&!F(t),S=x==D;if(S&&!K)return s||(s=new ce),c||sa(e)?$t(e,t,n,r,u,s):Xn(e,t,x,n,r,u,s);if(!(u&a)){var Q=K&&ue.call(e,"__wrapped__"),Z=q&&ue.call(t,"__wrapped__");if(Q||Z){var ye=Q?e.value():e,de=Z?t.value():t;return s||(s=new ce),n(ye,de,r,u,s)}}return S?(s||(s=new ce),jn(e,t,n,r,u,s)):!1}function $n(e,t,n,r){var u=n.length,s=u;if(e==null)return!s;for(e=Object(e);u--;){var c=n[u];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++u<s;){c=n[u];var L=c[0],x=e[L],D=c[1];if(c[2]){if(x===void 0&&!(L in e))return!1}else{var K=new ce,q;if(!(q===void 0?wt(D,x,r,be|a,K):q))return!1}}return!0}function Fn(e){if(!Qe(e)||ea(e))return!1;var t=Gt(e)||F(e)?Wt:O;return t.test(Ce(e))}function Sn(e){return Ze(e)&&At(e.length)&&!!l[Me.call(e)]}function Kn(e){return typeof e=="function"?e:e==null?oa:typeof e=="object"?me(e)?Gn(e[0],e[1]):Bn(e):fa(e)}function qn(e){if(!ta(e))return en(e);var t=[];for(var n in Object(e))ue.call(e,n)&&n!="constructor"&&t.push(n);return t}function Bn(e){var t=Wn(e);return t.length==1&&t[0][2]?Kt(t[0][0],t[0][1]):function(n){return n===e||$n(n,e,t)}}function Gn(e,t){return je(e)&&St(t)?Kt(We(e),t):function(n){var r=la(n,e);return r===void 0&&r===t?ua(n,e):wt(t,r,void 0,be|a)}}function Hn(e){return function(t){return Nt(t,e)}}function zn(e){if(typeof e=="string")return e;if(Ct(e))return kt?kt.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Dt(e){return me(e)?e:na(e)}function Vn(e,t){return function(n,r){var u=me(n)?E:Rn,s=t?t():{};return u(n,e,Kn(r),s)}}function Jn(e,t){return function(n,r){if(n==null)return n;if(!Tt(n))return e(n,r);for(var u=n.length,s=-1,c=Object(n);++s<u&&r(c[s],s,c)!==!1;);return n}}function Yn(e){return function(t,n,r){for(var u=-1,s=Object(t),c=r(t),L=c.length;L--;){var x=c[++u];if(n(s[x],x,s)===!1)break}return t}}function $t(e,t,n,r,u,s){var c=u&a,L=e.length,x=t.length;if(L!=x&&!(c&&x>L))return!1;var D=s.get(e);if(D&&s.get(t))return D==t;var K=-1,q=!0,S=u&be?new Je:void 0;for(s.set(e,t),s.set(t,e);++K<L;){var Q=e[K],Z=t[K];if(r)var ye=c?r(Z,Q,K,t,e,s):r(Q,Z,K,e,t,s);if(ye!==void 0){if(ye)continue;q=!1;break}if(S){if(!w(t,function(de,Ie){if(!S.has(Ie)&&(Q===de||n(Q,de,r,u,s)))return S.add(Ie)})){q=!1;break}}else if(!(Q===Z||n(Q,Z,r,u,s))){q=!1;break}}return s.delete(e),s.delete(t),q}function Xn(e,t,n,r,u,s,c){switch(n){case Re:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Pe:return!(e.byteLength!=t.byteLength||!r(new Ut(e),new Ut(t)));case ae:case we:case Ne:return qt(+e,+t);case re:return e.name==t.name&&e.message==t.message;case De:case le:return e==t+"";case W:var L=He;case xe:var x=s&a;if(L||(L=pt),e.size!=t.size&&!x)return!1;var D=c.get(e);if(D)return D==t;s|=be,c.set(e,t);var K=$t(L(e),L(t),r,u,s,c);return c.delete(e),K;case Ee:if(bt)return bt.call(e)==bt.call(t)}return!1}function jn(e,t,n,r,u,s){var c=u&a,L=et(e),x=L.length,D=et(t),K=D.length;if(x!=K&&!c)return!1;for(var q=x;q--;){var S=L[q];if(!(c?S in t:ue.call(t,S)))return!1}var Q=s.get(e);if(Q&&s.get(t))return Q==t;var Z=!0;s.set(e,t),s.set(t,e);for(var ye=c;++q<x;){S=L[q];var de=e[S],Ie=t[S];if(r)var Ht=c?r(Ie,de,S,t,e,s):r(de,Ie,S,e,t,s);if(!(Ht===void 0?de===Ie||n(de,Ie,r,u,s):Ht)){Z=!1;break}ye||(ye=S=="constructor")}if(Z&&!ye){var tt=e.constructor,nt=t.constructor;tt!=nt&&"constructor"in e&&"constructor"in t&&!(typeof tt=="function"&&tt instanceof tt&&typeof nt=="function"&&nt instanceof nt)&&(Z=!1)}return s.delete(e),s.delete(t),Z}function Xe(e,t){var n=e.__data__;return Zn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Wn(e){for(var t=et(e),n=t.length;n--;){var r=t[n],u=e[r];t[n]=[r,u,St(u)]}return t}function Ue(e,t){var n=z(e,t);return Fn(n)?n:void 0}var ge=kn;(mt&&ge(new mt(new ArrayBuffer(1)))!=Re||Fe&&ge(new Fe)!=W||yt&&ge(yt.resolve())!=Be||ht&&ge(new ht)!=xe||vt&&ge(new vt)!=Te)&&(ge=function(e){var t=Me.call(e),n=t==ie?e.constructor:void 0,r=n?Ce(n):void 0;if(r)switch(r){case tn:return Re;case nn:return W;case an:return Be;case rn:return xe;case sn:return Te}return t});function Qn(e,t,n){t=je(t,e)?[t]:Dt(t);for(var r,u=-1,c=t.length;++u<c;){var s=We(t[u]);if(!(r=e!=null&&n(e,s)))break;e=e[s]}if(r)return r;var c=e?e.length:0;return!!c&&At(c)&&Ft(s,c)&&(me(e)||Bt(e))}function Ft(e,t){return t=t??U,!!t&&(typeof e=="number"||h.test(e))&&e>-1&&e%1==0&&e<t}function je(e,t){if(me(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ct(e)?!0:o.test(e)||!p.test(e)||t!=null&&e in Object(t)}function Zn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ea(e){return!!Rt&&Rt in e}function ta(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ze;return e===n}function St(e){return e===e&&!Qe(e)}function Kt(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var na=xt(function(e){e=ia(e);var t=[];return g.test(e)&&t.push(""),e.replace(_,function(n,r,u,s){t.push(u?s.replace(f,"$1"):r||n)}),t});function We(e){if(typeof e=="string"||Ct(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ce(e){if(e!=null){try{return Lt.call(e)}catch{}try{return e+""}catch{}}return""}var aa=Vn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function xt(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(st);var n=function(){var r=arguments,u=t?t.apply(this,r):r[0],s=n.cache;if(s.has(u))return s.get(u);var c=e.apply(this,r);return n.cache=s.set(u,c),c};return n.cache=new(xt.Cache||fe),n}xt.Cache=fe;function qt(e,t){return e===t||e!==e&&t!==t}function Bt(e){return ra(e)&&ue.call(e,"callee")&&(!Qt.call(e,"callee")||Me.call(e)==pe)}var me=Array.isArray;function Tt(e){return e!=null&&At(e.length)&&!Gt(e)}function ra(e){return Ze(e)&&Tt(e)}function Gt(e){var t=Qe(e)?Me.call(e):"";return t==se||t==it}function At(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=U}function Qe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ze(e){return!!e&&typeof e=="object"}function Ct(e){return typeof e=="symbol"||Ze(e)&&Me.call(e)==Ee}var sa=H?N(H):Sn;function ia(e){return e==null?"":zn(e)}function la(e,t,n){var r=e==null?void 0:Nt(e,t);return r===void 0?n:r}function ua(e,t){return e!=null&&Qn(e,t,Nn)}function et(e){return Tt(e)?Pn(e):qn(e)}function oa(e){return e}function fa(e){return je(e)?P(We(e)):Hn(e)}ve.exports=aa}(qe,qe.exports)),qe.exports}var ar=nr();const rr=ca(ar),sr={class:"flex gap-3"},ir={class:"w-64 pl-2"},lr={class:"mb-5"},ur={class:"text-xl"},or={class:"text-sm opacity-80"},fr={key:0,class:"text-right mt-2"},cr={class:"flex justify-between items-center mb-2"},dr={class:"flex-1"},pr={key:0},_r={class:"text-xl"},gr={class:"opacity-75 italic pl-2"},mr={key:1,class:"text-xl"},yr={key:0,class:"flex gap-2"},hr={class:"mt-4 mb-2 text-xl"},vr={class:"flex justify-end mt-5 gap-2"},v="__SPACE_PARAMETER_UPDATING__",Xt="__SELECTED_SPACE_PARAMETER_UPDATING__",Ur=Pt({__name:"ExpRunResult",setup(ve){const X=V(!1),A=da(),st=pa(),ke=_a(),be=ga(),a=Va(),{t:U}=ma(),pe=V(),j=V({show:!1}),ae=V(!1),we=V(!1),re=V(!1),se=V(!1),it=[{label:"str",value:"str"},{label:"int",value:"int"},{label:"float",value:"float"},{label:"bool",value:"bool"},{label:"list",value:"list"},{label:"tuple",value:"tuple"},{label:"dict",value:"dict"},{label:"complex",value:"complex"},{label:"ndarray",value:"ndarray"}],W=V(),Ne=V(),ie=V(),Be=async()=>{var g,_;const[p,o]=await $a();if(!p&&(o==null?void 0:o.status)===0){ie.value=o.data;const[y]=(_=(g=a==null?void 0:a.expInfo)==null?void 0:g.exp)!=null&&_.template?a.expInfo.exp.template.split("/"):"";y&&o.data[y]?(W.value=y,rt(()=>{Te(y,!0)})):(W.value=Object.keys(o.data)[0],rt(()=>{Te(Object.keys(o.data)[0])}))}},De=async()=>{var g,_,y;if(!A.query.exp_id)return;const[p,o]=await Fa({exp_id:A.query.exp_id,device_group_name:A.query.device_group_name,space_id:A.query.space_id});if(!p&&(o==null?void 0:o.status)===0){if((g=o.data)!=null&&g.data){o.data.data=JSON.parse(o.data.data);const f=(_=o.data.data)!=null&&_.tables?(y=o.data.data)==null?void 0:y.tables[v]:null;f&&(f.crows=f.rows)}a.result=o.data}},xe=zt(()=>{var _,y;const p=[];(_=a.result)!=null&&_.data&&Vt((y=a.result.data)==null?void 0:y.tables,f=>{const O=f.rows.map(l=>{var C;const m={};return(C=f.columns)==null||C.forEach((d,b)=>{m[d.name]=typeof l[b]!==void 0?`${l[b]}`:l[b]}),m}),h=f.columns.map((l,m)=>{const C={...l,title:l.name,key:l.name};return l.name==="key"?{...C,minWidth:200}:l.name==="type"&&f.name===v?{...C,width:200,render(d,b){if(X.value){const B=f.crows?f.crows[b][m]:null;return ee(ya,{class:B!=d.type?"!outline !outline-red-500 w-32":"w-32",options:it,value:d.type,onUpdateValue:I=>{var G,k,H,E,w,P,R,N;(k=(G=a==null?void 0:a.result)==null?void 0:G.data)!=null&&k.tables&&((E=(H=a==null?void 0:a.result)==null?void 0:H.data)!=null&&E.tables[v])&&(((P=(w=a==null?void 0:a.result)==null?void 0:w.data)==null?void 0:P.tables[v]).rows[b][m]=I,I==="bool"&&(((N=(R=a==null?void 0:a.result)==null?void 0:R.data)==null?void 0:N.tables[v]).rows[b][m+1]=!1))}})}return d.type}}:l.name==="value"&&f.name===v?{...C,render:(d,b)=>{const B=f.crows?f.crows[b][m]:null;if(X.value){const I=ee(Ya,{value:+d.value,class:B!=d.value?"outline outline-red-500 w-full":"w-full",onUpdateValue(E){var w,P,R,N,z,F;(P=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&P.tables&&((N=(R=a==null?void 0:a.result)==null?void 0:R.data)!=null&&N.tables[v])&&(((F=(z=a==null?void 0:a.result)==null?void 0:z.data)==null?void 0:F.tables[v]).rows[b][m]=E)}}),G=ee(ha,{value:String(d.value),class:B!==d.value?"!outline !outline-red-500":"",onUpdateValue(E){var w,P,R,N,z,F;(P=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&P.tables&&((N=(R=a==null?void 0:a.result)==null?void 0:R.data)!=null&&N.tables[v])&&(((F=(z=a==null?void 0:a.result)==null?void 0:z.data)==null?void 0:F.tables[v]).rows[b][m]=E)}}),k=ee("div",{class:"flex gap-2 h-[34px] leading-[34px]"},[ee("div",{class:B!=d.value?"outline outline-red-500":""},ee(va,{lineClamp:1},{default:()=>d.value})),ee(he,{type:"info",size:"tiny",class:"!h-[34px] !w-[34px]",onClick:()=>{j.value={show:!0,info:{rowIdx:b,cidx:m,value:d.value}}}},{icon:()=>ee(Za)})]),H=ee(ba,{class:B!=d.value?"!outline !outline-red-500 w-32":"w-32",checkedValue:"true",uncheckedValue:"false",onUpdateValue:E=>{var w,P,R,N,z,F;(P=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&P.tables&&((N=(R=a==null?void 0:a.result)==null?void 0:R.data)!=null&&N.tables[v])&&(((F=(z=a==null?void 0:a.result)==null?void 0:z.data)==null?void 0:F.tables[v]).rows[b][m]=E)}});return ee("div",{class:"flex items-center"},Ja([["float","int"].includes(d.type)?I:null,["str","complex"].includes(d.type)?G:null,["dict","list","tuple","ndarray"].includes(d.type)?k:null,["bool"].includes(d.type)?H:null]))}return d.value}}:C});X.value&&f.name===v&&h.push({title:U("expInfo.tableOptions"),key:"options",width:100,align:"rigth",render(l,m){const C=f.columns.findIndex(I=>I.name==="type"),d=f.crows?f.crows[m][C]:null,b=f.columns.findIndex(I=>I.name==="value"),B=f.crows?f.crows[m][b]:null;return ee(he,{type:"info",size:"small",class:"!h-[34px]",onClick:()=>{var I,G,k,H,E,w,P,R;(G=(I=a==null?void 0:a.result)==null?void 0:I.data)!=null&&G.tables&&((H=(k=a==null?void 0:a.result)==null?void 0:k.data)!=null&&H.tables[v])&&(((w=(E=a==null?void 0:a.result)==null?void 0:E.data)==null?void 0:w.tables[v]).rows[m][b]=B,((R=(P=a==null?void 0:a.result)==null?void 0:P.data)==null?void 0:R.tables[v]).rows[m][C]=d)}},{default:()=>U("expInfo.reset"),icon:()=>ee(wa,{component:tr})})}}),f.name===v&&X.value&&h.unshift({type:"selection",key:"selection"}),p.push({oname:f.name,name:f.name===v?U("expInfo.needUpdateParams"):f.name===Xt?U("expInfo.updatedParams"):f.name,columns:h,rows:O})});const[o,g]=rr(p,{oname:Xt});return[...o,...g]}),le=V(),Ee=V(),Te=async(p,o)=>{var y,f,O;const[g,_]=await Sa({fitter_group_name:p});if(!g&&(_==null?void 0:_.status)===0){Ne.value=_.data;const h=(O=(f=(y=a==null?void 0:a.expInfo)==null?void 0:y.exp)==null?void 0:f.template)==null?void 0:O.split("/")[1];h&&_.data[h]&&o?(le.value=h,rt(()=>{Pe(h)})):(le.value=Object.keys(_.data)[0],rt(()=>{Pe(Object.keys(_.data)[0])}))}},Pe=async p=>{if(ae.value)return;ae.value=!0;const[o,g]=await Ka({fitter_group_name:W.value,fitter_name:p,group_name:A.query.device_group_name,space_id:A.query.space_id});ae.value=!1,!o&&(g==null?void 0:g.status)===0&&(g.data.exp_id&&(g.data.exp_id.default=A.query.exp_id?Number(A.query.exp_id):null),Ee.value=g.data)},Re=p=>{Te(p)},lt=p=>{Pe(p)},ut=async()=>{var O;if(!pe.value||we.value)return;we.value=!0;const p=await((O=pe.value[0])==null?void 0:O.submit()),o=Da(p);if(It(o))return;const{device_group_name:g,space_id:_}=A.query,[y,f]=await qa({setting:o,group_name:g,space_id:_,fitter_group:W.value,fitter_name:le.value});if(we.value=!1,!y&&(f==null?void 0:f.status)===0){a.result={...f.data,big_picture_url:"/"+f.data.plot_file_in_static};const[h,l]=await Ba("/"+f.data.table_file_in_static);h||(X.value=!0,Vt(l==null?void 0:l.tables,(m,C)=>{C===v&&(m.crows=JSON.parse(JSON.stringify(m.rows)),Le.value=m.crows.map(d=>d[0]))}),a.result={...a.result||{},data:l})}},$e=async(p=!1)=>{var y,f,O,h,l;if(p){if(se.value)return;se.value=!0}else{if(re.value)return;re.value=!0}const o={group_name:A.query.device_group_name,space_id:A.query.space_id,exp_id:A.query.exp_id,task_id:((y=a.expInfo)==null?void 0:y.task_id)||"",img_file:((f=a.result)==null?void 0:f.plot_file)||"",table_file:((O=a.result)==null?void 0:O.table_file)||"",update_space_parameters:p};if(p){const m=(h=xe.value)==null?void 0:h.find(C=>C.oname===v);o.space_parameters=(l=Le.value)==null?void 0:l.map(C=>{var d;return(d=m.rows)==null?void 0:d.find(b=>b.key===C)})}const[g,_]=await Ga(o);!g&&(_==null?void 0:_.status)===0&&(ke.success("Submit Successfully"),await De(),X.value=!1),p?se.value=!1:re.value=!1},Le=V(),ot=p=>{Le.value=p};xa(()=>{if(!A.query.exp_id){st.back();return}Be(),De()});const ft=()=>{$e()},ct=zt(()=>{var o,g,_,y,f,O;const p=(g=(o=a.result)==null?void 0:o.data)!=null&&g.tables?(y=(_=a.result)==null?void 0:_.data)==null?void 0:y.tables[v]:null;if(!It(p)){const h=(f=p.columns)==null?void 0:f.findIndex(l=>l.name==="value");return h<0?!1:(O=p.crows)==null?void 0:O.some((l,m)=>l[h]!==p.rows[m][h])}return!1}),Ge=()=>{j.value={show:!1,info:void 0}},dt=()=>{var _,y,f,O,h,l;const{rowIdx:p,cidx:o,value:g}=j.value.info;(y=(_=a==null?void 0:a.result)==null?void 0:_.data)!=null&&y.tables&&((O=(f=a==null?void 0:a.result)==null?void 0:f.data)!=null&&O.tables[v])&&(((l=(h=a==null?void 0:a.result)==null?void 0:h.data)==null?void 0:l.tables[v]).rows[p][o]=g),Ge()};return Ta(()=>{a.result=void 0}),(p,o)=>{const g=Ia,_=Ca,y=Ea,f=Wa,O=Pa,h=Ra,l=Ma,m=Xa,C=ja,d=Aa,b=Ua,B=Na;return T(),ne("div",null,[J(C,{type:"card",placement:"top",animated:"",onUpdateValue:Re,value:i(W),"onUpdate:value":o[3]||(o[3]=I=>Jt(W)?W.value=I:null),class:"!h-full"},{default:M(()=>[(T(!0),ne(Ot,null,Et(i(ie),(I,G)=>(T(),te(m,{key:G,name:G,tab:I.title,disabled:i(ae)},{default:M(()=>[J(d,{class:"p-3 min-h-[260px]"},{default:M(()=>[J(C,{type:"line",placement:"left",value:i(le),"onUpdate:value":o[2]||(o[2]=k=>Jt(le)?le.value=k:null),size:"small",onUpdateValue:lt,style:{height:"calc(100vh - 330px)"}},{default:M(()=>[(T(!0),ne(Ot,null,Et(i(Ne),(k,H)=>(T(),te(m,{key:H,name:H,tab:k.title,disabled:i(ae)},{default:M(()=>[$("div",sr,[$("div",ir,[$("div",lr,[$("div",ur,Y(k.title),1),$("div",or,Y(k.desc),1)]),J(_,{show:i(ae)},{default:M(()=>{var E,w;return[J(g,{style:{"max-height":"calc(100vh - 330px)"}},{default:M(()=>[i(Ee)&&!i(ae)?(T(),te(Ha,{key:0,cfgs:i(Ee),ref_for:!0,ref_key:"dynamicFormRef",ref:pe},null,8,["cfgs"])):Ke("",!0)]),_:1}),(w=(E=i(a))==null?void 0:E.expInfo)!=null&&w.exp_id?(T(),ne("div",fr,[J(i(he),{type:"primary",onClick:ut,loading:i(we)},{default:M(()=>[Oe(Y(i(U)("expInfo.ffitting")),1)]),_:1},8,["loading"])])):Ke("",!0)]}),_:1},8,["show"])]),$("div",{class:"flex-1 pl-3",style:Oa({borderLeft:`1px solid ${i(be).dividerColor}`})},[i(It)(i(a).result)?(T(),te(y,{key:0,description:i(U)("expInfo.nores"),class:"mt-20"},null,8,["description"])):(T(),te(g,{key:1,style:{"max-height":"calc(100vh - 330px)"}},{default:M(()=>{var E,w,P,R,N,z,F,He;return[$("div",cr,[$("div",dr,[!((E=i(a).result)!=null&&E.plot_file)&&!((w=i(a).result)!=null&&w.table_file)&&((P=i(a).result)!=null&&P.create_time)?(T(),ne("div",pr,[$("span",_r,Y(i(U)("expInfo.resUploaded")),1),$("span",gr,Y((R=i(a).result)==null?void 0:R.create_time),1)])):(T(),ne("div",mr,Y(i(U)("expInfo.result")),1))]),(N=i(a).result)!=null&&N.plot_file||(z=i(a).result)!=null&&z.table_file?(T(),ne("div",yr,[i(ct)?(T(),te(f,{key:0,onPositiveClick:ft},{trigger:M(()=>[J(i(he),{loading:i(re),type:"primary",disabled:i(se)},{default:M(()=>[Oe(Y(i(U)("expInfo.uploadOnly")),1)]),_:1},8,["loading","disabled"])]),default:M(()=>[Oe(" "+Y(i(U)("expInfo.updateOnlyTips")),1)]),_:1})):(T(),te(i(he),{key:1,loading:i(re),type:"primary",onClick:o[0]||(o[0]=()=>$e()),disabled:i(se)},{default:M(()=>[Oe(Y(i(U)("expInfo.uploadOnly")),1)]),_:1},8,["loading","disabled"])),J(i(he),{loading:i(se),type:"primary",onClick:o[1]||(o[1]=()=>$e(!0)),disabled:i(re)},{default:M(()=>[Oe(Y(i(U)("expInfo.uploadAndModifyParams")),1)]),_:1},8,["loading","disabled"])])):Ke("",!0)]),J(O,{class:"!my-2"}),(F=i(a).result)!=null&&F.big_picture_url?(T(),te(h,{key:0,src:i(La)((He=i(a).result)==null?void 0:He.big_picture_url,"t",String(+new Date)),alt:"",class:"max-w-full"},null,8,["src"])):Ke("",!0),(T(!0),ne(Ot,null,Et(i(xe),(_e,pt)=>(T(),ne("div",{key:pt},[$("div",hr,Y(_e.name),1),_e.oname===v?(T(),te(l,{key:0,columns:_e.columns,data:_e.rows,"checked-row-keys":i(Le),"row-key":_t=>_t.key,"onUpdate:checkedRowKeys":ot},null,8,["columns","data","checked-row-keys","row-key"])):(T(),te(l,{key:1,columns:_e.columns,data:_e.rows},null,8,["columns","data"]))]))),128))]}),_:2},1024))],4)])]),_:2},1032,["name","tab","disabled"]))),128))]),_:2},1032,["value"])]),_:2},1024)]),_:2},1032,["name","tab","disabled"]))),128))]),_:1},8,["value"]),J(B,{show:i(j).show,"onUpdate:show":o[5]||(o[5]=I=>i(j).show=I),"mask-closable":!1},{default:M(()=>[J(b,{style:{width:"1000px","min-height":"500px"},size:"huge",bordered:!1},{default:M(()=>[i(j).info?(T(),te(i(za),{key:0,class:ka(["w-full h-[70vh] overflow-auto",[i(be).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:i(j).info.value,"onUpdate:modelValue":o[4]||(o[4]=I=>i(j).info.value=I),mode:"text"},null,8,["class","modelValue"])):Ke("",!0),$("div",vr,[J(i(he),{onClick:Ge},{default:M(()=>[Oe(Y(i(U)("common.cancel")),1)]),_:1}),J(i(he),{type:"primary",onClick:dt},{default:M(()=>[Oe(Y(i(U)("common.OK")),1)]),_:1})])]),_:1})]),_:1},8,["show"])])}}});export{Ur as default};
