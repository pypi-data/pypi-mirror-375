import{S as Ke,i as Le,s as Ce,N as Ge,O as Je,a as w,d as f,f as c,g as M,h as m,n as he,e as g,c as v,q as I,y as Ne,u as ze,r as x,Y as Vt,U as _t,C as O,l as q,D as j,p as X,E as H,F as R,H as Ae,I as Pe,K as Ue,v as gt,k as We,a0 as Ft,G as ie,t as we,b as $e,j as be,L as ve,J as Ct,Q as dt,w as xt,V as Tt}from"../chunks/FaFaOjVd.js";import"../chunks/IHki7fMi.js";import{F as St}from"../chunks/CU2r43ac.js";import{t as G}from"../chunks/2--pGubN.js";import{g as Nt}from"../chunks/JldNL9ai.js";import{p as zt}from"../chunks/kkgjdX1W.js";import{a as Bt,c as Mt,s as Wt,u as At,l as Pt}from"../chunks/D3JQ9yZ2.js";import{F as Ut,u as Kt,a as Lt,g as Ot}from"../chunks/BQ2yCyAW.js";import{a as jt,r as Ht,e as Rt,f as qt,u as Xt,h as Yt,g as Gt}from"../chunks/BvppJ_lV.js";import{D as Jt,v as Qt}from"../chunks/CUP5ppBP.js";import{S as vt}from"../chunks/g2Ud3Ipo.js";import{e as wt}from"../chunks/-qHmRVoF.js";import{A as Zt}from"../chunks/DJGv7pvS.js";import"../chunks/BSsvkfNC.js";import{b as el,c as ut}from"../chunks/BWfaaZEQ.js";import{f as tl}from"../chunks/kDFS4CBV.js";import{D as ll}from"../chunks/lG6XWaHp.js";import{T as ht}from"../chunks/N6zyuT7D.js";import{F as rl}from"../chunks/CKokMLQi.js";import"../chunks/I1CDPYOB.js";import{M as sl}from"../chunks/CtyAcC0Y.js";import{R as nl,V as ol,D as al}from"../chunks/B5cXnBwI.js";import{X as il}from"../chunks/OBlpjaGw.js";import{M as cl}from"../chunks/CVwNe0YN.js";import{C as fl}from"../chunks/BgH4UeW-.js";import"../chunks/BFmuJLeH.js";import{C as ul}from"../chunks/dmX025Od.js";import{L as dl}from"../chunks/D4EA5fGI.js";import{A as hl}from"../chunks/aN6qEew7.js";import{S as ml}from"../chunks/22dSWuQJ.js";function pl(s){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(l){e=Je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(f),r.forEach(f),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){M(l,e,r),m(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:he,o:he,d(l){l&&f(e)}}}function _l(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class gl extends Ke{constructor(e){super(),Le(this,e,_l,pl,Ce,{className:0,strokeWidth:1})}}function $t(s,e,t){const l=s.slice();return l[6]=e[t],l}function bt(s){var a,i,u,p,b,F;let e,t,l,r;function n(){return s[4](s[6])}function o(){return s[5](s[6])}return t=new Ut({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((a=s[6])==null?void 0:a.name)??((u=(i=s[6])==null?void 0:i.meta)==null?void 0:u.name),type:"file",size:((p=s[6])==null?void 0:p.size)??((F=(b=s[6])==null?void 0:b.meta)==null?void 0:F.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",n),t.$on("dismiss",o),{c(){e=g("div"),O(t.$$.fragment),l=q(),this.h()},l(h){e=v(h,"DIV",{class:!0});var y=w(e);j(t.$$.fragment,y),l=X(y),y.forEach(f),this.h()},h(){c(e,"class","mt-1 px-2")},m(h,y){M(h,e,y),H(t,e,null),m(e,l),r=!0},p(h,y){var S,J,B,A,P,W;s=h;const V={};y&3&&(V.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),y&4&&(V.small=s[2]),y&2&&(V.item=s[6]),y&2&&(V.name=((S=s[6])==null?void 0:S.name)??((B=(J=s[6])==null?void 0:J.meta)==null?void 0:B.name)),y&2&&(V.size=((A=s[6])==null?void 0:A.size)??((W=(P=s[6])==null?void 0:P.meta)==null?void 0:W.size)??""),y&2&&(V.loading=s[6].status==="uploading"),t.$set(V)},i(h){r||(I(t.$$.fragment,h),r=!0)},o(h){x(t.$$.fragment,h),r=!1},d(h){h&&f(e),R(t)}}}function vl(s){let e,t,l=wt(s[1]),r=[];for(let o=0;o<l.length;o+=1)r[o]=bt($t(s,l,o));const n=o=>x(r[o],1,1,()=>{r[o]=null});return{c(){e=g("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var a=w(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(f),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(o,a){M(o,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(o,[a]){if(a&15){l=wt(o[1]);let i;for(i=0;i<l.length;i+=1){const u=$t(o,l,i);r[i]?(r[i].p(u,a),I(r[i],1)):(r[i]=bt(u),r[i].c(),I(r[i],1),r[i].m(e,null))}for(Ne(),i=l.length;i<r.length;i+=1)n(i);ze()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)I(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)x(r[a]);t=!1},d(o){o&&f(e),Vt(r,o)}}}function wl(s,e,t){const l=_t();let{selectedFileId:r=null}=e,{files:n=[]}=e,{small:o=!1}=e;const a=u=>{u.status!=="uploading"&&l("click",u.id)},i=u=>{u.status!=="uploading"&&l("delete",u.id)};return s.$$set=u=>{"selectedFileId"in u&&t(0,r=u.selectedFileId),"files"in u&&t(1,n=u.files),"small"in u&&t(2,o=u.small)},[r,n,o,l,a,i]}class $l extends Ke{constructor(e){super(),Le(this,e,wl,vl,Ce,{selectedFileId:0,files:1,small:2})}}function bl(s){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(l){e=Je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(f),r.forEach(f),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){M(l,e,r),m(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:he,o:he,d(l){l&&f(e)}}}function kl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class yl extends Ke{constructor(e){super(),Le(this,e,kl,bl,Ce,{className:0,strokeWidth:1})}}function El(s){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(l){e=Je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(f),r.forEach(f),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){M(l,e,r),m(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:he,o:he,d(l){l&&f(e)}}}function Il(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class Dl extends Ke{constructor(e){super(),Le(this,e,Il,El,Ce,{className:0,strokeWidth:1})}}function Fl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(n){e=v(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Ft(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(n,o){M(n,e,o),l||(r=ie(e,"click",s[9]),l=!0)},p:he,d(n){n&&f(e),l=!1,r()}}}function Vl(s){let e,t;return e=new ht({props:{content:s[2].t("Add Content"),$$slots:{default:[Fl]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const n={};r&4&&(n.content=l[2].t("Add Content")),r&4098&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Cl(s){let e,t,l,r=s[2].t("Upload files")+"",n,o;return e=new gl({props:{strokeWidth:"2"}}),{c(){O(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){j(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=$e(i,r),i.forEach(f),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),M(a,t,i),M(a,l,i),m(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Upload files")+"")&&be(n,r)},i(a){o||(I(e.$$.fragment,a),o=!0)},o(a){x(e.$$.fragment,a),o=!1},d(a){a&&(f(t),f(l)),R(e,a)}}}function xl(s){let e,t,l,r=s[2].t("Upload directory")+"",n,o;return e=new rl({props:{strokeWidth:"2"}}),{c(){O(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){j(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=$e(i,r),i.forEach(f),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),M(a,t,i),M(a,l,i),m(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&be(n,r)},i(a){o||(I(e.$$.fragment,a),o=!0)},o(a){x(e.$$.fragment,a),o=!1},d(a){a&&(f(t),f(l)),R(e,a)}}}function Tl(s){let e,t,l,r=s[2].t("Sync directory")+"",n,o;return e=new Dl({props:{strokeWidth:"2"}}),{c(){O(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){j(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=$e(i,r),i.forEach(f),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),M(a,t,i),M(a,l,i),m(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&be(n,r)},i(a){o||(I(e.$$.fragment,a),o=!0)},o(a){x(e.$$.fragment,a),o=!1},d(a){a&&(f(t),f(l)),R(e,a)}}}function Sl(s){let e,t;return e=new ut({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Tl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){O(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const n={};r&4100&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Nl(s){let e,t,l,r=s[2].t("Add text content")+"",n,o;return e=new yl({props:{strokeWidth:"2"}}),{c(){O(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){j(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=$e(i,r),i.forEach(f),this.h()},h(){c(l,"class","flex items-center")},m(a,i){H(e,a,i),M(a,t,i),M(a,l,i),m(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Add text content")+"")&&be(n,r)},i(a){o||(I(e.$$.fragment,a),o=!0)},o(a){x(e.$$.fragment,a),o=!1},d(a){a&&(f(t),f(l)),R(e,a)}}}function zl(s){let e,t,l,r,n,o,a,i;return e=new ut({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Cl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new ut({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[xl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),n=new ht({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[Sl]},$$scope:{ctx:s}}}),a=new ut({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Nl]},$$scope:{ctx:s}}}),a.$on("click",s[8]),{c(){O(e.$$.fragment),t=q(),O(l.$$.fragment),r=q(),O(n.$$.fragment),o=q(),O(a.$$.fragment)},l(u){j(e.$$.fragment,u),t=X(u),j(l.$$.fragment,u),r=X(u),j(n.$$.fragment,u),o=X(u),j(a.$$.fragment,u)},m(u,p){H(e,u,p),M(u,t,p),H(l,u,p),M(u,r,p),H(n,u,p),M(u,o,p),H(a,u,p),i=!0},p(u,p){const b={};p&4100&&(b.$$scope={dirty:p,ctx:u}),e.$set(b);const F={};p&4100&&(F.$$scope={dirty:p,ctx:u}),l.$set(F);const h={};p&4&&(h.content=u[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),p&4100&&(h.$$scope={dirty:p,ctx:u}),n.$set(h);const y={};p&4100&&(y.$$scope={dirty:p,ctx:u}),a.$set(y)},i(u){i||(I(e.$$.fragment,u),I(l.$$.fragment,u),I(n.$$.fragment,u),I(a.$$.fragment,u),i=!0)},o(u){x(e.$$.fragment,u),x(l.$$.fragment,u),x(n.$$.fragment,u),x(a.$$.fragment,u),i=!1},d(u){u&&(f(t),f(r),f(o)),R(e,u),R(l,u),R(n,u),R(a,u)}}}function Bl(s){let e,t,l;return t=new el({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:tl,$$slots:{default:[zl]},$$scope:{ctx:s}}}),{c(){e=g("div"),O(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{slot:!0});var n=w(e);j(t.$$.fragment,n),n.forEach(f),this.h()},h(){c(e,"slot","content")},m(r,n){M(r,e,n),H(t,e,null),l=!0},p(r,n){const o={};n&4100&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){l||(I(t.$$.fragment,r),l=!0)},o(r){x(t.$$.fragment,r),l=!1},d(r){r&&f(e),R(t)}}}function Ml(s){let e,t,l;function r(o){s[10](o)}let n={align:"end",$$slots:{content:[Bl],default:[Vl]},$$scope:{ctx:s}};return s[1]!==void 0&&(n.show=s[1]),e=new ll({props:n}),Ae.push(()=>Pe(e,"show",r)),e.$on("change",s[11]),{c(){O(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){H(e,o,a),l=!0},p(o,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:o}),!t&&a&2&&(t=!0,i.show=o[1],Ue(()=>t=!1)),e.$set(i)},i(o){l||(I(e.$$.fragment,o),l=!0)},o(o){x(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function Wl(s,e,t){let l;const r=_t(),n=gt("i18n");We(s,n,V=>t(2,l=V));let{onClose:o=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},u=()=>{r("upload",{type:"directory"})},p=()=>{r("sync",{type:"directory"})},b=()=>{r("upload",{type:"text"})},F=V=>{V.stopPropagation(),t(1,a=!0)};function h(V){a=V,t(1,a)}const y=V=>{V.detail===!1&&o()};return s.$$set=V=>{"onClose"in V&&t(0,o=V.onClose)},[o,a,l,r,n,i,u,p,b,F,h,y]}class Al extends Ke{constructor(e){super(),Le(this,e,Wl,Ml,Ce,{onClose:0})}}function Pl(s){let e,t;return e=new ht({props:{content:s[4].t("Voice Input"),$$slots:{default:[Kl]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const n={};r&16&&(n.content=l[4].t("Voice Input")),r&65560&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Ul(s){let e,t,l,r;function n(a){s[12](a)}let o={className:"p-1",onCancel:s[10],onConfirm:s[11]};return s[3]!==void 0&&(o.recording=s[3]),t=new ol({props:o}),Ae.push(()=>Pe(t,"recording",n)),{c(){e=g("div"),O(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var i=w(e);j(t.$$.fragment,i),i.forEach(f),this.h()},h(){c(e,"class","max-w-full w-full")},m(a,i){M(a,e,i),H(t,e,null),r=!0},p(a,i){const u={};i&8&&(u.onCancel=a[10]),i&12&&(u.onConfirm=a[11]),!l&&i&8&&(l=!0,u.recording=a[3],Ue(()=>l=!1)),t.$set(u)},i(a){r||(I(t.$$.fragment,a),r=!0)},o(a){x(t.$$.fragment,a),r=!1},d(a){a&&f(e),R(t)}}}function Kl(s){let e,t,l,r,n;return t=new cl({props:{className:"size-5"}}),{c(){e=g("button"),O(t.$$.fragment),this.h()},l(o){e=v(o,"BUTTON",{class:!0,type:!0});var a=w(e);j(t.$$.fragment,a),a.forEach(f),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(o,a){M(o,e,a),H(t,e,null),l=!0,r||(n=ie(e,"click",s[13]),r=!0)},p:he,i(o){l||(I(t.$$.fragment,o),l=!0)},o(o){x(t.$$.fragment,o),l=!1},d(o){o&&f(e),R(t),r=!1,n()}}}function Ll(s){let e,t=s[4].t("Save")+"",l;return{c(){e=g("button"),l=we(t),this.h()},l(r){e=v(r,"BUTTON",{class:!0,type:!0});var n=w(e);l=$e(n,t),n.forEach(f),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,n){M(r,e,n),m(e,l)},p(r,n){n&16&&t!==(t=r[4].t("Save")+"")&&be(l,t)},d(r){r&&f(e)}}}function Ol(s){let e,t,l,r,n,o,a,i,u,p,b,F,h,y,V,S,J,B,A,P,W,E,N,_,z,C,k;l=new il({props:{className:"size-3.5"}});function L(T){s[9](T)}let te={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(te.value=s[2]),V=new nl({props:te}),Ae.push(()=>Pe(V,"value",L));const Q=[Ul,Pl],Z=[];function oe(T,ee){return T[3]?0:1}return P=oe(s),W=Z[P]=Q[P](s),_=new ht({props:{content:s[4].t("Save"),$$slots:{default:[Ll]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("button"),O(l.$$.fragment),r=q(),n=g("div"),o=g("form"),a=g("div"),i=g("div"),u=g("div"),p=g("div"),b=g("input"),h=q(),y=g("div"),O(V.$$.fragment),J=q(),B=g("div"),A=g("div"),W.c(),E=q(),N=g("div"),O(_.$$.fragment),this.h()},l(T){e=v(T,"DIV",{class:!0});var ee=w(e);t=v(ee,"BUTTON",{class:!0,type:!0});var se=w(t);j(l.$$.fragment,se),se.forEach(f),ee.forEach(f),r=X(T),n=v(T,"DIV",{class:!0});var ue=w(n);o=v(ue,"FORM",{class:!0});var le=w(o);a=v(le,"DIV",{class:!0});var ye=w(a);i=v(ye,"DIV",{class:!0});var ge=w(i);u=v(ge,"DIV",{class:!0});var me=w(u);p=v(me,"DIV",{class:!0});var de=w(p);b=v(de,"INPUT",{class:!0,type:!0,placeholder:!0}),de.forEach(f),me.forEach(f),h=X(ge),y=v(ge,"DIV",{class:!0});var Be=w(y);j(V.$$.fragment,Be),Be.forEach(f),ge.forEach(f),ye.forEach(f),J=X(le),B=v(le,"DIV",{class:!0});var ae=w(B);A=v(ae,"DIV",{class:!0});var ce=w(A);W.l(ce),ce.forEach(f),E=X(ae),N=v(ae,"DIV",{class:!0});var Ee=w(N);j(_.$$.fragment,Ee),Ee.forEach(f),ae.forEach(f),le.forEach(f),ue.forEach(f),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(b,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(b,"type","text"),c(b,"placeholder",F=s[4].t("Title")),b.required=!0,c(p,"class","w-full"),c(u,"class","shrink-0 w-full flex justify-between items-center"),c(y,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(A,"class",""),c(N,"class","shrink-0"),c(B,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(o,"class","flex flex-col w-full h-full"),c(n,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(T,ee){M(T,e,ee),m(e,t),H(l,t,null),M(T,r,ee),M(T,n,ee),m(n,o),m(o,a),m(a,i),m(i,u),m(u,p),m(p,b),ve(b,s[1]),m(i,h),m(i,y),H(V,y,null),m(o,J),m(o,B),m(B,A),Z[P].m(A,null),m(B,E),m(B,N),H(_,N,null),z=!0,C||(k=[ie(t,"click",s[7]),ie(b,"input",s[8]),ie(o,"submit",Ct(s[14]))],C=!0)},p(T,ee){(!z||ee&16&&F!==(F=T[4].t("Title")))&&c(b,"placeholder",F),ee&2&&b.value!==T[1]&&ve(b,T[1]);const se={};ee&16&&(se.placeholder=T[4].t("Write something...")),!S&&ee&4&&(S=!0,se.value=T[2],Ue(()=>S=!1)),V.$set(se);let ue=P;P=oe(T),P===ue?Z[P].p(T,ee):(Ne(),x(Z[ue],1,1,()=>{Z[ue]=null}),ze(),W=Z[P],W?W.p(T,ee):(W=Z[P]=Q[P](T),W.c()),I(W,1),W.m(A,null));const le={};ee&16&&(le.content=T[4].t("Save")),ee&65552&&(le.$$scope={dirty:ee,ctx:T}),_.$set(le)},i(T){z||(I(l.$$.fragment,T),I(V.$$.fragment,T),I(W),I(_.$$.fragment,T),z=!0)},o(T){x(l.$$.fragment,T),x(V.$$.fragment,T),x(W),x(_.$$.fragment,T),z=!1},d(T){T&&(f(e),f(r),f(n)),R(l),R(V),Z[P].d(),R(_),C=!1,dt(k)}}}function jl(s){let e,t,l;function r(o){s[15](o)}let n={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Ol]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.show=s[0]),e=new sl({props:n}),Ae.push(()=>Pe(e,"show",r)),{c(){O(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){H(e,o,a),l=!0},p(o,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,i.show=o[0],Ue(()=>t=!1)),e.$set(i)},i(o){l||(I(e.$$.fragment,o),l=!0)},o(o){x(e.$$.fragment,o),l=!1},d(o){R(e,o)}}}function Hl(s,e,t){let l;const r=gt("i18n");We(s,r,A=>t(4,l=A));const n=_t();let{show:o=!1}=e,a=l.t("Untitled"),i="",u=!1;const p=()=>{t(0,o=!1)};function b(){a=this.value,t(1,a)}function F(A){i=A,t(2,i)}const h=()=>{t(3,u=!1)},y=A=>{const{text:P,filename:W}=A;t(2,i=`${i}${P} `),t(3,u=!1)};function V(A){u=A,t(3,u)}const S=async()=>{try{let A=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(P){return G.error(l.t("Permission denied when accessing microphone: {{error}}",{error:P})),null});A&&(t(3,u=!0),A.getTracks().forEach(W=>W.stop())),A=null}catch{G.error(l.t("Permission denied when accessing microphone"))}},J=()=>{if(a.trim()===""||i.trim()===""){G.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}n("submit",{name:a,content:i}),t(0,o=!1),t(1,a=""),t(2,i="")};function B(A){o=A,t(0,o)}return s.$$set=A=>{"show"in A&&t(0,o=A.show)},[o,a,i,u,l,r,n,p,b,F,h,y,V,S,J,B]}class Rl extends Ke{constructor(e){super(),Le(this,e,Hl,jl,Ce,{show:0})}}function kt(s){let e,t,l,r,n,o,a;return n=new Zt({props:{$$slots:{default:[ql]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),O(n.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var u=w(e);t=v(u,"DIV",{class:!0});var p=w(t);l=v(p,"DIV",{class:!0});var b=w(l);r=v(b,"DIV",{class:!0});var F=w(r);j(n.$$.fragment,F),F.forEach(f),b.forEach(f),p.forEach(f),u.forEach(f),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",o="fixed "+(s[15]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,u){M(i,e,u),m(e,t),m(t,l),m(l,r),H(n,r,null),a=!0},p(i,u){const p={};u[2]&1024&&(p.$$scope={dirty:u,ctx:i}),n.$set(p),(!a||u[0]&32768&&o!==(o="fixed "+(i[15]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",o)},i(i){a||(I(n.$$.fragment,i),a=!0)},o(i){x(n.$$.fragment,i),a=!1},d(i){i&&f(e),R(n)}}}function ql(s){let e,t="Drop any files here to add to my documents";return{c(){e=g("div"),e.textContent=t,this.h()},l(l){e=v(l,"DIV",{class:!0,"data-svelte-h":!0}),Ft(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){M(l,e,r)},p:he,d(l){l&&f(e)}}}function Xl(s){let e,t;return e=new vt({props:{className:"size-5"}}),{c(){O(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:he,i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Yl(s){var ot,at,it,ct;let e,t,l,r,n,o,a,i,u,p,b,F,h,y,V,S,J,B=s[14].t("Access")+"",A,P,W,E,N,_,z,C,k,L,te,Q,Z,oe,T,ee,se,ue,le,ye,ge,me,de,Be,ae,ce,Ee,ke,Qe,tt;function mt($){s[35]($)}function pt($){s[36]($)}let Ze={allowPublic:((it=(at=(ot=s[16])==null?void 0:ot.permissions)==null?void 0:at.sharing)==null?void 0:it.public_knowledge)||((ct=s[16])==null?void 0:ct.role)==="admin",onChange:s[34],accessRoles:["read","write"]};s[7]!==void 0&&(Ze.show=s[7]),s[0].access_control!==void 0&&(Ze.accessControl=s[0].access_control),e=new hl({props:Ze}),Ae.push(()=>Pe(e,"show",mt)),Ae.push(()=>Pe(e,"accessControl",pt)),V=new dl({props:{strokeWidth:"2.5",className:"size-3.5"}});const lt=[Jl,Gl],Ie=[];function rt($,Y){return $[3]?0:!$[3]&&$[2]!==null?1:-1}~(C=rt(s))&&(k=Ie[C]=lt[C](s)),se=new ml({}),de=new Al({}),de.$on("upload",s[51]),de.$on("sync",s[52]);const st=[lr,tr],De=[];function nt($,Y){return $[9].length>0?0:1}return ae=nt(s),ce=De[ae]=st[ae](s),{c(){O(e.$$.fragment),r=q(),n=g("div"),o=g("div"),a=g("div"),i=g("div"),u=g("div"),p=g("input"),F=q(),h=g("div"),y=g("button"),O(V.$$.fragment),S=q(),J=g("div"),A=we(B),P=q(),W=g("div"),E=g("input"),_=q(),z=g("div"),k&&k.c(),L=q(),te=g("div"),Q=g("div"),Z=g("div"),oe=g("div"),T=g("div"),ee=g("div"),O(se.$$.fragment),ue=q(),le=g("input"),ge=q(),me=g("div"),O(de.$$.fragment),Be=q(),ce.c(),this.h()},l($){j(e.$$.fragment,$),r=X($),n=v($,"DIV",{class:!0});var Y=w(n);o=v(Y,"DIV",{class:!0});var xe=w(o);a=v(xe,"DIV",{class:!0});var Fe=w(a);i=v(Fe,"DIV",{class:!0});var Ve=w(i);u=v(Ve,"DIV",{class:!0});var Oe=w(u);p=v(Oe,"INPUT",{type:!0,class:!0,placeholder:!0}),Oe.forEach(f),F=X(Ve),h=v(Ve,"DIV",{class:!0});var je=w(h);y=v(je,"BUTTON",{class:!0,type:!0});var Te=w(y);j(V.$$.fragment,Te),S=X(Te),J=v(Te,"DIV",{class:!0});var He=w(J);A=$e(He,B),He.forEach(f),Te.forEach(f),je.forEach(f),Ve.forEach(f),P=X(Fe),W=v(Fe,"DIV",{class:!0});var Re=w(W);E=v(Re,"INPUT",{type:!0,class:!0,placeholder:!0}),Re.forEach(f),Fe.forEach(f),xe.forEach(f),Y.forEach(f),_=X($),z=v($,"DIV",{class:!0});var Se=w(z);k&&k.l(Se),L=X(Se),te=v(Se,"DIV",{class:!0});var ft=w(te);Q=v(ft,"DIV",{class:!0});var d=w(Q);Z=v(d,"DIV",{class:!0});var D=w(Z);oe=v(D,"DIV",{class:!0});var U=w(oe);T=v(U,"DIV",{class:!0});var K=w(T);ee=v(K,"DIV",{class:!0});var re=w(ee);j(se.$$.fragment,re),re.forEach(f),ue=X(K),le=v(K,"INPUT",{class:!0,placeholder:!0}),ge=X(K),me=v(K,"DIV",{});var fe=w(me);j(de.$$.fragment,fe),fe.forEach(f),K.forEach(f),U.forEach(f),Be=X(D),ce.l(D),D.forEach(f),d.forEach(f),ft.forEach(f),Se.forEach(f),this.h()},h(){var $,Y;c(p,"type","text"),c(p,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(p,"placeholder",b=s[14].t("Knowledge Name")),c(u,"class","w-full"),c(J,"class","text-sm font-medium shrink-0"),c(y,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(y,"type","button"),c(h,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(E,"type","text"),c(E,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(E,"placeholder",N=s[14].t("Knowledge Description")),c(W,"class","flex w-full px-1"),c(a,"class","flex-1"),c(o,"class","flex w-full"),c(n,"class","w-full mb-2.5"),c(ee,"class","self-center ml-1 mr-3"),c(le,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(le,"placeholder",ye=`${s[14].t("Search Collection")}${((($=s[0])==null?void 0:$.files)??[]).length?` (${(((Y=s[0])==null?void 0:Y.files)??[]).length})`:""}`),c(T,"class","flex mb-0.5"),c(oe,"class","px-3"),c(Z,"class","w-full h-full flex flex-col"),c(Q,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(te,"class",Ee=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(z,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m($,Y){H(e,$,Y),M($,r,Y),M($,n,Y),m(n,o),m(o,a),m(a,i),m(i,u),m(u,p),ve(p,s[0].name),m(i,F),m(i,h),m(h,y),H(V,y,null),m(y,S),m(y,J),m(J,A),m(a,P),m(a,W),m(W,E),ve(E,s[0].description),M($,_,Y),M($,z,Y),~C&&Ie[C].m(z,null),m(z,L),m(z,te),m(te,Q),m(Q,Z),m(Z,oe),m(oe,T),m(T,ee),H(se,ee,null),m(T,ue),m(T,le),ve(le,s[1]),m(T,ge),m(T,me),H(de,me,null),m(Z,Be),De[ae].m(Z,null),ke=!0,Qe||(tt=[ie(p,"input",s[37]),ie(p,"input",s[38]),ie(y,"click",s[39]),ie(E,"input",s[40]),ie(E,"input",s[41]),ie(le,"input",s[49]),ie(le,"focus",s[50])],Qe=!0)},p($,Y){var Oe,je,Te,He,Re,Se;const xe={};Y[0]&65536&&(xe.allowPublic=((Te=(je=(Oe=$[16])==null?void 0:Oe.permissions)==null?void 0:je.sharing)==null?void 0:Te.public_knowledge)||((He=$[16])==null?void 0:He.role)==="admin"),!t&&Y[0]&128&&(t=!0,xe.show=$[7],Ue(()=>t=!1)),!l&&Y[0]&1&&(l=!0,xe.accessControl=$[0].access_control,Ue(()=>l=!1)),e.$set(xe),(!ke||Y[0]&16384&&b!==(b=$[14].t("Knowledge Name")))&&c(p,"placeholder",b),Y[0]&1&&p.value!==$[0].name&&ve(p,$[0].name),(!ke||Y[0]&16384)&&B!==(B=$[14].t("Access")+"")&&be(A,B),(!ke||Y[0]&16384&&N!==(N=$[14].t("Knowledge Description")))&&c(E,"placeholder",N),Y[0]&1&&E.value!==$[0].description&&ve(E,$[0].description);let Fe=C;C=rt($),C===Fe?~C&&Ie[C].p($,Y):(k&&(Ne(),x(Ie[Fe],1,1,()=>{Ie[Fe]=null}),ze()),~C?(k=Ie[C],k?k.p($,Y):(k=Ie[C]=lt[C]($),k.c()),I(k,1),k.m(z,L)):k=null),(!ke||Y[0]&16385&&ye!==(ye=`${$[14].t("Search Collection")}${(((Re=$[0])==null?void 0:Re.files)??[]).length?` (${(((Se=$[0])==null?void 0:Se.files)??[]).length})`:""}`))&&c(le,"placeholder",ye),Y[0]&2&&le.value!==$[1]&&ve(le,$[1]);let Ve=ae;ae=nt($),ae===Ve?De[ae].p($,Y):(Ne(),x(De[Ve],1,1,()=>{De[Ve]=null}),ze(),ce=De[ae],ce?ce.p($,Y):(ce=De[ae]=st[ae]($),ce.c()),I(ce,1),ce.m(Z,null)),(!ke||Y[0]&8&&Ee!==(Ee=($[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(te,"class",Ee)},i($){ke||(I(e.$$.fragment,$),I(V.$$.fragment,$),I(k),I(se.$$.fragment,$),I(de.$$.fragment,$),I(ce),ke=!0)},o($){x(e.$$.fragment,$),x(V.$$.fragment,$),x(k),x(se.$$.fragment,$),x(de.$$.fragment,$),x(ce),ke=!1},d($){$&&(f(r),f(n),f(_),f(z)),R(e,$),R(V),~C&&Ie[C].d(),R(se),R(de),De[ae].d(),Qe=!1,dt(tt)}}}function Gl(s){let e,t;return e=new al({props:{className:"h-full",show:s[2]!==null,onClose:s[48],$$slots:{default:[Ql]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const n={};r[0]&4&&(n.show=l[2]!==null),r[0]&4&&(n.onClose=l[48]),r[0]&27652|r[2]&1024&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}function Jl(s){let e,t,l,r;const n=[er,Zl],o=[];function a(i,u){return i[10]?0:1}return t=a(s),l=o[t]=n[t](s),{c(){e=g("div"),l.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var u=w(e);l.l(u),u.forEach(f),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,u){M(i,e,u),o[t].m(e,null),r=!0},p(i,u){let p=t;t=a(i),t===p?o[t].p(i,u):(Ne(),x(o[p],1,1,()=>{o[p]=null}),ze(),l=o[t],l?l.p(i,u):(l=o[t]=n[t](i),l.c()),I(l,1),l.m(e,null))},i(i){r||(I(l),r=!0)},o(i){x(l),r=!1},d(i){i&&f(e),o[t].d()}}}function yt(s){let e,t,l;return t=new vt({}),{c(){e=g("div"),O(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=w(e);j(t.$$.fragment,n),n.forEach(f),this.h()},h(){c(e,"class","ml-2 self-center")},m(r,n){M(r,e,n),H(t,e,null),l=!0},i(r){l||(I(t.$$.fragment,r),l=!0)},o(r){x(t.$$.fragment,r),l=!1},d(r){r&&f(e),R(t)}}}function Et(s){let e,t,l,r;return{c(){e=g("textarea"),this.h()},l(n){e=v(n,"TEXTAREA",{class:!0,placeholder:!0}),w(e).forEach(f),this.h()},h(){c(e,"class","w-full h-full outline-none resize-none"),c(e,"placeholder",t=s[14].t("Add content here"))},m(n,o){M(n,e,o),ve(e,s[11]),l||(r=ie(e,"input",s[47]),l=!0)},p(n,o){o[0]&16384&&t!==(t=n[14].t("Add content here"))&&c(e,"placeholder",t),o[0]&2048&&ve(e,n[11])},d(n){n&&f(e),l=!1,r()}}}function Ql(s){var z,C;let e,t,l,r,n,o,a,i,u=((C=(z=s[10])==null?void 0:z.meta)==null?void 0:C.name)+"",p,b,F,h,y=s[14].t("Save")+"",V,S,J,B,A=s[10].id,P,W,E;o=new ul({props:{strokeWidth:"2.5"}});let N=s[13]&&yt(),_=Et(s);return{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),n=g("button"),O(o.$$.fragment),a=q(),i=g("div"),p=we(u),b=q(),F=g("div"),h=g("button"),V=we(y),S=q(),N&&N.c(),J=q(),B=g("div"),_.c(),this.h()},l(k){e=v(k,"DIV",{class:!0});var L=w(e);t=v(L,"DIV",{class:!0});var te=w(t);l=v(te,"DIV",{class:!0});var Q=w(l);r=v(Q,"DIV",{class:!0});var Z=w(r);n=v(Z,"BUTTON",{class:!0});var oe=w(n);j(o.$$.fragment,oe),oe.forEach(f),Z.forEach(f),a=X(Q),i=v(Q,"DIV",{class:!0});var T=w(i);p=$e(T,u),T.forEach(f),b=X(Q),F=v(Q,"DIV",{});var ee=w(F);h=v(ee,"BUTTON",{class:!0});var se=w(h);V=$e(se,y),S=X(se),N&&N.l(se),se.forEach(f),ee.forEach(f),Q.forEach(f),J=X(te),B=v(te,"DIV",{class:!0});var ue=w(B);_.l(ue),ue.forEach(f),te.forEach(f),L.forEach(f),this.h()},h(){c(n,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(h,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"),h.disabled=s[13],c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(B,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(k,L){M(k,e,L),m(e,t),m(t,l),m(l,r),m(r,n),H(o,n,null),m(l,a),m(l,i),m(i,p),m(l,b),m(l,F),m(F,h),m(h,V),m(h,S),N&&N.m(h,null),m(t,J),m(t,B),_.m(B,null),P=!0,W||(E=[ie(n,"click",s[45]),ie(h,"click",s[46])],W=!0)},p(k,L){var te,Q;(!P||L[0]&1024)&&u!==(u=((Q=(te=k[10])==null?void 0:te.meta)==null?void 0:Q.name)+"")&&be(p,u),(!P||L[0]&16384)&&y!==(y=k[14].t("Save")+"")&&be(V,y),k[13]?N?L[0]&8192&&I(N,1):(N=yt(),N.c(),I(N,1),N.m(h,null)):N&&(Ne(),x(N,1,1,()=>{N=null}),ze()),(!P||L[0]&8192)&&(h.disabled=k[13]),L[0]&1024&&Ce(A,A=k[10].id)?(_.d(1),_=Et(k),_.c(),_.m(B,null)):_.p(k,L)},i(k){P||(I(o.$$.fragment,k),I(N),P=!0)},o(k){x(o.$$.fragment,k),x(N),P=!1},d(k){k&&f(e),R(o),N&&N.d(),_.d(k),W=!1,dt(E)}}}function Zl(s){let e,t,l=s[14].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=g("div"),t=g("div"),r=we(l),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=w(e);t=v(o,"DIV",{class:!0});var a=w(t);r=$e(a,l),a.forEach(f),o.forEach(f),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(n,o){M(n,e,o),m(e,t),m(t,r)},p(n,o){o[0]&16384&&l!==(l=n[14].t("Drag and drop a file to upload or select a file to view")+"")&&be(r,l)},i:he,o:he,d(n){n&&f(e)}}}function er(s){var _,z;let e,t,l,r,n,o=s[26]((z=(_=s[10])==null?void 0:_.meta)==null?void 0:z.name)+"",a,i,u,p,b,F=s[14].t("Save")+"",h,y,V,S,J=s[10].id,B,A,P,W=!sr,E=s[13]&&It(),N=Dt(s);return{c(){e=g("div"),t=g("div"),l=q(),r=g("div"),n=g("a"),a=we(o),u=q(),p=g("div"),b=g("button"),h=we(F),y=q(),E&&E.c(),V=q(),S=g("div"),N.c(),this.h()},l(C){e=v(C,"DIV",{class:!0});var k=w(e);t=v(k,"DIV",{class:!0});var L=w(t);l=X(L),r=v(L,"DIV",{class:!0});var te=w(r);n=v(te,"A",{class:!0,href:!0,target:!0});var Q=w(n);a=$e(Q,o),Q.forEach(f),te.forEach(f),u=X(L),p=v(L,"DIV",{});var Z=w(p);b=v(Z,"BUTTON",{class:!0});var oe=w(b);h=$e(oe,F),y=X(oe),E&&E.l(oe),oe.forEach(f),Z.forEach(f),L.forEach(f),V=X(k),S=v(k,"DIV",{class:!0});var T=w(S);N.l(T),T.forEach(f),k.forEach(f),this.h()},h(){c(n,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(n,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(n,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(b,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"),b.disabled=s[13],c(t,"class","shrink-0 mb-2 flex items-center"),c(S,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full")},m(C,k){M(C,e,k),m(e,t),m(t,l),m(t,r),m(r,n),m(n,a),m(t,u),m(t,p),m(p,b),m(b,h),m(b,y),E&&E.m(b,null),m(e,V),m(e,S),N.m(S,null),B=!0,A||(P=ie(b,"click",s[43]),A=!0)},p(C,k){var L,te;(!B||k[0]&1024)&&o!==(o=C[26]((te=(L=C[10])==null?void 0:L.meta)==null?void 0:te.name)+"")&&be(a,o),(!B||k[0]&1024&&i!==(i=C[10].id?`/api/v1/files/${C[10].id}/content`:"#"))&&c(n,"href",i),(!B||k[0]&16384)&&F!==(F=C[14].t("Save")+"")&&be(h,F),C[13]?E?k[0]&8192&&I(E,1):(E=It(),E.c(),I(E,1),E.m(b,null)):E&&(Ne(),x(E,1,1,()=>{E=null}),ze()),(!B||k[0]&8192)&&(b.disabled=C[13]),k[0]&1024&&Ce(J,J=C[10].id)?(N.d(1),N=Dt(C),N.c(),N.m(S,null)):N.p(C,k)},i(C){B||(I(W),I(E),B=!0)},o(C){x(W),x(E),B=!1},d(C){C&&f(e),E&&E.d(),N.d(C),A=!1,P()}}}function It(s){let e,t,l;return t=new vt({}),{c(){e=g("div"),O(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=w(e);j(t.$$.fragment,n),n.forEach(f),this.h()},h(){c(e,"class","ml-2 self-center")},m(r,n){M(r,e,n),H(t,e,null),l=!0},i(r){l||(I(t.$$.fragment,r),l=!0)},o(r){x(t.$$.fragment,r),l=!1},d(r){r&&f(e),R(t)}}}function Dt(s){let e,t,l,r;return{c(){e=g("textarea"),this.h()},l(n){e=v(n,"TEXTAREA",{class:!0,placeholder:!0}),w(e).forEach(f),this.h()},h(){c(e,"class","w-full h-full outline-none resize-none"),c(e,"placeholder",t=s[14].t("Add content here"))},m(n,o){M(n,e,o),ve(e,s[11]),l||(r=ie(e,"input",s[44]),l=!0)},p(n,o){o[0]&16384&&t!==(t=n[14].t("Add content here"))&&c(e,"placeholder",t),o[0]&2048&&ve(e,n[11])},d(n){n&&f(e),l=!1,r()}}}function tr(s){let e,t,l=s[14].t("No content found")+"",r;return{c(){e=g("div"),t=g("div"),r=we(l),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=w(e);t=v(o,"DIV",{});var a=w(t);r=$e(a,l),a.forEach(f),o.forEach(f),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(n,o){M(n,e,o),m(e,t),m(t,r)},p(n,o){o[0]&16384&&l!==(l=n[14].t("No content found")+"")&&be(r,l)},i:he,o:he,d(n){n&&f(e)}}}function lr(s){let e,t,l;return t=new $l({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[53]),t.$on("delete",s[54]),{c(){e=g("div"),O(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=w(e);j(t.$$.fragment,n),n.forEach(f),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,n){M(r,e,n),H(t,e,null),l=!0},p(r,n){const o={};n[0]&512&&(o.files=r[9]),n[0]&4&&(o.selectedFileId=r[2]),t.$set(o)},i(r){l||(I(t.$$.fragment,r),l=!0)},o(r){x(t.$$.fragment,r),l=!1},d(r){r&&f(e),R(t)}}}function rr(s){let e,t,l,r,n,o,a,i,u,p,b,F,h,y,V,S=s[12]&&kt(s);function J(_){s[28](_)}let B={message:s[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(B.show=s[6]),t=new fl({props:B}),Ae.push(()=>Pe(t,"show",J)),t.$on("confirm",s[29]);function A(_){s[30](_)}let P={};s[5]!==void 0&&(P.show=s[5]),n=new Rl({props:P}),Ae.push(()=>Pe(n,"show",A)),n.$on("submit",s[31]);const W=[Yl,Xl],E=[];function N(_,z){return _[4]&&_[0]?0:1}return b=N(s),F=E[b]=W[b](s),{c(){S&&S.c(),e=q(),O(t.$$.fragment),r=q(),O(n.$$.fragment),a=q(),i=g("input"),u=q(),p=g("div"),F.c(),this.h()},l(_){S&&S.l(_),e=X(_),j(t.$$.fragment,_),r=X(_),j(n.$$.fragment,_),a=X(_),i=v(_,"INPUT",{id:!0,type:!0}),u=X(_),p=v(_,"DIV",{class:!0,id:!0});var z=w(p);F.l(z),z.forEach(f),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(p,"class","flex flex-col w-full h-full translate-y-1"),c(p,"id","collection-container")},m(_,z){S&&S.m(_,z),M(_,e,z),H(t,_,z),M(_,r,z),H(n,_,z),M(_,a,z),M(_,i,z),M(_,u,z),M(_,p,z),E[b].m(p,null),h=!0,y||(V=[ie(i,"change",s[32]),ie(i,"change",s[33])],y=!0)},p(_,z){_[12]?S?(S.p(_,z),z[0]&4096&&I(S,1)):(S=kt(_),S.c(),I(S,1),S.m(e.parentNode,e)):S&&(Ne(),x(S,1,1,()=>{S=null}),ze());const C={};z[0]&16384&&(C.message=_[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&z[0]&64&&(l=!0,C.show=_[6],Ue(()=>l=!1)),t.$set(C);const k={};!o&&z[0]&32&&(o=!0,k.show=_[5],Ue(()=>o=!1)),n.$set(k);let L=b;b=N(_),b===L?E[b].p(_,z):(Ne(),x(E[L],1,1,()=>{E[L]=null}),ze(),F=E[b],F?F.p(_,z):(F=E[b]=W[b](_),F.c()),I(F,1),F.m(p,null))},i(_){h||(I(S),I(t.$$.fragment,_),I(n.$$.fragment,_),I(F),h=!0)},o(_){x(S),x(t.$$.fragment,_),x(n.$$.fragment,_),x(F),h=!1},d(_){_&&(f(e),f(r),f(a),f(i),f(u),f(p)),S&&S.d(_),R(t,_),R(n,_),E[b].d(),y=!1,dt(V)}}}let sr=!0;function nr(s,e,t){let l,r,n,o,a,i;We(s,zt,d=>t(58,l=d)),We(s,Bt,d=>t(59,n=d)),We(s,Mt,d=>t(60,o=d)),We(s,Wt,d=>t(15,a=d)),We(s,At,d=>t(16,i=d));const u=gt("i18n");We(s,u,d=>t(14,r=d));let p=!0,b,F=null,h=null,y="",V=!1,S=!1,J=!1,B=null,A=[],P=null,W=null,E="",N=new Map,_=null,z=null,C,k=!1,L=!1;const te=(d,D)=>{const U=new Blob([D],{type:"text/plain"}),K=Jt(U,`${d}.txt`);return K},Q=async d=>{var K,re,fe,pe,ne,_e,Me,et;const D=Qt(),U={type:"file",file:"",id:null,url:"",name:d.name,size:d.size,status:"uploading",error:"",itemId:D};if(U.size==0)return G.error(r.t("You cannot upload an empty file.")),null;if((((K=o==null?void 0:o.file)==null?void 0:K.max_size)??null)!==null&&d.size>(((re=o==null?void 0:o.file)==null?void 0:re.max_size)??0)*1024*1024){d.size,(((fe=o==null?void 0:o.file)==null?void 0:fe.max_size)??0)*1024*1024,G.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(pe=o==null?void 0:o.file)==null?void 0:pe.max_size}));return}t(0,h.files=[...h.files??[],U],h);try{let Xe=null;(d.type.startsWith("audio/")||d.type.startsWith("video/"))&&((_e=(ne=n==null?void 0:n.audio)==null?void 0:ne.stt)!=null&&_e.language)&&(Xe={language:(et=(Me=n==null?void 0:n.audio)==null?void 0:Me.stt)==null?void 0:et.language});const qe=await Kt(localStorage.token,d,Xe).catch(Ye=>(G.error(`${Ye}`),null));qe?(qe.error&&(console.warn("File upload warning:",qe.error),G.warning(qe.error)),t(0,h.files=h.files.map(Ye=>(Ye.itemId===D&&(Ye.id=qe.id),delete Ye.itemId,Ye)),h),await le(qe.id)):G.error(r.t("Failed to upload file."))}catch(Xe){G.error(`${Xe}`)}},Z=async()=>{const d="showDirectoryPicker"in window;try{d?await T():await ee()}catch(D){se(D)}},oe=d=>d.split("/").some(D=>D.startsWith(".")),T=async()=>{const d=await window.showDirectoryPicker();let D=0,U=0;const K=()=>{const pe=U/D*100;G.info(r.t("Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)",{uploadedFiles:U,totalFiles:D,percentage:pe.toFixed(2)}))};async function re(pe){for await(const ne of pe.values())ne.name.startsWith(".")||(ne.kind==="file"?D++:ne.kind==="directory"&&(ne.name.startsWith(".")||await re(ne)))}async function fe(pe,ne=""){for await(const _e of pe.values()){if(_e.name.startsWith("."))continue;const Me=ne?`${ne}/${_e.name}`:_e.name;if(!oe(Me))if(_e.kind==="file"){const et=await _e.getFile(),Xe=new File([et],Me,{type:et.type});await Q(Xe),U++,K()}else _e.kind==="directory"&&(_e.name.startsWith(".")||await fe(_e,Me))}}await re(d),K(),D>0&&await fe(d)},ee=async()=>new Promise((d,D)=>{const U=document.createElement("input");U.type="file",U.webkitdirectory=!0,U.directory=!0,U.multiple=!0,U.style.display="none",document.body.appendChild(U),U.onchange=async()=>{try{const K=Array.from(U.files).filter(ne=>!oe(ne.webkitRelativePath));let re=K.length,fe=0;const pe=()=>{const ne=fe/re*100;G.info(r.t("Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)",{uploadedFiles:fe,totalFiles:re,percentage:ne.toFixed(2)}))};pe();for(const ne of K)if(!ne.name.startsWith(".")){const _e=ne.webkitRelativePath||ne.name,Me=new File([ne],_e,{type:ne.type});await Q(Me),fe++,pe()}document.body.removeChild(U),d()}catch(K){D(K)}},U.onerror=K=>{document.body.removeChild(U),D(K)},U.click()}),se=d=>{d.name==="AbortError"?G.info(r.t("Directory selection was cancelled")):G.error(r.t("Error accessing directory"))},ue=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const d=await Ht(localStorage.token,F).catch(D=>{G.error(`${D}`)});d&&(t(0,h=d),G.success(r.t("Knowledge reset successfully.")),Z())}else Z()},le=async d=>{const D=await Rt(localStorage.token,F,d).catch(U=>(G.error(`${U}`),null));D?(t(0,h=D),G.success(r.t("File added successfully."))):(G.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(U=>U.id!==d),h))},ye=async d=>{try{const D=await qt(localStorage.token,F,d);D&&(t(0,h=D),G.success(r.t("File removed successfully.")))}catch(D){G.error(`${D}`)}},ge=async()=>{if(!L){t(13,L=!0);try{const d=P.id,D=E;N.delete(d);const U=await Lt(localStorage.token,d,D).catch(re=>{G.error(`${re}`)}),K=await Xt(localStorage.token,F,d).catch(re=>{G.error(`${re}`)});U&&K&&(t(0,h=K),G.success(r.t("File content updated successfully.")))}finally{t(13,L=!1)}}},me=()=>{z&&clearTimeout(z),z=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){G.error(r.t("Please fill in all fields."));return}await Yt(localStorage.token,F,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(D=>{G.error(`${D}`)})&&(G.success(r.t("Knowledge updated successfully")),Pt.set(await Gt(localStorage.token)))},1e3)},de=async d=>{d.matches?t(3,p=!0):t(3,p=!1)},Be=async d=>{try{if(t(10,P=d),N.has(d.id)){t(11,E=N.get(d.id));return}const D=await Ot(localStorage.token,d.id);D?(t(11,E=D.data.content),N.set(d.id,D.data.content)):G.error(r.t("No content found in file."))}catch{G.error(r.t("Failed to load file content."))}},ae=d=>{var D,U;d.preventDefault(),(U=(D=d.dataTransfer)==null?void 0:D.types)!=null&&U.includes("Files")?t(12,k=!0):t(12,k=!1)},ce=()=>{t(12,k=!1)},Ee=async d=>{var D,U,K,re;if(d.preventDefault(),t(12,k=!1),(U=(D=d.dataTransfer)==null?void 0:D.types)!=null&&U.includes("Files")&&(K=d.dataTransfer)!=null&&K.files){const fe=(re=d.dataTransfer)==null?void 0:re.files;if(fe&&fe.length>0)for(const pe of fe)await Q(pe);else G.error(r.t("File not found."))}};xt(async()=>{C=window.matchMedia("(min-width: 1024px)"),C.addEventListener("change",de),de(C);const d=document.getElementById("collection-container");p&&Math.floor(300/d.clientWidth*100),new ResizeObserver(re=>{for(let fe of re)fe.contentRect.width}).observe(d),t(4,F=l.params.id);const U=await jt(localStorage.token,F).catch(re=>(G.error(`${re}`),null));U?t(0,h=U):Nt("/workspace/knowledge");const K=document.querySelector("body");K==null||K.addEventListener("dragover",ae),K==null||K.addEventListener("drop",Ee),K==null||K.addEventListener("dragleave",ce)}),Tt(()=>{C==null||C.removeEventListener("change",de);const d=document.querySelector("body");d==null||d.removeEventListener("dragover",ae),d==null||d.removeEventListener("drop",Ee),d==null||d.removeEventListener("dragleave",ce)});const ke=d=>{try{return decodeURIComponent(d)}catch{return d}};function Qe(d){S=d,t(6,S)}const tt=()=>{ue()};function mt(d){V=d,t(5,V)}const pt=d=>{const D=te(d.detail.name,d.detail.content);Q(D)};function Ze(){B=this.files,t(8,B)}const lt=async()=>{if(B&&B.length>0){for(const D of B)await Q(D);t(8,B=null);const d=document.getElementById("files-input");d&&(d.value="")}else G.error(r.t("File not found."))},Ie=()=>{me()};function rt(d){J=d,t(7,J)}function st(d){s.$$.not_equal(h.access_control,d)&&(h.access_control=d,t(0,h))}function De(){h.name=this.value,t(0,h)}const nt=()=>{me()},ot=()=>{t(7,J=!0)};function at(){h.description=this.value,t(0,h)}const it=()=>{me()},ct=()=>{b.expand()},$=()=>{ge()};function Y(){E=this.value,t(11,E)}const xe=()=>{t(2,W=null)},Fe=()=>{ge()};function Ve(){E=this.value,t(11,E)}const Oe=()=>{t(2,W=null)};function je(){y=this.value,t(1,y)}const Te=()=>{t(2,W=null)},He=d=>{d.detail.type==="directory"?Z():d.detail.type==="text"?t(5,V=!0):document.getElementById("files-input").click()},Re=d=>{t(6,S=!0)},Se=d=>{t(2,W=W===d.detail?null:d.detail)},ft=d=>{d.detail,t(2,W=null),ye(d.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(27,_=new St(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&134217731&&_&&t(9,A=y?_.search(y).map(d=>d.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(W){const d=((h==null?void 0:h.files)??[]).find(D=>D.id===W);d?Be(d):t(10,P=null)}else t(10,P=null)},[h,y,W,p,F,V,S,J,B,A,P,E,k,L,r,a,i,u,b,te,Q,Z,ue,ye,ge,me,ke,_,Qe,tt,mt,pt,Ze,lt,Ie,rt,st,De,nt,ot,at,it,ct,$,Y,xe,Fe,Ve,Oe,je,Te,He,Re,Se,ft]}class or extends Ke{constructor(e){super(),Le(this,e,nr,rr,Ce,{},null,[-1,-1,-1])}}function ar(s){let e,t;return e=new or({}),{c(){O(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p:he,i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){R(e,l)}}}class Ar extends Ke{constructor(e){super(),Le(this,e,null,ar,Ce,{})}}export{Ar as component};
//# sourceMappingURL=31.CMVRv_HQ.js.map
