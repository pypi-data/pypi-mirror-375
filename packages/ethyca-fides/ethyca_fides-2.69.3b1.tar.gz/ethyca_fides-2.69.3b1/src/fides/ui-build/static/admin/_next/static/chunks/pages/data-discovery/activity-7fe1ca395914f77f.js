(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7477],{11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,s){var a=s(99736),i=s(92360);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==a(e)}},45550:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/activity",function(){return s(3680)}])},54409:function(e,t,s){"use strict";s.d(t,{Z:function(){return I}});var a=s(24246),i=s(96306),n=s(812),r=s(41841),o=s(21910),l=s(31883);let c=(0,i.IUT)({displayName:"MonitorOffIcon",viewBox:"0 0 12 12",path:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.47125 1H5.85H6.15H6.51188L6.58875 1.36914L7.52062 5.83268L6.42408 4.98635L6.03375 3.11719L5.8038 4.50761L4.99323 3.882L5.40562 1.38867L5.47125 1ZM4.80795 5.0022L4.67675 5.79545L5.48735 6.42109L5.61854 5.62783L4.80795 5.0022ZM6.73856 6.49227L6.96125 7.55866L8.42407 8.6877L8.69498 8.00228L7.94864 7.42624L7.88625 7.58398L7.83501 7.33853L6.73856 6.49227ZM8.33138 6.45844L9.07755 7.03434L9.30188 6.4668H11.55H12V5.5293H11.55H9H8.69812L8.58375 5.82031L8.33138 6.45844ZM7.27551 9.06443L7.35399 9.125H7.28813L7.27551 9.06443ZM4.49147 6.91566L5.30209 7.54131L4.79437 10.6113L4.72875 11H4.35H4.05H3.69563L3.61313 10.6406L2.64563 6.46875H0.45H0V5.53125H0.45H2.69777L3.49646 6.1477L4.15125 8.97266L4.49147 6.91566Z",fill:"currentColor"}),(0,a.jsx)("g",{clipPath:"url(#clip0_341_3102)",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6755 10.4168L0.164222 2.304L0.775218 1.51237L11.2865 9.62517L10.6755 10.4168Z",fill:"currentColor"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_341_3102",children:(0,a.jsx)("rect",{width:"11.5",height:"9",fill:"white",transform:"translate(0 1.5)"})})})]})}),d=(0,i.IUT)({displayName:"MonitorOnIcon",viewBox:"0 0 12 10",path:(0,a.jsx)("path",{d:"M5.47125 0H5.85H6.15H6.51188L6.58875 0.369141L7.88625 6.58398L8.58375 4.82031L8.69812 4.5293H9H11.55H12V5.4668H11.55H9.30188L8.36625 7.83398L8.25188 8.125H7.95H7.65H7.28813L7.21125 7.75586L6.03375 2.11719L4.79437 9.61133L4.72875 10H4.35H4.05H3.69563L3.61313 9.64062L2.64563 5.46875H0.45H0V4.53125H0.45H3H3.35438L3.43688 4.89062L4.15125 7.97266L5.40562 0.388672L5.47125 0Z",fill:"currentColor"})});var u=s(79494),L=s(70675),g=s(7940),I=e=>{let{resource:t,ignoreChildActions:s=!1}=e,I=(0,g.G)(t),[f,{isLoading:x}]=(0,L.v8)(),[h,{isLoading:_}]=(0,L.vi)(),[m,{isLoading:j}]=(0,L.Tl)(),{successAlert:C,errorAlert:A}=(0,r.VY)(),T=async()=>{let e=await f({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id});(0,l.D4)(e)?A((0,n.e$)(e.error,"Failed to confirm resource")):C("Data discovery has started. The results may take some time to appear in the “Data discovery“ tab.","".concat(t.name||"The resource"," is now being monitored."))},D=async()=>{let e=await m({staged_resource_urn:t.urn});(0,l.D4)(e)?A((0,n.e$)(e.error),"Failed to un-mute resource"):C("".concat(t.name||"The resource"," has been un-muted and is now being monitored."))},v=async()=>{let e=await f({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id,unmute_children:!0,classify_monitored_resources:!0});(0,l.D4)(e)?A((0,n.e$)(e.error),"Failed to un-mute resource"):C("Data discovery has started. The results may take some time to appear in the “Data discovery“ tab.","".concat(t.name||"The resource"," is now being monitored."))},S=async()=>{let e=await h({staged_resource_urn:t.urn});(0,l.D4)(e)?A((0,n.e$)(e.error),"Failed to mute resource"):C("Ignored data will not be monitored for changes or added to Fides datasets.","".concat(t.name||"Resource"," ignored"))},p=x||_||j,{diff_status:y,child_diff_statuses:N}=t,w=I===o.D$.SCHEMA,H=I===o.D$.FIELD,b=N&&(N[o.LL.CLASSIFICATION_ADDITION]||N[o.LL.CLASSIFICATION_UPDATE]),O=w&&void 0===y||!H&&y===o.LL.ADDITION||b,F=y!==o.LL.MUTED,R=y===o.LL.MUTED&&!H,E=y===o.LL.MUTED&&H,Z=N&&(N[o.LL.ADDITION]||N[o.LL.REMOVAL]),M=y===o.LL.MONITORED&&!s&&Z&&!b;return(0,a.jsxs)(i.Ugi,{children:[(O||M)&&(0,a.jsx)(u.Z,{title:"Monitor",icon:(0,a.jsx)(d,{}),onClick:T,disabled:p,loading:x}),E&&(0,a.jsx)(u.Z,{title:"Un-Mute",icon:(0,a.jsx)(d,{}),onClick:D,disabled:p,loading:x}),R&&(0,a.jsx)(u.Z,{title:"Monitor",icon:(0,a.jsx)(d,{}),onClick:v,disabled:p,loading:x}),F&&(0,a.jsx)(u.Z,{title:"Ignore",icon:(0,a.jsx)(c,{}),onClick:S,disabled:p,loading:_})]})}},91761:function(e,t,s){"use strict";var a=s(24246),i=s(96306),n=s(812),r=s(41841),o=s(7940),l=s(98559),c=s(21910),d=s(79494),u=s(70675);t.Z=e=>{let{resource:t}=e,[s,{isLoading:L}]=(0,u.v8)(),[g,{isLoading:I}]=(0,u.cM)(),[f,{isLoading:x}]=(0,u.vi)(),h=I||x||L,{diff_status:_,child_diff_statuses:m,top_level_field_name:j}=t,{successAlert:C,errorAlert:A}=(0,r.VY)(),T=_===c.LL.CLASSIFICATION_ADDITION||_===c.LL.CLASSIFICATION_UPDATE,D=m&&(m[c.LL.CLASSIFICATION_ADDITION]||m[c.LL.CLASSIFICATION_UPDATE]),v=(T||D)&&!j,S=T||D,p=(0,o.G)(t)!==c.D$.FIELD,y=v&&S&&p,N=async()=>{let e=await g({staged_resource_urn:t.urn});(0,n.D4)(e)?A((0,n.e$)(e.error),"Failed to promote resource"):C('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},w=async()=>{let e=await f({staged_resource_urn:t.urn});(0,n.D4)(e)?A((0,n.e$)(e.error),"Failed to mute resource"):C("Ignored changes will not be added to a Fides dataset.","".concat(t.name||"Changes"," ignored"))},H=async()=>{let e=await s({staged_resource_urn:t.urn,monitor_config_id:t.monitor_config_id,start_classification:!0,diff_statuses_to_classify:[c.LL.CLASSIFICATION_ADDITION,c.LL.CLASSIFICATION_UPDATE,c.LL.CLASSIFYING,c.LL.CLASSIFICATION_QUEUED]});(0,n.D4)(e)?A((0,n.e$)(e.error),"Failed to reclassify resource"):C("Reclassification of ".concat((0,l.Z)(t)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,a.jsxs)(i.Ugi,{gap:2,children:[v&&(0,a.jsx)(d.Z,{title:"Confirm",icon:(0,a.jsx)(i.nQG,{}),onClick:N,disabled:h,loading:I}),S&&(0,a.jsx)(d.Z,{title:"Ignore",icon:(0,a.jsx)(i.tpL,{}),onClick:w,disabled:h,loading:x}),p&&!y&&(0,a.jsx)(d.Z,{title:"Reclassify",icon:(0,a.jsx)(i.nyI,{}),onClick:H,disabled:h,loading:L}),y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.LZC,{}),(0,a.jsxs)(i.v2r,{children:[(0,a.jsx)(i.j2t,{as:i.wpx,size:"small",type:"text",icon:(0,a.jsx)(i.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,a.jsx)(i.qyq,{children:(0,a.jsx)(i.sNh,{onClick:H,icon:(0,a.jsx)(i.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}},3680:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a,i,n=s(24246),r=s(27378),o=s(35287),l=s(58754),c=s(47182),d=s(92222),u=s(59003),L=s(96306),g=s(47935),I=s(72625),f=s(70675),x=s(38347),h=s(87667),_=s(50169),m=s(80285),j=s(30952);(a=i||(i={})).DATASET="Dataset",a.CLASSIFICATION="Classification";var C=s(74241),A=s(28278),T=s(20449),D=e=>(0,T.Z)(e)===A.E.CLASSIFICATION?i.CLASSIFICATION:i.DATASET,v=s(54409),S=s(91761);let p={items:[],total:0,page:1,size:50,pages:1},y=()=>(0,n.jsx)(L.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,n.jsxs)(L.gCW,{children:[(0,n.jsx)(L.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,n.jsx)(L.xvT,{fontSize:"sm",children:"You're up to date!"})]})}),N=(0,d.Cl)();var w=e=>{let{onRowClick:t,statusFilters:s,childsStatusFilters:a}=e,[o,l]=(0,r.useState)(""),{PAGE_SIZES:c,pageSize:A,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:H,onNextPageClick:b,isNextPageDisabled:O,startRange:F,endRange:R,pageIndex:E,setTotalPages:Z}=(0,g.oi)(),{isFetching:M,isLoading:k,data:P}=(0,f.z8)({diff_status:s,child_diff_status:a,page:E,size:A,search:o}),{items:U,total:V,pages:$}=(0,r.useMemo)(()=>null!=P?P:p,[P]);(0,r.useEffect)(()=>{Z($)},[$,Z]);let z=(0,r.useMemo)(()=>[N.accessor(e=>e.name,{id:"name",cell:e=>(0,n.jsx)(h.Z,{result:e.row.original}),header:e=>(0,n.jsx)(g.Rr,{value:"Name",...e})}),N.accessor(e=>e.urn,{id:"project",cell:e=>(0,n.jsx)(g.G3,{value:(0,C.Z)(e.getValue())}),header:e=>(0,n.jsx)(g.Rr,{value:"Project",...e})}),N.display({id:"status",cell:e=>(0,n.jsx)(_.Z,{result:e.row.original}),header:e=>(0,n.jsx)(g.Rr,{value:"Status",...e})}),N.accessor(e=>e.system,{id:"system",cell:e=>(0,n.jsx)(g.G3,{value:e.getValue()}),header:e=>(0,n.jsx)(g.Rr,{value:"System",...e})}),N.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,n.jsx)(g.G3,{value:e.getValue()}),header:e=>(0,n.jsx)(g.Rr,{value:"Detected by",...e})}),N.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,n.jsx)(I.Cy,{time:e.getValue()}),header:e=>(0,n.jsx)(g.Rr,{value:"When",...e})}),N.accessor(e=>e,{id:"action",cell:e=>D(e.getValue())===i.DATASET?(0,n.jsx)(v.Z,{resource:e.getValue()}):(0,n.jsx)(S.Z,{resource:e.getValue()}),header:e=>(0,n.jsx)(g.Rr,{value:"Action",...e})})],[]),G=(0,u.b7)({getCoreRowModel:(0,d.sC)(),getGroupedRowModel:(0,d.qe)(),getExpandedRowModel:(0,d.rV)(),getRowId:m.Z,columns:z,manualPagination:!0,data:U,columnResizeMode:"onChange"});return k?(0,n.jsx)(g.I4,{rowHeight:36,numRows:36}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Q$,{children:(0,n.jsxs)(L.kCb,{gap:6,align:"center",children:[(0,n.jsx)(L.xuv,{flexShrink:0,children:(0,n.jsx)(j.f,{value:o,onChange:l})}),(0,n.jsx)(x.a,{})]})}),(0,n.jsx)(g.ZK,{tableInstance:G,onRowClick:t,emptyTableNotice:(0,n.jsx)(y,{})}),(0,n.jsx)(g.s8,{totalRows:V||0,pageSizes:c,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:H||M,onNextPageClick:b,isNextPageDisabled:O||M,startRange:F,endRange:R})]})},H=s(21910),b=()=>{let{navigateToDetectionResults:e,navigateToDiscoveryResults:t}=(0,c.Z)();return(0,n.jsxs)(o.Z,{title:"Data discovery",children:[(0,n.jsx)(l.Z,{heading:"All activity"}),(0,n.jsx)(w,{onRowClick:s=>{if(D(s)===i.DATASET){e({resourceUrn:s.urn});return}t({resourceUrn:s.urn})},statusFilters:[H.LL.ADDITION,H.LL.REMOVAL,H.LL.CLASSIFICATION_ADDITION,H.LL.CLASSIFICATION_UPDATE],childsStatusFilters:[H.LL.ADDITION,H.LL.REMOVAL,H.LL.CLASSIFICATION_ADDITION,H.LL.CLASSIFICATION_UPDATE]})]})}},31883:function(e,t,s){"use strict";s.d(t,{Bw:function(){return a.Bw},D4:function(){return a.D4}});var a=s(19043)}},function(e){e.O(0,[431,4164,8002,2888,9774,179],function(){return e(e.s=45550)}),_N_E=e.O()}]);