import{j as e,c as v,r as c,u as B,B as V}from"./index-BRZ4tpHq.js";import{g as G,a as U}from"./api-BDZ8mgcX.js";import{C as h,a as f,b as j,c as p,d as N}from"./card-Dv8PJnt9.js";import{u as H,c as z,a as _}from"./index-Dcf_pfkZ.js";import{c as A,R as K,I as q}from"./index-taeySYSj.js";import{P as J}from"./index-BetNNbXV.js";import{P as T}from"./index-CTvPNZtd.js";import{u as W}from"./index-COMQfmU0.js";import{H as Z,S as Q,T as X,C as Y,P as ee}from"./theme-switch-DorJDsGd.js";import{F as se}from"./floating-action-button-XEFQTGTy.js";import{M as te}from"./main-gqigjXqN.js";import"./index-D-xJce4k.js";import"./index-L_x52GkC.js";import"./index-CzMLjddK.js";import"./sign-out-dialog-GBgIxE2Q.js";import"./command-DU_R5alo.js";import"./index-BElOJd7n.js";import"./index-B6E7gDWi.js";import"./arrow-right-v-fqSTyu.js";import"./separator-DA0QZDJm.js";import"./check-46FVkbyV.js";function m({className:s,...t}){return e.jsx("div",{"data-slot":"skeleton",className:v("bg-accent animate-pulse rounded-md",s),...t})}var C="Tabs",[ae,Be]=z(C,[A]),$=A(),[re,k]=ae(C),M=c.forwardRef((s,t)=>{const{__scopeTabs:n,value:a,onValueChange:r,defaultValue:l,orientation:i="horizontal",dir:o,activationMode:d="automatic",...b}=s,u=B(o),[x,y]=H({prop:a,onChange:r,defaultProp:l??"",caller:C});return e.jsx(re,{scope:n,baseId:W(),value:x,onValueChange:y,orientation:i,dir:u,activationMode:d,children:e.jsx(T.div,{dir:u,"data-orientation":i,...b,ref:t})})});M.displayName=C;var I="TabsList",P=c.forwardRef((s,t)=>{const{__scopeTabs:n,loop:a=!0,...r}=s,l=k(I,n),i=$(n);return e.jsx(K,{asChild:!0,...i,orientation:l.orientation,dir:l.dir,loop:a,children:e.jsx(T.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:t})})});P.displayName=I;var R="TabsTrigger",F=c.forwardRef((s,t)=>{const{__scopeTabs:n,value:a,disabled:r=!1,...l}=s,i=k(R,n),o=$(n),d=D(i.baseId,a),b=O(i.baseId,a),u=a===i.value;return e.jsx(q,{asChild:!0,...o,focusable:!r,active:u,children:e.jsx(T.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":b,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...l,ref:t,onMouseDown:_(s.onMouseDown,x=>{!r&&x.button===0&&x.ctrlKey===!1?i.onValueChange(a):x.preventDefault()}),onKeyDown:_(s.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&i.onValueChange(a)}),onFocus:_(s.onFocus,()=>{const x=i.activationMode!=="manual";!u&&!r&&x&&i.onValueChange(a)})})})});F.displayName=R;var E="TabsContent",L=c.forwardRef((s,t)=>{const{__scopeTabs:n,value:a,forceMount:r,children:l,...i}=s,o=k(E,n),d=D(o.baseId,a),b=O(o.baseId,a),u=a===o.value,x=c.useRef(u);return c.useEffect(()=>{const y=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx(J,{present:r||u,children:({present:y})=>e.jsx(T.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:b,tabIndex:0,...i,ref:t,style:{...s.style,animationDuration:x.current?"0s":void 0},children:y&&l})})});L.displayName=E;function D(s,t){return`${s}-trigger-${t}`}function O(s,t){return`${s}-content-${t}`}var ne=M,ie=P,le=F,oe=L;function ce({className:s,...t}){return e.jsx(ne,{"data-slot":"tabs",className:v("flex flex-col gap-2",s),...t})}function de({className:s,...t}){return e.jsx(ie,{"data-slot":"tabs-list",className:v("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function w({className:s,...t}){return e.jsx(le,{"data-slot":"tabs-trigger",className:v("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function S({className:s,...t}){return e.jsx(oe,{"data-slot":"tabs-content",className:v("flex-1 outline-none",s),...t})}function g(s){const{title:t,value:n,sub:a,icon:r,loading:l,error:i,className:o}=s;return e.jsxs(h,{className:v(o),children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:t}),r?e.jsx("div",{className:"text-muted-foreground flex h-4 w-4 items-center justify-center",children:r}):null]}),e.jsxs(p,{children:[l?e.jsx(m,{className:"h-7 w-24"}):i?e.jsx("div",{className:"text-destructive text-sm",children:"Error"}):e.jsx("div",{className:"text-2xl font-bold",children:n}),a&&!l&&!i?e.jsx("p",{className:"text-muted-foreground text-xs",children:a}):null]})]})}function ue(){const[s,t]=c.useState(null),[n,a]=c.useState(!0),[r,l]=c.useState(null);return c.useEffect(()=>{a(!0),l(null),G().then(i=>{console.log("data",i),t(i)}).catch(i=>{l(i.message)}).finally(()=>{a(!1)})},[]),{data:s,loading:n,error:r}}function xe(){const{data:s,loading:t}=ue(),n=c.useMemo(()=>!s||!s.total_budget?0:s.current_cost/s.total_budget*100,[s]),a=c.useMemo(()=>s?Object.entries(s.model_cost):[],[s]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(g,{title:"Current Cost",value:s?`$${s.current_cost.toFixed(5)}`:"--",sub:`Total Budget: $${s?.total_budget.toFixed(2)||"N/A"}`,loading:t}),e.jsx(g,{title:"Budget Usage",value:s?`${n.toFixed(2)}%`:"--",sub:"Percentage of total budget used",loading:t}),e.jsx(g,{title:"Total Invocations",value:"--",sub:"Data not available",loading:t}),e.jsx(g,{title:"Success Rate",value:"--",sub:"Data not available",loading:t})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsx("div",{className:"col-span-1 lg:col-span-2",children:e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Usage Over Time"}),e.jsx(N,{children:"Time-series data collection is not yet implemented."})]}),e.jsx(p,{className:"flex h-[300px] items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Chart will be displayed here once data is available."})})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Cost by Model"}),e.jsx(N,{children:"Breakdown of costs per model."})]}),e.jsx(p,{children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{className:"h-8 w-full"}),e.jsx(m,{className:"h-8 w-full"})]}):e.jsx("ul",{className:"space-y-2",children:a.map(([r,l])=>e.jsxs("li",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:r}),e.jsxs("span",{className:"font-mono",children:["$",l.toFixed(5)]})]},r))})})]})})]})]})}function me({items:s,loading:t}){return t?e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"h-6 w-full"}),e.jsx(m,{className:"h-6 w-full"}),e.jsx(m,{className:"h-6 w-full"})]}):s?.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-muted-foreground text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 pr-4 font-medium",children:"Name"}),e.jsx("th",{className:"py-1 pr-4 font-medium",children:"Status"}),e.jsx("th",{className:"py-1 pr-4 font-medium",children:"Plugins"}),e.jsx("th",{className:"py-1 pr-4 font-medium",children:"Enabled"})]})}),e.jsx("tbody",{children:s.map(n=>e.jsxs("tr",{className:"border-t last:border-b",children:[e.jsx("td",{className:"py-1 pr-4",children:n.name}),e.jsx("td",{className:"py-1 pr-4",children:e.jsx("span",{className:v("inline-flex items-center rounded px-1.5 py-0.5 text-xs font-medium",n.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-muted text-muted-foreground"),children:n.status})}),e.jsx("td",{className:"py-1 pr-4",children:n.plugin_count}),e.jsx("td",{className:"py-1 pr-4",children:n.enabled_plugin_count})]},n.id))})]})}):e.jsx("div",{className:"text-muted-foreground text-sm",children:"No assistants."})}function he({llm:s,loading:t}){if(t)return e.jsx(m,{className:"h-6 w-40"});if(!s||Object.keys(s).length===0)return e.jsx("div",{className:"text-muted-foreground text-sm",children:"No LLM configured."});const n=Object.entries(s).slice(0,6);return e.jsx("dl",{className:"grid grid-cols-2 gap-2 text-sm",children:n.map(([a,r])=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"text-muted-foreground text-xs uppercase",children:a}),e.jsx("dd",{className:"break-all",children:String(r)})]},a))})}function fe({plugins:s,loading:t,max:n=6}){return t?e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"h-5 w-48"}),e.jsx(m,{className:"h-5 w-64"}),e.jsx(m,{className:"h-5 w-40"})]}):s?.length?e.jsxs("ul",{className:"space-y-1 text-sm",children:[s.slice(0,n).map(a=>e.jsxs("li",{className:"hover:bg-muted/50 flex flex-wrap items-center gap-x-2 gap-y-0.5 rounded border px-2 py-1",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsxs("span",{className:"text-muted-foreground text-xs",children:["v",a.version]}),e.jsxs("span",{className:"text-muted-foreground text-xs",children:[a.tool_count," tools"]})]},a.id)),s.length>n&&e.jsxs("li",{className:"text-muted-foreground text-xs",children:["+",s.length-n," more..."]})]}):e.jsx("div",{className:"text-muted-foreground text-sm",children:"No plugins installed."})}function je({logs:s,loading:t,limit:n=8}){return t?e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((a,r)=>e.jsx(m,{className:"h-5 w-full"},r))}):s?.length?e.jsx("ul",{className:"space-y-1 text-sm",children:s.slice(0,n).map((a,r)=>{const l=a.timestamp||a.ts||"";return e.jsxs("li",{className:"hover:bg-muted/50 flex flex-col rounded border px-2 py-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:v("text-[10px] tracking-wide uppercase",a.level==="error"?"text-red-600 dark:text-red-400":a.level==="warning"?"text-amber-600 dark:text-amber-400":"text-muted-foreground"),children:a.level||"info"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:l?.replace("T"," ").replace("Z","")}),a.module&&e.jsx("span",{className:"text-primary/70 text-xs",children:a.module})]}),e.jsx("div",{className:"leading-snug",children:a.message})]},r)})}):e.jsx("div",{className:"text-muted-foreground text-sm",children:"No recent logs."})}function pe(){const[s,t]=c.useState(null),[n,a]=c.useState(!0),[r,l]=c.useState(null),i=()=>{a(!0),l(null),U().then(o=>{t(o)}).catch(o=>{l(o.message)}).finally(()=>a(!1))};return c.useEffect(()=>{i()},[]),{data:s,loading:n,error:r,reload:i}}function ge(){const{data:s,loading:t,error:n,reload:a}=pe(),r=s?.assistants,l=s?.plugins,i=s?.workflows,o=s?.logs,d=s?.market,b=s?.llm,u=c.useMemo(()=>r?r.total?(r.active/r.total*100).toFixed(0)+"% active":"0%":"",[r]);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(Q,{}),e.jsx(X,{}),e.jsx(Y,{}),e.jsx(ee,{})]})}),e.jsx(se,{children:e.jsx(V,{variant:"outline",onClick:a,disabled:t,children:"Refresh"})}),e.jsxs(te,{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Dashboard"}),e.jsx("div",{className:"flex items-center space-x-2"})]}),e.jsxs(ce,{orientation:"vertical",defaultValue:"overview",className:"space-y-4",children:[e.jsx("div",{className:"w-full overflow-x-auto pb-2",children:e.jsxs(de,{children:[e.jsx(w,{value:"overview",children:"Overview"}),e.jsx(w,{value:"analytics",children:"Analytics"}),e.jsx(w,{value:"reports",disabled:!0,children:"Reports"}),e.jsx(w,{value:"notifications",disabled:!0,children:"Notifications"})]})}),e.jsxs(S,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(g,{title:"Assistants",value:r?r.total:"--",sub:u,loading:t,error:!!n}),e.jsx(g,{title:"Active Assistants",value:r?r.active:"--",sub:r?`${r.inactive} inactive`:"",loading:t,error:!!n}),e.jsx(g,{title:"Plugins",value:l?l.installed_total:"--",sub:d?d.plugin_updates>0?`${d.plugin_updates} updates available`:"Up to date":"",loading:t,error:!!n}),e.jsx(g,{title:"Workflows",value:i?i.total:"--",sub:i?.active_workflow_id?`Active: ${i.active_workflow_id}`:"No active workflow",loading:t,error:!!n})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-7",children:[e.jsxs("div",{className:"col-span-1 space-y-4 lg:col-span-4",children:[e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Assistants"}),e.jsx(N,{children:r?`Total ${r.total}, Active ${r.active}, Inactive ${r.inactive}`:"Overview of assistants"})]}),e.jsxs(p,{children:[n&&e.jsxs("div",{className:"text-destructive mb-2 text-sm",children:["Failed to load: ",n]}),e.jsx(me,{items:r?.list||[],loading:t})]})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Recent Logs"}),e.jsx(N,{children:o?.stats?.total?`Total logs: ${o.stats.total}`:"Latest captured runtime logs"})]}),e.jsx(p,{children:e.jsx(je,{logs:o?.recent||[],loading:t,limit:8})})]})]}),e.jsxs("div",{className:"col-span-1 space-y-4 lg:col-span-3",children:[e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Plugins"}),e.jsx(N,{children:l?`${l.installed_total} installed`:"Installed plugins"})]}),e.jsx(p,{children:e.jsx(fe,{plugins:l?.list||[],loading:t})})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"LLM Configuration"}),e.jsx(N,{children:"Overview of the current global model configuration"})]}),e.jsx(p,{children:e.jsx(he,{llm:b||{},loading:t})})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Market"}),e.jsx(N,{children:d?.metadata?.version?`Version: ${d.metadata.version}`:"Marketplace metadata"})]}),e.jsx(p,{className:"space-y-2 text-sm",children:t?e.jsx(m,{className:"h-5 w-40"}):d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Plugin Updates:"," ",d.plugin_updates>0?e.jsxs("span",{className:"font-medium text-amber-600 dark:text-amber-400",children:[d.plugin_updates," available"]}):e.jsx("span",{className:"text-muted-foreground",children:"No updates"})]}),d.metadata?.counts&&e.jsxs("div",{className:"text-muted-foreground",children:["Counts: ",JSON.stringify(d.metadata.counts)]})]}):e.jsx("div",{className:"text-muted-foreground",children:"Could not retrieve market data"})})]})]})]})]}),e.jsx(S,{value:"analytics",className:"space-y-4",children:e.jsx(xe,{})})]})]})]})}const Ve=ge;export{Ve as component};
