{"version":3,"file":"BGs7I1O-.js","sources":["../../../../../../src/lib/apis/files/index.ts","../../../../../../src/lib/components/common/FileItemModal.svelte","../../../../../../src/lib/components/common/FileItem.svelte"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\nimport { splitStream } from '$lib/utils';\n\nexport const uploadFile = async (token: string, file: File, metadata?: object | null) => {\n\tconst data = new FormData();\n\tdata.append('file', file);\n\tif (metadata) {\n\t\tdata.append('metadata', JSON.stringify(metadata));\n\t}\n\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: data\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tif (res) {\n\t\tconst status = await getFileProcessStatus(token, res.id);\n\n\t\tif (status && status.ok) {\n\t\t\tconst reader = status.body\n\t\t\t\t.pipeThrough(new TextDecoderStream())\n\t\t\t\t.pipeThrough(splitStream('\\n'))\n\t\t\t\t.getReader();\n\n\t\t\twhile (true) {\n\t\t\t\tconst { value, done } = await reader.read();\n\t\t\t\tif (done) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tlet lines = value.split('\\n');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line !== '') {\n\t\t\t\t\t\t\tconsole.log(line);\n\t\t\t\t\t\t\tif (line === 'data: [DONE]') {\n\t\t\t\t\t\t\t\tconsole.log(line);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet data = JSON.parse(line.replace(/^data: /, ''));\n\t\t\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\t\t\tif (data?.error) {\n\t\t\t\t\t\t\t\t\tconsole.error(data.error);\n\t\t\t\t\t\t\t\t\tres.error = data.error;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFileProcessStatus = async (token: string, id: string) => {\n\tconst queryParams = new URLSearchParams();\n\tqueryParams.append('stream', 'true');\n\n\tlet error = null;\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}/process/status?${queryParams}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t}).catch((err) => {\n\t\terror = err.detail;\n\t\tconsole.error(err);\n\t\treturn null;\n\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const uploadDir = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/upload/dir`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFiles = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFileById = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateFileDataContentById = async (token: string, id: string, content: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}/data/content/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tcontent: content\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFileContentById = async (id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}/content`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json'\n\t\t},\n\t\tcredentials: 'include'\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn await res.blob();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deleteFileById = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deleteAllFiles = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/all`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n","<script lang=\"ts\">\n\timport { getContext, onMount, tick } from 'svelte';\n\timport { formatFileSize, getLineCount } from '$lib/utils';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\timport { getKnowledgeById } from '$lib/apis/knowledge';\n\n\tconst i18n = getContext('i18n');\n\n\timport Modal from './Modal.svelte';\n\timport XMark from '../icons/XMark.svelte';\n\timport Info from '../icons/Info.svelte';\n\timport Switch from './Switch.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\timport dayjs from 'dayjs';\n\timport Spinner from './Spinner.svelte';\n\timport { getFileById } from '$lib/apis/files';\n\n\texport let item;\n\texport let show = false;\n\texport let edit = false;\n\n\tlet enableFullContent = false;\n\n\tlet isPdf = false;\n\tlet isAudio = false;\n\tlet loading = false;\n\n\tlet selectedTab = '';\n\n\t$: isPDF =\n\t\titem?.meta?.content_type === 'application/pdf' ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.pdf'));\n\n\t$: isAudio =\n\t\t(item?.meta?.content_type ?? '').startsWith('audio/') ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.mp3')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.wav')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.ogg')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.m4a')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.webm'));\n\n\tconst loadContent = async () => {\n\t\tif (item?.type === 'collection') {\n\t\t\tloading = true;\n\n\t\t\tconst knowledge = await getKnowledgeById(localStorage.token, item.id).catch((e) => {\n\t\t\t\tconsole.error('Error fetching knowledge base:', e);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (knowledge) {\n\t\t\t\titem.files = knowledge.files || [];\n\t\t\t}\n\t\t\tloading = false;\n\t\t} else if (item?.type === 'file') {\n\t\t\tloading = true;\n\n\t\t\tconst file = await getFileById(localStorage.token, item.id).catch((e) => {\n\t\t\t\tconsole.error('Error fetching file:', e);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (file) {\n\t\t\t\titem.file = file || {};\n\t\t\t}\n\t\t\tloading = false;\n\t\t}\n\n\t\tawait tick();\n\t};\n\n\t$: if (show) {\n\t\tloadContent();\n\t}\n\n\tonMount(() => {\n\t\tconsole.log(item);\n\t\tif (item?.context === 'full') {\n\t\t\tenableFullContent = true;\n\t\t}\n\t});\n</script>\n\n<Modal bind:show size=\"lg\">\n\t<div class=\"font-primary px-6 py-5 w-full flex flex-col justify-center dark:text-gray-400\">\n\t\t<div class=\" pb-2\">\n\t\t\t<div class=\"flex items-start justify-between\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\" font-medium text-lg dark:text-gray-100\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\tclass=\"hover:underline line-clamp-1\"\n\t\t\t\t\t\t\ton:click|preventDefault={() => {\n\t\t\t\t\t\t\t\tif (!isPDF && item.url) {\n\t\t\t\t\t\t\t\t\twindow.open(\n\t\t\t\t\t\t\t\t\t\titem.type === 'file' ? `${item.url}/content` : `${item.url}`,\n\t\t\t\t\t\t\t\t\t\t'_blank'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{item?.name ?? 'File'}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<XMark />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<div class=\"flex flex-col items-center md:flex-row gap-1 justify-between w-full\">\n\t\t\t\t\t<div class=\" flex flex-wrap text-xs gap-1 text-gray-500\">\n\t\t\t\t\t\t{#if item?.type === 'collection'}\n\t\t\t\t\t\t\t{#if item?.type}\n\t\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">{item.type}</div>\n\t\t\t\t\t\t\t\t•\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if item?.description}\n\t\t\t\t\t\t\t\t<div class=\"line-clamp-1\">{item.description}</div>\n\t\t\t\t\t\t\t\t•\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if item?.created_at}\n\t\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">\n\t\t\t\t\t\t\t\t\t{dayjs(item.created_at * 1000).format('LL')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if item.size}\n\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">{formatFileSize(item.size)}</div>\n\t\t\t\t\t\t\t•\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if item?.file?.data?.content}\n\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">\n\t\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} extracted lines', {\n\t\t\t\t\t\t\t\t\tCOUNT: getLineCount(item?.file?.data?.content ?? '')\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-1 shrink-0\">\n\t\t\t\t\t\t\t\t• {$i18n.t('Formatting may be inconsistent from source.')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if item?.knowledge}\n\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">\n\t\t\t\t\t\t\t\t{$i18n.t('Knowledge Base')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if edit}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tcontent={enableFullContent\n\t\t\t\t\t\t\t\t\t? $i18n.t(\n\t\t\t\t\t\t\t\t\t\t\t'Inject the entire content as context for comprehensive processing, this is recommended for complex queries.'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t: $i18n.t(\n\t\t\t\t\t\t\t\t\t\t\t'Default to segmented retrieval for focused and relevant content extraction, this is recommended for most cases.'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 text-xs\">\n\t\t\t\t\t\t\t\t\t{#if enableFullContent}\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Using Entire Document')}\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Using Focused Retrieval')}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\tbind:state={enableFullContent}\n\t\t\t\t\t\t\t\t\t\ton:change={(e) => {\n\t\t\t\t\t\t\t\t\t\t\titem.context = e.detail ? 'full' : undefined;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"max-h-[75vh] overflow-auto\">\n\t\t\t{#if !loading}\n\t\t\t\t{#if item?.type === 'collection'}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#each item?.files as file}\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t\t\t<div class=\"flex-shrink-0 text-xs\">\n\t\t\t\t\t\t\t\t\t{file?.meta?.name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{:else if isPDF}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex mb-2.5 scrollbar-none overflow-x-auto w-full border-b border-gray-100 dark:border-gray-800 text-center text-sm font-medium bg-transparent dark:text-gray-200\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"min-w-fit py-1.5 px-4 border-b {selectedTab === ''\n\t\t\t\t\t\t\t\t? ' '\n\t\t\t\t\t\t\t\t: ' border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tselectedTab = '';\n\t\t\t\t\t\t\t}}>{$i18n.t('Content')}</button\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"min-w-fit py-1.5 px-4 border-b {selectedTab === 'preview'\n\t\t\t\t\t\t\t\t? ' '\n\t\t\t\t\t\t\t\t: ' border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tselectedTab = 'preview';\n\t\t\t\t\t\t\t}}>{$i18n.t('Preview')}</button\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if selectedTab === 'preview'}\n\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\ttitle={item?.name}\n\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/files/${item.id}/content`}\n\t\t\t\t\t\t\tclass=\"w-full h-[70vh] border-0 rounded-lg\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"max-h-96 overflow-scroll scrollbar-hidden text-xs whitespace-pre-wrap\">\n\t\t\t\t\t\t\t{item?.file?.data?.content ?? 'No content'}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t{#if isAudio}\n\t\t\t\t\t\t<audio\n\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/files/${item.id}/content`}\n\t\t\t\t\t\t\tclass=\"w-full border-0 rounded-lg mb-2\"\n\t\t\t\t\t\t\tcontrols\n\t\t\t\t\t\t\tplaysinline\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if item?.file?.data}\n\t\t\t\t\t\t<div class=\"max-h-96 overflow-scroll scrollbar-hidden text-xs whitespace-pre-wrap\">\n\t\t\t\t\t\t\t{item?.file?.data?.content ?? 'No content'}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t{:else}\n\t\t\t\t<div class=\"flex items-center justify-center py-6\">\n\t\t\t\t\t<Spinner className=\"size-5\" />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, getContext } from 'svelte';\n\timport { formatFileSize } from '$lib/utils';\n\n\timport FileItemModal from './FileItemModal.svelte';\n\timport GarbageBin from '../icons/GarbageBin.svelte';\n\timport Spinner from './Spinner.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport { settings } from '$lib/stores';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\texport let className = 'w-60';\n\texport let colorClassName = 'bg-white dark:bg-gray-850 border border-gray-50 dark:border-white/5';\n\texport let url: string | null = null;\n\n\texport let dismissible = false;\n\texport let modal = false;\n\texport let loading = false;\n\n\texport let item = null;\n\texport let edit = false;\n\texport let small = false;\n\n\texport let name: string;\n\texport let type: string;\n\texport let size: number;\n\n\timport { deleteFileById } from '$lib/apis/files';\n\n\tlet showModal = false;\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n{#if item}\n\t<FileItemModal bind:show={showModal} bind:item {edit} />\n{/if}\n\n<button\n\tclass=\"relative group p-1.5 {className} flex items-center gap-1 {colorClassName} {small\n\t\t? 'rounded-xl'\n\t\t: 'rounded-2xl'} text-left\"\n\ttype=\"button\"\n\ton:click={async () => {\n\t\tif (item?.file?.data?.content || item?.type === 'file' || modal) {\n\t\t\tshowModal = !showModal;\n\t\t} else {\n\t\t\tif (url) {\n\t\t\t\tif (type === 'file') {\n\t\t\t\t\twindow.open(`${url}/content`, '_blank').focus();\n\t\t\t\t} else {\n\t\t\t\t\twindow.open(`${url}`, '_blank').focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdispatch('click');\n\t}}\n>\n\t{#if !small}\n\t\t<div\n\t\t\tclass=\"size-10 shrink-0 flex justify-center items-center bg-black/20 dark:bg-white/10 text-white rounded-xl\"\n\t\t>\n\t\t\t{#if !loading}\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tclass=\" size-4.5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\td=\"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z\"\n\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t{:else}\n\t\t\t\t<Spinner />\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n\n\t{#if !small}\n\t\t<div class=\"flex flex-col justify-center -space-y-0.5 px-2.5 w-full\">\n\t\t\t<div class=\" dark:text-gray-100 text-sm font-medium line-clamp-1 mb-1\">\n\t\t\t\t{decodeString(name)}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\" flex justify-between text-xs line-clamp-1 {($settings?.highContrastMode ?? false)\n\t\t\t\t\t? 'text-gray-800 dark:text-gray-100'\n\t\t\t\t\t: 'text-gray-500'}\"\n\t\t\t>\n\t\t\t\t{#if type === 'file'}\n\t\t\t\t\t{$i18n.t('File')}\n\t\t\t\t{:else if type === 'doc'}\n\t\t\t\t\t{$i18n.t('Document')}\n\t\t\t\t{:else if type === 'collection'}\n\t\t\t\t\t{$i18n.t('Collection')}\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\" capitalize line-clamp-1\">{type}</span>\n\t\t\t\t{/if}\n\t\t\t\t{#if size}\n\t\t\t\t\t<span class=\"capitalize\">{formatFileSize(size)}</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<Tooltip content={decodeString(name)} className=\"flex flex-col w-full\" placement=\"top-start\">\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5 px-2.5 w-full\">\n\t\t\t\t<div class=\" dark:text-gray-100 text-sm flex justify-between items-center\">\n\t\t\t\t\t{#if loading}\n\t\t\t\t\t\t<div class=\" shrink-0 mr-2\">\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<div class=\"font-medium line-clamp-1 flex-1\">{decodeString(name)}</div>\n\t\t\t\t\t<div class=\"text-gray-500 text-xs capitalize shrink-0\">{formatFileSize(size)}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Tooltip>\n\t{/if}\n\n\t{#if dismissible}\n\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t<button\n\t\t\t\taria-label={$i18n.t('Remove File')}\n\t\t\t\tclass=\" bg-white text-black border border-gray-50 rounded-full {($settings?.highContrastMode ??\n\t\t\t\tfalse)\n\t\t\t\t\t? ''\n\t\t\t\t\t: 'outline-hidden focus:outline-hidden group-hover:visible invisible transition'}\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ton:click|stopPropagation={() => {\n\t\t\t\t\tdispatch('dismiss');\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-4'} />\n\t\t\t</button>\n\n\t\t\t<!-- <button\n\t\t\t\tclass=\" p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-full group-hover:visible invisible transition\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ton:click={() => {\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<GarbageBin />\n\t\t\t</button> -->\n\t\t</div>\n\t{/if}\n</button>\n"],"names":["uploadFile","token","file","metadata","data","error","res","WEBUI_API_BASE_URL","err","status","getFileProcessStatus","reader","splitStream","value","done","lines","line","id","queryParams","getFileById","json","updateFileDataContentById","content","deleteAllFiles","if_block0","_a","ctx","create_if_block_14","if_block1","_b","create_if_block_13","if_block2","_c","create_if_block_12","t0_value","insert_hydration","target","div","anchor","dirty","set_data","t0","dayjs","t","t_value","formatFileSize","getLineCount","div0","div1","t3","t3_value","tooltip_changes","create_if_block_7","create_if_block_1","create_if_block_2","create_if_block_5","create_if_block_4","create_if_block_3","attr","button0","button0_class_value","button1","button1_class_value","append_hydration","t2","t2_value","each_value","ensure_array_like","i","audio","audio_src_value","iframe","iframe_title_value","iframe_src_value","create_if_block_11","create_if_block_10","_e","_d","create_if_block_9","if_block3","_f","create_if_block_8","create_if_block_6","div9","div7","div3","a","div2","button","div6","div5","div4","div8","i18n","getContext","item","$$props","show","edit","enableFullContent","isAudio","loading","selectedTab","loadContent","knowledge","getKnowledgeById","e","$$invalidate","tick","onMount","isPDF","svg","path0","path1","t1_value","current","t1","span","create_if_block","button_class_value","dispatch","createEventDispatcher","className","colorClassName","url","dismissible","modal","small","name","type","size","showModal","decodeString","str"],"mappings":"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"}