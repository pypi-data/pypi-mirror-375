var wt=Object.defineProperty;var nt=r=>{throw TypeError(r)};var Pt=(r,e,i)=>e in r?wt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var I=(r,e,i)=>Pt(r,typeof e!="symbol"?e+"":e,i),st=(r,e,i)=>e.has(r)||nt("Cannot "+i);var o=(r,e,i)=>(st(r,e,"read from private field"),i?i.call(r):e.get(r)),d=(r,e,i)=>e.has(r)?nt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,i),Ke=(r,e,i,n)=>(st(r,e,"write to private field"),n?n.call(r,i):e.set(r,i),i);import"../chunks/CWj6FrbW.js";import{p as ue,c as U,f as L,s as ne,n as ye,b as s,a as ce,ai as H,i as t,q as c,ag as X,an as Ct,K as R,N as _,O as y,ak as ht,af as ft,M as ve,Q as ie,ao as Ye,aj as qe,R as Qe,z as Dt}from"../chunks/DPjJDdIH.js";import{i as se,c as Q,b as Tt}from"../chunks/BcDWG4o7.js";import{b as x,o as xt,C as vt,w as at,u as pt,g as gt,n as tt,a as _t,m as Ae,c as Ot,P as pe}from"../chunks/ClG4LBBA.js";import{i as kt,a as Nt,u as It,o as Et,b as Ft,F as St,P as Kt,c as At,g as lt,d as Lt,E as Ht,e as Rt}from"../chunks/C6OE1b8d.js";import{I as Mt,a as we,e as dt,s as be,i as ut}from"../chunks/bqOBoKf4.js";import{s as Le,r as Je,p}from"../chunks/BjMvBzXH.js";import{g as yt}from"../chunks/ZjGiTQr7.js";import{L as ct}from"../chunks/CV91wnX_.js";function jt(r,e){ue(e,!0);/**
 * @license @lucide/svelte v0.507.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let i=Je(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];Mt(r,Le({name:"house"},()=>i,{get iconNode(){return n},children:(a,h)=>{var l=U(),D=L(l);ne(D,()=>e.children??ye),s(a,l)},$$slots:{default:!0}})),ce()}function ot(r,e,i={}){const{immediate:n=!0}=i,a=x(!1);let h;function l(){h&&(clearTimeout(h),h=null)}function D(){a.current=!1,l()}function T(...M){l(),a.current=!0,h=setTimeout(()=>{a.current=!1,h=null,r(...M)},e)}return n&&(a.current=!0,kt&&T()),xt(()=>{D()}),{isPending:x.readonly(a),start:T,stop:D}}const zt="data-tooltip-content",Bt="data-tooltip-trigger";var Pe,ge,te,He,Re;class Wt{constructor(e){I(this,"opts");d(this,Pe,X(!0));I(this,"isPointerInTransit",x(!1));d(this,ge);d(this,te,X(null));d(this,He,()=>{this.opts.skipDelayDuration.current!==0&&o(this,ge).start()});d(this,Re,()=>{o(this,ge).stop()});I(this,"onOpen",e=>{t(o(this,te))&&t(o(this,te))!==e&&t(o(this,te)).handleClose(),o(this,Re).call(this),this.isOpenDelayed=!1,c(o(this,te),e,!0)});I(this,"onClose",e=>{t(o(this,te))===e&&c(o(this,te),null),o(this,He).call(this)});I(this,"isTooltipOpen",e=>t(o(this,te))===e);this.opts=e,Ke(this,ge,ot(()=>{this.isOpenDelayed=!0},this.opts.skipDelayDuration.current,{immediate:!1}))}get isOpenDelayed(){return t(o(this,Pe))}set isOpenDelayed(e){c(o(this,Pe),e,!0)}}Pe=new WeakMap,ge=new WeakMap,te=new WeakMap,He=new WeakMap,Re=new WeakMap;var Ce,De,Te,xe,Oe,ke,Ne,de,oe,Ie,Me;class Gt{constructor(e,i){I(this,"opts");I(this,"provider");d(this,Ce,H(()=>this.opts.delayDuration.current??this.provider.opts.delayDuration.current));d(this,De,H(()=>this.opts.disableHoverableContent.current??this.provider.opts.disableHoverableContent.current));d(this,Te,H(()=>this.opts.disableCloseOnTriggerClick.current??this.provider.opts.disableCloseOnTriggerClick.current));d(this,xe,H(()=>this.opts.disabled.current??this.provider.opts.disabled.current));d(this,Oe,H(()=>this.opts.ignoreNonKeyboardFocus.current??this.provider.opts.ignoreNonKeyboardFocus.current));d(this,ke,X(null));d(this,Ne,X(null));d(this,de,X(!1));d(this,oe);d(this,Ie,H(()=>this.opts.open.current?t(o(this,de))?"delayed-open":"instant-open":"closed"));I(this,"handleOpen",()=>{o(this,oe).stop(),c(o(this,de),!1),this.opts.open.current=!0});I(this,"handleClose",()=>{o(this,oe).stop(),this.opts.open.current=!1});d(this,Me,()=>{o(this,oe).stop();const e=!this.provider.isOpenDelayed,i=this.delayDuration??0;e||i===0?(c(o(this,de),i>0&&e,!0),this.opts.open.current=!0):o(this,oe).start()});I(this,"onTriggerEnter",()=>{o(this,Me).call(this)});I(this,"onTriggerLeave",()=>{this.disableHoverableContent?this.handleClose():o(this,oe).stop()});this.opts=e,this.provider=i,Ke(this,oe,ot(()=>{c(o(this,de),!0),this.opts.open.current=!0},this.delayDuration??0,{immediate:!1})),at(()=>this.delayDuration,()=>{this.delayDuration!==void 0&&Ke(this,oe,ot(()=>{c(o(this,de),!0),this.opts.open.current=!0},this.delayDuration,{immediate:!1}))}),at(()=>this.opts.open.current,n=>{n?this.provider.onOpen(this):this.provider.onClose(this)})}get delayDuration(){return t(o(this,Ce))}set delayDuration(e){c(o(this,Ce),e)}get disableHoverableContent(){return t(o(this,De))}set disableHoverableContent(e){c(o(this,De),e)}get disableCloseOnTriggerClick(){return t(o(this,Te))}set disableCloseOnTriggerClick(e){c(o(this,Te),e)}get disabled(){return t(o(this,xe))}set disabled(e){c(o(this,xe),e)}get ignoreNonKeyboardFocus(){return t(o(this,Oe))}set ignoreNonKeyboardFocus(e){c(o(this,Oe),e)}get contentNode(){return t(o(this,ke))}set contentNode(e){c(o(this,ke),e,!0)}get triggerNode(){return t(o(this,Ne))}set triggerNode(e){c(o(this,Ne),e,!0)}get stateAttr(){return t(o(this,Ie))}set stateAttr(e){c(o(this,Ie),e)}}Ce=new WeakMap,De=new WeakMap,Te=new WeakMap,xe=new WeakMap,Oe=new WeakMap,ke=new WeakMap,Ne=new WeakMap,de=new WeakMap,oe=new WeakMap,Ie=new WeakMap,Me=new WeakMap;var fe,_e,q,je,ze,Be,We,Ge,Ue,Ze,Ee;class Ut{constructor(e,i){I(this,"opts");I(this,"root");d(this,fe,x(!1));d(this,_e,X(!1));d(this,q,H(()=>this.opts.disabled.current||this.root.disabled));I(this,"handlePointerUp",()=>{o(this,fe).current=!1});d(this,je,()=>{t(o(this,q))||(o(this,fe).current=!1)});d(this,ze,()=>{t(o(this,q))||(o(this,fe).current=!0,document.addEventListener("pointerup",()=>{this.handlePointerUp()},{once:!0}))});d(this,Be,e=>{t(o(this,q))||e.pointerType!=="touch"&&(t(o(this,_e))||this.root.provider.isPointerInTransit.current||(this.root.onTriggerEnter(),c(o(this,_e),!0)))});d(this,We,()=>{t(o(this,q))||(this.root.onTriggerLeave(),c(o(this,_e),!1))});d(this,Ge,e=>{o(this,fe).current||t(o(this,q))||this.root.ignoreNonKeyboardFocus&&!Nt(e.currentTarget)||this.root.handleOpen()});d(this,Ue,()=>{t(o(this,q))||this.root.handleClose()});d(this,Ze,()=>{this.root.disableCloseOnTriggerClick||t(o(this,q))||this.root.handleClose()});d(this,Ee,H(()=>{var e;return{id:this.opts.id.current,"aria-describedby":this.root.opts.open.current?(e=this.root.contentNode)==null?void 0:e.id:void 0,"data-state":this.root.stateAttr,"data-disabled":gt(t(o(this,q))),"data-delay-duration":`${this.root.delayDuration}`,[Bt]:"",tabindex:t(o(this,q))?void 0:0,disabled:this.opts.disabled.current,onpointerup:o(this,je),onpointerdown:o(this,ze),onpointermove:o(this,Be),onpointerleave:o(this,We),onfocus:o(this,Ge),onblur:o(this,Ue),onclick:o(this,Ze)}}));this.opts=e,this.root=i,pt({...e,onRefChange:n=>{this.root.triggerNode=n}})}get props(){return t(o(this,Ee))}set props(e){c(o(this,Ee),e)}}fe=new WeakMap,_e=new WeakMap,q=new WeakMap,je=new WeakMap,ze=new WeakMap,Be=new WeakMap,We=new WeakMap,Ge=new WeakMap,Ue=new WeakMap,Ze=new WeakMap,Ee=new WeakMap;var Fe,Se;class Zt{constructor(e,i){I(this,"opts");I(this,"root");I(this,"onInteractOutside",e=>{var i;if(Ft(e.target)&&((i=this.root.triggerNode)!=null&&i.contains(e.target))&&this.root.disableCloseOnTriggerClick){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()});I(this,"onEscapeKeydown",e=>{var i,n;(n=(i=this.opts.onEscapeKeydown).current)==null||n.call(i,e),!e.defaultPrevented&&this.root.handleClose()});I(this,"onOpenAutoFocus",e=>{e.preventDefault()});I(this,"onCloseAutoFocus",e=>{e.preventDefault()});d(this,Fe,H(()=>({open:this.root.opts.open.current})));d(this,Se,H(()=>({id:this.opts.id.current,"data-state":this.root.stateAttr,"data-disabled":gt(this.root.disabled),style:{pointerEvents:"auto",outline:"none"},[zt]:""})));I(this,"popperProps",{onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus});this.opts=e,this.root=i,pt({...e,onRefChange:n=>{this.root.contentNode=n},deps:()=>this.root.opts.open.current}),It({triggerNode:()=>this.root.triggerNode,contentNode:()=>this.root.contentNode,enabled:()=>this.root.opts.open.current&&!this.root.disableHoverableContent,onPointerExit:()=>{this.root.provider.isTooltipOpen(this.root)&&this.root.handleClose()},setIsPointerInTransit:n=>{this.root.provider.isPointerInTransit.current=n},transitTimeout:this.root.provider.opts.skipDelayDuration.current}),Et(()=>Ct(window,"scroll",n=>{const a=n.target;a&&a.contains(this.root.triggerNode)&&this.root.handleClose()}))}get snippetProps(){return t(o(this,Fe))}set snippetProps(e){c(o(this,Fe),e)}get props(){return t(o(this,Se))}set props(e){c(o(this,Se),e)}}Fe=new WeakMap,Se=new WeakMap;const mt=new vt("Tooltip.Provider"),it=new vt("Tooltip.Root");function Jt(r){return mt.set(new Wt(r))}function Vt(r){return it.set(new Gt(r,mt.get()))}function Yt(r){return new Ut(r,it.get())}function qt(r){return new Zt(r,it.get())}function Qt(r,e){ue(e,!0);let i=p(e,"open",15,!1),n=p(e,"onOpenChange",3,tt);Vt({open:x.with(()=>i(),a=>{i(a),n()(a)}),delayDuration:x.with(()=>e.delayDuration),disableCloseOnTriggerClick:x.with(()=>e.disableCloseOnTriggerClick),disableHoverableContent:x.with(()=>e.disableHoverableContent),ignoreNonKeyboardFocus:x.with(()=>e.ignoreNonKeyboardFocus),disabled:x.with(()=>e.disabled)}),St(r,{children:(a,h)=>{var l=U(),D=L(l);ne(D,()=>e.children??ye),s(a,l)},$$slots:{default:!0}}),ce()}var Xt=R("<div><div><!></div></div>"),$t=R("<div><div><!></div></div>");function eo(r,e){ue(e,!0);let i=p(e,"id",19,_t),n=p(e,"ref",15,null),a=p(e,"side",3,"top"),h=p(e,"sideOffset",3,0),l=p(e,"align",3,"center"),D=p(e,"avoidCollisions",3,!0),T=p(e,"arrowPadding",3,0),M=p(e,"sticky",3,"partial"),$=p(e,"hideWhenDetached",3,!1),re=p(e,"collisionPadding",3,0),m=p(e,"onInteractOutside",3,tt),Z=p(e,"onEscapeKeydown",3,tt),B=p(e,"forceMount",3,!1),J=Je(e,["$$slots","$$events","$$legacy","children","child","id","ref","side","sideOffset","align","avoidCollisions","arrowPadding","sticky","hideWhenDetached","collisionPadding","onInteractOutside","onEscapeKeydown","forceMount"]);const S=qt({id:x.with(()=>i()),ref:x.with(()=>n(),w=>n(w)),onInteractOutside:x.with(()=>m()),onEscapeKeydown:x.with(()=>Z())}),ee=H(()=>({side:a(),sideOffset:h(),align:l(),avoidCollisions:D(),arrowPadding:T(),sticky:M(),hideWhenDetached:$(),collisionPadding:re()})),ae=H(()=>Ae(J,t(ee),S.props));var b=U(),K=L(b);{var C=w=>{Kt(w,Le(()=>t(ae),()=>S.popperProps,{get enabled(){return S.root.opts.open.current},get id(){return i()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,popper:(j,A)=>{let G=()=>A==null?void 0:A().props,V=()=>A==null?void 0:A().wrapperProps;const z=H(()=>Ae(G(),{style:lt("tooltip")}));var k=U(),Y=L(k);{var E=g=>{var F=U(),u=L(F);{let f=H(()=>({props:t(z),wrapperProps:V(),...S.snippetProps}));ne(u,()=>e.child,()=>t(f))}s(g,F)},P=g=>{var F=Xt();we(F,()=>({...V()}));var u=_(F);we(u,()=>({...t(z)}));var f=_(u);ne(f,()=>e.children??ye),y(u),y(F),s(g,F)};se(Y,g=>{e.child?g(E):g(P,!1)})}s(j,k)},$$slots:{popper:!0}}))},O=w=>{var W=U(),j=L(W);{var A=G=>{At(G,Le(()=>t(ae),()=>S.popperProps,{get present(){return S.root.opts.open.current},get id(){return i()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,popper:(z,k)=>{let Y=()=>k==null?void 0:k().props,E=()=>k==null?void 0:k().wrapperProps;const P=H(()=>Ae(Y(),{style:lt("tooltip")}));var g=U(),F=L(g);{var u=v=>{var N=U(),le=L(N);{let me=H(()=>({props:t(P),wrapperProps:E(),...S.snippetProps}));ne(le,()=>e.child,()=>t(me))}s(v,N)},f=v=>{var N=$t();we(N,()=>({...E()}));var le=_(N);we(le,()=>({...t(P)}));var me=_(le);ne(me,()=>e.children??ye),y(le),y(N),s(v,N)};se(F,v=>{e.child?v(u):v(f,!1)})}s(z,g)},$$slots:{popper:!0}}))};se(j,G=>{B()||G(A)},!0)}s(w,W)};se(K,w=>{B()?w(C):w(O,!1)})}s(r,b),ce()}var to=R("<button><!></button>");function oo(r,e){ue(e,!0);let i=p(e,"id",19,_t),n=p(e,"disabled",3,!1),a=p(e,"type",3,"button"),h=p(e,"ref",15,null),l=Je(e,["$$slots","$$events","$$legacy","children","child","id","disabled","type","ref"]);const D=Yt({id:x.with(()=>i()),disabled:x.with(()=>n()??!1),ref:x.with(()=>h(),M=>h(M))}),T=H(()=>Ae(l,D.props,{type:a()}));Lt(r,{get id(){return i()},children:(M,$)=>{var re=U(),m=L(re);{var Z=J=>{var S=U(),ee=L(S);ne(ee,()=>e.child,()=>({props:t(T)})),s(J,S)},B=J=>{var S=to();we(S,()=>({...t(T)}));var ee=_(S);ne(ee,()=>e.children??ye),y(S),s(J,S)};se(m,J=>{e.child?J(Z):J(B,!1)})}s(M,re)},$$slots:{default:!0}}),ce()}function io(r,e){ue(e,!0);let i=p(e,"delayDuration",3,700),n=p(e,"disableCloseOnTriggerClick",3,!1),a=p(e,"disableHoverableContent",3,!1),h=p(e,"disabled",3,!1),l=p(e,"ignoreNonKeyboardFocus",3,!1),D=p(e,"skipDelayDuration",3,300);Jt({delayDuration:x.with(()=>i()),disableCloseOnTriggerClick:x.with(()=>n()),disableHoverableContent:x.with(()=>a()),disabled:x.with(()=>h()),ignoreNonKeyboardFocus:x.with(()=>l()),skipDelayDuration:x.with(()=>D())});var T=U(),M=L(T);ne(M,()=>e.children??ye),s(r,T),ce()}function Xe(r,e){ue(e,!0);let i=p(e,"ref",15,null),n=p(e,"sideOffset",3,4),a=Je(e,["$$slots","$$events","$$legacy","ref","class","sideOffset"]);var h=U(),l=L(h);{let D=H(()=>Ot("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md border px-3 py-1.5 text-sm shadow-md",e.class));Q(l,()=>eo,(T,M)=>{M(T,Le({get sideOffset(){return n()},get class(){return t(D)}},()=>a,{get ref(){return i()},set ref($){i($)}}))})}s(r,h),ce()}const $e=Qt,et=oo,ro=io;var no=(r,e,i)=>e(t(i).id,r),so=R('<a class="block w-full h-full rounded-lg overflow-hidden cursor-pointer opacity-70 hover:opacity-100 transition-opacity"><img alt="" class="w-full h-full object-cover"/></a>'),ao=R("<!> <!>",1),lo=R('<div class="flex-none w-24 h-24"><!></div>'),uo=R('<img alt="" class="w-full h-full object-cover"/>'),co=R("<!> <!>",1),ho=(r,e,i)=>e(t(i).id,r),fo=R('<a class="flex-none w-full h-full rounded-lg overflow-hidden cursor-pointer opacity-70 hover:opacity-100 transition-opacity"><img alt="" class="w-full h-full object-cover"/></a>'),vo=R("<!> <!>",1),po=R('<div class="flex-none w-24 h-24"><!></div>'),go=R('<!> <div class="flex-none w-28 h-28 rounded-lg overflow-hidden border-2 border-indigo-500 shadow-md"><!></div> <!>',1),_o=R('<div class="h-full w-full flex items-center"><div class="w-full px-2 overflow-x-auto"><div class="flex items-center justify-start gap-3 min-w-max pb-2"><!></div></div></div>');function yo(r,e){ue(e,!0);let i=p(e,"contextData",19,()=>({prev:[],next:[]}));function n(m,Z){Z.preventDefault(),yt(`/entities/${m}`,{replaceState:!1,noScroll:!0}),e.onSelectEntity(m)}function a(m){if(!m)return"";try{const Z=m.endsWith("Z")?m:m+"Z",B=new Date(Z);return console.log(B),B.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch{try{return new Date(m).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return m}}}let h;function l(m){Math.abs(m.deltaY)>=10&&m.deltaMode===0&&(m.preventDefault(),h.scrollLeft+=m.deltaY)}ft(()=>{if(h)return h.addEventListener("wheel",l,{passive:!1}),()=>{h.removeEventListener("wheel",l)}});const D=pe+"/api";var T=_o(),M=_(T),$=_(M),re=_($);Q(re,()=>ro,(m,Z)=>{Z(m,{delayDuration:0,children:(B,J)=>{var S=go(),ee=L(S);dt(ee,17,()=>i().prev,ut,(C,O)=>{var w=lo(),W=_(w);Q(W,()=>$e,(j,A)=>{A(j,{children:(G,V)=>{var z=ao(),k=L(z);Q(k,()=>et,(E,P)=>{P(E,{class:"w-full h-full",children:(g,F)=>{var u=so();u.__click=[no,n,O];var f=_(u);y(u),ve(v=>{be(u,"href",`/entities/${t(O).id}`),be(f,"src",v)},[()=>`${D}/thumbnails/${t(O).filepath.replace(/^\/+/,"")}`]),s(g,u)},$$slots:{default:!0}})});var Y=ie(k,2);Q(Y,()=>Xe,(E,P)=>{P(E,{children:(g,F)=>{Ye();var u=qe();ve((f,v,N)=>Qe(u,`${f??""} ${v??""} ${N??""}`),[()=>{var f,v;return((v=(f=t(O).metadata_entries)==null?void 0:f.find(N=>N.key==="screen_name"))==null?void 0:v.value)||""},()=>{var f,v;return((v=(f=t(O).metadata_entries)==null?void 0:f.find(N=>N.key==="active_app"))==null?void 0:v.value)||""},()=>a(t(O).file_created_at)]),s(g,u)},$$slots:{default:!0}})}),s(G,z)},$$slots:{default:!0}})}),y(w),s(C,w)});var ae=ie(ee,2),b=_(ae);Q(b,()=>$e,(C,O)=>{O(C,{children:(w,W)=>{var j=co(),A=L(j);Q(A,()=>et,(V,z)=>{z(V,{class:"w-full h-full",children:(k,Y)=>{var E=uo();ve(P=>be(E,"src",P),[()=>e.entity.image||`${D}/thumbnails/${e.entity.filepath.replace(/^\/+/,"")}`]),s(k,E)},$$slots:{default:!0}})});var G=ie(A,2);Q(G,()=>Xe,(V,z)=>{z(V,{children:(k,Y)=>{Ye();var E=qe();ve((P,g,F)=>Qe(E,`${P??""} ${g??""} ${F??""}`),[()=>{var P,g;return((g=(P=e.entity.metadata_entries)==null?void 0:P.find(F=>F.key==="screen_name"))==null?void 0:g.value)||""},()=>{var P,g;return((g=(P=e.entity.metadata_entries)==null?void 0:P.find(F=>F.key==="active_app"))==null?void 0:g.value)||""},()=>a(e.entity.file_created_at)]),s(k,E)},$$slots:{default:!0}})}),s(w,j)},$$slots:{default:!0}})}),y(ae);var K=ie(ae,2);dt(K,17,()=>i().next,ut,(C,O)=>{var w=po(),W=_(w);Q(W,()=>$e,(j,A)=>{A(j,{children:(G,V)=>{var z=vo(),k=L(z);Q(k,()=>et,(E,P)=>{P(E,{class:"w-full h-full",children:(g,F)=>{var u=fo();u.__click=[ho,n,O];var f=_(u);y(u),ve(v=>{be(u,"href",`/entities/${t(O).id}`),be(f,"src",v)},[()=>`${D}/thumbnails/${t(O).filepath.replace(/^\/+/,"")}`]),s(g,u)},$$slots:{default:!0}})});var Y=ie(k,2);Q(Y,()=>Xe,(E,P)=>{P(E,{children:(g,F)=>{Ye();var u=qe();ve((f,v,N)=>Qe(u,`${f??""} ${v??""} ${N??""}`),[()=>{var f,v;return((v=(f=t(O).metadata_entries)==null?void 0:f.find(N=>N.key==="screen_name"))==null?void 0:v.value)||""},()=>{var f,v;return((v=(f=t(O).metadata_entries)==null?void 0:f.find(N=>N.key==="active_app"))==null?void 0:v.value)||""},()=>a(t(O).file_created_at)]),s(g,u)},$$slots:{default:!0}})}),s(G,z)},$$slots:{default:!0}})}),y(w),s(C,w)}),s(B,S)},$$slots:{default:!0}})}),y($),y(M),Tt(M,m=>h=m,()=>h),y(T),s(r,T),ce()}ht(["click"]);function mo(){yt("/")}var bo=R('<button class="p-2 rounded-full hover:bg-gray-100 flex items-center gap-2 text-indigo-600 -ml-2"><!></button>'),wo=R('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-40 flex items-center justify-center"><!></div>'),Po=R('<div class="absolute inset-0 flex items-center justify-center z-50"><div class="bg-white p-4 rounded-lg shadow-lg flex items-center justify-center"><!></div></div>'),Co=R('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-40 flex flex-col"><div class="flex-grow flex flex-col"><div class="flex flex-col h-[calc(100vh-180px)] w-11/12 max-w-[95vw] mx-auto mt-6 rounded-t-md bg-white overflow-hidden relative"><!> <div class="flex-grow overflow-hidden"><div class="h-full px-10 py-4"><div class="flex flex-col md:flex-row h-full"><!> <!></div></div></div></div></div> <div class="h-[180px] w-full bg-gray-50 shadow-inner border-t"><div class="mx-auto h-full py-3"><!></div></div> <div class="sr-only"><button>Previous</button> <button>Next</button></div></div>'),Do=R("<p>Entity not found.</p>");function Ao(r,e){ue(e,!0);const i=b=>{var K=bo();K.__click=[mo];var C=_(K);jt(C,{size:24,class:"text-indigo-600"}),y(K),s(b,K)};let n=X(null),a=X(!0),h=X(!1),l=X(Dt({prev:[],next:[]}));const D=12;let T=X(!0);function M(){c(T,!t(T)),localStorage.setItem("entityShowDetails",JSON.stringify(t(T)))}function $(){t(l).prev&&t(l).prev.length>0&&B(t(l).prev[t(l).prev.length-1].id)}function re(){t(l).next&&t(l).next.length>0&&B(t(l).next[0].id)}function m(b){b.key==="ArrowLeft"?$():b.key==="ArrowRight"&&re()}ft(()=>{const b=localStorage.getItem("entityShowDetails");return b!==null&&c(T,JSON.parse(b),!0),(async()=>{const C=window.location.pathname.split("/").pop(),w=await fetch(`${pe}/api/entities/${C}`);c(n,await w.json(),!0),c(a,!1),t(n)&&t(n).library_id&&t(n).id&&Z(t(n).library_id,t(n).id)})(),window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}});async function Z(b,K){try{const C=await fetch(`${pe}/api/libraries/${b}/entities/${K}/context?prev=${D}&next=${D}`);C.ok&&c(l,await C.json(),!0)}catch(C){console.error("Error fetching entity context:",C)}}async function B(b){const K=`/entities/${b}`;window.history.pushState({id:b},"",K),c(h,!0);try{const C=typeof pe<"u"?pe:window.location.origin,O=await fetch(`${C}/api/entities/${b}`);if(c(n,await O.json(),!0),t(n)&&t(n).library_id&&t(n).id){const w=await fetch(`${pe}/api/libraries/${t(n).library_id}/entities/${t(n).id}/context?prev=${D}&next=${D}`);w.ok&&c(l,await w.json(),!0)}}catch(C){console.error("Error navigating to entity:",C)}finally{c(h,!1)}}var J=U(),S=L(J);{var ee=b=>{var K=wo(),C=_(K);ct(C,{size:36,class:"text-primary animate-spin"}),y(K),s(b,K)},ae=b=>{var K=U(),C=L(K);{var O=W=>{var j=Co(),A=_(j),G=_(A),V=_(G);{var z=he=>{var Ve=Po(),rt=_(Ve),bt=_(rt);ct(bt,{size:28,class:"text-primary animate-spin"}),y(rt),y(Ve),s(he,Ve)};se(V,he=>{t(h)&&he(z)})}var k=ie(V,2),Y=_(k),E=_(Y),P=_(E);Ht(P,{get entity(){return t(n)},get showDetails(){return t(T)},toggleDetails:M,get LeftIcon(){return i}});var g=ie(P,2);{var F=he=>{Rt(he,{get entity(){return t(n)}})};se(g,he=>{t(T)&&he(F)})}y(E),y(Y),y(k),y(G),y(A);var u=ie(A,2),f=_(u),v=_(f);yo(v,{get entity(){return t(n)},get contextData(){return t(l)},onSelectEntity:B}),y(f),y(u);var N=ie(u,2),le=_(N);le.__click=$;var me=ie(le,2);me.__click=re,y(N),y(j),s(W,j)},w=W=>{var j=Do();s(W,j)};se(C,W=>{t(n)?W(O):W(w,!1)},!0)}s(b,K)};se(S,b=>{t(a)?b(ee):b(ae,!1)})}s(r,J),ce()}ht(["click"]);export{Ao as component};
