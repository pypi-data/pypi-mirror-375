{"version":3,"file":"js/module_users.favorites.914381c1.bundle.js","mappings":"yTACA,MCIAA,EAAAC,EAAAA,QAAAC,KAAA,MAAAC,SAAA,oCAAAC,MAAA,EAAAC,KAAA,0BAAAC,WAAA,CAAAC,YAAA,mBAAAC,QAAA,oBAAAC,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,UAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,aAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,cAAAC,WAAA,MAAAP,KAAA,YAAAC,WAAA,CAAAE,QAAA,oBAAAC,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,UAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,aAAAC,WAAA,MAAAP,KAAA,gBAAAC,WAAA,CAAAC,YAAA,oBAAAE,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,aAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,cAAAC,WAAA,MAAAP,KAAA,GAAAC,WAAA,GAAAG,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,aAAAC,WAAA,YAAAC,EAAAZ,EAAAA,QAAAC,KAAA,MAAAC,SAAA,iCAAAC,MAAA,EAAAC,KAAA,uBAAAC,WAAA,CAAAQ,SAAA,mBAAAN,QAAA,oBAAAC,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,UAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,SAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,WAAAC,WAAA,MAAAP,KAAA,YAAAC,WAAA,CAAAE,QAAA,oBAAAC,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,UAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,SAAAC,WAAA,MAAAP,KAAA,aAAAC,WAAA,CAAAQ,SAAA,oBAAAL,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,SAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,WAAAC,WAAA,MAAAP,KAAA,GAAAC,WAAA,GAAAG,SAAA,GAAAC,MAAA,EAAAC,KAAA,IAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,OAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,MAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,YAAAC,WAAA,IAAAD,KAAA,IAAAC,WAAA,IAAAD,KAAA,SAAAC,WAAA,YA4BA,SAASG,GAAgB,OAACC,EAAM,YAAEC,IAChC,OACEC,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,OAAKC,UAAU,OACbD,EAAAA,cAACE,EAAmB,CAACJ,OAAQA,EAAQC,YAAaA,IAClDC,EAAAA,cAACG,EAAkB,CAACL,OAAQA,KAE9BE,EAAAA,cAAA,OAAKC,UAAU,OACbD,EAAAA,cAACI,EAAoB,CAACN,OAAQA,KAItC,CAYA,SAASK,GAAmB,OAACL,IAC3B,MAAOO,EAAcC,IAAmBC,EAAAA,EAAAA,UAAS,OAC1CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,GAEjCG,GAAkBC,EAAAA,EAAAA,cAAYC,UAClC,IAAIC,EACJ,IACEA,QAAYC,EAAAA,YAAYC,IAAIjC,EAA+B,OAAXgB,EAAkB,CAACR,QAASQ,GAAU,CAAC,GACzF,CAAE,MAAOkB,GAEP,YADAC,EAAAA,EAAAA,kBAAiBD,EAEnB,CACAV,EAAgBO,EAAIpB,MACpBgB,GAAW,EAAM,GAChB,CAACX,KAEJoB,EAAAA,EAAAA,YAAU,KACRR,GAAiB,GAChB,CAACA,IAWJ,OACEV,EAAAA,cAAA,OAAKC,UAAU,iBACbD,EAAAA,cAAA,OAAKC,UAAU,yBACbD,EAAAA,cAAA,OAAKC,UAAU,gBACbD,EAAAA,cAAA,OAAKC,UAAU,eACbD,EAAAA,cAACmB,EAAAA,UAAS,KAAC,yBAGfnB,EAAAA,cAAA,OAAKC,UAAU,iBACZO,EACCR,EAAAA,cAACoB,EAAAA,EAAM,CAACC,QAAM,EAACC,QAAM,EAACrB,UAAU,4DACb,OAAjBI,GAAyBkB,OAAOC,KAAKnB,GAAcoB,OAAS,EAC9DzB,EAAAA,cAAC0B,EAAAA,EAAI,CAACC,QAAM,EAAC1B,UAAU,yDACpBsB,OAAOK,OAAOvB,GAAcwB,KAAIC,GAC/B9B,EAAAA,cAAC0B,EAAAA,EAAKK,KAAI,CAACC,IAAKF,EAAIG,GAAIhC,UAAU,yDAChCD,EAAAA,cAAC0B,EAAAA,EAAKQ,QAAO,KACXlC,EAAAA,cAAA,OAAKC,UAAU,0DACbD,EAAAA,cAAA,WACEA,EAAAA,cAAA,KAAGmC,KAAML,EAAIM,IAAKC,OAAO,SAASC,IAAI,uBACnCR,EAAIS,OAEPvC,EAAAA,cAAA,WACAA,EAAAA,cAACwC,EAAAA,mBAAkB,KACjBxC,EAAAA,cAAA,QAAMC,UAAU,uDACb6B,EAAIW,aAAaC,MAAM,GAAI,GAAGC,KAAK,UAI1C3C,EAAAA,cAAC4C,EAAAA,EAAK,CACJC,QACE7C,EAAAA,cAAC8C,EAAAA,EAAI,CACH7C,UAAU,6DACV8C,KAAK,QACLC,QAASA,IA1CTpC,WACxB,UACQE,EAAAA,YAAYmC,OAAOnE,EAAoB,CAACO,YAAa4C,IAC7D,CAAE,MAAOjB,GAEP,YADAC,EAAAA,EAAAA,kBAAiBD,EAEnB,CACAV,GAAgBsB,GAAUsB,IAAAA,KAAOtB,EAAQK,IAAI,EAmCNkB,CAAkBrB,EAAIG,IACrCmB,MAAI,IAGRC,QAASlC,EAAAA,UAAUmC,OAAO,yBAC1BC,SAAS,wBAQrBvD,EAAAA,cAAA,OAAKC,UAAU,gEACbD,EAAAA,cAACmB,EAAAA,UAAS,KAAC,oDAOzB,CAUA,SAASf,GAAqB,OAACN,IAC7B,MAAO0D,EAAgBC,IAAqBlD,EAAAA,EAAAA,UAAS,OAC9CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,GAEjCmD,GAAoB/C,EAAAA,EAAAA,cAAYC,UACpC,IAAIC,EACJ,IACEA,QAAYC,EAAAA,YAAYC,IAAIpB,EAA4B,OAAXG,EAAkB,CAACR,QAASQ,GAAU,CAAC,GACtF,CAAE,MAAOkB,GAEP,YADAC,EAAAA,EAAAA,kBAAiBD,EAEnB,CACAyC,EAAkB5C,EAAIpB,MACtBgB,GAAW,EAAM,GAChB,CAACX,KAEJoB,EAAAA,EAAAA,YAAU,KACRwC,GAAmB,GAClB,CAACA,IAYJ,OACE1D,EAAAA,cAAA,OAAKC,UAAU,yEACbD,EAAAA,cAAA,OAAKC,UAAU,yBACbD,EAAAA,cAAA,OAAKC,UAAU,gBACbD,EAAAA,cAAA,OAAKC,UAAU,eACbD,EAAAA,cAACmB,EAAAA,UAAS,KAAC,qBAGfnB,EAAAA,cAAA,OAAKC,UAAU,iBACZO,EACCR,EAAAA,cAACoB,EAAAA,EAAM,CAACC,QAAM,EAACC,QAAM,EAACrB,UAAU,4DACX,OAAnBuD,GAA2BjC,OAAOC,KAAKgC,GAAgB/B,OAAS,EAClEzB,EAAAA,cAAC0B,EAAAA,EAAI,CAACC,QAAM,EAAC1B,UAAU,yDACpBsB,OAAOK,OAAO4B,GACZG,MAAK,CAACC,EAAGC,IAAMC,IAAOD,EAAEE,UAAYD,IAAOF,EAAEG,YAC7ClC,KAAImC,GACHhE,EAAAA,cAAC0B,EAAAA,EAAKK,KAAI,CAACC,IAAKgC,EAAM5B,IAAKnC,UAAU,yDACnCD,EAAAA,cAAC0B,EAAAA,EAAKQ,QAAO,KACXlC,EAAAA,cAAA,OAAKC,UAAU,0DACbD,EAAAA,cAAA,QAAMC,UAAU,0DACb6D,IAAOE,EAAMD,UAAUE,OAAO,eAEjCjE,EAAAA,cAAA,QAAMC,UAAU,+DACdD,EAAAA,cAAA,KAAGmC,KAAM6B,EAAM5B,IAAKC,OAAO,SAASC,IAAI,uBACrC0B,EAAMzB,OAETvC,EAAAA,cAAA,QAAMkE,wBAAyB,CAACC,OAAQH,EAAMI,gBAC9CpE,EAAAA,cAAA,WACAA,EAAAA,cAACwC,EAAAA,mBAAkB,KACjBxC,EAAAA,cAAA,QAAMC,UAAU,uDACb+D,EAAMvB,aACLuB,EAAMvB,aAAaE,KAAK,OAExB3C,EAAAA,cAACmB,EAAAA,UAAS,KAAC,eAKnBnB,EAAAA,cAAC4C,EAAAA,EAAK,CACJC,QACE7C,EAAAA,cAAC8C,EAAAA,EAAI,CACH7C,UAAU,6DACV8C,KAAK,QACLC,QAASA,IArDTpC,WAC1B,UACQE,EAAAA,YAAYmC,OAAOtD,EAAiB,CAACC,SAAUqC,IACvD,CAAE,MAAOjB,GAEP,YADAC,EAAAA,EAAAA,kBAAiBD,EAEnB,CACAyC,GAAkB7B,GAAUsB,IAAAA,KAAOtB,EAAQK,IAAI,EA8CNoC,CAAoBL,EAAM/B,IACzCmB,MAAI,IAGRC,QAASlC,EAAAA,UAAUmC,OAAO,yBAC1BC,SAAS,wBAQvBvD,EAAAA,cAAA,OAAKC,UAAU,gEACbD,EAAAA,cAACmB,EAAAA,UAAS,KAAC,iDAOzB,CAUA,SAASjB,GAAoB,OAACJ,EAAM,YAAEC,IACpC,MAAOuE,GAAgBC,EAAiBC,GAAqBhE,IAAWiE,EAAAA,EAAAA,IAAiB3E,GAOzF,OACEE,EAAAA,cAAA,OAAKC,UAAU,iBACbD,EAAAA,cAAA,OAAKC,UAAU,yBACbD,EAAAA,cAAA,OAAKC,UAAU,gBACbD,EAAAA,cAAA,OAAKC,UAAU,eACbD,EAAAA,cAACmB,EAAAA,UAAS,KAAC,oBAGfnB,EAAAA,cAAA,OAAKC,UAAU,iBACZO,EACCR,EAAAA,cAACoB,EAAAA,EAAM,CAACC,QAAM,EAACC,QAAM,EAACrB,UAAU,4DACZ,OAAlBqE,GAA0B/C,OAAOC,KAAK8C,GAAe7C,OAAS,EAChEzB,EAAAA,cAAC0B,EAAAA,EAAI,CAACC,QAAM,EAAC1B,UAAU,yDACpBsB,OAAOK,OAAOsB,IAAAA,QAAUoB,EAAe,CAAC,UAAUzC,KAAI6C,GACrD1E,EAAAA,cAAC0B,EAAAA,EAAKK,KAAI,CAACC,IAAK0C,EAAKC,WAAY1E,UAAU,yDACzCD,EAAAA,cAAA,OAAKC,UAAU,0DACbD,EAAAA,cAAA,WACEA,EAAAA,cAAA,YAAO0E,EAAK3B,MACZ/C,EAAAA,cAAA,WACAA,EAAAA,cAACwC,EAAAA,mBAAkB,KACjBxC,EAAAA,cAAA,QAAMC,UAAU,uDAAUyE,EAAKE,UAGnC5E,EAAAA,cAAC4C,EAAAA,EAAK,CACJC,QACE7C,EAAAA,cAAC8C,EAAAA,EAAI,CACH7C,UAAU,6DACV8C,KAAK,QACLC,QAASA,IAAMwB,EAAmBE,EAAKC,YACvCvB,MAAI,IAGRC,QAASlC,EAAAA,UAAUmC,OAAO,yBAC1BC,SAAS,uBAOnBvD,EAAAA,cAAA,OAAKC,UAAU,gEACbD,EAAAA,cAACmB,EAAAA,UAAS,KAAC,gDAKlBpB,GACCC,EAAAA,cAAC6E,EAAAA,WAAU,CACTC,SAAUvD,OAAOK,OAAO0C,GAAezC,KAAIkD,GAAKA,EAAEJ,aAClDK,WAAYC,GAAKA,EAAEC,SAAQH,GAAKR,EAAgBQ,EAAEJ,cAClDQ,eAvDcC,GACpBpF,EAAAA,cAACqF,EAAAA,GAAMC,EAAAA,EAAAA,GAAA,GAAKF,EAAY,CAAEnF,UAAU,+DAAxBmF,GAAAA,EAAYnF,WAAA,MACtBD,EAAAA,cAACmB,EAAAA,UAAS,KAAC,oBAsDPpB,YAAaA,IAKvB,CArSAwF,OAAOC,uBAAyB,SAAgC1F,GAC9D,MAAM2F,EAAYC,SAASC,eAAe,kBAC1CC,EAAAA,OACE5F,EAAAA,cAACH,EAAe,CAACC,OAAQA,EAAQC,YAAa0F,EAAUI,QAAQ9F,aAAe,OAC/E0F,EAEJ,EAgBA5F,EAAgBiG,UAAY,CAC1BhG,OAAQiG,IAAAA,OACRhG,YAAagG,IAAAA,QAGflG,EAAgBmG,aAAe,CAC7BlG,OAAQ,KACRC,YAAa,MAwFfI,EAAmB2F,UAAY,CAC7BhG,OAAQiG,IAAAA,QAGV5F,EAAmB6F,aAAe,CAChClG,OAAQ,MAmGVM,EAAqB0F,UAAY,CAC/BhG,OAAQiG,IAAAA,QAGV3F,EAAqB4F,aAAe,CAClClG,OAAQ,MAqEVI,EAAoB4F,UAAY,CAC9BhG,OAAQiG,IAAAA,OACRhG,YAAagG,IAAAA,QAGf7F,EAAoB8F,aAAe,CACjClG,OAAQ,KACRC,YAAa,K","sources":["webpack:///indico/modules/users/client/js/Favorites.module.scss?54d2","webpack:///indico/modules/users/client/js/Favorites.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"submit-button\":\"users-client-js-___Favorites-module__submit-button___AeA4z\",\"fav-list\":\"users-client-js-___Favorites-module__fav-list___KFdnj\",\"fav-item\":\"users-client-js-___Favorites-module__fav-item___FxbQW\",\"list-flex\":\"users-client-js-___Favorites-module__list-flex___Pvha0\",\"detail\":\"users-client-js-___Favorites-module__detail___IlIkm\",\"delete-button\":\"users-client-js-___Favorites-module__delete-button___wFq64\",\"empty-favorites\":\"users-client-js-___Favorites-module__empty-favorites___7j0mT\",\"fav-loader\":\"users-client-js-___Favorites-module__fav-loader___9Opw1\",\"favorite-event-container\":\"users-client-js-___Favorites-module__favorite-event-container___MDESj\",\"date-span\":\"users-client-js-___Favorites-module__date-span___G-Q4g\",\"event-name-box\":\"users-client-js-___Favorites-module__event-name-box___siq9D\"};","// This file is part of Indico.\n// Copyright (C) 2002 - 2025 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport categoryFavoriteURL from 'indico-url:users.user_favorites_category_api';\nimport eventFavoriteURL from 'indico-url:users.user_favorites_event_api';\n\nimport _ from 'lodash';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, {useEffect, useState, useCallback} from 'react';\nimport ReactDOM from 'react-dom';\nimport {Button, Icon, List, Loader, Popup} from 'semantic-ui-react';\n\nimport {TooltipIfTruncated} from 'indico/react/components';\nimport {UserSearch} from 'indico/react/components/principals/Search';\nimport {useFavoriteUsers} from 'indico/react/hooks';\nimport {Translate} from 'indico/react/i18n';\nimport {indicoAxios, handleAxiosError} from 'indico/utils/axios';\n\nimport './Favorites.module.scss';\n\nwindow.setupFavoriteSelection = function setupFavoriteSelection(userId) {\n  const container = document.getElementById('user-favorites');\n  ReactDOM.render(\n    <FavoriteManager userId={userId} searchToken={container.dataset.searchToken || null} />,\n    container\n  );\n};\n\nfunction FavoriteManager({userId, searchToken}) {\n  return (\n    <>\n      <div className=\"row\">\n        <FavoriteUserManager userId={userId} searchToken={searchToken} />\n        <FavoriteCatManager userId={userId} />\n      </div>\n      <div className=\"row\">\n        <FavoriteEventManager userId={userId} />\n      </div>\n    </>\n  );\n}\n\nFavoriteManager.propTypes = {\n  userId: PropTypes.number,\n  searchToken: PropTypes.string,\n};\n\nFavoriteManager.defaultProps = {\n  userId: null,\n  searchToken: null,\n};\n\nfunction FavoriteCatManager({userId}) {\n  const [favoriteCats, setFavoriteCats] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getFavoriteCats = useCallback(async () => {\n    let res;\n    try {\n      res = await indicoAxios.get(categoryFavoriteURL(userId !== null ? {user_id: userId} : {}));\n    } catch (error) {\n      handleAxiosError(error);\n      return;\n    }\n    setFavoriteCats(res.data);\n    setLoading(false);\n  }, [userId]);\n\n  useEffect(() => {\n    getFavoriteCats();\n  }, [getFavoriteCats]);\n\n  const deleteFavoriteCat = async id => {\n    try {\n      await indicoAxios.delete(categoryFavoriteURL({category_id: id}));\n    } catch (error) {\n      handleAxiosError(error);\n      return;\n    }\n    setFavoriteCats(values => _.omit(values, id));\n  };\n  return (\n    <div className=\"column col-50\">\n      <div className=\"i-box just-group-list\">\n        <div className=\"i-box-header\">\n          <div className=\"i-box-title\">\n            <Translate>Favorite Categories</Translate>\n          </div>\n        </div>\n        <div className=\"i-box-content\">\n          {loading ? (\n            <Loader active inline styleName=\"fav-loader\" />\n          ) : favoriteCats !== null && Object.keys(favoriteCats).length > 0 ? (\n            <List celled styleName=\"fav-list\">\n              {Object.values(favoriteCats).map(cat => (\n                <List.Item key={cat.id} styleName=\"fav-item\">\n                  <List.Content>\n                    <div styleName=\"list-flex\">\n                      <div>\n                        <a href={cat.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {cat.title}\n                        </a>\n                        <br />\n                        <TooltipIfTruncated>\n                          <span styleName=\"detail\">\n                            {cat.chain_titles.slice(0, -1).join(' » ')}\n                          </span>\n                        </TooltipIfTruncated>\n                      </div>\n                      <Popup\n                        trigger={\n                          <Icon\n                            styleName=\"delete-button\"\n                            name=\"close\"\n                            onClick={() => deleteFavoriteCat(cat.id)}\n                            link\n                          />\n                        }\n                        content={Translate.string('Remove from favorites')}\n                        position=\"bottom center\"\n                      />\n                    </div>\n                  </List.Content>\n                </List.Item>\n              ))}\n            </List>\n          ) : (\n            <div styleName=\"empty-favorites\">\n              <Translate>You have not marked any category as favorite.</Translate>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nFavoriteCatManager.propTypes = {\n  userId: PropTypes.number,\n};\n\nFavoriteCatManager.defaultProps = {\n  userId: null,\n};\n\nfunction FavoriteEventManager({userId}) {\n  const [favoriteEvents, setFavoriteEvents] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getFavoriteEvents = useCallback(async () => {\n    let res;\n    try {\n      res = await indicoAxios.get(eventFavoriteURL(userId !== null ? {user_id: userId} : {}));\n    } catch (error) {\n      handleAxiosError(error);\n      return;\n    }\n    setFavoriteEvents(res.data);\n    setLoading(false);\n  }, [userId]);\n\n  useEffect(() => {\n    getFavoriteEvents();\n  }, [getFavoriteEvents]);\n\n  const deleteFavoriteEvent = async id => {\n    try {\n      await indicoAxios.delete(eventFavoriteURL({event_id: id}));\n    } catch (error) {\n      handleAxiosError(error);\n      return;\n    }\n    setFavoriteEvents(values => _.omit(values, id));\n  };\n\n  return (\n    <div styleName=\"favorite-event-container\">\n      <div className=\"i-box just-group-list\">\n        <div className=\"i-box-header\">\n          <div className=\"i-box-title\">\n            <Translate>Favorite Events</Translate>\n          </div>\n        </div>\n        <div className=\"i-box-content\">\n          {loading ? (\n            <Loader active inline styleName=\"fav-loader\" />\n          ) : favoriteEvents !== null && Object.keys(favoriteEvents).length > 0 ? (\n            <List celled styleName=\"fav-list\">\n              {Object.values(favoriteEvents)\n                .sort((a, b) => moment(b.start_dt) - moment(a.start_dt))\n                .map(event => (\n                  <List.Item key={event.url} styleName=\"fav-item\">\n                    <List.Content>\n                      <div styleName=\"list-flex\">\n                        <span styleName=\"date-span\">\n                          {moment(event.start_dt).format('D MMM YYYY')}\n                        </span>\n                        <span styleName=\"event-name-box\">\n                          <a href={event.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                            {event.title}\n                          </a>\n                          <span dangerouslySetInnerHTML={{__html: event.label_markup}} />\n                          <br />\n                          <TooltipIfTruncated>\n                            <span styleName=\"detail\">\n                              {event.chain_titles ? (\n                                event.chain_titles.join(' » ')\n                              ) : (\n                                <Translate>Unlisted</Translate>\n                              )}\n                            </span>\n                          </TooltipIfTruncated>\n                        </span>\n                        <Popup\n                          trigger={\n                            <Icon\n                              styleName=\"delete-button\"\n                              name=\"close\"\n                              onClick={() => deleteFavoriteEvent(event.id)}\n                              link\n                            />\n                          }\n                          content={Translate.string('Remove from favorites')}\n                          position=\"bottom center\"\n                        />\n                      </div>\n                    </List.Content>\n                  </List.Item>\n                ))}\n            </List>\n          ) : (\n            <div styleName=\"empty-favorites\">\n              <Translate>You have not marked any event as favorite.</Translate>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nFavoriteEventManager.propTypes = {\n  userId: PropTypes.number,\n};\n\nFavoriteEventManager.defaultProps = {\n  userId: null,\n};\n\nfunction FavoriteUserManager({userId, searchToken}) {\n  const [favoriteUsers, [addFavoriteUser, deleteFavoriteUser], loading] = useFavoriteUsers(userId);\n\n  const searchTrigger = triggerProps => (\n    <Button {...triggerProps} styleName=\"submit-button\">\n      <Translate>Add Indico user</Translate>\n    </Button>\n  );\n  return (\n    <div className=\"column col-50\">\n      <div className=\"i-box just-group-list\">\n        <div className=\"i-box-header\">\n          <div className=\"i-box-title\">\n            <Translate>Favorite Users</Translate>\n          </div>\n        </div>\n        <div className=\"i-box-content\">\n          {loading ? (\n            <Loader active inline styleName=\"fav-loader\" />\n          ) : favoriteUsers !== null && Object.keys(favoriteUsers).length > 0 ? (\n            <List celled styleName=\"fav-list\">\n              {Object.values(_.orderBy(favoriteUsers, ['name'])).map(user => (\n                <List.Item key={user.identifier} styleName=\"fav-item\">\n                  <div styleName=\"list-flex\">\n                    <div>\n                      <span>{user.name}</span>\n                      <br />\n                      <TooltipIfTruncated>\n                        <span styleName=\"detail\">{user.detail}</span>\n                      </TooltipIfTruncated>\n                    </div>\n                    <Popup\n                      trigger={\n                        <Icon\n                          styleName=\"delete-button\"\n                          name=\"close\"\n                          onClick={() => deleteFavoriteUser(user.identifier)}\n                          link\n                        />\n                      }\n                      content={Translate.string('Remove from favorites')}\n                      position=\"bottom center\"\n                    />\n                  </div>\n                </List.Item>\n              ))}\n            </List>\n          ) : (\n            <div styleName=\"empty-favorites\">\n              <Translate>You have not marked any user as favorite.</Translate>\n            </div>\n          )}\n        </div>\n      </div>\n      {searchToken && (\n        <UserSearch\n          existing={Object.values(favoriteUsers).map(u => u.identifier)}\n          onAddItems={e => e.forEach(u => addFavoriteUser(u.identifier))}\n          triggerFactory={searchTrigger}\n          searchToken={searchToken}\n        />\n      )}\n    </div>\n  );\n}\n\nFavoriteUserManager.propTypes = {\n  userId: PropTypes.number,\n  searchToken: PropTypes.string,\n};\n\nFavoriteUserManager.defaultProps = {\n  userId: null,\n  searchToken: null,\n};\n"],"names":["categoryFavoriteURL","_buildFlaskURL","bind","endpoint","rules","args","converters","category_id","user_id","defaults","trace","data","isDynamic","eventFavoriteURL","event_id","FavoriteManager","userId","searchToken","React","className","FavoriteUserManager","FavoriteCatManager","FavoriteEventManager","favoriteCats","setFavoriteCats","useState","loading","setLoading","getFavoriteCats","useCallback","async","res","indicoAxios","get","error","handleAxiosError","useEffect","Translate","Loader","active","inline","Object","keys","length","List","celled","values","map","cat","Item","key","id","Content","href","url","target","rel","title","TooltipIfTruncated","chain_titles","slice","join","Popup","trigger","Icon","name","onClick","delete","_","deleteFavoriteCat","link","content","string","position","favoriteEvents","setFavoriteEvents","getFavoriteEvents","sort","a","b","moment","start_dt","event","format","dangerouslySetInnerHTML","__html","label_markup","deleteFavoriteEvent","favoriteUsers","addFavoriteUser","deleteFavoriteUser","useFavoriteUsers","user","identifier","detail","UserSearch","existing","u","onAddItems","e","forEach","triggerFactory","triggerProps","Button","_extends","window","setupFavoriteSelection","container","document","getElementById","ReactDOM","dataset","propTypes","PropTypes","defaultProps"],"sourceRoot":""}