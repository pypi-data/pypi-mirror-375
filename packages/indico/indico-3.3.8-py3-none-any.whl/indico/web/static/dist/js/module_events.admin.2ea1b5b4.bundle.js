"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6642],{29207:(e,n,t)=>{var r=t(29079),a=t(86326),l=t(35623),s=t(23507),i=t(29481),u=t(77940),o=t(97598),c=t.n(o),m=t(6423),d=t(87597),g=t(57427),p=t(53225),E=t(56237),h=t(46145),A=t(96478),y=t(49528);const f={regex:c().string.isRequired,url:c().string.isRequired},C=r.default.bind(null,{endpoint:"events.autolinker_config",rules:[{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"admin",isDynamic:!1},{data:"/",isDynamic:!1},{data:"autolinker",isDynamic:!1},{data:"/",isDynamic:!1},{data:"config",isDynamic:!1}]}]},"/");function k({regex:e,url:n,onChange:t}){function r(r,a){const l={regex:e,url:n};l[r]=a,t(l)}return a.createElement(a.Fragment,null,a.createElement(m.A.Input,{fluid:!0,placeholder:A.Translate.string("Regex Pattern"),value:e,onChange:(e,{value:n})=>r("regex",n)}),a.createElement(m.A.Input,{fluid:!0,placeholder:A.Translate.string("URL with placeholder(s)"),value:n,onChange:(e,{value:n})=>r("url",n)}))}function v({rules:e,onChange:n}){const[t,r]=(0,a.useState)({regex:"",url:""}),[l,s]=(0,a.useState)(null);return a.createElement(a.Fragment,null,l?a.createElement(d.A,{error:!0},l):null,a.createElement(g.A,{className:"events-client-js-components-___AutoLinkerConfig-module__list-segment___Jnra3"},a.createElement(p.A,{divided:!0,relaxed:!0},e.map((({regex:t,url:l},i)=>{const u=encodeURIComponent(l.replace(/\{(\d+)\}/g,"\\$1")),o=encodeURIComponent(t.replace(/"/g,'\\"'));return a.createElement(p.A.Item,{key:t},a.createElement(p.A.Content,{floated:"right"},a.createElement(E.A,{basic:!0,icon:"share",as:"a",target:"_blank",title:A.Translate.string("Analyze on regex101.com"),href:`https://regex101.com/?flavor=python&regex=${o}&subst=${u}&flags=g`,rel:"noreferrer"}),a.createElement(E.A,{icon:"trash alternate outline",color:"red",title:A.Translate.string("Delete entry"),onClick:()=>{s(null),(async t=>{try{const a=[...e],[l]=a.splice(t,1);await y.indicoAxios.post(C(),{rules:a}),n(a),r(l)}catch(e){(0,y.handleAxiosError)(e)}})(i)}})),a.createElement(p.A.Content,null,a.createElement(p.A.Header,null,t),l))}))),a.createElement(m.A,null,a.createElement(m.A.Group,{widths:"equal",className:"events-client-js-components-___AutoLinkerConfig-module__rule-editor-row___0I6rn"},a.createElement(k,(0,u.A)({},t,{onChange:r})),a.createElement(E.A,{icon:"plus",title:A.Translate.string("Add entry"),onClick:()=>{s(null),(async()=>{try{const a=[...e,t];await y.indicoAxios.post(C(),{rules:a}),n(a),r({regex:"",url:""})}catch(e){s(e?.response?.data?.error?.message?e.response.data.error.message:(0,h.handleSubmissionError)(e).rules)}})()},primary:!0})))))}k.propTypes={regex:c().string.isRequired,url:c().string.isRequired,onChange:c().func.isRequired},v.propTypes={rules:c().arrayOf(c().shape(f)).isRequired,onChange:c().func.isRequired};var _=t(47279),x=t(52379),w=t(94900);function T({rules:e}){const[n,t]=(0,a.useState)("");return a.createElement(g.A,null,a.createElement("h2",null,a.createElement(_.A,{name:"car"}),a.createElement(A.Translate,null,"Test drive")),a.createElement("p",null,a.createElement(A.Translate,null,"You can write some markdown below and see how the above rules are applied")),a.createElement(m.A,null,a.createElement(x.A,{columns:2},a.createElement(x.A.Column,null,a.createElement(m.A.TextArea,{placeholder:A.Translate.string("Write some Markdown here..."),value:n,onChange:(e,{value:n})=>(e=>{t(e)})(n)})),a.createElement(x.A.Column,null,n?a.createElement(g.A,null,a.createElement(w.Markdown,{targetBlank:!0,remarkPlugins:[[w.AutoLinkerPlugin,{rules:e}]]},n)):null))))}T.propTypes={rules:c().arrayOf(c().shape(f)).isRequired};const D=r.default.bind(null,{endpoint:"events.autolinker_rules",rules:[{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"autolinker-rules",isDynamic:!1}]}]},"/");function b(){const[e,n]=(0,a.useState)(null),{data:t,loading:r}=(0,i.Ku)(D(),{camelize:!0}),l=e||t?.rules;return r?a.createElement(s.A,null):a.createElement(a.Fragment,null,a.createElement(v,{rules:l,onChange:n}),a.createElement(T,{rules:l}))}window.setupAutoLinkerConfig=e=>{const n=document.getElementById(e);n&&l.render(a.createElement(b,null),n)}}},e=>{e.O(0,[4644,4394,2076],(()=>{return n=29207,e(e.s=n);var n}));e.O()}]);
//# sourceMappingURL=module_events.admin.2ea1b5b4.bundle.js.map