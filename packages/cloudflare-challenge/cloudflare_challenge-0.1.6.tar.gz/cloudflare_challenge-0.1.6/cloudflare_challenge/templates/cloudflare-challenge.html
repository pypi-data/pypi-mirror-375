{% extends cf_main_template %}

{% block content %}

<div style="display:grid; width:100%; height:95vh;">
    <iframe id="challenge-iframe-768901" src="{{challenge}}" style="width:100%; height:100%; border:none;"></iframe>
</div>

<script>
    (function () {
        function has_result(document) {
            return document.getElementById('{{challenge_id}}') != null
        }
        function setup() {
            function onload() {
                const doc = ifrm.contentWindow?.document
                if (doc) {
                    if (has_result(doc)) {
                        ifrm.removeEventListener('load', onload)
                        window.location.href = '{{redirect_to}}'
                    }
                }
            }
            const ifrm = document.getElementById('challenge-iframe-768901')
            if (ifrm)
                ifrm.addEventListener('load', onload)
        }

        setup()
        // setTimeout(setup,0)
    })();
</script>
{% endblock content %}
