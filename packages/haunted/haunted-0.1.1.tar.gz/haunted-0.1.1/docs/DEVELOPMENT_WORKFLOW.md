# 新開發週期工作流程

## 概述

這個新的開發週期取代了傳統的 TDD（測試驅動開發）方法論，採用更靈活的實作優先方式，通過多層次測試驗證來確保程式碼品質和系統整合。

## 工作流程階段

### 1. 計劃階段 (Plan)
- 分析需求和問題定義
- 設計解決方案架構
- 確定實作範圍和邊界
- 識別潛在風險和依賴項
- 制定實作策略

### 2. 實作階段 (Implement)
- 根據計劃編寫程式碼
- 專注於核心功能實現
- 遵循現有程式碼慣例和模式
- 確保程式碼可讀性和維護性

### 3. 單元測試驗證 (Unit Testing)
**目標**: 驗證實作本身是否符合預期

- 為新實作的功能撰寫單元測試
- 測試個別函數、方法和組件的行為
- 驗證邊界條件和錯誤處理
- 確保程式碼邏輯正確性

**測試通過條件**: 所有單元測試必須通過

### 4. 問題修復 (Fix Issues)
- 如果單元測試失敗，診斷和修復問題
- 重新執行測試直到全部通過
- 重構程式碼以提高品質（保持測試通過）

### 5. 整合測試驗證 (Integration Testing)
**目標**: 驗證新實作在系統中正常運作並符合原始問題需求

- 撰寫整合測試驗證系統整合
- 測試與現有系統的互動
- 驗證端到端工作流程
- 確認解決了原始問題

### 6. 診斷與記錄 (Diagnose & Document)
**如果整合測試失敗**:

- 診斷失敗原因
- 記錄問題和發現
- 分析根本原因
- 建立問題報告

**記錄內容包括**:
- 失敗的測試案例
- 錯誤訊息和堆疊追蹤
- 預期行為與實際行為對比
- 可能的解決方向
- 系統影響分析

### 7. 回到計劃階段 (Back to Plan)
- 帶著診斷記錄回到計劃階段
- 基於新發現重新評估解決方案
- 調整實作策略
- 更新計劃並重新開始週期

### 8. 完成 (Done)
- 所有測試通過（單元測試 + 整合測試）
- 功能符合原始需求
- 程式碼品質達標
- 文檔更新完成

## 工作流程圖

```
[計劃] → [實作] → [單元測試]
   ↑                    ↓
   |              [修復問題] ←────┐
   |                    ↓        │
   |              [整合測試]      │
   |                    ↓        │
   |    ┌─────── [測試失敗?] ─────┘
   |    │              ↓
   |    │           [完成]
   |    ↓
   └── [診斷記錄]
```

## 核心原則

### 1. 實作優先
- 不需要預先撰寫測試
- 專注於解決問題的實際實作
- 允許創意和探索性編程

### 2. 多層次驗證
- 單元測試：驗證實作正確性
- 整合測試：驗證系統整合和需求匹配
- 雙重保障確保品質

### 3. 持續改進
- 失敗是學習機會
- 每次迭代都基於前次經驗
- 記錄和分析問題模式

### 4. 靈活調整
- 允許在發現問題時回到計劃階段
- 不強制線性進行
- 根據專案需求調整流程

## 與傳統 TDD 的差異

| 特徵 | 傳統 TDD | 新工作流程 |
|------|----------|-----------|
| 測試時機 | 實作前 | 實作後 |
| 測試層次 | 主要單元測試 | 單元 + 整合雙重測試 |
| 失敗處理 | 立即修復 | 診斷記錄後重新計劃 |
| 靈活性 | 較低 | 較高 |
| 探索性 | 受限 | 鼓勵 |

## 適用場景

- 創新功能開發
- 複雜系統整合
- 需要探索性實作的專案
- 需求不明確或可能變化的情況
- 現有程式碼基礎上的增強

## 注意事項

1. **測試覆蓋率**: 確保單元測試和整合測試都有足夠的覆蓋率
2. **文檔記錄**: 詳細記錄每次失敗和診斷結果
3. **時間管理**: 設定每個階段的時間上限，避免無限循環
4. **團隊協作**: 確保團隊成員都理解新流程
5. **工具支援**: 建立自動化測試和持續整合流程

## 成功指標

- 功能正確實現原始需求
- 所有單元測試通過
- 所有整合測試通過
- 程式碼品質符合標準
- 系統穩定性未受影響
- 開發效率提升
- 團隊滿意度提高