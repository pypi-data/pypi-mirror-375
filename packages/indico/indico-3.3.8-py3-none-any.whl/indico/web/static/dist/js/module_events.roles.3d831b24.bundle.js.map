{"version":3,"file":"js/module_events.roles.3d831b24.bundle.js","mappings":"+GAwDGA,OAJMC,eAAiB,YAxCxB,WACE,MAAMC,EAASC,EAAE,gBACjBD,EAAOE,GAAG,QAAS,mBAAmB,WACpC,MAAMC,EAAOF,EAAEG,MAAMC,QAAQ,MAAMC,KAAK,MAAMC,KAAK,UACnDJ,EAAKK,IAAI,aAAc,GAAGL,EAAK,GAAGM,kBAClCN,EAAKO,YAAY,aACnB,IAEAV,EAAOE,GAAG,sBAAsB,WAC9BD,EAAEG,MACCG,KAAK,UACLI,MAAK,WACJV,EAAEG,MAAMI,IAAI,aAAc,GAAGJ,KAAKK,iBACpC,GACJ,GACF,CA0BEG,GAxBF,WACE,MAAMC,EAAcC,SAASC,cAAc,gBAAgBC,QAAQH,YACnEZ,EAAE,gBAAgBC,GAAG,QAAS,mBAAmBe,UAC/CC,EAAIC,kBACJ,MAAMC,EAAQnB,EAAEiB,EAAIG,QACdC,QAAcC,EAAAA,EAAAA,gBAAe,CAACC,mBAAmB,EAAMX,gBACzDS,EAAMG,QACRxB,EAAEyB,KAAK,CACLC,IAAKP,EAAMQ,KAAK,QAChBC,OAAQT,EAAMQ,KAAK,UACnBA,KAAME,KAAKC,UAAU,CAACT,UACtBU,SAAU,OACVC,YAAa,mBACbC,MAAOC,gBACPC,SAAUC,SAASC,QAAQC,KAAKC,WAChCC,OAAAA,CAAQb,GACNc,WAAWtB,EAAMQ,KAAK,UAAWA,EACnC,GAEJ,GAEJ,CAIEe,EACF,C","sources":["webpack:///indico/modules/events/client/js/roles.js"],"sourcesContent":["// This file is part of Indico.\n// Copyright (C) 2002 - 2025 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* global updateHtml:false, handleAjaxError:false */\n\nimport {showUserSearch} from 'indico/react/components/principals/imperative';\n\n(function(global) {\n  function setupToggle() {\n    const $roles = $('#event-roles');\n    $roles.on('click', '.toggle-members', function() {\n      const $row = $(this).closest('tr').next('tr').find('.slide');\n      $row.css('max-height', `${$row[0].scrollHeight}px`);\n      $row.toggleClass('open close');\n    });\n\n    $roles.on('indico:htmlUpdated', function() {\n      $(this)\n        .find('.slide')\n        .each(function() {\n          $(this).css('max-height', `${this.scrollHeight}px`);\n        });\n    });\n  }\n\n  function setupButtons() {\n    const searchToken = document.querySelector('#event-roles').dataset.searchToken;\n    $('#event-roles').on('click', '.js-add-members', async evt => {\n      evt.stopPropagation();\n      const $this = $(evt.target);\n      const users = await showUserSearch({withExternalUsers: true, searchToken});\n      if (users.length) {\n        $.ajax({\n          url: $this.data('href'),\n          method: $this.data('method'),\n          data: JSON.stringify({users}),\n          dataType: 'json',\n          contentType: 'application/json',\n          error: handleAjaxError,\n          complete: IndicoUI.Dialogs.Util.progress(),\n          success(data) {\n            updateHtml($this.data('update'), data);\n          },\n        });\n      }\n    });\n  }\n\n  global.setupRolesList = function setupRolesList() {\n    setupToggle();\n    setupButtons();\n  };\n})(window);\n"],"names":["window","setupRolesList","$roles","$","on","$row","this","closest","next","find","css","scrollHeight","toggleClass","each","setupToggle","searchToken","document","querySelector","dataset","async","evt","stopPropagation","$this","target","users","showUserSearch","withExternalUsers","length","ajax","url","data","method","JSON","stringify","dataType","contentType","error","handleAjaxError","complete","IndicoUI","Dialogs","Util","progress","success","updateHtml","setupButtons"],"sourceRoot":""}