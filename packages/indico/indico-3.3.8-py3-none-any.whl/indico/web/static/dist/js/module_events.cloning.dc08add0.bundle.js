"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7109],{4019:(e,t,n)=>{var a=n(637),o=n.n(a),i=n(14867),c=n.n(i),r=n(25584);window.setupCloneDialog=function(){const e=$("#event-clone-form-container"),t=$("#event-clone-form"),n=$("#event-count").hide(),a=t.find(".event-list"),i=$("#clone-errors").hide(),s=e.data("step"),d=e.data("clonerDependencies"),l=o().debounce((o=>{const c=$(".clone-action-button"),s=$.param(t.serializeArray(),!0);(o||s!==t.data("initialData"))&&(t.data("initialData",s),t.ajaxSubmit({url:e.data("preview-url"),method:"POST",success(e){if(e.success){const t=n.find(".count-text"),o=n.find(".last-day");t.text(r.$T.ngettext("{0} new event will be created.","{0} new events will be created.",e.count).format(e.count)),i.hide(),n.show(),a.toggle(!!e.count),c.prop("disabled",!e.count),n.data("event-dates",e.dates),o.toggle(e.last_day_of_month)}else i.show().find(".message-text").html("string"==typeof(t=e.error.message)?t:$("<div>").append(t.map((e=>{const t=$("<strong>").append(e[0]),n=$("<ul>").append(e[1].map((e=>$("<li>").text(e))));return $("<div>").append(t,n)})))),n.hide();var t}}))}),300);4===s&&(t.on("change","select, input",o().partial(l,!1)),t.on("keyup","input",(e=>{e.preventDefault(),l(!1)}))),n.length&&o().defer(o().partial(l,!0)),2===s&&(t.find("#form-group-selected_items").on("change","input[type=checkbox]",(function(){const e=$(this),t=d[e.val()],n=e.closest(".form-field");e.prop("checked")?t.requires&&t.requires.forEach((e=>{n.find("[value={0}]:not(:disabled)".format(e)).prop("checked",!0)})):t.required_by&&t.required_by.forEach((e=>{n.find("[value={0}]".format(e)).prop("checked",!1)}))})),$("#form-group-selected_items input[type=checkbox]:checked").trigger("change"),$("#form-group-selected_items input[type=checkbox]:not(:checked)").trigger("change")),a.qtip({style:{classes:"cloned-event-list-qtip"},show:{event:"click"},content(){const e=$("<ul>"),t=n.data("event-dates").map((e=>$("<li>").text(c()(e.date).format("ddd L"))));return e.append(t.slice(0,20)),t.length>20&&e.append("<li>...</li>"),e}})}}},e=>{e.O(0,[2076],(()=>{return t=4019,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_events.cloning.dc08add0.bundle.js.map