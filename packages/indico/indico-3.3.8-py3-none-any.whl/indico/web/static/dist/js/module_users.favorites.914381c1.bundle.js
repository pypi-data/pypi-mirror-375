"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7671],{42478:(e,a,t)=>{var s=t(77940),i=t(29079),n=t(637),r=t.n(n),l=t(14867),c=t.n(l),m=t(97598),d=t.n(m),o=t(86326),_=t(35623),u=t(23507),v=t(53225),y=t(16520),D=t(47279),E=t(56237),f=t(85218),p=t(98132),g=t(29481),b=t(96478),j=t(49528);const h=i.default.bind(null,{endpoint:"users.user_favorites_category_api",rules:[{args:["category_id","user_id"],converters:{category_id:"IntegerConverter",user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0}]},{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1}]},{args:["category_id"],converters:{category_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"categories",isDynamic:!1}]}]},"/"),N=i.default.bind(null,{endpoint:"users.user_favorites_event_api",rules:[{args:["event_id","user_id"],converters:{event_id:"IntegerConverter",user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0}]},{args:["user_id"],converters:{user_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1}]},{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0}]},{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"user",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"favorites",isDynamic:!1},{data:"/",isDynamic:!1},{data:"events",isDynamic:!1}]}]},"/");function F({userId:e,searchToken:a}){return o.createElement(o.Fragment,null,o.createElement("div",{className:"row"},o.createElement(T,{userId:e,searchToken:a}),o.createElement(I,{userId:e})),o.createElement("div",{className:"row"},o.createElement(k,{userId:e})))}function I({userId:e}){const[a,t]=(0,o.useState)(null),[s,i]=(0,o.useState)(!0),n=(0,o.useCallback)((async()=>{let a;try{a=await j.indicoAxios.get(h(null!==e?{user_id:e}:{}))}catch(e){return void(0,j.handleAxiosError)(e)}t(a.data),i(!1)}),[e]);(0,o.useEffect)((()=>{n()}),[n]);return o.createElement("div",{className:"column col-50"},o.createElement("div",{className:"i-box just-group-list"},o.createElement("div",{className:"i-box-header"},o.createElement("div",{className:"i-box-title"},o.createElement(b.Translate,null,"Favorite Categories"))),o.createElement("div",{className:"i-box-content"},s?o.createElement(u.A,{active:!0,inline:!0,className:"users-client-js-___Favorites-module__fav-loader___9Opw1"}):null!==a&&Object.keys(a).length>0?o.createElement(v.A,{celled:!0,className:"users-client-js-___Favorites-module__fav-list___KFdnj"},Object.values(a).map((e=>o.createElement(v.A.Item,{key:e.id,className:"users-client-js-___Favorites-module__fav-item___FxbQW"},o.createElement(v.A.Content,null,o.createElement("div",{className:"users-client-js-___Favorites-module__list-flex___Pvha0"},o.createElement("div",null,o.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title),o.createElement("br",null),o.createElement(f.TooltipIfTruncated,null,o.createElement("span",{className:"users-client-js-___Favorites-module__detail___IlIkm"},e.chain_titles.slice(0,-1).join(" » ")))),o.createElement(y.A,{trigger:o.createElement(D.A,{className:"users-client-js-___Favorites-module__delete-button___wFq64",name:"close",onClick:()=>(async e=>{try{await j.indicoAxios.delete(h({category_id:e}))}catch(e){return void(0,j.handleAxiosError)(e)}t((a=>r().omit(a,e)))})(e.id),link:!0}),content:b.Translate.string("Remove from favorites"),position:"bottom center"}))))))):o.createElement("div",{className:"users-client-js-___Favorites-module__empty-favorites___7j0mT"},o.createElement(b.Translate,null,"You have not marked any category as favorite.")))))}function k({userId:e}){const[a,t]=(0,o.useState)(null),[s,i]=(0,o.useState)(!0),n=(0,o.useCallback)((async()=>{let a;try{a=await j.indicoAxios.get(N(null!==e?{user_id:e}:{}))}catch(e){return void(0,j.handleAxiosError)(e)}t(a.data),i(!1)}),[e]);(0,o.useEffect)((()=>{n()}),[n]);return o.createElement("div",{className:"users-client-js-___Favorites-module__favorite-event-container___MDESj"},o.createElement("div",{className:"i-box just-group-list"},o.createElement("div",{className:"i-box-header"},o.createElement("div",{className:"i-box-title"},o.createElement(b.Translate,null,"Favorite Events"))),o.createElement("div",{className:"i-box-content"},s?o.createElement(u.A,{active:!0,inline:!0,className:"users-client-js-___Favorites-module__fav-loader___9Opw1"}):null!==a&&Object.keys(a).length>0?o.createElement(v.A,{celled:!0,className:"users-client-js-___Favorites-module__fav-list___KFdnj"},Object.values(a).sort(((e,a)=>c()(a.start_dt)-c()(e.start_dt))).map((e=>o.createElement(v.A.Item,{key:e.url,className:"users-client-js-___Favorites-module__fav-item___FxbQW"},o.createElement(v.A.Content,null,o.createElement("div",{className:"users-client-js-___Favorites-module__list-flex___Pvha0"},o.createElement("span",{className:"users-client-js-___Favorites-module__date-span___G-Q4g"},c()(e.start_dt).format("D MMM YYYY")),o.createElement("span",{className:"users-client-js-___Favorites-module__event-name-box___siq9D"},o.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title),o.createElement("span",{dangerouslySetInnerHTML:{__html:e.label_markup}}),o.createElement("br",null),o.createElement(f.TooltipIfTruncated,null,o.createElement("span",{className:"users-client-js-___Favorites-module__detail___IlIkm"},e.chain_titles?e.chain_titles.join(" » "):o.createElement(b.Translate,null,"Unlisted")))),o.createElement(y.A,{trigger:o.createElement(D.A,{className:"users-client-js-___Favorites-module__delete-button___wFq64",name:"close",onClick:()=>(async e=>{try{await j.indicoAxios.delete(N({event_id:e}))}catch(e){return void(0,j.handleAxiosError)(e)}t((a=>r().omit(a,e)))})(e.id),link:!0}),content:b.Translate.string("Remove from favorites"),position:"bottom center"}))))))):o.createElement("div",{className:"users-client-js-___Favorites-module__empty-favorites___7j0mT"},o.createElement(b.Translate,null,"You have not marked any event as favorite.")))))}function T({userId:e,searchToken:a}){const[t,[i,n],l]=(0,g.EV)(e);return o.createElement("div",{className:"column col-50"},o.createElement("div",{className:"i-box just-group-list"},o.createElement("div",{className:"i-box-header"},o.createElement("div",{className:"i-box-title"},o.createElement(b.Translate,null,"Favorite Users"))),o.createElement("div",{className:"i-box-content"},l?o.createElement(u.A,{active:!0,inline:!0,className:"users-client-js-___Favorites-module__fav-loader___9Opw1"}):null!==t&&Object.keys(t).length>0?o.createElement(v.A,{celled:!0,className:"users-client-js-___Favorites-module__fav-list___KFdnj"},Object.values(r().orderBy(t,["name"])).map((e=>o.createElement(v.A.Item,{key:e.identifier,className:"users-client-js-___Favorites-module__fav-item___FxbQW"},o.createElement("div",{className:"users-client-js-___Favorites-module__list-flex___Pvha0"},o.createElement("div",null,o.createElement("span",null,e.name),o.createElement("br",null),o.createElement(f.TooltipIfTruncated,null,o.createElement("span",{className:"users-client-js-___Favorites-module__detail___IlIkm"},e.detail))),o.createElement(y.A,{trigger:o.createElement(D.A,{className:"users-client-js-___Favorites-module__delete-button___wFq64",name:"close",onClick:()=>n(e.identifier),link:!0}),content:b.Translate.string("Remove from favorites"),position:"bottom center"})))))):o.createElement("div",{className:"users-client-js-___Favorites-module__empty-favorites___7j0mT"},o.createElement(b.Translate,null,"You have not marked any user as favorite.")))),a&&o.createElement(p.UserSearch,{existing:Object.values(t).map((e=>e.identifier)),onAddItems:e=>e.forEach((e=>i(e.identifier))),triggerFactory:e=>o.createElement(E.A,(0,s.A)({},e,{className:"users-client-js-___Favorites-module__submit-button___AeA4z "+(e&&e.className||"")}),o.createElement(b.Translate,null,"Add Indico user")),searchToken:a}))}window.setupFavoriteSelection=function(e){const a=document.getElementById("user-favorites");_.render(o.createElement(F,{userId:e,searchToken:a.dataset.searchToken||null}),a)},F.propTypes={userId:d().number,searchToken:d().string},F.defaultProps={userId:null,searchToken:null},I.propTypes={userId:d().number},I.defaultProps={userId:null},k.propTypes={userId:d().number},k.defaultProps={userId:null},T.propTypes={userId:d().number,searchToken:d().string},T.defaultProps={userId:null,searchToken:null}}},e=>{e.O(0,[4644,4394,2076],(()=>{return a=42478,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_users.favorites.914381c1.bundle.js.map