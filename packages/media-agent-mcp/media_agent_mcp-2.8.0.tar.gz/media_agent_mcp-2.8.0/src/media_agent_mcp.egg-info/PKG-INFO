Metadata-Version: 2.4
Name: media-agent-mcp
Version: 2.8.0
Summary: A Model Context Protocol server for media processing with AI tools
Author-email: Media Agent Team <team@mediaagent.com>
Keywords: mcp,ai,media,video,image,processing
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.12
Description-Content-Type: text/markdown
Requires-Dist: httpx>=0.28.1
Requires-Dist: opencv-python>=4.12.0.88
Requires-Dist: pillow>=11.3.0
Requires-Dist: requests>=2.32.4
Requires-Dist: tos>=2.7.1
Requires-Dist: uvicorn>=0.32.1
Requires-Dist: numpy>=1.24.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: volcengine>=1.0.194
Requires-Dist: openai>=1.97.1
Requires-Dist: typing-extensions>=4.14.1
Requires-Dist: loguru>=0.7.3
Requires-Dist: imageio-ffmpeg>=0.4.0
Requires-Dist: Flask>=3.0.0
Requires-Dist: pydub>=0.25.1
Requires-Dist: gunicorn>=22.0.0
Requires-Dist: audioop-lts; python_version >= "3.13"
Requires-Dist: google-genai>=1.33.0
Requires-Dist: mcp==1.11.0
Requires-Dist: gevent>=25.8.2

# Media Agent MCP

ä¸€ä¸ªåŸºäº Model Context Protocol (MCP) çš„åª’ä½“å¤„ç†æœåŠ¡å™¨ï¼Œæä¾›å¼ºå¤§çš„AIé©±åŠ¨çš„åª’ä½“å¤„ç†å·¥å…·ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒå·¥å…· (9ä¸ª)

1. **TOSå­˜å‚¨** - å°†å†…å®¹ä¿å­˜ä¸ºURL
2. **è§†é¢‘æ‹¼æ¥** - æ‹¼æ¥å¤šä¸ªè§†é¢‘æ–‡ä»¶
3. **è§†é¢‘å¸§æå–** - æå–è§†é¢‘çš„æœ€åä¸€å¸§
4. **Seedreamå›¾åƒç”Ÿæˆ** - ä½¿ç”¨AIæ¨¡å‹ç”Ÿæˆå›¾åƒ
5. **Seedanceè§†é¢‘ç”Ÿæˆ** - ä½¿ç”¨AIæ¨¡å‹ç”Ÿæˆè§†é¢‘ï¼ˆæ”¯æŒliteå’Œproç‰ˆæœ¬ï¼‰
6. **Seededitè§’è‰²ç»´æŒ** - ä¿æŒä¸»è¦è§’è‰²çš„ä¸€è‡´æ€§
7. **Seed1.6è§†è§‰è¯­è¨€æ¨¡å‹** - æ‰§è¡Œè§†è§‰ä»»åŠ¡å·¥ä½œæµ
8. **å›¾åƒé€‰æ‹©å™¨** - ä»å¤šä¸ªå›¾åƒä¸­é€‰æ‹©æœ€ä½³çš„ä¸€ä¸ª
9. **è§†é¢‘é€‰æ‹©å™¨** - ä»å¤šä¸ªè§†é¢‘ä¸­é€‰æ‹©æœ€ä½³çš„ä¸€ä¸ª

### AIæ¨¡å‹æ”¯æŒ

- **Seedream**: é«˜è´¨é‡å›¾åƒç”Ÿæˆ
- **Seedance**: è§†é¢‘ç”Ÿæˆï¼ˆæ”¯æŒæ–‡æœ¬ç”Ÿæˆè§†é¢‘ã€é¦–å¸§ç”Ÿæˆè§†é¢‘ã€é¦–å°¾å¸§ç”Ÿæˆè§†é¢‘ï¼‰
- **Seededit**: å›¾åƒç¼–è¾‘å’Œè§’è‰²ä¸€è‡´æ€§ç»´æŠ¤
- **Seed1.6**: å¤šæ¨¡æ€è§†è§‰è¯­è¨€ç†è§£

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Python >= 3.12
- æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼šmacOS, Linux, Windows

## ğŸ› ï¸ å®‰è£…

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ UVXï¼ˆæ¨èï¼‰

```bash
uvx media-agent-mcp
```

### æ–¹æ³•äºŒï¼šæœ¬åœ°å¼€å‘å®‰è£…

#### 1. å…‹éš†ä»“åº“

```bash
git clone <repository-url>
cd media-agent-mcp
```

#### 2. å®‰è£…ä¾èµ–

ä½¿ç”¨ uvï¼ˆæ¨èï¼‰ï¼š

```bash
uv sync
```

æˆ–ä½¿ç”¨ pipï¼š

```bash
pip install -e .
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶å¡«å†™é…ç½®ï¼š

```bash
cp .env.template .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å†™ä»¥ä¸‹å¿…è¦é…ç½®ï¼š

```env
# TOSå­˜å‚¨é…ç½®
TOS_ACCESS_KEY=your_tos_access_key_here
TOS_SECRET_KEY=your_tos_secret_key_here
TOS_BUCKET_NAME=your_bucket_name_here
TOS_ENDPOINT=tos-ap-southeast-1.bytepluses.com
TOS_REGION=ap-southeast-1

# ç«å±±å¼•æ“è§†è§‰æ™ºèƒ½SDKé…ç½®
VOLC_ACCESS_KEY=your_volcengine_access_key_here
VOLC_SECRET_KEY=your_volcengine_secret_key_here

# BytePlus ModelArk APIé…ç½®
ARK_API_KEY=your_ark_api_key_here
ARK_BASE_URL=https://ark.ap-southeast.bytepluses.com

# AIæ¨¡å‹ç«¯ç‚¹é…ç½®
SEEDANCE_EP=seedance-1-0-lite
SEEDREAM_EP=seedream-1-0
SEEDEDIT_EP=seededit-3-0
VLM_EP=seed-1-6-chat
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨MCPæœåŠ¡å™¨

#### ä½¿ç”¨ UVX

```bash
uvx media-agent-mcp
```

#### ä½¿ç”¨ UVï¼ˆæœ¬åœ°å¼€å‘ï¼‰

```bash
uv run media-agent-mcp
```

#### ä½¿ç”¨stdioä¼ è¾“ï¼ˆé»˜è®¤ï¼‰

```bash
media-agent-mcp
```

#### ä½¿ç”¨SSEä¼ è¾“

```bash
media-agent-mcp --transport sse --host 127.0.0.1 --port 8000
```

#### ç›´æ¥è¿è¡ŒæœåŠ¡å™¨æ–‡ä»¶

```bash
cd src
python -m media_agent_mcp.server
```

### å‘½ä»¤è¡Œé€‰é¡¹

```bash
media-agent-mcp --help
```

å¯ç”¨é€‰é¡¹ï¼š
- `--transport`: ä¼ è¾“æ–¹å¼ (sse æˆ– stdioï¼Œé»˜è®¤: stdio)
- `--host`: SSEä¼ è¾“çš„ä¸»æœºåœ°å€ (é»˜è®¤: 127.0.0.1)
- `--port`: SSEä¼ è¾“çš„ç«¯å£ (é»˜è®¤: 8000)
- `--version`: æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

### ä¸MCPå®¢æˆ·ç«¯é›†æˆ

#### Claude Desktopé…ç½®

åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "media-agent": {
      "command": "uvx",
      "args": ["media-agent-mcp"]
    }
  }
}
```

#### VS Code MCPæ‰©å±•é…ç½®

```json
{
  "mcp.servers": {
    "media-agent": {
      "command": "uvx",
      "args": ["media-agent-mcp"]
    }
  }
}
```

## ğŸ”§ APIå·¥å…·è¯¦ç»†è¯´æ˜

### 1. è§†é¢‘æ‹¼æ¥å·¥å…·

```python
video_concat_tool(video_urls: list[str]) -> str
```

æ‹¼æ¥å¤šä¸ªè§†é¢‘URLå¹¶ä¸Šä¼ åˆ°TOSã€‚

**å‚æ•°ï¼š**
- `video_urls`: è¦æŒ‰é¡ºåºæ‹¼æ¥çš„è§†é¢‘URLåˆ—è¡¨

**è¿”å›ï¼š** JSONå­—ç¬¦ä¸²ï¼ŒåŒ…å«çŠ¶æ€ã€æ•°æ®å’Œæ¶ˆæ¯

**ç¤ºä¾‹ï¼š**
```python
result = video_concat_tool([
    "https://example.com/video1.mp4",
    "https://example.com/video2.mp4"
])
```

### 2. è§†é¢‘å¸§æå–å·¥å…·

```python
video_last_frame_tool(video_path: str) -> str
```

ä»è§†é¢‘æ–‡ä»¶ä¸­æå–æœ€åä¸€å¸§å¹¶ä¸Šä¼ åˆ°TOSã€‚

**å‚æ•°ï¼š**
- `video_path`: è§†é¢‘æ–‡ä»¶è·¯å¾„æˆ–URL

**è¿”å›ï¼š** JSONå­—ç¬¦ä¸²ï¼ŒåŒ…å«çŠ¶æ€ã€æ•°æ®å’Œæ¶ˆæ¯

### 3. Seedreamå›¾åƒç”Ÿæˆå·¥å…·

```python
seedream_generate_image_tool(
    prompt: str, 
    style: str = "realistic", 
    size: str = "1024x1024"
) -> str
```

ä½¿ç”¨Seedream AIæ¨¡å‹ç”Ÿæˆå›¾åƒã€‚

**å‚æ•°ï¼š**
- `prompt`: å›¾åƒæè¿°æ–‡æœ¬
- `style`: å›¾åƒé£æ ¼ï¼ˆrealistic, artistic, cartoonç­‰ï¼‰
- `size`: å›¾åƒå°ºå¯¸ï¼ˆå¦‚"1024x1024"ï¼‰

**ç¤ºä¾‹ï¼š**
```python
result = seedream_generate_image_tool(
    prompt="ä¸€åªå¯çˆ±çš„å°çŒ«ååœ¨èŠ±å›­é‡Œ",
    style="realistic",
    size="1024x1024"
)
```

### 4. Seedanceè§†é¢‘ç”Ÿæˆå·¥å…·

```python
seedance_generate_video_tool(
    prompt: str = "", 
    first_frame_image: str = None,
    last_frame_image: str = None, 
    duration: int = 5,
    resolution: str = "720p", 
    ratio: str = "16:9"
) -> str
```

ä½¿ç”¨Seedance AIæ¨¡å‹ç”Ÿæˆè§†é¢‘ã€‚

**å‚æ•°ï¼š**
- `prompt`: è§†é¢‘æè¿°æ–‡æœ¬ï¼ˆå›¾åƒè½¬è§†é¢‘æ—¶å¯é€‰ï¼‰
- `first_frame_image`: é¦–å¸§å›¾åƒçš„URLæˆ–base64
- `last_frame_image`: å°¾å¸§å›¾åƒçš„URLæˆ–base64ï¼ˆå¯é€‰ï¼‰
- `duration`: è§†é¢‘æ—¶é•¿ï¼ˆ5æˆ–10ç§’ï¼‰
- `resolution`: è§†é¢‘åˆ†è¾¨ç‡ï¼ˆ480p, 720p, 1080pï¼‰
- `ratio`: å®½é«˜æ¯”ï¼ˆ16:9, 4:3, 1:1, 3:4, 9:16, adaptiveç­‰ï¼‰

**ç¤ºä¾‹ï¼š**
```python
# æ–‡æœ¬ç”Ÿæˆè§†é¢‘
result = seedance_generate_video_tool(
    prompt="ä¸€åªé¸Ÿåœ¨å¤©ç©ºä¸­é£ç¿”",
    duration=5,
    resolution="720p"
)

# é¦–å¸§ç”Ÿæˆè§†é¢‘
result = seedance_generate_video_tool(
    first_frame_image="https://example.com/first_frame.jpg",
    duration=5
)
```

### 5. å…¶ä»–å·¥å…·

- **Seededitè§’è‰²ç»´æŒå·¥å…·**: ä¿æŒå›¾åƒä¸­ä¸»è¦è§’è‰²çš„ä¸€è‡´æ€§
- **Seed1.6 VLMå·¥å…·**: æ‰§è¡Œè§†è§‰è¯­è¨€ä»»åŠ¡
- **å›¾åƒé€‰æ‹©å™¨**: ä»å¤šä¸ªå›¾åƒä¸­é€‰æ‹©æœ€ä½³çš„ä¸€ä¸ª
- **è§†é¢‘é€‰æ‹©å™¨**: ä»å¤šä¸ªè§†é¢‘ä¸­é€‰æ‹©æœ€ä½³çš„ä¸€ä¸ª
- **TOSä¿å­˜å·¥å…·**: å°†å†…å®¹ä¿å­˜åˆ°TOSå¹¶è¿”å›URL

## ğŸ“ é¡¹ç›®ç»“æ„

```
media-agent-mcp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ media_agent_mcp/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ server.py              # MCPæœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚       â”œâ”€â”€ ai_models/             # AIæ¨¡å‹æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ seedream.py        # å›¾åƒç”Ÿæˆ
â”‚       â”‚   â”œâ”€â”€ seedance.py        # è§†é¢‘ç”Ÿæˆ
â”‚       â”‚   â”œâ”€â”€ seededit.py        # å›¾åƒç¼–è¾‘
â”‚       â”‚   â””â”€â”€ seed16.py          # è§†è§‰è¯­è¨€æ¨¡å‹
â”‚       â”œâ”€â”€ video/                 # è§†é¢‘å¤„ç†æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ processor.py       # è§†é¢‘å¤„ç†åŠŸèƒ½
â”‚       â”œâ”€â”€ storage/               # å­˜å‚¨æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ tos_client.py      # TOSå®¢æˆ·ç«¯
â”‚       â””â”€â”€ media_selectors/       # åª’ä½“é€‰æ‹©å™¨
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ image_selector.py  # å›¾åƒé€‰æ‹©
â”‚           â””â”€â”€ video_selector.py  # è§†é¢‘é€‰æ‹©
â”œâ”€â”€ .env.template                  # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore                     # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ pyproject.toml                 # é¡¹ç›®é…ç½®
â”œâ”€â”€ uv.lock                        # ä¾èµ–é”å®šæ–‡ä»¶
â””â”€â”€ README.md                      # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”‘ APIå¯†é’¥è·å–

### TOSå­˜å‚¨
1. è®¿é—® [BytePlus TOSæ§åˆ¶å°](https://console.byteplus.com/tos)
2. åˆ›å»ºå­˜å‚¨æ¡¶å¹¶è·å–è®¿é—®å¯†é’¥
3. è®°å½•è®¿é—®å¯†é’¥ã€ç§˜å¯†å¯†é’¥å’Œå­˜å‚¨æ¡¶åç§°

### ModelArk API
1. è®¿é—® [BytePlus ModelArkæ§åˆ¶å°](https://console.byteplus.com/)
2. è·å–APIå¯†é’¥
3. é€‰æ‹©åˆé€‚çš„æ¨¡å‹ç«¯ç‚¹

### ç«å±±å¼•æ“è§†è§‰æ™ºèƒ½
1. è®¿é—® [ç«å±±å¼•æ“æ§åˆ¶å°](https://console.volcengine.com/)
2. å¼€é€šè§†è§‰æ™ºèƒ½æœåŠ¡
3. è·å–è®¿é—®å¯†é’¥å’Œç§˜å¯†å¯†é’¥

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç›¸å¯¹å¯¼å…¥é”™è¯¯**
   ```
   ImportError: attempted relative import with no known parent package
   ```
   **è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨æ¨¡å—æ–¹å¼è¿è¡Œï¼š
   ```bash
   cd src
   python -m media_agent_mcp.server
   ```

2. **ç¯å¢ƒå˜é‡æœªè®¾ç½®**
   ç¡®ä¿ `.env` æ–‡ä»¶å·²æ­£ç¡®é…ç½®æ‰€æœ‰å¿…è¦çš„APIå¯†é’¥ã€‚
   
3. **ä¾èµ–å®‰è£…é—®é¢˜**
   ```bash
   pip install --upgrade pip
   pip install -e .
   ```
   
   æˆ–ä½¿ç”¨uvï¼š
   ```bash
   uv sync --reinstall
   ```

4. **TOSä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥TOSé…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤å­˜å‚¨æ¡¶æƒé™è®¾ç½®
   - éªŒè¯ç½‘ç»œè¿æ¥

5. **AIæ¨¡å‹è°ƒç”¨å¤±è´¥**
   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ
   - ç¡®è®¤æ¨¡å‹ç«¯ç‚¹é…ç½®
   - æŸ¥çœ‹APIé…é¢å’Œé™åˆ¶

## ğŸ“ å¼€å‘

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd media-agent-mcp

# ä½¿ç”¨uvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
uv sync

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate  # Linux/macOS
# æˆ–
.venv\Scripts\activate     # Windows
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•å¥—ä»¶
uv run test_server.py

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/
```

### æ„å»ºå’Œå‘å¸ƒ

```bash
# æ„å»ºåŒ…
uv build

# å‘å¸ƒåˆ°PyPI
uv publish
```

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ç›¸åº”æ¨¡å—ä¸­å®ç°åŠŸèƒ½
2. åœ¨ `server.py` ä¸­æ·»åŠ  `@mcp.tool()` è£…é¥°å™¨
3. æ·»åŠ ç±»å‹æ³¨è§£å’Œæ–‡æ¡£å­—ç¬¦ä¸²
4. æ›´æ–°READMEæ–‡æ¡£
5. æ·»åŠ æµ‹è¯•ç”¨ä¾‹

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ç±»å‹æ³¨è§£
- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- åŒ…å«é”™è¯¯å¤„ç†
- è¿”å›ç»Ÿä¸€çš„JSONæ ¼å¼

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨å¼‚æ­¥å¤„ç†æé«˜å¹¶å‘æ€§èƒ½
- å®ç°ç¼“å­˜æœºåˆ¶å‡å°‘é‡å¤è®¡ç®—
- ä¼˜åŒ–æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½æµç¨‹
- åˆç†è®¾ç½®è¶…æ—¶å’Œé‡è¯•æœºåˆ¶

## ğŸ”’ å®‰å…¨è€ƒè™‘

- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
- éªŒè¯è¾“å…¥å‚æ•°é˜²æ­¢æ³¨å…¥æ”»å‡»
- é™åˆ¶æ–‡ä»¶ä¸Šä¼ å¤§å°å’Œç±»å‹
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### è´¡çŒ®æµç¨‹

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ·»åŠ æµ‹è¯•
5. æäº¤Pull Request

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æœç´¢å·²æœ‰çš„Issues
3. æäº¤æ–°çš„Issue
4. è”ç³»å¼€å‘å›¢é˜Ÿ

## ğŸ“ˆ ç‰ˆæœ¬å†å²

- **v0.1.0** (Alpha) - åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«9ä¸ªæ ¸å¿ƒå·¥å…·
- **v2.2.0** add subtitle and description to tools
- **v2.3.0** add audio and video merge
- **v2.4.0** omni human, tts, stack video
- **v2.5.0** add openai image edit
- **v2.6.0** add google image edit
