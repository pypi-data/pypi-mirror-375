import{p as H,r as w,l as F,t as b,j as e,c as K,B as k}from"./index-BRZ4tpHq.js";import{u as C}from"./useQuery-wclctLx1.js";import{u as P,L as _}from"./loading-skeleton-9fdPr0DJ.js";import{j as E,k as W,l as R}from"./api-BDZ8mgcX.js";import{B as j}from"./badge-CWGYtFFH.js";import{C as x,a as m,b as h,c as p,d as Z,e as O}from"./card-Dv8PJnt9.js";import{I as G}from"./input-CPdmn13N.js";import{S,a as M,b as A,c as L,d as c}from"./select-Dc4HUxFa.js";import{S as J}from"./separator-DA0QZDJm.js";import{H as X,S as Y,T as ee,C as se,P as ae}from"./theme-switch-DorJDsGd.js";import{E as te}from"./empty-state-CU2gGm9v.js";import{M as le}from"./main-gqigjXqN.js";import{c as t}from"./index-CTvPNZtd.js";import{C as re}from"./calendar-7UYR7w-o.js";import"./index-B6E7gDWi.js";import"./index-Dcf_pfkZ.js";import"./index-D-xJce4k.js";import"./index-BElOJd7n.js";import"./index-COMQfmU0.js";import"./index-CzMLjddK.js";import"./chevron-down-CqJo4LZW.js";import"./check-46FVkbyV.js";import"./index-L_x52GkC.js";import"./index-taeySYSj.js";import"./index-BetNNbXV.js";import"./sign-out-dialog-GBgIxE2Q.js";import"./command-DU_R5alo.js";import"./arrow-right-v-fqSTyu.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],ie=t("arrow-down-a-z",ne);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],ce=t("arrow-up-a-z",oe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],xe=t("circle-arrow-up",de);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],he=t("circle-check-big",me);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ge=t("download",pe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],ye=t("sliders-horizontal",ue);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fe=t("star",je);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ke=t("tag",we);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ne=t("user",ve),$=H("/_authenticated/market/"),be=new Map([["all","All"],["plugin","Plugins"],["assistant","Assistants"],["workflow","Workflows"]]);function Ce({item:l,mutation:n}){const i=n.isPending&&n.variables?.item_id===l.id,o=()=>{n.mutate({item_id:l.id,category:l.category,isUpdate:l.update_available})};return l.update_available?e.jsxs(k,{onClick:o,disabled:i,className:"w-full bg-yellow-500 text-black hover:bg-yellow-600",children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),i?"Updating...":"Update"]}):l.is_installed?e.jsxs(k,{disabled:!0,className:"w-full",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Installed"]}):e.jsxs(k,{onClick:o,disabled:i,className:"w-full",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),i?"Downloading...":"Download"]})}function _e(){const{filter:l="",type:n="all",sort:i="asc"}=$.useSearch(),o=$.useNavigate(),[v,I]=w.useState(i==="desc"?"desc":"asc"),[g,T]=w.useState(["all","plugin","assistant","workflow"].includes(n)?n:"all"),[d,q]=w.useState(l),u=F(),r=C({queryKey:["market-metadata"],queryFn:W,staleTime:3e5}),y=C({queryKey:["market-items",g],queryFn:()=>R(g),staleTime:6e4}),z=P({mutationFn:E,onSuccess:(s,a)=>{const f=a.isUpdate?"updated":"downloaded";b.success(`Successfully ${f} ${a.category}: ${a.item_id}`),u.invalidateQueries({queryKey:["market-items"]}),u.invalidateQueries({queryKey:["available-plugins"]}),u.invalidateQueries({queryKey:["assistants"]}),u.invalidateQueries({queryKey:["workflows"]})},onError:s=>{b.error(s?.message||"Operation failed")}}),D=s=>{const a=s.target.value;q(a),o({search:f=>({...f,filter:a||void 0})})},U=s=>{T(s),o({search:a=>({...a,type:s==="all"?void 0:s})})},V=s=>{I(s),o({search:a=>({...a,sort:s})})},Q=s=>{switch(s){case"plugin":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"assistant":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"workflow":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},B=s=>s?s.charAt(0).toUpperCase()+s.slice(1):"Uncategorized",N=(y.data||[]).filter(s=>d?s.name.toLowerCase().includes(d.toLowerCase())||s.description?.toLowerCase().includes(d.toLowerCase())||s.tags?.some(a=>a.toLowerCase().includes(d.toLowerCase())):!0).sort((s,a)=>v==="asc"?s.name.localeCompare(a.name):a.name.localeCompare(s.name));return e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx(Y,{}),e.jsxs("div",{className:"ms-auto flex items-center gap-4",children:[e.jsx(ee,{}),e.jsx(se,{}),e.jsx(ae,{})]})]}),e.jsxs(le,{fixed:!0,children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Marketplace Integrations"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse plugins, assistants, and workflows from the community marketplace."})]}),r.isLoading&&e.jsx("div",{className:"mt-4",children:e.jsx(_,{lines:1})}),r.data&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsxs(x,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Total Items"})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.data.categories.plugins+r.data.categories.assistants+r.data.categories.workflows})})]}),e.jsxs(x,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Plugins"})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.data.categories.plugins})})]}),e.jsxs(x,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Assistants"})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.data.categories.assistants})})]}),e.jsxs(x,{children:[e.jsx(m,{className:"pb-2",children:e.jsx(h,{className:"text-sm font-medium",children:"Workflows"})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.data.categories.workflows})})]})]}),e.jsxs("div",{className:"my-4 flex flex-col justify-between gap-4 sm:my-0 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:my-4 sm:flex-row",children:[e.jsx(G,{placeholder:"Search items...",className:"h-9 w-40 lg:w-[250px]",value:d,onChange:D}),e.jsxs(S,{value:g,onValueChange:U,children:[e.jsx(M,{className:"w-40",children:e.jsx(A,{children:be.get(g)})}),e.jsxs(L,{children:[e.jsx(c,{value:"all",children:"All"}),e.jsx(c,{value:"plugin",children:"Plugins"}),e.jsx(c,{value:"assistant",children:"Assistants"}),e.jsx(c,{value:"workflow",children:"Workflows"})]})]})]}),e.jsxs(S,{value:v,onValueChange:s=>V(s),children:[e.jsx(M,{className:"w-16",children:e.jsx(A,{children:e.jsx(ye,{size:18})})}),e.jsxs(L,{align:"end",children:[e.jsx(c,{value:"asc",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ce,{size:16}),e.jsx("span",{children:"Ascending"})]})}),e.jsx(c,{value:"desc",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ie,{size:16}),e.jsx("span",{children:"Descending"})]})})]})]})]}),e.jsx(J,{className:"shadow-sm"}),e.jsxs("div",{className:"mt-4",children:[y.isLoading&&e.jsx(_,{lines:5}),y.error&&e.jsx("div",{className:"text-red-600",children:"Failed to load market items."}),y.data&&N.length===0&&e.jsx(te,{title:"No items found"})]}),e.jsx("div",{className:"grid gap-4 pt-4 pb-16 sm:grid-cols-2 lg:grid-cols-3",children:N.map(s=>e.jsxs(x,{className:"flex flex-col",children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(h,{className:"text-lg",children:s.name}),s.version&&e.jsx(j,{variant:"outline",className:K("mt-1",{"border-yellow-500 text-yellow-600":s.update_available}),children:s.update_available?`v${s.installed_version} â†’ v${s.version}`:`v${s.version}`})]}),e.jsx(j,{className:Q(s.category),children:B(s.category)})]}),e.jsx(Z,{className:"mt-2",children:s.description})]}),e.jsxs(p,{className:"flex-1",children:[s.tags&&s.tags.length>0&&e.jsxs("div",{className:"mb-3 flex flex-wrap gap-1",children:[s.tags.slice(0,3).map(a=>e.jsxs(j,{variant:"secondary",className:"text-xs",children:[e.jsx(ke,{className:"mr-1 h-3 w-3"}),a]},a)),s.tags.length>3&&e.jsxs(j,{variant:"secondary",className:"text-xs",children:["+",s.tags.length-3]})]}),e.jsxs("div",{className:"text-muted-foreground space-y-2 text-sm",children:[s.author&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:s.author})]}),s.rating&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{children:[s.rating,"/5"]})]}),s.updated_at&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsxs("span",{children:["Updated ",new Date(s.updated_at).toLocaleDateString()]})]})]})]}),e.jsx(O,{children:e.jsx(Ce,{item:s,mutation:z})})]},s.id))})]})]})}const ss=_e;export{ss as component};
