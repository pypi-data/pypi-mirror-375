# NEONPAY - –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π Telegram Stars

[![PyPI version](https://img.shields.io/pypi/v/neonpay.svg)](https://pypi.org/project/neonpay/)
[![PyPI downloads](https://img.shields.io/pypi/dm/neonpay.svg)](https://pypi.org/project/neonpay/)
[![Python Support](https://img.shields.io/pypi/pyversions/neonpay.svg)](https://pypi.org/project/neonpay/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**NEONPAY** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è Telegram –±–æ—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ø–ª–∞—Ç–µ–∂–µ–π Telegram Stars –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –±–æ—Ç–æ–≤ –∏ —á–∏—Å—Ç—ã–º, –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º API, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏ –≤ —Å–≤–æ–π –±–æ—Ç –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –∫–æ–¥–∞.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üöÄ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –†–∞–±–æ—Ç–∞–µ—Ç —Å Pyrogram, Aiogram, python-telegram-bot, pyTelegramBotAPI –∏ raw Bot API
- üí´ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Stars** - –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞–ª—é—Ç—ã XTR –æ—Ç Telegram
- üé® **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —ç—Ç–∞–ø—ã –ø–ª–∞—Ç–µ–∂–µ–π** - –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—Ä–µ–Ω–¥–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ª–æ–≥–æ—Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- üîß **–ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –ù–∞—á–Ω–∏—Ç–µ –≤—Å–µ–≥–æ —Å 2-3 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- üì± **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∞ —Å async/await –∏ type hints
- üõ°Ô∏è **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- üì¶ **–ù—É–ª–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –¢—Ä–µ–±—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∞–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –±–æ—Ç–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é —Å PyPI
pip install neonpay

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é
pip install neonpay==2.5.0

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
pip install neonpay[all]  # –í—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±–æ—Ç–æ–≤
pip install neonpay[ptb]   # —Ç–æ–ª—å–∫–æ python-telegram-bot
pip install neonpay[aiogram]  # —Ç–æ–ª—å–∫–æ Aiogram
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from neonpay import create_neonpay, PaymentStage

# –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –±–æ—Ç–æ–≤ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ!
neonpay = create_neonpay(your_bot_instance)

# –°–æ–∑–¥–∞–π—Ç–µ —ç—Ç–∞–ø –ø–ª–∞—Ç–µ–∂–∞
stage = PaymentStage(
    title="–ü—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏",
    description="–†–∞–∑–±–ª–æ–∫–∏—Ä—É–π—Ç–µ –≤—Å–µ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏",
    price=100,  # 100 Telegram Stars
    photo_url="https://example.com/logo.png"
)

# –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∞–ø –ø–ª–∞—Ç–µ–∂–∞
neonpay.create_payment_stage("premium", stage)

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–ª–∞—Ç–µ–∂ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
await neonpay.send_payment(user_id=12345, stage_id="premium")

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —É—Å–ø–µ—à–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
@neonpay.on_payment
async def handle_payment(result):
    print(f"–ü–ª–∞—Ç–µ–∂ –ø–æ–ª—É—á–µ–Ω: {result.amount} stars –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {result.user_id}")
```

## üìö –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫

NEONPAY –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–∞—à—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É –±–æ—Ç–æ–≤ –∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∞–¥–∞–ø—Ç–µ—Ä:

### Pyrogram

```python
from pyrogram import Client
from neonpay import create_neonpay

app = Client("my_bot", bot_token="YOUR_TOKEN")
neonpay = create_neonpay(app)
```

### Aiogram

```python
from aiogram import Bot, Dispatcher
from neonpay import create_neonpay

bot = Bot(token="YOUR_TOKEN")
dp = Dispatcher()
neonpay = create_neonpay(bot, dp)  # –ü–µ—Ä–µ–¥–∞–π—Ç–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –¥–ª—è aiogram
```

### python-telegram-bot

```python
from telegram.ext import Application
from neonpay import create_neonpay

application = Application.builder().token("YOUR_TOKEN").build()
neonpay = create_neonpay(application)
```

### pyTelegramBotAPI

```python
import telebot
from neonpay import create_neonpay

bot = telebot.TeleBot("YOUR_TOKEN")
neonpay = create_neonpay(bot)
```

### Raw Bot API

```python
from neonpay import RawAPIAdapter, NeonPayCore

adapter = RawAPIAdapter("YOUR_TOKEN", webhook_url="https://yoursite.com/webhook")
neonpay = NeonPayCore(adapter)
```

## üéØ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —ç—Ç–∞–ø—ã –ø–ª–∞—Ç–µ–∂–µ–π

```python
from neonpay import PaymentStage

# –°–æ–∑–¥–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø –ø–ª–∞—Ç–µ–∂–∞
premium_stage = PaymentStage(
    title="–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞",
    description="–ü–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–µ",
    price=500,  # 500 Telegram Stars
    label="–ü—Ä–µ–º–∏—É–º –ø–ª–∞–Ω",
    photo_url="https://yoursite.com/premium-logo.png",
    payload={"plan": "premium", "duration": "monthly"}
)

neonpay.create_payment_stage("premium_monthly", premium_stage)
```

### Callback'–∏ –ø–ª–∞—Ç–µ–∂–µ–π

```python
from neonpay import PaymentResult, PaymentStatus

@neonpay.on_payment
async def handle_payment(result: PaymentResult):
    if result.status == PaymentStatus.COMPLETED:
        # –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø
        user_id = result.user_id
        amount = result.amount
        metadata = result.metadata
        
        print(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –∑–∞–ø–ª–∞—Ç–∏–ª {amount} stars")
        print(f"–ü–ª–∞–Ω: {metadata.get('plan')}")
        
        # –í–∞—à–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
        await grant_premium_access(user_id, metadata.get('plan'))
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã –ø–ª–∞—Ç–µ–∂–µ–π

```python
# –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π
stages = {
    "basic": PaymentStage("–ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω", "–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏", 100),
    "premium": PaymentStage("–ü—Ä–µ–º–∏—É–º –ø–ª–∞–Ω", "–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ + –ø–æ–¥–¥–µ—Ä–∂–∫–∞", 300),
    "enterprise": PaymentStage("–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π", "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è", 1000)
}

for stage_id, stage in stages.items():
    neonpay.create_payment_stage(stage_id, stage)

# –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await neonpay.send_payment(user_id, "premium")
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
from neonpay import NeonPayError, PaymentError

try:
    await neonpay.send_payment(user_id, "nonexistent_stage")
except PaymentError as e:
    print(f"–û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞: {e}")
except NeonPayError as e:
    print(f"–û—à–∏–±–∫–∞ NEONPAY: {e}")
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

# –í–∫–ª—é—á–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ NEONPAY
logging.getLogger("neonpay").setLevel(logging.INFO)
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–ê–Ω–≥–ª–∏–π—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](en/README.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- **[–†—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](ru/README.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- **[–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](az/README.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –Ω–∞ –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–æ–º

## ü§ù –ü—Ä–∏–º–µ—Ä—ã

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–∞–ø–∫—É [examples](../examples/) –¥–ª—è –ø–æ–ª–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤:

- [–ü—Ä–∏–º–µ—Ä –±–æ—Ç–∞ Pyrogram](../examples/pyrogram_example.py)
- [–ü—Ä–∏–º–µ—Ä –±–æ—Ç–∞ Aiogram](../examples/aiogram_example.py)
- [–ü—Ä–∏–º–µ—Ä python-telegram-bot](../examples/ptb_example.py)
- [–ü—Ä–∏–º–µ—Ä pyTelegramBotAPI](../examples/telebot_example.py)
- [–ü—Ä–∏–º–µ—Ä Raw API](../examples/raw_api_example.py)

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9+
- –û–¥–Ω–∞ –∏–∑ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –±–æ—Ç–æ–≤:
  - `pyrogram>=2.0.106` –¥–ª—è Pyrogram
  - `aiogram>=3.0.0` –¥–ª—è Aiogram
  - `python-telegram-bot>=20.0` –¥–ª—è python-telegram-bot
  - `pyTelegramBotAPI>=4.0.0` –¥–ª—è pyTelegramBotAPI
  - `aiohttp>=3.8.0` –¥–ª—è Raw API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ —Ñ–∞–π–ª–µ [LICENSE](../../LICENSE).

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å Pull Request.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Telegram**: [@neonsahib](https://t.me/neonsahib)
- **Issues**: [GitHub Issues](https://github.com/Abbasxan/neonpay/issues)
- **Email**: sultanov.abas@outlook.com

## ‚≠ê –ò—Å—Ç–æ—Ä–∏—è –∑–≤–µ–∑–¥

–ï—Å–ª–∏ –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ NEONPAY –ø–æ–ª–µ–∑–Ω—ã–º, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è [Abbas Sultanov](https://github.com/Abbasxan)

