(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2828],{85082:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/organization",function(){return t(5417)}])},77213:function(e,i,t){"use strict";t.d(i,{Z:function(){return p}});var r=t(24246),n=t(96306),a=t(88038),o=t.n(a),s=t(86677);t(27378);var l=t(25980),d=t(90867),c=t(77830),u=()=>{let e=(0,s.useRouter)();return(0,r.jsx)(n.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(n.xuv,{children:[(0,r.jsxs)(n.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(n.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(n.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,r.jsxs)(n.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:i,title:t,padded:a=!0,mainProps:c}=e,p=(0,l.hz)(),x=(0,s.useRouter)(),m="/privacy-requests"===x.pathname||"/datastore-connection"===x.pathname,h=!(p.flags.privacyRequestsConfiguration&&m),{data:v}=(0,d.JE)(void 0,{skip:h}),{data:j}=(0,d.PW)(void 0,{skip:h}),g=p.flags.privacyRequestsConfiguration&&(!v||!j)&&m;return(0,r.jsxs)(n.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,r.jsxs)(o(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(n.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[g?(0,r.jsx)(u,{}):null,i]})]})}},58754:function(e,i,t){"use strict";var r=t(24246),n=t(96306),a=t(70788);i.Z=e=>{let{heading:i,breadcrumbItems:t,isSticky:o=!0,children:s,rightContent:l,style:d,...c}=e;return(0,r.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,r.jsxs)(n.jqI,{justify:"space-between",children:["string"==typeof i?(0,r.jsx)(n.lQT,{className:t||s?"pb-4":void 0,level:1,"data-testid":"page-heading",children:i}):i,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!t&&(0,r.jsx)(a.m,{className:s?"pb-4":void 0,items:t,"data-testid":"page-breadcrumb"}),s]})}},19904:function(e,i,t){"use strict";t.d(i,{Tg:function(){return o}});var r=t(24246),n=t(16134),a=t(31793);let o=e=>(0,n.C)(a.uu).filter(i=>e.includes(i)).length>0;i.ZP=e=>{let{scopes:i,children:t}=e;return o(i)?(0,r.jsx)(r.Fragment,{children:t}):null}},97181:function(e,i,t){"use strict";t.d(i,{d:function(){return d}});var r=t(24246),n=t(96306),a=t(34090),o=t(27378),s=t(46238),l=t(40324);let d=e=>{let{name:i,label:t,labelProps:d,tooltip:c,isRequired:u,layout:p="inline",helperText:x,...m}=e,[h,v,{setValue:j}]=(0,a.U$)(i),g=!!(v.touched&&v.error),[f,b]=(0,o.useState)("");h.value||"tags"!==m.mode&&"multiple"!==m.mode||(h.value=[]),"tags"===m.mode&&"string"==typeof h.value&&(h.value=[h.value]);let y="tags"===m.mode?(e,i)=>e?e.value!==f||h.value.includes(f)?m.optionRender?m.optionRender(e,i):e.label:'Create "'.concat(f,'"'):void 0:m.optionRender||void 0,k=e=>{b(e),m.onSearch&&m.onSearch(e)},C=(e,i)=>{j(e),m.onChange&&m.onChange(e,i)};return"inline"===p?(0,r.jsx)(n.NIc,{isInvalid:g,isRequired:u,children:(0,r.jsxs)(n.rjZ,{templateColumns:t?"1fr 3fr":"1fr",children:[t?(0,r.jsx)(l.__,{htmlFor:m.id||i,...d,children:t}):null,(0,r.jsxs)(n.jqI,{align:"center",children:[(0,r.jsxs)(n.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,r.jsx)(n.WPr,{...h,id:m.id||i,"data-testid":"controlled-select-".concat(h.name),...m,optionRender:y,onSearch:"tags"===m.mode?k:void 0,onChange:C,value:h.value||void 0,status:g?"error":void 0}),x&&(0,r.jsx)(n.Q6r,{children:x}),(0,r.jsx)(l.Bc,{isInvalid:g,message:v.error,fieldName:h.name})]}),(0,r.jsx)(s.b,{label:c,className:g?"mt-2 self-start":void 0})]})]})}):(0,r.jsx)(n.NIc,{isInvalid:g,isRequired:u,children:(0,r.jsxs)(n.gCW,{alignItems:"start",children:[(0,r.jsxs)(n.jqI,{align:"center",children:[t?(0,r.jsx)(l.__,{htmlFor:m.id||i,fontSize:"xs",my:0,mr:1,...d,children:t}):null,(0,r.jsx)(s.b,{label:c})]}),(0,r.jsx)(n.WPr,{...h,id:m.id||i,"data-testid":"controlled-select-".concat(h.name),...m,optionRender:y,onSearch:"tags"===m.mode?k:void 0,onChange:C,value:h.value||void 0,status:g?"error":void 0}),x&&(0,r.jsx)(n.Q6r,{style:{marginTop:0},children:x}),(0,r.jsx)(l.Bc,{isInvalid:g,message:v.error,fieldName:h.name})]})})}},8133:function(e,i,t){"use strict";var r=t(24246),n=t(96306);i.Z=e=>{let{title:i,children:t,isOpen:a,onClose:o,modalContentProps:s,showCloseButton:l=!1,footer:d,...c}=e;return(0,r.jsxs)(n.u_l,{isOpen:a,onClose:o,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...c,children:[(0,r.jsx)(n.ZAr,{}),(0,r.jsxs)(n.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",...s,children:[l&&(0,r.jsx)(n.olH,{}),(0,r.jsx)(n.xBx,{p:0,children:(0,r.jsx)(n.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)(n.X6q,{as:"h3",size:"sm",children:i})})}),(0,r.jsx)(n.fef,{pb:4,overflow:"auto",children:t}),d&&(0,r.jsx)(n.mzw,{children:d})]})]})}},70788:function(e,i,t){"use strict";t.d(i,{m:function(){return d}});var r=t(24246),n=t(96306),a=t(79894),o=t.n(a),s=t(27378);let{Text:l}=n.AntTypography,d=e=>{let{items:i,...t}=e,a=(0,s.useMemo)(()=>null==i?void 0:i.map((e,t)=>{let a=t===i.length-1,s={...e},d=s.onClick&&!s.href;return("string"==typeof s.title&&(s.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:s.title})),d)?s.title=(0,r.jsx)(n.wpx,{type:"text",size:"small",icon:s.icon,onClick:s.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:s.title}):(s.icon&&(s.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,r.jsx)(o(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href)),s}),[i]);return(0,r.jsx)(n.zrq,{items:a,...t})}},5417:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return N}});var r=t(24246),n=t(19904),a=t(96306),o=t(25980),s=t(77213),l=t(58754),d=t(8133),c=t(34090),u=t(27378),p=t(55484),x=t(40324),m=t(812),h=t(46628),v=t(76174),j=t(97181);let g={identifier:"",name:"",client_id:"",client_secret:""},f=e=>({...e}),b=p.Ry().shape({provider:p.Z_().required().label("Provider"),name:p.Z_().required().label("Name"),client_id:p.Z_().required().label("Client ID"),client_secret:p.Z_().required().label("Client Secret")});var y=e=>{let{openIDProvider:i,onSuccess:t,onClose:n}=e,[o]=(0,v.Qc)(),[s]=(0,v.oP)(),l=(0,u.useMemo)(()=>i?f(i):g,[i]),d=(0,a.pmc)(),p=async(e,i)=>{(e=>{if((0,m.D4)(e)){let i=(0,m.e$)(e.error,"An unexpected error occurred while editing the SSO provider. Please try again.");d((0,h.Vo)(i))}else d((0,h.t5)("SSO provider configuration saved.")),n(),i.resetForm({}),t&&t(e.data)})(l.id?await s(e):await o(e))},y=[{label:"Azure",value:"azure"},{label:"Google",value:"google"},{label:"Okta",value:"okta"},{label:"Custom",value:"custom"}],k=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0})]}),C=()=>(0,r.jsx)(x.j0,{id:"domain",name:"domain",label:"Domain",tooltip:"Domain for your Okta provider",variant:"stacked",isRequired:!0}),_=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"userinfo_url",name:"user_info_url",label:"User Info URL",tooltip:"User Info URL for your provider",variant:"stacked",isRequired:!0})]});return(0,r.jsx)(c.J9,{initialValues:l,enableReinitialize:!0,onSubmit:p,validationSchema:b,children:e=>{let{dirty:i,isValid:t,values:o}=e;return(0,r.jsx)(c.l0,{"data-testid":"openIDProvider-form",children:(0,r.jsxs)(a.Kqy,{spacing:4,children:[(0,r.jsx)(j.d,{name:"provider",label:"Provider",options:y,layout:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"identifier",name:"identifier",label:"Identifier",tooltip:"Unique identifier for your provider",variant:"stacked",isRequired:!0,disabled:!!l.id}),(0,r.jsx)(x.j0,{id:"name",name:"name",label:"Name",tooltip:"Display name for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"client_id",name:"client_id",label:"Client ID",type:"password",tooltip:"Client ID for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"client_secret",name:"client_secret",label:"Client secret",type:"password",tooltip:"Client secret for your provider",variant:"stacked",isRequired:!0}),"azure"===o.provider&&k(),"okta"===o.provider&&C(),"custom"===o.provider&&_(),(0,r.jsxs)(a.xuv,{textAlign:"right",children:[(0,r.jsx)(a.wpx,{htmlType:"button","data-testid":"cancel-btn",className:"mr-3",onClick:n,children:"Cancel"}),(0,r.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:!i||!t,"data-testid":"save-btn",children:"Save"})]})]})})}})},k=e=>{let{isOpen:i,onClose:t}=e;return(0,r.jsx)(d.Z,{isOpen:i,onClose:t,title:"Add SSO Provider",children:(0,r.jsx)(y,{onClose:t})})},C=e=>{let{isOpen:i,onClose:t,openIDProvider:n}=e;return(0,r.jsx)(d.Z,{isOpen:i,onClose:t,title:"Edit SSO Provider",children:(0,r.jsx)(y,{openIDProvider:n,onClose:t})})},_=e=>{let{openIDProvider:i}=e,{onOpen:t,isOpen:n,onClose:o}=(0,a.qY0)(),{onOpen:s,isOpen:l,onClose:d}=(0,a.qY0)(),c=(0,a.pmc)(),[u]=(0,v.rB)(),p=async()=>{let e=await u(i.identifier);if((0,m.D4)(e)){c((0,h.Vo)((0,m.e$)(e.error))),d();return}c((0,h.t5)("SSO provider deleted successfully")),d()};return(0,r.jsxs)(a.xuv,{alignItems:"center",borderRadius:"lg",borderWidth:"1px",display:"flex",height:"74px",marginBottom:"24px",padding:2,children:[(0,r.jsxs)(a.xuv,{display:"flex",alignItems:"center",children:[(0,r.jsx)(a.Eep,{src:"/images/oauth-login/".concat(i.provider,".svg"),alt:"".concat(i.provider," icon"),width:"40px",height:"40px"}),(0,r.jsxs)(a.xuv,{display:"flex",flexDirection:"column",children:[(0,r.jsx)(a.xvT,{fontSize:"medium",fontWeight:"bold",marginLeft:"16px",children:i.name}),(0,r.jsx)(a.xvT,{fontSize:"medium",marginLeft:"16px",children:i.identifier})]})]}),(0,r.jsxs)(a.xuv,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:[(0,r.jsx)(a.wpx,{className:"mr-3",onClick:s,"data-testid":"remove-sso-provider-btn",children:"Remove"}),(0,r.jsx)(a.wpx,{className:"mr-3",onClick:t,"data-testid":"edit-sso-provider-btn",children:"Edit"})]}),(0,r.jsx)(C,{isOpen:n,onClose:o,openIDProvider:i}),(0,r.jsx)(a.cVQ,{isOpen:l,onClose:d,onConfirm:p,title:"Remove SSO provider",message:(0,r.jsx)(a.xvT,{children:"You are about to permanently remove this SSO provider. Are you sure you would like to continue?"})})]})},R=()=>{let{onOpen:e,isOpen:i,onClose:t}=(0,a.qY0)(),{data:n}=(0,v.qv)();return(0,r.jsxs)(a.xuv,{maxWidth:"600px",marginTop:"40px",children:[(0,r.jsxs)(a.X6q,{marginBottom:4,fontSize:"lg",display:"flex",justifyContent:"space-between",children:["SSO Providers",n&&n.length<5&&(0,r.jsx)(a.wpx,{onClick:e,"data-testid":"add-sso-provider-btn",children:"Add SSO Provider"})]}),(0,r.jsx)(a.xvT,{marginBottom:"30px",fontSize:"sm",children:"Use this area to add and manage SSO providers for you organization. Select “Add SSO provider” to add a new provider."}),null==n?void 0:n.map(e=>(0,r.jsx)(_,{openIDProvider:e},e.identifier)),(0,r.jsx)(k,{isOpen:i,onClose:t})]})},z=t(83265);let S={description:"",fides_key:z.Av,name:""},q=e=>({...e}),w=e=>({description:e.description,fides_key:e.fides_key,name:e.name}),O=p.Ry().shape({description:p.Z_().required().label("Description"),fides_key:p.Z_().required().label("Organization Fides Key"),name:p.Z_().required().label("Name")}),I=e=>{let{organization:i,onSuccess:t}=e,[n,o]=(0,z.$f)(),s=(0,u.useMemo)(()=>i?q(i):S,[i]),l=(0,a.pmc)(),d=async(e,i)=>{let r=w(e);(n=>{if((0,m.D4)(n)){let e=(0,m.e$)(n.error,"An unexpected error occurred while editing the organization. Please try again.");l((0,h.Vo)(e))}else l((0,h.t5)("Organization configuration saved.")),i.resetForm({values:e}),t&&t(r)})(await n(r))},p=!i||o.isLoading;return(0,r.jsx)(c.J9,{initialValues:s,enableReinitialize:!0,onSubmit:d,validationSchema:O,children:e=>{let{dirty:i,isValid:t}=e;return(0,r.jsx)(c.l0,{"data-testid":"organization-form",children:(0,r.jsxs)(a.Kqy,{spacing:4,children:[(0,r.jsx)(x.j0,{id:"fides_key",name:"fides_key",label:"Fides Key",disabled:!0,tooltip:"A unique key that identifies your organization. Not editable via UI.",variant:"stacked"}),(0,r.jsx)(x.j0,{id:"name",name:"name",label:"Name",disabled:p,tooltip:"User-friendly name for your organization, used in messaging to end-users and other public locations.",variant:"stacked"}),(0,r.jsx)(x.j0,{id:"description",name:"description",label:"Description",disabled:p,tooltip:"Short description of your organization, your services, etc.",variant:"stacked"}),(0,r.jsx)(a.xuv,{textAlign:"right",children:(0,r.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:p||!i||!t,loading:p,"data-testid":"save-btn",children:"Save"})})]})})}})};var P=t(21910),N=()=>{let{data:e}=(0,z.GQ)(z.Av),{plus:i}=(0,o.hz)();return(0,r.jsx)(s.Z,{title:"Organization",children:(0,r.jsxs)(a.xuv,{"data-testid":"organization-management",children:[(0,r.jsx)(l.Z,{heading:"Organization Management"}),(0,r.jsxs)(a.xuv,{maxWidth:"600px",children:[(0,r.jsx)(a.xvT,{pb:6,fontSize:"sm",children:"Please use this section to manage your organization‘s details, including key information that will be recorded in the RoPA (Record of Processing Activities)."}),(0,r.jsx)(a.xuv,{background:"gray.50",padding:2,children:(0,r.jsx)(I,{organization:e})}),i&&(0,r.jsx)(n.ZP,{scopes:[P.Sh.OPENID_PROVIDER_CREATE],children:(0,r.jsx)(R,{})})]})]})})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=85082)}),_N_E=e.O()}]);