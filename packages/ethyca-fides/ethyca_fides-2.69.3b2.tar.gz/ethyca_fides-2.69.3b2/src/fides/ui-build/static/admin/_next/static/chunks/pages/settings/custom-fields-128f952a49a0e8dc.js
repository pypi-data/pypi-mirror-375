(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4065],{70378:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/custom-fields",function(){return i(78422)}])},56358:function(e,t,i){"use strict";i.d(t,{q:function(){return n}});var l=i(24246);let n=(0,i(96306).IUT)({displayName:"TrashCanOutlineIcon",viewBox:"0 0 11 12",path:(0,l.jsx)("path",{d:"M4.5166 1.60859L4.1084 2.21875H7.22363L6.81543 1.60859C6.7832 1.56133 6.72949 1.53125 6.67148 1.53125H4.6584C4.60039 1.53125 4.54668 1.55918 4.51445 1.60859H4.5166ZM7.6748 1.03711L8.46328 2.21875H8.75977H9.79102H9.96289C10.2486 2.21875 10.4785 2.44863 10.4785 2.73438C10.4785 3.02012 10.2486 3.25 9.96289 3.25H9.79102V9.78125C9.79102 10.7309 9.02188 11.5 8.07227 11.5H3.25977C2.31016 11.5 1.54102 10.7309 1.54102 9.78125V3.25H1.36914C1.0834 3.25 0.853516 3.02012 0.853516 2.73438C0.853516 2.44863 1.0834 2.21875 1.36914 2.21875H1.54102H2.57227H2.86875L3.65723 1.03496C3.88066 0.701953 4.25664 0.5 4.6584 0.5H6.67148C7.07324 0.5 7.44922 0.701953 7.67266 1.03496L7.6748 1.03711ZM2.57227 3.25V9.78125C2.57227 10.1615 2.87949 10.4688 3.25977 10.4688H8.07227C8.45254 10.4688 8.75977 10.1615 8.75977 9.78125V3.25H2.57227ZM4.29102 4.625V9.09375C4.29102 9.28281 4.13633 9.4375 3.94727 9.4375C3.7582 9.4375 3.60352 9.28281 3.60352 9.09375V4.625C3.60352 4.43594 3.7582 4.28125 3.94727 4.28125C4.13633 4.28125 4.29102 4.43594 4.29102 4.625ZM6.00977 4.625V9.09375C6.00977 9.28281 5.85508 9.4375 5.66602 9.4375C5.47695 9.4375 5.32227 9.28281 5.32227 9.09375V4.625C5.32227 4.43594 5.47695 4.28125 5.66602 4.28125C5.85508 4.28125 6.00977 4.43594 6.00977 4.625ZM7.72852 4.625V9.09375C7.72852 9.28281 7.57383 9.4375 7.38477 9.4375C7.1957 9.4375 7.04102 9.28281 7.04102 9.09375V4.625C7.04102 4.43594 7.1957 4.28125 7.38477 4.28125C7.57383 4.28125 7.72852 4.43594 7.72852 4.625Z",fill:"currentColor"})})},95492:function(e,t,i){"use strict";i.d(t,{l:function(){return n}});var l=i(24246);let n=(0,i(96306).IUT)({displayName:"TrashCanSolidIcon",viewBox:"0 0 12 15",path:(0,l.jsx)("path",{d:"M8.37857 1.18083C8.23393 0.892838 7.93661 0.710938 7.6125 0.710938H4.3875C4.06339 0.710938 3.76607 0.892838 3.62143 1.18083L3.42857 1.56094H0.857143C0.383036 1.56094 -1.19209e-07 1.94158 -1.19209e-07 2.41094C-1.19209e-07 2.8803 0.383036 3.26094 0.857143 3.26094H11.1429C11.6162 3.26094 12 2.8803 12 2.41094C12 1.94158 11.6162 1.56094 11.1429 1.56094H8.57143L8.37857 1.18083ZM11.167 4.11094H0.857143V12.6109C0.857143 13.5486 1.62589 14.3109 2.57143 14.3109H9.45268C10.3754 14.3109 11.167 13.5486 11.167 12.6109V4.11094ZM9.02411 6.23594V12.1859C9.02411 12.4197 8.80714 12.6109 8.59554 12.6109C8.33571 12.6109 8.16696 12.4197 8.16696 12.1859V6.23594C8.16696 6.00219 8.33571 5.81094 8.59554 5.81094C8.80714 5.81094 9.02411 6.00219 9.02411 6.23594ZM6.45268 6.23594V12.1859C6.45268 12.4197 6.23571 12.6109 6.02411 12.6109C5.76429 12.6109 5.57143 12.4197 5.57143 12.1859V6.23594C5.57143 6.00219 5.76429 5.81094 6.02411 5.81094C6.23571 5.81094 6.45268 6.00219 6.45268 6.23594ZM3.85714 6.23594V12.1859C3.85714 12.4197 3.66429 12.6109 3.42857 12.6109C3.19286 12.6109 3 12.4197 3 12.1859V6.23594C3 6.00219 3.19286 5.81094 3.42857 5.81094C3.66429 5.81094 3.85714 6.00219 3.85714 6.23594Z",fill:"currentColor"})})},77213:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var l=i(24246),n=i(96306),s=i(88038),a=i.n(s),o=i(86677);i(27378);var r=i(25980),d=i(90867),u=i(42478),c=i(77830),m=()=>{let e=(0,o.useRouter)();return(0,l.jsx)(n.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,l.jsxs)(n.xuv,{children:[(0,l.jsxs)(n.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,l.jsx)(n.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,l.jsx)(n.wpx,{onClick:()=>{e.push(c.AD)},children:"Configure"})]}),(0,l.jsxs)(n.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},g=e=>{let{children:t,title:i,padded:s=!0,mainProps:c}=e,g=(0,r.hz)(),p=(0,o.useRouter)(),x="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,f=!(g.flags.messagingConfiguration&&x),{data:h}=(0,u.JE)(void 0,{skip:f}),{data:v}=(0,d.PW)(void 0,{skip:f}),C=g.flags.messagingConfiguration&&(!h||!v)&&x;return(0,l.jsxs)(n.kCb,{"data-testid":i,direction:"column",h:"100vh",children:[(0,l.jsxs)(a(),{children:[(0,l.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,l.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)(n.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[C?(0,l.jsx)(m,{}):null,t]})]})}},58754:function(e,t,i){"use strict";var l=i(24246),n=i(96306),s=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:a=!0,children:o,rightContent:r,style:d,...u}=e;return(0,l.jsxs)("div",{...u,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,l.jsxs)(n.jqI,{justify:"space-between",children:["string"==typeof t?(0,l.jsx)(n.lQT,{className:i||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,r&&(0,l.jsx)("div",{"data-testid":"page-header-right-content",children:r})]}),!!i&&(0,l.jsx)(s.m,{className:o?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),o]})}},19904:function(e,t,i){"use strict";i.d(t,{Tg:function(){return a}});var l=i(24246),n=i(16134),s=i(31793);let a=e=>(0,n.C)(s.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:i}=e;return a(t)?(0,l.jsx)(l.Fragment,{children:i}):null}},94799:function(e,t,i){"use strict";i.d(t,{k:function(){return s}});var l=i(76649);let n=e=>(0,l.Ln)({id:"string"},e),s=e=>(null!=e?e:[]).filter(n)},30320:function(e,t,i){"use strict";i.d(t,{m:function(){return r}});var l=i(27378),n=i(25980),s=i(41841),a=i(32885),o=i(94799);let r=e=>{let{resourceFidesKey:t,resourceType:i}=e,{errorAlert:r}=(0,s.VY)(),{plus:d}=(0,n.hz)(),u=(0,l.useMemo)(()=>null!=t?t:"",[]),c=(0,a.YU)(!0,{skip:!d}),m=(0,a.VN)(i,{skip:!d}),{data:g,isLoading:p,error:x,isError:f}=(0,a.PV)(null!=t?t:"",{skip:""!==u&&!(d&&u)}),[h]=(0,a._D)(),v=c.isLoading||m.isLoading||p,C=(0,l.useMemo)(()=>new Map((0,o.k)(c.data).map(e=>{var t;return[e.id,{...e,options:(null!==(t=e.allowed_values)&&void 0!==t?t:[]).map(e=>({value:e,label:e}))}]})),[c.data]),_=(0,l.useMemo)(()=>{var e;return null===(e=m.data)||void 0===e?void 0:e.filter(e=>e.active)},[m.data]),y=(0,l.useMemo)(()=>new Map((0,o.k)(_).map(e=>[e.id,e])),[_]),j=(0,l.useMemo)(()=>f&&(null==x?void 0:x.status)===404?new Map:new Map((0,o.k)(g).map(e=>[e.custom_field_definition_id,e])),[g,f,x]),b=(0,l.useMemo)(()=>{let e=[...y.keys()];return e.sort(),e},[y]),T=(0,l.useMemo)(()=>{let e={};return _&&j&&_.forEach(t=>{let i=j.get(t.id||"");i&&(t.allow_list_id&&"string[]"===t.field_type?e[i.custom_field_definition_id]=i.value:e[i.custom_field_definition_id]=i.value.toString())}),e},[_,j]),S=(0,l.useCallback)(async e=>{if(!d)return;let l="fides_key"in e&&""!==e.fides_key?e.fides_key:t;if(!l)return;let{customFieldValues:n}=e;if(!n||0===Object.keys(n).length)return;let s=[],a=[];b.forEach(e=>{let t=j.get(e),i=n[e];void 0===i||""===i||Array.isArray(i)&&0===i.length?(null==t?void 0:t.id)&&a.push(t.id):s.push({custom_field_definition_id:e,resource_id:l,id:null==t?void 0:t.id,value:i})});try{await h({resource_type:i,resource_id:l,upsert:s,delete:a})}catch(e){r("One or more custom fields have failed to save, please try again."),console.error(e)}},[d,j,r,t,b,h,i]);return{customFieldValues:T,definitionIdToCustomField:j,idToAllowListWithOptions:C,idToCustomFieldDefinition:y,isEnabled:d,isLoading:v,sortedCustomFieldDefinitionIds:b,upsertCustomFields:S}}},95346:function(e,t,i){"use strict";i.d(t,{uc:function(){return h},Hn:function(){return r},Uv:function(){return a},C7:function(){return d},mZ:function(){return f.m}});var l,n,s,a,o=i(21910);(l=s||(s={}))[l.CREATE_CUSTOM_FIELDS=0]="CREATE_CUSTOM_FIELDS",l[l.CREATE_CUSTOM_LISTS=1]="CREATE_CUSTOM_LISTS",l[l.CHOOSE_FROM_LIBRARY=2]="CHOOSE_FROM_LIBRARY",o.AL.STRING,o.AL.STRING,o.AL.STRING_,(n=a||(a={})).SINGLE_SELECT="singleSelect",n.MULTIPLE_SELECT="multipleSelect",n.LOCATION_SELECT="locationSelect",n.OPEN_TEXT="openText";let r=[{label:"Single select",value:"singleSelect"},{label:"Multiple select",value:"multipleSelect"},{label:"Location select",value:"locationSelect"},{label:"Open Text",value:"openText"}],d=[{label:"taxonomy:".concat(o.P6.DATA_CATEGORY),value:o.P6.DATA_CATEGORY},{label:"taxonomy:".concat(o.P6.DATA_SUBJECT),value:o.P6.DATA_SUBJECT},{label:"taxonomy:".concat(o.P6.DATA_USE),value:o.P6.DATA_USE},{label:"".concat(o.P6.SYSTEM,":information"),value:o.P6.SYSTEM},{label:"system:data use",value:o.P6.PRIVACY_DECLARATION}];var u=i(24246),c=i(96306),m=i(34090),g=i(30234),p=i(97181),x=i(40324),f=i(30320);let h=e=>{let{resourceFidesKey:t,resourceType:i}=e,{idToAllowListWithOptions:l,idToCustomFieldDefinition:n,isEnabled:s,isLoading:a,sortedCustomFieldDefinitionIds:r}=(0,f.m)({resourceFidesKey:t,resourceType:i});return s&&0!==r.length?(0,u.jsx)(g.Z,{heading:"Custom fields",children:(0,u.jsx)(c.kCb,{flexDir:"column","data-testid":"custom-fields-list",children:(0,u.jsx)(c.kCb,{flexDir:"column",gap:"24px",children:a?(0,u.jsx)(c.M5Y,{children:(0,u.jsx)(c.$jN,{})}):r.length>0&&(0,u.jsx)(c.kCb,{flexDirection:"column",gap:"12px",paddingBottom:"24px",children:r.map(e=>{let t=n.get(e);if(!t)return null;let i="customFieldValues.".concat(t.id);if(!t.allow_list_id&&t.field_type===o.AL.STRING)return(0,u.jsx)(m.gN,{name:i,children:e=>{let{field:i}=e;return(0,u.jsx)(x.j0,{...i,label:t.name,tooltip:t.description,variant:"stacked"})}},e);let s=l.get(t.allow_list_id);if(!s)return null;let{options:a}=s;return(0,u.jsx)(p.d,{name:i,allowClear:!0,mode:t.field_type!==o.AL.STRING?"multiple":void 0,label:t.name,options:a,tooltip:t.description,layout:"stacked",className:"w-full"},e)})})})})}):null};i(94799)},97181:function(e,t,i){"use strict";i.d(t,{d:function(){return d}});var l=i(24246),n=i(96306),s=i(34090),a=i(27378),o=i(46238),r=i(40324);let d=e=>{let{name:t,label:i,labelProps:d,tooltip:u,isRequired:c,layout:m="inline",helperText:g,...p}=e,[x,f,{setValue:h}]=(0,s.U$)(t),v=!!(f.touched&&f.error),[C,_]=(0,a.useState)("");x.value||"tags"!==p.mode&&"multiple"!==p.mode||(x.value=[]),"tags"===p.mode&&"string"==typeof x.value&&(x.value=[x.value]);let y="tags"===p.mode?(e,t)=>e?e.value!==C||x.value.includes(C)?p.optionRender?p.optionRender(e,t):e.label:'Create "'.concat(C,'"'):void 0:p.optionRender||void 0,j=e=>{_(e),p.onSearch&&p.onSearch(e)},b=(e,t)=>{h(e),p.onChange&&p.onChange(e,t)};return"inline"===m?(0,l.jsx)(n.NIc,{isInvalid:v,isRequired:c,children:(0,l.jsxs)(n.rjZ,{templateColumns:i?"1fr 3fr":"1fr",children:[i?(0,l.jsx)(r.__,{htmlFor:p.id||t,...d,children:i}):null,(0,l.jsxs)(n.jqI,{align:"center",children:[(0,l.jsxs)(n.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,l.jsx)(n.WPr,{...x,id:p.id||t,"data-testid":"controlled-select-".concat(x.name),...p,optionRender:y,onSearch:"tags"===p.mode?j:void 0,onChange:b,value:x.value||void 0,status:v?"error":void 0}),g&&(0,l.jsx)(n.Q6r,{children:g}),(0,l.jsx)(r.Bc,{isInvalid:v,message:f.error,fieldName:x.name})]}),(0,l.jsx)(o.b,{label:u,className:v?"mt-2 self-start":void 0})]})]})}):(0,l.jsx)(n.NIc,{isInvalid:v,isRequired:c,children:(0,l.jsxs)(n.gCW,{alignItems:"start",children:[(0,l.jsxs)(n.jqI,{align:"center",children:[i?(0,l.jsx)(r.__,{htmlFor:p.id||t,fontSize:"xs",my:0,mr:1,...d,children:i}):null,(0,l.jsx)(o.b,{label:u})]}),(0,l.jsx)(n.WPr,{...x,id:p.id||t,"data-testid":"controlled-select-".concat(x.name),...p,optionRender:y,onSearch:"tags"===p.mode?j:void 0,onChange:b,value:x.value||void 0,status:v?"error":void 0}),g&&(0,l.jsx)(n.Q6r,{style:{marginTop:0},children:g}),(0,l.jsx)(r.Bc,{isInvalid:v,message:f.error,fieldName:x.name})]})})}},10342:function(e,t,i){"use strict";var l=i(24246),n=i(96306),s=i(46238);t.Z=e=>{let{title:t,tooltip:i,children:a,...o}=e;return(0,l.jsxs)(n.xuv,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...o,children:[(0,l.jsxs)(n.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,i?(0,l.jsx)(n.xvT,{as:"span",mx:1,children:(0,l.jsx)(s.b,{label:i})}):void 0]}),(0,l.jsx)(n.Kqy,{p:6,spacing:6,children:a})]})}},70788:function(e,t,i){"use strict";i.d(t,{m:function(){return d}});var l=i(24246),n=i(96306),s=i(79894),a=i.n(s),o=i(27378);let{Text:r}=n.AntTypography,d=e=>{let{items:t,...i}=e,s=(0,o.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let s=i===t.length-1,o={...e},d=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,l.jsx)(r,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,id:s?"breadcrumb-current-page":void 0,children:o.title})),d)?o.title=(0,l.jsx)(n.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,l.jsx)(a(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,l.jsx)(n.zrq,{items:s,...i})}},42478:function(e,t,i){"use strict";i.d(t,{FU:function(){return d},JE:function(){return n},Ki:function(){return c},SU:function(){return m},W:function(){return g},h9:function(){return s},jc:function(){return l},qt:function(){return r},sn:function(){return u}});let{useGetEmailInviteStatusQuery:l,useGetActiveMessagingProviderQuery:n,useCreateMessagingConfigurationMutation:s,useCreateMessagingConfigurationSecretsMutation:a,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:r,useGetMessagingConfigurationByKeyQuery:d,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:c,useCreateTestConnectionMessageMutation:m,useDeleteMessagingConfigurationByKeyMutation:g}=i(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,i,l)=>{let n=await l({url:"messaging/default/active"});return n.error&&404===n.error.status?{data:null}:n},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},30234:function(e,t,i){"use strict";var l=i(24246),n=i(96306);t.Z=e=>{let{heading:t,HeadingButton:i,children:s}=e;return(0,l.jsx)(n.Kqy,{spacing:4,children:(0,l.jsxs)(n.xuv,{maxWidth:"720px",border:"1px",borderColor:"gray.200",borderRadius:6,overflow:"visible",mt:6,children:[(0,l.jsxs)(n.xuv,{backgroundColor:"gray.50",px:6,py:4,display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px",borderColor:"gray.200",borderTopRadius:6,children:[(0,l.jsx)(n.X6q,{as:"h3",size:"xs",children:t}),i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.LZC,{}),(0,l.jsx)(i,{})]}):null]}),(0,l.jsx)(n.Kqy,{spacing:4,px:6,py:6,children:s})]})})}},78422:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return X}});var l=i(24246),n=i(77213),s=i(96306),a=i(27378),o=i(58754),r=i(92222),d=i(59003),u=i(16134),c=i(812),m=i(19904),g=i(47935),p=i(46628),x=i(72625),f=i(21910);let h=new Map([["string","Single Select"],["string[]","Multi Select"],["open-text","Open Text"]]),v=new Map([[f.P6.SYSTEM,"system:information"],[f.P6.DATA_USE,"taxonomy:data use"],[f.P6.DATA_CATEGORY,"taxonomy:data category"],[f.P6.DATA_SUBJECT,"taxonomy:data subject"],[f.P6.PRIVACY_DECLARATION,"system:data use"]]);var C=i(32885);let _=e=>{var t;let i=null!==(t=v.get(e.getValue()))&&void 0!==t?t:e.getValue();return(0,l.jsx)(x.G3,{...e,value:i})},y=e=>{let{row:t,getValue:i}=e,n=t.original.allow_list_id?i():"open-text",s=h.get(n)||n;return(0,l.jsx)(x.A4,{value:s})},j=e=>{let{row:t,getValue:i,isDisabled:n}=e,s=!!i(),[a]=(0,C.yM)(),o=async e=>a({...t.original,active:e});return(0,l.jsx)(x.S1,{enabled:s,onToggle:o,title:"Disable custom field",message:"Are you sure you want to disable this custom field?",isDisabled:n,"aria-label":s?"Disable custom field":"Enable custom field"})};var b=i(56358),T=i(58452);let S=e=>{let{customField:t,onEdit:i,onDelete:n,...a}=e,o=(0,s.qY0)();return(0,l.jsxs)(s.xuv,{...a,children:[(0,l.jsx)(s.wpx,{"aria-label":"Edit property","data-testid":"edit-property-button",size:"small",className:"mr-[10px]",icon:(0,l.jsx)(s.dY8,{}),onClick:e=>{e.stopPropagation(),i(t,e)}}),(0,l.jsx)(s.wpx,{"aria-label":"Delete property","data-testid":"delete-property-button",size:"small",className:"mr-[10px]",icon:(0,l.jsx)(b.q,{}),onClick:e=>{e.stopPropagation(),o.onOpen()}}),(0,l.jsx)(T.Z,{isOpen:o.isOpen,onClose:o.onClose,onConfirm:()=>{n(t),o.onClose()},title:"Delete custom field",message:(0,l.jsx)(s.xvT,{color:"gray.500",children:"Are you sure you want to delete this custom field? This will remove the custom field and all stored values and this action can't be undone."}),continueButtonText:"Confirm",isCentered:!0,icon:(0,l.jsx)(s.aNP,{})})]})};var w=i(34090),E=i(55484),L=i(95346),M=i(41841);let I={color:"gray.600",fontSize:"14px",fontWeight:"semibold",minWidth:"150px"};var A=e=>{let{customLabelProps:t,disabled:i=!1,isRequired:n=!1,label:a,type:o="text",placeholder:r,...d}=e,[u,c]=(0,w.U$)(d),{id:m,name:g,autoFocus:p}=d,x="custom-input-".concat(u.name);return(0,l.jsxs)(s.NIc,{display:"flex",isRequired:n,isInvalid:!!(c.error&&c.touched),children:[a&&(0,l.jsx)(s.lXp,{htmlFor:m||g,...t||I,children:a}),(0,l.jsxs)(s.gCW,{align:"flex-start",w:"inherit",children:["number"===o&&(0,l.jsxs)(s.Y2U,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,l.jsx)(s.zuI,{...u,autoComplete:"off",autoFocus:p,"data-testid":x}),(0,l.jsxs)(s.FiK,{children:[(0,l.jsx)(s.WQu,{}),(0,l.jsx)(s.Y_d,{})]})]}),"text"===o&&(0,l.jsx)(s.IIB,{...u,autoComplete:"off",autoFocus:p,color:"gray.700",isDisabled:i,placeholder:r,size:"sm","data-testid":x}),"textarea"===o&&(0,l.jsx)(s.gxH,{...u,autoComplete:"off",autoFocus:p,color:"gray.700",placeholder:r,resize:"none",size:"sm",value:u.value||"","data-testid":x}),(0,l.jsx)(s.J1D,{children:c.error})]})]})};let R=(0,s.IUT)({displayName:"AddIcon",viewBox:"0 0 10 10",path:(0,l.jsx)("path",{d:"M4.33331 4.33398V0.333984H5.66665V4.33398H9.66665V5.66732H5.66665V9.66732H4.33331V5.66732H0.333313V4.33398H4.33331Z",fill:"currentColor"})});var N=i(10342),k=i(95492),P=i(97181);let O={...I,minWidth:"unset"},U=e=>{let{values:t,validationSchema:i,errors:n,dirty:o,isValid:r,isSubmitting:d,isLoading:u,onClose:c,handleDropdownChange:m,isEditing:g}=e,{validateForm:p}=(0,w.u6)();return(0,a.useEffect)(()=>{p()},[i,p]),(0,l.jsxs)(w.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[(0,l.jsx)(s.xuv,{py:3,children:(0,l.jsxs)(N.Z,{title:"Field Information",children:[(0,l.jsx)(A,{isRequired:!0,label:"Name",name:"name",customLabelProps:O}),(0,l.jsx)(A,{label:"Description",name:"description",customLabelProps:O}),(0,l.jsx)(P.d,{label:"Location",name:"resource_type",options:L.C7,labelProps:O,disabled:g})]})}),(0,l.jsx)(s.xuv,{py:3,children:(0,l.jsxs)(N.Z,{title:"Configuration",children:[(0,l.jsx)(P.d,{label:"Field Type",name:"field_type",labelProps:O,options:L.Hn,onChange:m}),t.field_type!==L.Uv.OPEN_TEXT&&t.field_type!==L.Uv.LOCATION_SELECT?(0,l.jsx)(s.kCb,{flexDirection:"column",gap:"12px",paddingTop:"6px",paddingBottom:"24px",children:(0,l.jsx)(w.F2,{name:"allow_list.allowed_values",render:e=>{let{allowed_values:i}=t.allow_list;return(0,l.jsxs)(s.kCb,{flexDirection:"column",gap:"6",pl:"6",children:[(0,l.jsx)(s.kCb,{flexDirection:"column",children:i.map((t,n)=>(0,l.jsxs)(s.kCb,{flexGrow:1,gap:"3",mt:n>0?3:void 0,children:[(0,l.jsx)(A,{customLabelProps:{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",minW:"126px",pr:"8px"},isRequired:!0,label:"List item ".concat(n+1),name:"allow_list.allowed_values[".concat(n,"]")}),(0,l.jsx)(s.wpx,{"aria-label":"Remove this list value","data-testid":"remove-list-value-btn-".concat(n),icon:(0,l.jsx)(k.l,{}),disabled:i.length<=1,onClick:()=>e.remove(n),type:"text"})]},n))}),(0,l.jsxs)(s.kCb,{alignItems:"center",children:[(0,l.jsx)(s.xvT,{color:"gray.600",fontSize:"xs",fontWeight:"500",lineHeight:"16px",pr:"8px",children:"Add a list value"}),(0,l.jsx)(s.wpx,{"aria-label":"Add a list value","data-testid":"add-list-value-btn",icon:(0,l.jsx)(R,{h:"7px",w:"7px"}),onClick:()=>{e.push("")},size:"small"}),0===i.length&&(null==n?void 0:n.allow_list)?(0,l.jsx)(s.xvT,{color:"red.500",pl:"18px",size:"sm",children:n.allow_list.allowed_values}):null]})]})}})}):null]})}),(0,l.jsxs)(s.kCb,{justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(s.wpx,{onClick:c,disabled:u||d,className:"mr-3","data-testid":"cancel-btn",children:"Cancel"}),(0,l.jsx)(s.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",loading:u,disabled:!o||!r||d,children:"Save"})]})]})},q={description:"",field_type:L.Uv.OPEN_TEXT,name:"",resource_type:f.P6.SYSTEM,allow_list:{name:"",description:"",allowed_values:[]}},D=E.IX(E.Z_().optional().label("allowed_values")),H=E.IX(E.Z_().required("List item is required")).min(1,"Must add at least one list value").label("allowed_values"),F=E.Ry().shape({name:E.Z_().required("Name is required").trim(),allow_list:E.Ry().shape({allowed_values:D})}),V=E.Ry().shape({name:E.Z_().required("Name is required").trim(),allow_list:E.Ry().shape({allowed_values:H})}),z=(e,t)=>{var i,l,n;let s;if(!e)return;e.field_type!==f.AL.STRING||e.allow_list_id||(s=L.Uv.OPEN_TEXT),e.field_type===f.AL.STRING&&e.allow_list_id&&(s=L.Uv.SINGLE_SELECT),e.field_type===f.AL.STRING_&&e.allow_list_id&&(s=L.Uv.MULTIPLE_SELECT);let a=t?{name:null!==(i=t.name)&&void 0!==i?i:"",description:null!==(l=t.description)&&void 0!==l?l:"",allowed_values:null!==(n=t.allowed_values)&&void 0!==n?n:[]}:q.allow_list;return{...e,field_type:s||L.Uv.OPEN_TEXT,allow_list:a}},Z=e=>{let{isOpen:t,onClose:i,isLoading:n,customField:o}=e,{errorAlert:r,successAlert:d}=(0,M.VY)(),[u]=(0,C.Ld)(),[m]=(0,C.yM)(),[g]=(0,C.Nt)(),{data:p,isLoading:x}=(0,C.vA)(null==o?void 0:o.allow_list_id,{skip:!(null==o?void 0:o.allow_list_id)}),[h,v]=(0,a.useState)(F);if(x||!t)return null;let _=z(o,p),y=!!_,j=e=>{e===L.Uv.OPEN_TEXT||e===L.Uv.LOCATION_SELECT?v(F):v(V)},b=async e=>{if([L.Uv.SINGLE_SELECT,L.Uv.MULTIPLE_SELECT].includes(e.field_type)){var t,l;if(new Set(null===(t=e.allow_list)||void 0===t?void 0:t.allowed_values.map(e=>e.toLowerCase().trim()).map(e=>e)).size<e.allow_list.allowed_values.length){r("List item value must be unique");return}let{allow_list:i}=e;e.allow_list_id&&(i.id=e.allow_list_id),i.name||(i.name=Date.now().toString()+Math.random().toString());let n=await g(i);(0,c.D4)(n)||e.allow_list_id||(e.allow_list_id=null===(l=n.data)||void 0===l?void 0:l.id)}(e.field_type===L.Uv.OPEN_TEXT||e.field_type===L.Uv.LOCATION_SELECT)&&(e.allow_list_id=void 0),[L.Uv.SINGLE_SELECT,L.Uv.OPEN_TEXT,L.Uv.LOCATION_SELECT].includes(e.field_type)&&(e.field_type=f.AL.STRING),e.field_type===L.Uv.MULTIPLE_SELECT&&(e.field_type=f.AL.STRING_);let n={...e};delete n.allow_list;let s=o?await m(n):await u(n);(0,c.D4)(s)?r((0,c.e$)(s.error),"Custom field has failed to save due to the following:"):(i(),d("Custom field successfully saved"))};return(0,l.jsxs)(s.u_l,{id:"custom-field-modal-hello-world",isOpen:t,onClose:i,size:"lg",returnFocusOnClose:!1,isCentered:!0,children:[(0,l.jsx)(s.ZAr,{}),(0,l.jsxs)(s.hzk,{id:"modal-content","data-testid":"custom-field-modal",maxHeight:"80%",overflowY:"auto",children:[(0,l.jsx)(s.xBx,{id:"modal-header",fontWeight:"semibold",lineHeight:5,fontSize:"sm",py:"18px",px:6,height:"56px",backgroundColor:"gray.50",borderColor:"gray.200",borderWidth:"0px 0px 1px 1p",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",boxSizing:"border-box",children:o?"Manage Custom Field":"Add a custom field"}),(0,l.jsx)(s.fef,{px:6,py:0,children:(0,l.jsx)(w.J9,{initialValues:_||q,validationSchema:h,onSubmit:b,enableReinitialize:!0,validateOnChange:!0,children:e=>(0,l.jsx)(U,{isEditing:y,validationSchema:h,isLoading:n,onClose:i,handleDropdownChange:j,...e})})})]})]})},W="Add a custom field",B=()=>(0,l.jsx)(s.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsxs)(s.gCW,{children:[(0,l.jsx)(s.xvT,{fontSize:"md",fontWeight:"600",children:"It looks like it’s your first time here!"}),(0,l.jsxs)(s.xvT,{fontSize:"sm",children:["You haven’t created any custom fields yet.",(0,l.jsx)("br",{}),"To create a custom field, click on the"," ",(0,l.jsxs)("strong",{children:['"',W,'"']})," button"]})]})}),G=(0,r.Cl)(),Y=e=>{let{...t}=e,i=(0,s.pmc)(),{isLoading:n}=(0,C.GH)(),o=(0,u.C)(C.fN),[x]=(0,C.UF)(),{isOpen:h,onClose:v,onOpen:b}=(0,s.qY0)(),[T,w]=(0,a.useState)(),[E,L]=(0,a.useState)(),M=(0,m.Tg)([f.Sh.CUSTOM_FIELD_UPDATE]),I=(0,m.Tg)([f.Sh.CUSTOM_FIELD_DELETE]),A=e=>{M&&(w(e),b())},R=async e=>{if(I&&e.id){let t=await x({id:e.id});if((0,c.D4)(t)){i((0,p.Vo)((0,c.e$)(t.error)));return}i((0,p.t5)("Custom field deleted"))}},N=(0,a.useMemo)(()=>[G.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(g.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(g.Rr,{value:"Label",...e})}),G.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(g.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(g.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),G.accessor(e=>e.field_type,{id:"field_type",cell:y,header:e=>(0,l.jsx)(g.Rr,{value:"Field Type",...e})}),G.accessor(e=>e.resource_type,{id:"resource_type",cell:_,header:e=>(0,l.jsx)(g.Rr,{value:"Locations",...e})}),M&&G.accessor(e=>e.active,{id:"enable",cell:j,header:e=>(0,l.jsx)(g.Rr,{value:"Enable",...e}),meta:{disableRowClick:!0}}),(M||I)&&G.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e;return(0,l.jsx)(S,{customField:t.original,onEdit:A,onDelete:R})},meta:{disableRowClick:!0}})].filter(Boolean),[I,M]),k=(0,d.b7)({getCoreRowModel:(0,r.sC)(),getFilteredRowModel:(0,r.vL)(),getSortedRowModel:(0,r.tj)(),onGlobalFilterChange:L,globalFilterFn:"includesString",columns:N,data:o,state:{globalFilter:E},columnResizeMode:"onChange"});return(0,l.jsxs)(s.xuv,{...t,children:[(0,l.jsx)(s.xuv,{maxWidth:600,children:(0,l.jsx)(s.xvT,{mb:10,fontSize:"sm",children:o.length>0?"Custom fields enable you to capture metrics specific to your organization and have those metrics appear in the data map and in reports.":"Custom fields provide organizations with the capability to capture metrics that are unique to their specific needs, allowing them to create customized reports. These fields can be added to either systems or elements within a taxonomy, and once added, they become reportable fields that are visible on the data map."})}),(0,l.jsxs)(s.xuv,{"data-testid":"custom-fields-page",children:[(0,l.jsxs)(g.Q$,{children:[(0,l.jsx)(g.HO,{globalFilter:E,setGlobalFilter:L,placeholder:"Search for a custom field"}),(0,l.jsx)(s.Ugi,{alignItems:"center",spacing:4,children:(0,l.jsx)(()=>(0,l.jsx)(m.ZP,{scopes:[f.Sh.CUSTOM_FIELD_DEFINITION_CREATE],children:(0,l.jsx)(s.wpx,{type:"primary","data-testid":"add-custom-field-btn",onClick:b,children:W})}),{})})]}),n?(0,l.jsx)(s.xuv,{p:2,borderWidth:1,children:(0,l.jsx)(g.I4,{rowHeight:26,numRows:10})}):(0,l.jsx)(g.ZK,{tableInstance:k,onRowClick:M?A:void 0,emptyTableNotice:(0,l.jsx)(B,{}),enableSorting:!0}),h&&(0,l.jsx)(Z,{customField:T,isOpen:h,onClose:()=>{w(void 0),v()},isLoading:!1})]})]})};var X=()=>(0,l.jsx)(n.Z,{title:"Custom fields",children:(0,l.jsxs)(s.xuv,{"data-testid":"custom-fields-management",children:[(0,l.jsx)(o.Z,{heading:"Custom fields"}),(0,l.jsx)(Y,{})]})})}},function(e){e.O(0,[431,1841,2888,9774,179],function(){return e(e.s=70378)}),_N_E=e.O()}]);