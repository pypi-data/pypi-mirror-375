(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8687],{69489:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/privacy-requests",function(){return r(26819)}])},77213:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(24246),a=r(96306),i=r(88038),s=r.n(i),d=r(86677);r(27378);var l=r(25980),o=r(90867),c=r(77830),u=()=>{let e=(0,d.useRouter)();return(0,n.jsx)(a.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,n.jsxs)(a.xuv,{children:[(0,n.jsxs)(a.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,n.jsx)(a.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,n.jsx)(a.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,n.jsxs)(a.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:r,padded:i=!0,mainProps:c}=e,p=(0,l.hz)(),x=(0,d.useRouter)(),h="/privacy-requests"===x.pathname||"/datastore-connection"===x.pathname,v=!(p.flags.privacyRequestsConfiguration&&h),{data:m}=(0,o.JE)(void 0,{skip:v}),{data:f}=(0,o.PW)(void 0,{skip:v}),y=p.flags.privacyRequestsConfiguration&&(!m||!f)&&h;return(0,n.jsxs)(a.kCb,{"data-testid":r,direction:"column",h:"100vh",children:[(0,n.jsxs)(s(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(a.kCb,{as:"main",direction:"column",py:i?6:0,px:i?10:0,h:i?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[y?(0,n.jsx)(u,{}):null,t]})]})}},10342:function(e,t,r){"use strict";var n=r(24246),a=r(96306),i=r(46238);t.Z=e=>{let{title:t,tooltip:r,children:s,...d}=e;return(0,n.jsxs)(a.xuv,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...d,children:[(0,n.jsxs)(a.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,r?(0,n.jsx)(a.xvT,{as:"span",mx:1,children:(0,n.jsx)(i.b,{label:r})}):void 0]}),(0,n.jsx)(a.Kqy,{p:6,spacing:6,children:s})]})}},26819:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(24246),a=r(77213),i=r(58754),s=r(96306),d=r(34090),l=r(55484),o=r(10342),c=r(40324),u=r(812),p=r(41841);let{useGetPrivacyRequestRedactionPatternsQuery:x,useUpdatePrivacyRequestRedactionPatternsMutation:h}=r(78780).u.injectEndpoints({endpoints:e=>({getPrivacyRequestRedactionPatterns:e.query({query:()=>({url:"privacy-request/redaction-patterns",method:"GET"}),providesTags:["Privacy Request Redaction Patterns"]}),updatePrivacyRequestRedactionPatterns:e.mutation({query:e=>({url:"privacy-request/redaction-patterns",method:"PUT",body:e}),invalidatesTags:["Privacy Request Redaction Patterns"]})})}),v=e=>!!(e&&e.trim().length>0),m=l.Ry().shape({patterns:l.IX().nullable().of(l.Ry().shape({id:l.Z_().required(),value:l.Z_().required().test("is-valid-pattern","Pattern cannot be empty",v).label("Pattern")}))});var f=()=>{let{errorAlert:e,successAlert:t}=(0,p.VY)(),{data:r}=x(void 0),[a,{isLoading:i}]=h(),l=async r=>{let n=r.patterns.filter(e=>v(e.value)).map(e=>e.value.trim()),i=await a({patterns:n});(0,u.D4)(i)?e((0,u.e$)(i.error),"Failed to update privacy request redaction patterns"):t("Privacy request redaction patterns updated successfully.")},f={patterns:((null==r?void 0:r.patterns)||[]).map((e,t)=>({id:"pattern-".concat(t),value:e}))};return(0,n.jsx)(s.xuv,{"data-testid":"privacy-request-redaction-patterns",children:(0,n.jsxs)(s.xuv,{maxW:"600px",children:[(0,n.jsx)(s.xvT,{fontSize:"sm",pb:6,children:"List of regex patterns used to mask dataset, collection, and field names in DSR package reports. Names matching these patterns will be replaced with position-based identifiers (e.g. dataset_1, collection_2, field_3)."}),(0,n.jsx)(o.Z,{"data-testid":"privacy-request-redaction-patterns-form",title:"Regex patterns",children:(0,n.jsx)(d.J9,{initialValues:f,enableReinitialize:!0,onSubmit:l,validationSchema:m,validateOnChange:!0,children:e=>{let{dirty:t,values:r,isValid:a}=e;return(0,n.jsxs)(d.l0,{children:[(0,n.jsx)(d.F2,{name:"patterns",render:e=>(0,n.jsxs)(s.kCb,{flexDir:"column",children:[r.patterns.map((t,r)=>(0,n.jsxs)(s.kCb,{flexDir:"row",my:3,children:[(0,n.jsx)(c.j0,{variant:"stacked",name:"patterns[".concat(r,"].value"),placeholder:"Enter regex pattern (e.g., sensitive_.*)"}),(0,n.jsx)(s.wpx,{"aria-label":"remove-pattern",className:"z-[2] ml-4",icon:(0,n.jsx)(s.pJl,{}),onClick:()=>{e.remove(r)}})]},t.id)),(0,n.jsx)(s.kCb,{justifyContent:"center",mt:3,children:(0,n.jsx)(s.wpx,{"aria-label":"add-pattern",className:"w-full",onClick:()=>{e.push({id:"pattern-new-".concat(r.patterns.length),value:""})},children:"Add regex pattern +"})})]})}),(0,n.jsx)(s.xuv,{mt:6,textAlign:"right",children:(0,n.jsx)(s.wpx,{htmlType:"submit",type:"primary",disabled:i||!t||!a,loading:i,"data-testid":"save-btn",children:"Save"})})]})}})})]})})},y=()=>(0,n.jsxs)(a.Z,{title:"Privacy request redaction patterns",children:[(0,n.jsx)(i.Z,{heading:"Privacy request redaction patterns"}),(0,n.jsx)(f,{})]})}},function(e){e.O(0,[431,4164,2888,9774,179],function(){return e(e.s=69489)}),_N_E=e.O()}]);