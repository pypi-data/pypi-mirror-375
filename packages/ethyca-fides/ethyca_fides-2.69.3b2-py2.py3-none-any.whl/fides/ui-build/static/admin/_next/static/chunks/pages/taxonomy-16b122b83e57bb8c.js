(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4202],{96586:function(e,t,n){var r=n(57753),i=n(82452),o=n(22115),a=n(38256),s=n(67426);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},36301:function(e,t,n){var r=n(69417),i=n(72470),o=n(66165),a=n(71873),s=n(52556);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},44538:function(e,t,n){var r=n(81822)(n(77400),"Map");e.exports=r},74554:function(e,t,n){var r=n(39448),i=n(7738),o=n(66575),a=n(7238),s=n(38738);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},46151:function(e,t,n){var r=n(81822)(n(77400),"Set");e.exports=r},52485:function(e,t,n){var r=n(74554),i=n(38639),o=n(88379);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},93382:function(e,t,n){var r=n(85638);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},46729:function(e,t,n){var r=n(28338),i=n(99678),o=n(11611),a=n(76532),s=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},75733:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},70830:function(e,t,n){var r=n(76747),i=n(31159),o=n(64373),a=n(37948);e.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},65581:function(e){e.exports=function(e,t){return e.has(t)}},64937:function(e,t,n){var r=n(77400)["__core-js_shared__"];e.exports=r},95899:function(e,t,n){var r=n(54479);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},81822:function(e,t,n){var r=n(46729),i=n(15371);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},15371:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},57753:function(e,t,n){var r=n(35718);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},82452:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},22115:function(e,t,n){var r=n(35718),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},38256:function(e,t,n){var r=n(35718),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},67426:function(e,t,n){var r=n(35718);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},54479:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},99678:function(e,t,n){var r,i=n(64937),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},69417:function(e){e.exports=function(){this.__data__=[],this.size=0}},72470:function(e,t,n){var r=n(93382),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},66165:function(e,t,n){var r=n(93382);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},71873:function(e,t,n){var r=n(93382);e.exports=function(e){return r(this.__data__,e)>-1}},52556:function(e,t,n){var r=n(93382);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},39448:function(e,t,n){var r=n(96586),i=n(36301),o=n(44538);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7738:function(e,t,n){var r=n(95899);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},66575:function(e,t,n){var r=n(95899);e.exports=function(e){return r(this,e).get(e)}},7238:function(e,t,n){var r=n(95899);e.exports=function(e){return r(this,e).has(e)}},38738:function(e,t,n){var r=n(95899);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},35718:function(e,t,n){var r=n(81822)(Object,"create");e.exports=r},64373:function(e,t,n){var r=n(79867),i=n(75733);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},38639:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},88379:function(e){e.exports=function(e){return this.__data__.has(e)}},43735:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},76532:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},85638:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},28338:function(e,t,n){var r=n(99736),i=n(11611);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},43551:function(e,t,n){var r=n(70830);e.exports=function(e,t){return null==e||r(e,t)}},71180:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/taxonomy",function(){return n(62e3)}])},79806:function(e,t,n){"use strict";n.d(t,{Gn:function(){return s},zR:function(){return a}});var r=n(24246),i=n(96306),o=n(56358);let a=e=>{let{title:t}=e;return(0,r.jsx)(i.OXI,{py:0,display:"flex",alignItems:"flex-start",children:(0,r.jsx)(i.xvT,{mr:"2",color:"gray.700",fontSize:"lg",lineHeight:1.8,children:t})})},s=e=>{let{onDelete:t,onEditYaml:n,formId:a,isSaving:s}=e;return(0,r.jsxs)(i.zeN,{justifyContent:"space-between",children:[t?(0,r.jsx)(i.wpx,{"aria-label":"delete",icon:(0,r.jsx)(o.q,{fontSize:"small"}),onClick:t,"data-testid":"delete-btn"}):null,(0,r.jsxs)("div",{className:"flex gap-2",children:[n&&(0,r.jsx)(i.wpx,{onClick:n,"data-testid":"edit-yaml-btn",children:"Edit YAML"}),(0,r.jsx)(i.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",form:a,loading:s,children:"Save"})]})]})};t.ZP=e=>{let{header:t,description:n,isOpen:o,onClose:a,children:s,footer:l}=e;return(0,r.jsxs)(i.dys,{placement:"right",isOpen:o,onClose:a,size:"md",children:[(0,r.jsx)(i.P1B,{}),(0,r.jsxs)(i.scA,{"data-testid":"edit-drawer-content",py:2,children:[(0,r.jsxs)(i.xuv,{display:"flex",justifyContent:"space-between",alignItems:"top",mr:2,py:2,gap:2,children:[(0,r.jsx)(i.xuv,{flex:1,minH:8,children:t}),(0,r.jsx)(i.xuv,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,r.jsx)(i.wpx,{"aria-label":"Close editor",onClick:a,"data-testid":"close-drawer-btn",icon:(0,r.jsx)(i.Two,{fontSize:"smaller"})})})]}),(0,r.jsxs)(i.Ng0,{pt:1,children:[n?(0,r.jsx)(i.xvT,{fontSize:"sm",mb:4,color:"gray.600",children:n}):null,s]}),l]})]})}},18225:function(e,t,n){"use strict";var r=n(24246),i=n(96306);t.Z=e=>{let{alignment:t="center",...n}=e;return(0,r.jsx)(i.kCb,{boxSize:"full",align:"center",justify:t,children:(0,r.jsx)(i.$jN,{color:"primary",...n})})}},56358:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var r=n(24246);let i=(0,n(96306).IUT)({displayName:"TrashCanOutlineIcon",viewBox:"0 0 11 12",path:(0,r.jsx)("path",{d:"M4.5166 1.60859L4.1084 2.21875H7.22363L6.81543 1.60859C6.7832 1.56133 6.72949 1.53125 6.67148 1.53125H4.6584C4.60039 1.53125 4.54668 1.55918 4.51445 1.60859H4.5166ZM7.6748 1.03711L8.46328 2.21875H8.75977H9.79102H9.96289C10.2486 2.21875 10.4785 2.44863 10.4785 2.73438C10.4785 3.02012 10.2486 3.25 9.96289 3.25H9.79102V9.78125C9.79102 10.7309 9.02188 11.5 8.07227 11.5H3.25977C2.31016 11.5 1.54102 10.7309 1.54102 9.78125V3.25H1.36914C1.0834 3.25 0.853516 3.02012 0.853516 2.73438C0.853516 2.44863 1.0834 2.21875 1.36914 2.21875H1.54102H2.57227H2.86875L3.65723 1.03496C3.88066 0.701953 4.25664 0.5 4.6584 0.5H6.67148C7.07324 0.5 7.44922 0.701953 7.67266 1.03496L7.6748 1.03711ZM2.57227 3.25V9.78125C2.57227 10.1615 2.87949 10.4688 3.25977 10.4688H8.07227C8.45254 10.4688 8.75977 10.1615 8.75977 9.78125V3.25H2.57227ZM4.29102 4.625V9.09375C4.29102 9.28281 4.13633 9.4375 3.94727 9.4375C3.7582 9.4375 3.60352 9.28281 3.60352 9.09375V4.625C3.60352 4.43594 3.7582 4.28125 3.94727 4.28125C4.13633 4.28125 4.29102 4.43594 4.29102 4.625ZM6.00977 4.625V9.09375C6.00977 9.28281 5.85508 9.4375 5.66602 9.4375C5.47695 9.4375 5.32227 9.28281 5.32227 9.09375V4.625C5.32227 4.43594 5.47695 4.28125 5.66602 4.28125C5.85508 4.28125 6.00977 4.43594 6.00977 4.625ZM7.72852 4.625V9.09375C7.72852 9.28281 7.57383 9.4375 7.38477 9.4375C7.1957 9.4375 7.04102 9.28281 7.04102 9.09375V4.625C7.04102 4.43594 7.1957 4.28125 7.38477 4.28125C7.57383 4.28125 7.72852 4.43594 7.72852 4.625Z",fill:"currentColor"})})},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(24246),i=n(96306),o=n(88038),a=n.n(o),s=n(86677);n(27378);var l=n(25980),u=n(90867),c=n(42478),d=n(77830),f=()=>{let e=(0,s.useRouter)();return(0,r.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(i.xuv,{children:[(0,r.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(i.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,r.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},h=e=>{let{children:t,title:n,padded:o=!0,mainProps:d}=e,h=(0,l.hz)(),p=(0,s.useRouter)(),m="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,x=!(h.flags.messagingConfiguration&&m),{data:g}=(0,c.JE)(void 0,{skip:x}),{data:v}=(0,u.PW)(void 0,{skip:x}),_=h.flags.messagingConfiguration&&(!g||!v)&&m;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(a(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(i.kCb,{as:"main",direction:"column",py:o?6:0,px:o?10:0,h:o?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[_?(0,r.jsx)(f,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var r=n(24246),i=n(96306),o=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:a=!0,children:s,rightContent:l,style:u,...c}=e;return(0,r.jsxs)("div",{...c,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,r.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(i.lQT,{className:n||s?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,r.jsx)(o.m,{className:s?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),s]})}},19904:function(e,t,n){"use strict";n.d(t,{Tg:function(){return a}});var r=n(24246),i=n(16134),o=n(31793);let a=e=>(0,i.C)(o.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:n}=e;return a(t)?(0,r.jsx)(r.Fragment,{children:n}):null}},94799:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(76649);let i=e=>(0,r.Ln)({id:"string"},e),o=e=>(null!=e?e:[]).filter(i)},30320:function(e,t,n){"use strict";n.d(t,{m:function(){return l}});var r=n(27378),i=n(25980),o=n(41841),a=n(32885),s=n(94799);let l=e=>{let{resourceFidesKey:t,resourceType:n}=e,{errorAlert:l}=(0,o.VY)(),{plus:u}=(0,i.hz)(),c=(0,r.useMemo)(()=>null!=t?t:"",[]),d=(0,a.YU)(!0,{skip:!u}),f=(0,a.VN)(n,{skip:!u}),{data:h,isLoading:p,error:m,isError:x}=(0,a.PV)(null!=t?t:"",{skip:""!==c&&!(u&&c)}),[g]=(0,a._D)(),v=d.isLoading||f.isLoading||p,_=(0,r.useMemo)(()=>new Map((0,s.k)(d.data).map(e=>{var t;return[e.id,{...e,options:(null!==(t=e.allowed_values)&&void 0!==t?t:[]).map(e=>({value:e,label:e}))}]})),[d.data]),y=(0,r.useMemo)(()=>{var e;return null===(e=f.data)||void 0===e?void 0:e.filter(e=>e.active)},[f.data]),T=(0,r.useMemo)(()=>new Map((0,s.k)(y).map(e=>[e.id,e])),[y]),C=(0,r.useMemo)(()=>x&&(null==m?void 0:m.status)===404?new Map:new Map((0,s.k)(h).map(e=>[e.custom_field_definition_id,e])),[h,x,m]),E=(0,r.useMemo)(()=>{let e=[...T.keys()];return e.sort(),e},[T]),j=(0,r.useMemo)(()=>{let e={};return y&&C&&y.forEach(t=>{let n=C.get(t.id||"");n&&(t.allow_list_id&&"string[]"===t.field_type?e[n.custom_field_definition_id]=n.value:e[n.custom_field_definition_id]=n.value.toString())}),e},[y,C]),b=(0,r.useCallback)(async e=>{if(!u)return;let r="fides_key"in e&&""!==e.fides_key?e.fides_key:t;if(!r)return;let{customFieldValues:i}=e;if(!i||0===Object.keys(i).length)return;let o=[],a=[];E.forEach(e=>{let t=C.get(e),n=i[e];void 0===n||""===n||Array.isArray(n)&&0===n.length?(null==t?void 0:t.id)&&a.push(t.id):o.push({custom_field_definition_id:e,resource_id:r,id:null==t?void 0:t.id,value:n})});try{await g({resource_type:n,resource_id:r,upsert:o,delete:a})}catch(e){l("One or more custom fields have failed to save, please try again."),console.error(e)}},[u,C,l,t,E,g,n]);return{customFieldValues:j,definitionIdToCustomField:C,idToAllowListWithOptions:_,idToCustomFieldDefinition:T,isEnabled:u,isLoading:v,sortedCustomFieldDefinitionIds:E,upsertCustomFields:b}}},95346:function(e,t,n){"use strict";n.d(t,{uc:function(){return g},Hn:function(){return l},Uv:function(){return a},C7:function(){return u},mZ:function(){return x.m}});var r,i,o,a,s=n(21910);(r=o||(o={}))[r.CREATE_CUSTOM_FIELDS=0]="CREATE_CUSTOM_FIELDS",r[r.CREATE_CUSTOM_LISTS=1]="CREATE_CUSTOM_LISTS",r[r.CHOOSE_FROM_LIBRARY=2]="CHOOSE_FROM_LIBRARY",s.AL.STRING,s.AL.STRING,s.AL.STRING_,(i=a||(a={})).SINGLE_SELECT="singleSelect",i.MULTIPLE_SELECT="multipleSelect",i.LOCATION_SELECT="locationSelect",i.OPEN_TEXT="openText";let l=[{label:"Single select",value:"singleSelect"},{label:"Multiple select",value:"multipleSelect"},{label:"Location select",value:"locationSelect"},{label:"Open Text",value:"openText"}],u=[{label:"taxonomy:".concat(s.P6.DATA_CATEGORY),value:s.P6.DATA_CATEGORY},{label:"taxonomy:".concat(s.P6.DATA_SUBJECT),value:s.P6.DATA_SUBJECT},{label:"taxonomy:".concat(s.P6.DATA_USE),value:s.P6.DATA_USE},{label:"".concat(s.P6.SYSTEM,":information"),value:s.P6.SYSTEM},{label:"system:data use",value:s.P6.PRIVACY_DECLARATION}];var c=n(24246),d=n(96306),f=n(34090),h=n(30234),p=n(97181),m=n(40324),x=n(30320);let g=e=>{let{resourceFidesKey:t,resourceType:n}=e,{idToAllowListWithOptions:r,idToCustomFieldDefinition:i,isEnabled:o,isLoading:a,sortedCustomFieldDefinitionIds:l}=(0,x.m)({resourceFidesKey:t,resourceType:n});return o&&0!==l.length?(0,c.jsx)(h.Z,{heading:"Custom fields",children:(0,c.jsx)(d.kCb,{flexDir:"column","data-testid":"custom-fields-list",children:(0,c.jsx)(d.kCb,{flexDir:"column",gap:"24px",children:a?(0,c.jsx)(d.M5Y,{children:(0,c.jsx)(d.$jN,{})}):l.length>0&&(0,c.jsx)(d.kCb,{flexDirection:"column",gap:"12px",paddingBottom:"24px",children:l.map(e=>{let t=i.get(e);if(!t)return null;let n="customFieldValues.".concat(t.id);if(!t.allow_list_id&&t.field_type===s.AL.STRING)return(0,c.jsx)(f.gN,{name:n,children:e=>{let{field:n}=e;return(0,c.jsx)(m.j0,{...n,label:t.name,tooltip:t.description,variant:"stacked"})}},e);let o=r.get(t.allow_list_id);if(!o)return null;let{options:a}=o;return(0,c.jsx)(p.d,{name:n,allowClear:!0,mode:t.field_type!==s.AL.STRING?"multiple":void 0,label:t.name,options:a,tooltip:t.description,layout:"stacked",className:"w-full"},e)})})})})}):null};n(94799)},97181:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(24246),i=n(96306),o=n(34090),a=n(27378),s=n(46238),l=n(40324);let u=e=>{let{name:t,label:n,labelProps:u,tooltip:c,isRequired:d,layout:f="inline",helperText:h,...p}=e,[m,x,{setValue:g}]=(0,o.U$)(t),v=!!(x.touched&&x.error),[_,y]=(0,a.useState)("");m.value||"tags"!==p.mode&&"multiple"!==p.mode||(m.value=[]),"tags"===p.mode&&"string"==typeof m.value&&(m.value=[m.value]);let T="tags"===p.mode?(e,t)=>e?e.value!==_||m.value.includes(_)?p.optionRender?p.optionRender(e,t):e.label:'Create "'.concat(_,'"'):void 0:p.optionRender||void 0,C=e=>{y(e),p.onSearch&&p.onSearch(e)},E=(e,t)=>{g(e),p.onChange&&p.onChange(e,t)};return"inline"===f?(0,r.jsx)(i.NIc,{isInvalid:v,isRequired:d,children:(0,r.jsxs)(i.rjZ,{templateColumns:n?"1fr 3fr":"1fr",children:[n?(0,r.jsx)(l.__,{htmlFor:p.id||t,...u,children:n}):null,(0,r.jsxs)(i.jqI,{align:"center",children:[(0,r.jsxs)(i.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,r.jsx)(i.WPr,{...m,id:p.id||t,"data-testid":"controlled-select-".concat(m.name),...p,optionRender:T,onSearch:"tags"===p.mode?C:void 0,onChange:E,value:m.value||void 0,status:v?"error":void 0}),h&&(0,r.jsx)(i.Q6r,{children:h}),(0,r.jsx)(l.Bc,{isInvalid:v,message:x.error,fieldName:m.name})]}),(0,r.jsx)(s.b,{label:c,className:v?"mt-2 self-start":void 0})]})]})}):(0,r.jsx)(i.NIc,{isInvalid:v,isRequired:d,children:(0,r.jsxs)(i.gCW,{alignItems:"start",children:[(0,r.jsxs)(i.jqI,{align:"center",children:[n?(0,r.jsx)(l.__,{htmlFor:p.id||t,fontSize:"xs",my:0,mr:1,...u,children:n}):null,(0,r.jsx)(s.b,{label:c})]}),(0,r.jsx)(i.WPr,{...m,id:p.id||t,"data-testid":"controlled-select-".concat(m.name),...p,optionRender:T,onSearch:"tags"===p.mode?C:void 0,onChange:E,value:m.value||void 0,status:v?"error":void 0}),h&&(0,r.jsx)(i.Q6r,{style:{marginTop:0},children:h}),(0,r.jsx)(l.Bc,{isInvalid:v,message:x.error,fieldName:m.name})]})})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return u}});var r=n(24246),i=n(96306),o=n(79894),a=n.n(o),s=n(27378);let{Text:l}=i.AntTypography,u=e=>{let{items:t,...n}=e,o=(0,s.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let o=n===t.length-1,s={...e},u=s.onClick&&!s.href;return("string"==typeof s.title&&(s.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:o?void 0:400},ellipsis:!o,id:o?"breadcrumb-current-page":void 0,children:s.title})),u)?s.title=(0,r.jsx)(i.wpx,{type:"text",size:"small",icon:s.icon,onClick:s.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:s.title}):(s.icon&&(s.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:s.icon}),s.title]})),s.href&&s.title&&(s.title=(0,r.jsx)(a(),{href:s.href,className:"ant-breadcrumb-link",children:s.title}),delete s.href)),s}),[t]);return(0,r.jsx)(i.zrq,{items:o,...n})}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return u},JE:function(){return i},Ki:function(){return d},SU:function(){return f},W:function(){return h},h9:function(){return o},jc:function(){return r},qt:function(){return l},sn:function(){return c}});let{useGetEmailInviteStatusQuery:r,useGetActiveMessagingProviderQuery:i,useCreateMessagingConfigurationMutation:o,useCreateMessagingConfigurationSecretsMutation:a,useGetMessagingConfigurationDetailsQuery:s,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:c,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:f,useDeleteMessagingConfigurationByKeyMutation:h}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,r)=>{let i=await r({url:"messaging/default/active"});return i.error&&404===i.error.status?{data:null}:i},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},30234:function(e,t,n){"use strict";var r=n(24246),i=n(96306);t.Z=e=>{let{heading:t,HeadingButton:n,children:o}=e;return(0,r.jsx)(i.Kqy,{spacing:4,children:(0,r.jsxs)(i.xuv,{maxWidth:"720px",border:"1px",borderColor:"gray.200",borderRadius:6,overflow:"visible",mt:6,children:[(0,r.jsxs)(i.xuv,{backgroundColor:"gray.50",px:6,py:4,display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px",borderColor:"gray.200",borderTopRadius:6,children:[(0,r.jsx)(i.X6q,{as:"h3",size:"xs",children:t}),n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.LZC,{}),(0,r.jsx)(n,{})]}):null]}),(0,r.jsx)(i.Kqy,{spacing:4,px:6,py:6,children:o})]})})}},59001:function(e,t,n){"use strict";n.d(t,{Ch:function(){return a},Hy:function(){return s},Lo:function(){return i}});var r,i,o=n(21910);let a="root";(r=i||(i={})).DATA_CATEGORIES="Data categories",r.DATA_USES="Data uses",r.DATA_SUBJECTS="Data subjects";let s=e=>{switch(e){case"Data categories":return{UPDATE:o.Sh.DATA_CATEGORY_UPDATE,CREATE:o.Sh.DATA_CATEGORY_CREATE,DELETE:o.Sh.DATA_CATEGORY_DELETE,READ:o.Sh.DATA_CATEGORY_READ};case"Data uses":return{UPDATE:o.Sh.DATA_USE_UPDATE,CREATE:o.Sh.DATA_USE_CREATE,DELETE:o.Sh.DATA_USE_DELETE,READ:o.Sh.DATA_USE_READ};case"Data subjects":return{UPDATE:o.Sh.DATA_SUBJECT_UPDATE,CREATE:o.Sh.DATA_SUBJECT_CREATE,DELETE:o.Sh.DATA_SUBJECT_DELETE,READ:o.Sh.DATA_SUBJECT_READ};default:throw Error("Unknown taxonomy type: ".concat(e))}}},90673:function(e,t,n){"use strict";n.d(t,{Cd:function(){return o},Xl:function(){return a}});var r=n(21910),i=n(59001);let o=(e,t)=>{let n;if(null==t&&e.every(e=>void 0===e.parent_key))n=e;else{let r=null!=t?t:null;n=e.filter(e=>e.parent_key===r)}return n.map(t=>{var n,r;let i=t.fides_key;return{value:t.fides_key,label:""===t.name||null==t.name?t.fides_key:t.name,description:t.description,children:o(e,i),is_default:null!==(n=t.is_default)&&void 0!==n&&n,active:null!==(r=t.active)&&void 0!==r&&r}})},a=e=>{switch(e){case i.Lo.DATA_CATEGORIES:return r.P6.DATA_CATEGORY;case i.Lo.DATA_SUBJECTS:return r.P6.DATA_SUBJECT;case i.Lo.DATA_USES:return r.P6.DATA_USE;default:return}}},62e3:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ey}});var r,i,o=n(24246),a=n(96306),s=n(69238),l=n.n(s),u=n(63662),c=n(27378),d=n(812),f=n(77213),h=n(58754),p=n(19904),m=n(46628),x=n(95346),g=n(56358),v=n(31883),_=n(79806),y=n(59001),T=n(90673),C=n(30002),E=n(28079),j=n(39864),b=e=>{let{taxonomyType:t}=e,[n,r]=(0,j.Vj)(),[i,o]=(0,C.nC)(),[a,s]=(0,E.dk)(),[l]=(0,j.Ti)(),[u]=(0,E.Ql)(),[c]=(0,C.wG)(),[d]=(0,j.jU)(),[f]=(0,E.LG)(),[h]=(0,C.h8)(),[p]=(0,j.K9)(),[m]=(0,E.gu)(),[x]=(0,C.Kv)();return t===y.Lo.DATA_SUBJECTS?{getAllTrigger:i,taxonomyItems:o.data||[],updateTrigger:h,deleteTrigger:x,createTrigger:c}:t===y.Lo.DATA_USES?{getAllTrigger:a,taxonomyItems:s.data||[],updateTrigger:f,deleteTrigger:m,createTrigger:u}:{getAllTrigger:n,taxonomyItems:r.data||[],updateTrigger:d,deleteTrigger:p,createTrigger:l}},A=n(90104),S=n.n(A),I=n(18225),k=n(21910),w=e=>{let{customFields:t,formId:n,form:r}=e,{idToAllowListWithOptions:i,idToCustomFieldDefinition:s,isEnabled:l,isLoading:u,sortedCustomFieldDefinitionIds:c}=t;return l&&0!==c.length?(0,o.jsxs)(a.PPS,{form:r,name:n,initialValues:t.customFieldValues,layout:"vertical","data-testid":"custom-fields-form",children:[(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)(a.AntTypography.Title,{level:3,children:"Custom fields"})}),u?(0,o.jsx)(I.Z,{}):(0,o.jsx)("div",{children:!S()(c)&&(0,o.jsx)("div",{children:c.map(e=>{let t=s.get(e);if(!t)return null;let{id:n,name:r,description:l,allow_list_id:u,field_type:c}=t;if(!u&&c===k.AL.STRING)return(0,o.jsx)(a.PPS.Item,{name:n,label:r,tooltip:l,children:(0,o.jsx)(a.uFc,{})},e);let d=i.get(t.allow_list_id);if(!d)return null;let{options:f}=d;return(0,o.jsx)(a.PPS.Item,{name:n,label:r,tooltip:l,children:(0,o.jsx)(a.WPr,{mode:"string"!==c?"multiple":void 0,allowClear:!0,options:f})},e)})})})]}):null},N=n(43551),D=n.n(N),R=()=>{let e=a.PPS.useFormInstance(),t=a.PPS.useWatch(["rights","values"],e);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.PPS.Item,{label:"Automated Decisions or Profiling",name:"automated_decisions_or_profiling",layout:"horizontal",valuePropName:"checked",children:(0,o.jsx)(a.E_O,{"data-testid":"edit-taxonomy-form_automated-decisions"})}),(0,o.jsx)(a.PPS.Item,{name:["rights","values"],label:"Rights",children:(0,o.jsx)(a.WPr,{mode:"multiple",options:(0,d.MM)(k.ts),"data-testid":"edit-taxonomy-form_rights"})}),t&&!S()(t)&&(0,o.jsx)(a.PPS.Item,{name:["rights","strategy"],label:"Strategy",required:!0,rules:[{required:!0,message:"Please select a strategy"}],children:(0,o.jsx)(a.WPr,{options:(0,d.MM)(k.jX),"data-testid":"edit-taxonomy-form_strategy"})})]})},O=e=>{let{initialValues:t,onSubmit:n,form:r,formId:i,taxonomyType:s,isDisabled:l}=e,u=s===y.Lo.DATA_SUBJECTS;return(0,o.jsxs)(a.PPS,{name:i,initialValues:t,onFinish:e=>{var r,i;let o={...t,...e};(!(null==o?void 0:null===(r=o.rights)||void 0===r?void 0:r.values)||S()(null==o?void 0:null===(i=o.rights)||void 0===i?void 0:i.values))&&D()(o,"rights"),n(o)},layout:"vertical",form:r,children:[(0,o.jsx)(a.PPS.Item,{label:"Name",name:"name",children:(0,o.jsx)(a.uFc,{"data-testid":"edit-taxonomy-form_name",disabled:l})}),(0,o.jsx)(a.PPS.Item,{label:"Description",name:"description",children:(0,o.jsx)(a.uFc.TextArea,{rows:4,"data-testid":"edit-taxonomy-form_description",disabled:l})}),u&&(0,o.jsx)(R,{})]})},P=e=>{let{taxonomyItem:t,taxonomyType:n,onClose:r}=e,i="edit-taxonomy-form",[s]=a.PPS.useForm(),[l]=a.PPS.useForm(),u=(0,a.pmc)(),{isOpen:c,onOpen:f,onClose:h}=(0,a.qY0)(),{updateTrigger:C}=b({taxonomyType:n}),E=(0,x.mZ)({resourceFidesKey:null==t?void 0:t.fides_key,resourceType:(0,T.Xl)(n)}),j=(0,p.Tg)([(0,y.Hy)(n).UPDATE]),A=(0,p.Tg)([(0,y.Hy)(n).DELETE]),S=async e=>{let n=await C(e);if((0,v.D4)(n)){u((0,m.Vo)((0,d.e$)(n.error)));return}if(E.isEnabled){let e=l.getFieldsValue();await E.upsertCustomFields({fides_key:null==t?void 0:t.fides_key,customFieldValues:e})}u((0,m.t5)("Taxonomy successfully updated")),r()},I=async()=>{await C({...t,active:!1}),h(),r()},k=async()=>{await C({...t,active:!0}),h(),r()};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(_.ZP,{isOpen:!!t,onClose:r,header:(0,o.jsx)(_.zR,{title:(null==t?void 0:t.name)||""}),footer:(0,o.jsxs)(a.zeN,{justifyContent:"space-between",children:[(null==t?void 0:t.active)&&A&&(0,o.jsx)(a.esZ,{title:"Delete label",children:(0,o.jsx)(a.wpx,{"aria-label":"delete",icon:(0,o.jsx)(g.q,{fontSize:"small"}),onClick:f,"data-testid":"delete-btn"})}),!(null==t?void 0:t.active)&&j&&(0,o.jsx)(a.esZ,{title:"Enable label",children:(0,o.jsx)(a.wpx,{"aria-label":"enable",onClick:k,"data-testid":"enable-btn",icon:(0,o.jsx)(a.tEF,{fontSize:"small"})})}),(0,o.jsx)("div",{className:"flex gap-2",children:j&&(0,o.jsx)(a.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",form:i,children:"Save"})})]}),children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)(a.AntTypography.Title,{level:3,children:"Details"})}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("span",{className:"w-1/3 shrink-0 text-sm text-gray-500",children:"Fides key:"}),(0,o.jsx)(a.esZ,{title:null==t?void 0:t.fides_key,trigger:"click",children:(0,o.jsx)("span",{className:"flex-1 truncate","data-testid":"edit-drawer-fides-key",children:null==t?void 0:t.fides_key})})]})]}),!!t&&(0,o.jsx)(O,{initialValues:t,onSubmit:S,form:s,formId:i,taxonomyType:n,isDisabled:!j}),E.isEnabled&&!E.isLoading&&(0,o.jsx)(w,{form:l,formId:"custom-fields-form",customFields:E})]}),(0,o.jsx)(a.cVQ,{isOpen:c,onClose:h,onConfirm:I,title:"Delete ".concat(n),message:(0,o.jsx)(a.Kqy,{children:(0,o.jsxs)(a.xvT,{children:["You are about to permanently delete the ",n," ",(0,o.jsx)(a.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from your taxonomy. Are you sure you would like to continue?"]})})})]})};n(51901);var L=n(86298),M=n(3124),F=n.n(M);(r=i||(i={})).DEFAULT="DEFAULT",r.ACTIVE_HOVER="ACTIVE_HOVER",r.PARENT_OF_HOVER="PARENT_OF_HOVER",r.CHILD_OF_HOVER="CHILD_OF_HOVER",r.SIBLING_OF_HOVER="SIBLING_OF_HOVER",r.INACTIVE="INACTIVE";let V=(0,c.createContext)({activeNodeKey:null,setActiveNodeKey:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},getNodeHoverStatus:()=>"DEFAULT"}),U=e=>{let{children:t}=e,[n,r]=(0,c.useState)(null),i=(0,c.useCallback)(e=>{e!==n&&r(e)},[n]),a=(0,c.useCallback)(()=>{r(null)},[]),s=(0,c.useCallback)(e=>n?e===n?"ACTIVE_HOVER":n.startsWith("".concat(e,"."))||e===y.Ch?"PARENT_OF_HOVER":e.startsWith("".concat(n,"."))||n===y.Ch?"CHILD_OF_HOVER":n.split(".").slice(0,-1).join(".")===e.split(".").slice(0,-1).join(".")?"SIBLING_OF_HOVER":"INACTIVE":"DEFAULT",[n]),l=(0,c.useMemo)(()=>({activeNodeKey:n,setActiveNodeKey:r,onMouseEnter:i,onMouseLeave:a,getNodeHoverStatus:s}),[n,r,i,a,s]);return(0,o.jsx)(V.Provider,{value:l,children:t})};function z(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function H(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=q)):void 0===t&&(t=B);for(var n,r,i,o,a,s=new K(e),l=[s];n=l.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new K(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(G)}function B(e){return e.children}function q(e){return Array.isArray(e)?e[1]:null}function Z(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function G(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function K(e){this.data=e,this.depth=this.height=0,this.parent=null}function W(e,t){return e.parent===t.parent?1:2}function Y(e){var t=e.children;return t?t[0]:e.t}function J(e){var t=e.children;return t?t[t.length-1]:e.t}function $(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function X(e){return null==e?null:function(e){if("function"!=typeof e)throw Error();return e}(e)}K.prototype=H.prototype={constructor:K,count:function(){return this.eachAfter(z)},each:function(e,t){let n=-1;for(let r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(let r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)r.push(t=t.parent);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return H(this).eachBefore(Z)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n]);while(o.length)}},$.prototype=Object.create(K.prototype);var Q={depth:-1},ee={},et={};function en(e){return e.id}function er(e){return e.parentId}function ei(e){let t=e.length;if(t<2)return"";for(;--t>1&&!eo(e,t););return e.slice(0,t)}function eo(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if((1&n)==0)return!0}return!1}let ea=function(){var e=W,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,o,a=new $(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new $(r[i],i)),n.parent=t;return(a.parent=new $(null,0)).children=[a],a}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),r)i.eachBefore(s);else{var u=i,c=i,d=i;i.eachBefore(function(e){e.x<u.x&&(u=e),e.x>c.x&&(c=e),e.depth>d.depth&&(d=e)});var f=u===c?1:e(u,c)/2,h=f-u.x,p=t/(c.x+f+h),m=n/(d.depth||1);i.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*m})}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)t=i[o],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o,a,s=t,l=t,u=n,c=s.parent.children[0],d=s.m,f=l.m,h=u.m,p=c.m;u=J(u),s=Y(s),u&&s;)c=Y(c),(l=J(l)).a=t,(a=u.z+h-s.z-d+e(u._,s._))>0&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}((i=u,o=r,i.a.parent===t.parent?i.a:o),t,a),d+=a,f+=a),h+=u.m,d+=s.m,p+=c.m,f+=l.m;u&&!J(l)&&(l.t=u,l.m+=h-f),s&&!Y(c)&&(c.t=s,c.m+=d-p,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}();var es=e=>{let{nodes:t,edges:n,options:r}=e;return(0,c.useMemo)(()=>{if(0===t.length)return{nodes:t,edges:n};let e=(function(){var e,t=en,n=er;function r(r){var i,o,a,s,l,u,c,d,f=Array.from(r),h=t,p=n,m=new Map;if(null!=e){let t=f.map((t,n)=>{var i;let o;return i=e(t,n,r),o=(i=`${i}`).length,eo(i,o-1)&&!eo(i,o-2)&&(i=i.slice(0,-1)),"/"===i[0]?i:`/${i}`}),n=t.map(ei),i=new Set(t).add("");for(let e of n)i.has(e)||(i.add(e),t.push(e),n.push(ei(e)),f.push(et));h=(e,n)=>t[n],p=(e,t)=>n[t]}for(a=0,i=f.length;a<i;++a)o=f[a],u=f[a]=new K(o),null!=(c=h(o,a,r))&&(c+="")&&(d=u.id=c,m.set(d,m.has(d)?ee:u)),null!=(c=p(o,a,r))&&(c+="")&&(u.parent=c);for(a=0;a<i;++a)if(c=(u=f[a]).parent){if(!(l=m.get(c)))throw Error("missing: "+c);if(l===ee)throw Error("ambiguous: "+c);l.children?l.children.push(u):l.children=[u],u.parent=l}else{if(s)throw Error("multiple roots");s=u}if(!s)throw Error("no root");if(null!=e){for(;s.data===et&&1===s.children.length;)s=s.children[0],--i;for(let e=f.length-1;e>=0&&(u=f[e]).data===et;--e)u.data=null}if(s.parent=Q,s.eachBefore(function(e){e.depth=e.parent.depth+1,--i}).eachBefore(G),s.parent=null,i>0)throw Error("cycle");return s}return r.id=function(e){return arguments.length?(t=X(e),r):t},r.parentId=function(e){return arguments.length?(n=X(e),r):n},r.path=function(t){return arguments.length?(e=X(t),r):e},r})().id(e=>e.id).parentId(e=>{var t;return null===(t=n.find(t=>t.target===e.id))||void 0===t?void 0:t.source})(t),i="LR"===r.direction?[35,320]:[320,35];return{nodes:ea.nodeSize(i).separation((e,t)=>e.parent===t.parent?1:1.5)(e).descendants().map(e=>{let t;return t="LR"===r.direction?{x:e.y,y:e.x}:{x:e.x,y:e.y},{...e.data,position:t}}),edges:n}},[t,n,r])},el=e=>{let{positionAbsoluteX:t,positionAbsoluteY:n,nodeWidth:r}=e,{setCenter:i,getZoom:o}=(0,L._K)();return{centerScreenOnNode:(0,c.useCallback)(()=>i(t+r/2,n,{duration:500,zoom:o()}),[o,t,n,r,i])}},eu=n(1945),ec=n.n(eu),ed=n(8335),ef=e=>{let{type:t,inactive:n=!1}=e;return(0,o.jsx)(L.HH,{type:t,position:"source"===t?ed.Ly.Right:ed.Ly.Left,style:{width:8,height:8,backgroundColor:n?F().FIDESUI_NEUTRAL_400:F().FIDESUI_MINOS},className:"transition-colors duration-300 ease-in"})},eh=e=>{let{data:t,positionAbsoluteX:n,positionAbsoluteY:r}=e,{onCancel:i,onSubmit:s,parentKey:l}=t,u=(0,c.useRef)(null),[d,f]=(0,c.useState)(""),{centerScreenOnNode:h}=el({positionAbsoluteX:n,positionAbsoluteY:r,nodeWidth:200});return(0,c.useEffect)(()=>{f("");let e=()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.focus({cursor:"start",preventScroll:!0})};(async()=>{await h(),e()})()},[l,h,n,r]),(0,o.jsxs)("div",{style:{width:200},"data-testid":"taxonomy-text-input-node",children:[(0,o.jsx)(a.uFc,{placeholder:"Type label name...",ref:u,onBlur:i,onSubmit:()=>s(d),value:d,onChange:e=>f(e.target.value),onKeyUp:e=>{"Escape"===e.key&&i()},onPressEnter:()=>s(d),className:ec().input}),(0,o.jsx)(ef,{type:"target"})]})},ep=e=>{let{getNodeHoverStatus:t}=(0,c.useContext)(V),{target:n}=e,r=t(n),a=(0,c.useCallback)(()=>{switch(r){case i.ACTIVE_HOVER:case i.PARENT_OF_HOVER:return F().FIDESUI_MINOS;case i.INACTIVE:return F().NEUTRAL_400;default:return F().FIDESUI_SANDSTONE}},[r]),s=(0,c.useCallback)(()=>{switch(r){case i.ACTIVE_HOVER:case i.PARENT_OF_HOVER:return 2;default:return 1}},[r]);return(0,o.jsx)(L.Jd,{...e,style:{stroke:a(),strokeWidth:s(),transition:"stroke 0.3s ease 0s"}})},em=n(34770),ex=n.n(em),eg=e=>{let{data:t,positionAbsoluteX:n,positionAbsoluteY:r}=e,{onMouseEnter:s,onMouseLeave:l,getNodeHoverStatus:u}=(0,c.useContext)(V),{taxonomyType:d,taxonomyItem:f,onAddButtonClick:h,onTaxonomyItemClick:p,label:m,hasChildren:x,isLastCreatedItem:g,resetLastCreatedItemKey:v,userCanAddLabels:_}=t,{centerScreenOnNode:T}=el({positionAbsoluteX:n,positionAbsoluteY:r,nodeWidth:200});(0,c.useEffect)(()=>{let e=async()=>{await T(),s(null==f?void 0:f.fides_key)};g&&(e(),v())},[g,s,null==f?void 0:f.fides_key,v,T]);let C=u(null==f?void 0:f.fides_key),E=(0,c.useCallback)(()=>{switch(C){case i.ACTIVE_HOVER:return ex()["button--hover"];case i.PARENT_OF_HOVER:return ex()["button--parent-hover"];case i.INACTIVE:return ex()["button--inactive"];case i.DEFAULT:case i.CHILD_OF_HOVER:case i.SIBLING_OF_HOVER:default:return""}},[C]),j=(null==f?void 0:f.fides_key)===y.Ch,b=d===y.Lo.DATA_SUBJECTS;return(0,o.jsxs)("div",{className:ex().container,onMouseEnter:()=>s(null==f?void 0:f.fides_key),onMouseLeave:()=>l(null==f?void 0:f.fides_key),"data-testid":"taxonomy-node-".concat(null==f?void 0:f.fides_key),children:[(0,o.jsx)(a.wpx,{className:"".concat(ex().button," ").concat(E()),onClick:()=>null==p?void 0:p(f),disabled:!p,type:"text",children:(0,o.jsxs)(a.AntTypography.Text,{ellipsis:!0,style:{color:"inherit"},children:[(null==f?void 0:f.active)===!1?"(disabled) ":"",m]})}),!j&&(0,o.jsx)(ef,{type:"target",inactive:C===i.INACTIVE}),x&&(0,o.jsx)(ef,{type:"source",inactive:C===i.INACTIVE}),_&&(!b||j)&&(0,o.jsx)("div",{className:ex()["add-button-container"],children:(0,o.jsx)(a.wpx,{type:"default",className:"".concat(ex()["add-button"]," ").concat(C===i.ACTIVE_HOVER?ex()["add-button--visible"]:""),icon:(0,o.jsx)(a.PJP.mm_,{size:20}),onClick:()=>null==h?void 0:h(f),size:"middle","data-testid":"taxonomy-add-child-label-button","aria-label":"Add child label to ".concat(m)})})]})};let ev=e=>{let{taxonomyType:t,taxonomyItems:n,draftNewItem:r,lastCreatedItemKey:i,resetLastCreatedItemKey:a,onTaxonomyItemClick:s,onAddButtonClick:l,onCancelDraftItem:u,onSubmitDraftItem:d,userCanAddLabels:f}=e,{fitView:h}=(0,L._K)();(0,c.useEffect)(()=>{setTimeout(()=>h(),150)},[h,t]);let p=[(0,c.useMemo)(()=>({id:y.Ch,position:{x:0,y:0},data:{label:t,taxonomyItem:{fides_key:y.Ch},taxonomyType:t,onTaxonomyItemClick:null,onAddButtonClick:l,hasChildren:0!==n.length,userCanAddLabels:f},type:"taxonomyTreeNode"}),[t,n.length,l,f])],m=[];if(n.forEach(e=>{let n=e.name||e.fides_key.split(".").pop()||"",r={id:e.fides_key,position:{x:0,y:0},data:{label:n,taxonomyType:t,taxonomyItem:e,onTaxonomyItemClick:s,onAddButtonClick:l,hasChildren:!1,isLastCreatedItem:i===e.fides_key,resetLastCreatedItemKey:a,userCanAddLabels:f},type:"taxonomyTreeNode"};p.push(r);let o=e.parent_key?p.find(t=>t.id===e.parent_key):null,u=o?o.id:y.Ch,c=e.fides_key,d={id:"".concat(u,"-").concat(c),source:u,target:c,type:"taxonomyTreeEdge"};m.push(d),o&&(o.data.hasChildren=!0)}),r){let e=r.parent_key||y.Ch;p.push({id:"draft-node",position:{x:0,y:0},type:"textInputNode",data:{parentKey:e,onCancel:u,onSubmit:d},hidden:!r}),m.push({id:"draft-line",source:e,target:"draft-node",animated:!0});let t=p.find(t=>t.id===e);t&&(t.data.hasChildren=!0)}let{nodes:x,edges:g}=es({nodes:p,edges:m,options:{direction:"LR"}}),v=(0,c.useMemo)(()=>({taxonomyTreeNode:eg,textInputNode:eh}),[]),_=(0,c.useMemo)(()=>({taxonomyTreeEdge:ep}),[]);return(0,o.jsx)("div",{className:"size-full",style:{backgroundColor:F().FIDESUI_BG_CORINTH},"data-testid":"taxonomy-interactive-tree",children:(0,o.jsx)(U,{children:(0,o.jsxs)(L.x$,{nodes:x,edges:g,nodeTypes:v,edgeTypes:_,maxZoom:2,minZoom:.3,nodesConnectable:!1,edgesFocusable:!1,elementsSelectable:!1,proOptions:{hideAttribution:!0},children:[(0,o.jsx)(L.Aq,{color:F().FIDESUI_NEUTRAL_100,variant:L.T7.Dots,size:3}),(0,o.jsx)(L.a9,{nodeStrokeWidth:3,pannable:!0}),(0,o.jsx)(L.ZX,{showInteractive:!1})]})})})};var e_=e=>(0,o.jsx)(L.tV,{children:(0,o.jsx)(ev,{...e})}),ey=()=>{let[e,t]=(0,c.useState)(y.Lo.DATA_CATEGORIES),{createTrigger:n,getAllTrigger:r,taxonomyItems:i=[]}=b({taxonomyType:e}),s=(0,u.useSearchParams)(),x=(null==s?void 0:s.get("showDisabledItems"))==="true";(0,c.useEffect)(()=>{r()},[r,e]);let[g,v]=(0,c.useState)(null),[_,T]=(0,c.useState)(null),[C,E]=(0,c.useState)(null);(0,c.useEffect)(()=>{T(null),E(null),v(null)},[e]);let j=(0,a.pmc)(),A=(0,c.useCallback)(async e=>{if(!_)return;let t=(null==_?void 0:_.parent_key)===y.Ch,r={..._,name:e,parent_key:t?null:_.parent_key},i=await n(r);if((0,d.D4)(i)){j((0,m.Vo)((0,d.e$)(i.error)));return}E(i.data.fides_key),j((0,m.t5)("New label successfully created")),T(null)},[n,_,j]),S=l()(i,"active"),I=(0,p.Tg)([(0,y.Hy)(e).CREATE]);return(0,o.jsxs)(f.Z,{title:"Taxonomy",children:[(0,o.jsxs)(a.jqI,{vertical:!0,className:"h-full",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(h.Z,{heading:"Taxonomy"}),(0,o.jsx)("div",{className:"hidden",children:(0,o.jsx)("div",{className:"mb-5 flex justify-between",children:(0,o.jsxs)(a.vyj.Compact,{children:[(0,o.jsx)(a.uFc,{className:"min-w-[350px]",placeholder:"Search",allowClear:!0}),(0,o.jsx)(a.wpx,{type:"default",children:"Clear"})]})})})]}),(0,o.jsxs)("div",{className:"relative grow",children:[(0,o.jsx)("div",{className:"absolute left-2 top-2 z-[1]",children:(0,o.jsx)(a.AHg,{selectedKeys:[e],onSelect:e=>{let{key:n}=e;return t(n)},items:(0,d.MM)(y.Lo).map(e=>({label:e.label,key:e.value})),"data-testid":"taxonomy-type-selector"})}),!!i.length&&(0,o.jsx)(e_,{userCanAddLabels:I,taxonomyItems:x?i:S,draftNewItem:_,lastCreatedItemKey:C,resetLastCreatedItemKey:()=>E(null),onTaxonomyItemClick:e=>{v(e)},onAddButtonClick:e=>{var t;T({parent_key:null!==(t=null==e?void 0:e.fides_key)&&void 0!==t?t:null,is_default:!1,description:""})},taxonomyType:e,onCancelDraftItem:()=>T(null),onSubmitDraftItem:A})]})]}),g&&(0,o.jsx)(P,{taxonomyItem:g,taxonomyType:e,onClose:()=>v(null)})]})}},31883:function(e,t,n){"use strict";n.d(t,{Bw:function(){return r.Bw},D4:function(){return r.D4}});var r=n(19043)},1945:function(e){e.exports={input:"TaxonomyTextInputNode_input__P9czz"}},34770:function(e){e.exports={container:"TaxonomyTreeNode_container__T4KpF",button:"TaxonomyTreeNode_button__mcbOd","button--hover":"TaxonomyTreeNode_button--hover__oycXY","button--parent-hover":"TaxonomyTreeNode_button--parent-hover__pwAPl","button--inactive":"TaxonomyTreeNode_button--inactive__Fjdpe","add-button-container":"TaxonomyTreeNode_add-button-container__eEoRN","add-button":"TaxonomyTreeNode_add-button__oM2vI","add-button--visible":"TaxonomyTreeNode_add-button--visible__Ojqqf"}}},function(e){e.O(0,[1096,431,8765,9278,3662,6148,1841,2888,9774,179],function(){return e(e.s=71180)}),_N_E=e.O()}]);