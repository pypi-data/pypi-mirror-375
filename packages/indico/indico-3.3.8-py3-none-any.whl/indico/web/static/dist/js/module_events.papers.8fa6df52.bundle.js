"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8944],{92941:(e,t,a)=>{a(64436);var i=a(86326),n=a(35623),r=a(44515),l=a(88996),s=a(29079),c=a(97598),o=a.n(c),m=a(23507),d=a(73437),u=a(47279),p=a(89995),v=a(57087),E=a(44850),b=a(31109),y=a(29481),g=a(96478),f=a(49528);const _=s.default.bind(null,{endpoint:"papers.api_comment_actions",rules:[{args:["comment_id","contrib_id","event_id","revision_id"],converters:{comment_id:"IntegerConverter",contrib_id:"IntegerConverter",event_id:"IntegerConverter",revision_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"revision",isDynamic:!1},{data:"/",isDynamic:!1},{data:"revision_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"comment",isDynamic:!1},{data:"/",isDynamic:!1},{data:"comment_id",isDynamic:!0}]}]},"/"),D=s.default.bind(null,{endpoint:"papers.api_create_comment",rules:[{args:["contrib_id","event_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"comment",isDynamic:!1}]}]},"/"),T=s.default.bind(null,{endpoint:"papers.api_create_review",rules:[{args:["contrib_id","event_id","review_type"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter",review_type:"AnyConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"review",isDynamic:!1},{data:"/",isDynamic:!1},{data:"review_type",isDynamic:!0}]}]},"/"),w=s.default.bind(null,{endpoint:"papers.api_judge_paper",rules:[{args:["contrib_id","event_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"judge",isDynamic:!1}]}]},"/"),h=s.default.bind(null,{endpoint:"papers.api_paper_details",rules:[{args:["contrib_id","event_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0}]}]},"/"),N=s.default.bind(null,{endpoint:"papers.api_reset_paper_state",rules:[{args:["contrib_id","event_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0}]}]},"/"),S=s.default.bind(null,{endpoint:"papers.api_update_review",rules:[{args:["contrib_id","event_id","review_id","revision_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter",review_id:"IntegerConverter",revision_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"revision",isDynamic:!1},{data:"/",isDynamic:!1},{data:"revision_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"review",isDynamic:!1},{data:"/",isDynamic:!1},{data:"review_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"edit",isDynamic:!1}]}]},"/"),x="papers/FETCH_PAPER_DETAILS_REQUEST",A="papers/FETCH_PAPER_DETAILS_SUCCESS",C="papers/FETCH_PAPER_DETAILS_ERROR",R="papers/RESET_PAPER_JUDGMENT_REQUEST",I="papers/RESET_PAPER_JUDGMENT_SUCCESS",q="papers/RESET_PAPER_JUDGMENT_ERROR",L="papers/DELETE_COMMENT_REQUEST",F="papers/DELETE_COMMENT_SUCCESS",j="papers/DELETE_COMMENT_ERROR";function k(e,t){return(0,l.P$)((()=>f.indicoAxios.get(h({event_id:e,contrib_id:t}))),x,A,C)}function P(e,t,a,i,n){return(0,l.HX)((()=>f.indicoAxios.post(S({event_id:e,contrib_id:t,revision_id:a,review_id:i}),n)),null,(()=>k(e,t)),null)}const O={accepted:"accepted",rejected:"rejected",submitted:"submitted",to_be_corrected:"to_be_corrected"},M={judges:"judges",reviewers:"reviewers",contributors:"contributors"};var z=a(45967);const U=e=>e.paper.requests.details.state===l.X_.STARTED&&!e.paper.details,H=e=>e.paper.requests.resetState.state===l.X_.STARTED,B=e=>e.paper.requests.deleteComment.state===l.X_.STARTED,G=e=>e.paper.details.event.isLocked,J=e=>e.staticData.user,X=e=>e.paper.details,W=e=>e.paper.details.event,V=e=>e.paper.details.contribution,Q=(0,z.Mz)(W,(({cfp:e})=>({layout:e.layoutReviewQuestions,content:e.contentReviewQuestions}))),Y=(0,z.Mz)(X,W,(({isInFinalState:e,canJudge:t},{isLocked:a})=>!a&&!e&&t)),K=(0,z.Mz)(X,W,(({isInFinalState:e,canReview:t},{isLocked:a})=>!a&&!e&&t)),Z=(0,z.Mz)(X,W,(({canSubmitProceedings:e,canManage:t,state:{name:a}},{isLocked:i})=>!i&&a===O.to_be_corrected&&(t||e))),ee=(0,z.Mz)(X,W,(({isInFinalState:e,canComment:t},{isLocked:a})=>!a&&!e&&t));function te({fullWidth:e,files:t}){return i.createElement("ul",{className:"paper-files flexrow f-wrap f-a-center "+(e?"full-width":"")},t.map((e=>i.createElement("li",{key:e.id},i.createElement("a",{href:e.downloadURL,className:`attachment paper-file i-button text-color borderless ${e.icon}`},i.createElement("span",{className:"title truncate-text"},e.filename))))))}te.propTypes={files:o().arrayOf(o().shape({id:o().number.isRequired,filename:o().string.isRequired,icon:o().string.isRequired})).isRequired,fullWidth:o().bool},te.defaultProps={fullWidth:!1};var ae=a(14867),ie=a.n(ae),ne=a(11052);function re(){const{lastRevision:{id:e,submittedDt:t,submitter:a}}=(0,r.useSelector)(X),n=i.createElement("a",{className:"paper-metadata-dt",href:`#block-info-${e}`},i.createElement("time",{dateTime:(0,ne.serializeDate)(t,ie().HTML5_FMT.DATETIME_LOCAL_SECONDS)},(0,ne.serializeDate)(t,"LL")));return i.createElement("div",{className:"paper-metadata flexrow f-j-end"},i.createElement(g.Translate,null,"Submitted on ",i.createElement(g.Param,{name:"date",value:n})," by"," ",i.createElement(g.Param,{name:"submitter",value:a.fullName})))}function le(){const{lastRevision:{spotlightFile:e,files:t}}=(0,r.useSelector)(X),a=1===t.length;let n;return n=e?i.createElement(i.Fragment,null,i.createElement("div",{key:`spotlight-file-${e.id}`,className:"flexrow f-a-center spotlight-file i-button text-color borderless paper-file "+(a?"full-width":"")},i.createElement("a",{href:e.downloadURL,className:`attachment spotlight-file-name flexrow f-a-center truncate-text ${e.icon}`},i.createElement("span",{className:"title truncate-text"},e.filename))),!a&&i.createElement(te,{key:"paper-files",files:t.filter((t=>t.id!==e.id))})):i.createElement("div",{key:"paper-files",className:"paper-files-list flexrow f-a-baseline"},i.createElement("div",{className:"paper-files-list-label f-self-no-shrink"},i.createElement(g.Translate,null,"Paper files")),i.createElement(te,{files:t,fullWidth:!0})),i.createElement("div",{className:"paper-content flexcol"},i.createElement("div",{className:"flexrow"},n),i.createElement(re,null))}var se=a(42430),ce=a(6423),oe=a(1419),me=a(46145);function de(){const e=(0,r.useDispatch)(),{event:{id:t},contribution:{id:a},state:n}=(0,r.useSelector)(X),s=(0,r.useSelector)(G),c=(0,r.useSelector)(J),o=(0,r.useSelector)(Y),m=(0,i.useCallback)((async(i,n)=>{const r=await e(function(e,t,a){return(0,l.HX)((()=>f.indicoAxios.post(w({event_id:e,contrib_id:t}),a)),null,(()=>k(e,t)),null)}(t,a,i));if(r.error)return r.error;setTimeout((()=>n.reset()),0)}),[e,t,a]);if(s||!o)return null;const d={[O.accepted]:{value:"accept",text:g.Translate.string("Accept")},[O.rejected]:{value:"reject",text:g.Translate.string("Reject")}};return n.name===O.submitted&&(d[O.to_be_corrected]={value:"to_be_corrected",text:g.Translate.string("To be corrected")}),i.createElement("div",{id:"proposal-decision-box",className:"i-timeline i-timeline-item events-papers-client-js-components-___PaperDecisionForm-module__paper-decision-box___LiJ+P"},i.createElement(oe.A,{user:c}),i.createElement("div",{className:"i-timeline-item-box footer-only header-indicator-left review-form"},i.createElement("div",{className:"i-box-footer"},i.createElement(se.Form,{onSubmit:m,initialValues:{action:"accept",comment:""},subscription:{}},(e=>i.createElement(ce.A,{onSubmit:e.handleSubmit},i.createElement(me.FinalDropdown,{name:"action",options:Object.values(d),selection:!0,required:!0}),i.createElement(me.FinalTextArea,{name:"comment",placeholder:g.Translate.string("Leave a comment for the submitter...")}),i.createElement(me.FinalSubmitButton,{label:g.Translate.string("Judge","Judge paper (verb)"),disabledUntilChange:!1})))))))}var ue=a(85218);const pe=s.default.bind(null,{endpoint:"contributions.display_contribution",rules:[{args:["contrib_id","event_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"contributions",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/");function ve({children:e,contribution:t,state:a,submitter:n,eventId:r}){return i.createElement(i.Fragment,null,i.createElement("div",{className:"submission-title flexrow"},i.createElement(ue.MathJax,null,i.createElement("h3",null,t.title," ",i.createElement("span",{className:"submission-id"},"#",t.friendlyId),t.code&&i.createElement("span",{className:"submission-code"},t.code)))),i.createElement("div",{className:"paper-public"},i.createElement("div",{className:"review-summary flexrow f-a-baseline"},i.createElement("div",{className:"review-summary-badge"},i.createElement("div",{className:`i-tag ${a.cssClass}`},a.title)),i.createElement("div",{className:"review-summary-content f-self-stretch"},i.createElement("div",null,i.createElement(g.Translate,null,i.createElement(g.Param,{name:"submitterName",value:n.fullName,wrapper:i.createElement("strong",null)})," ","submitted for the contribution"," ",i.createElement(g.Param,{name:"contributionLink",value:t.title,wrapper:i.createElement("a",{href:pe({event_id:r,contrib_id:t.id})})}))," "))),i.createElement("div",{className:"review-item-content"},e)))}ve.propTypes={contribution:o().shape({id:o().number.isRequired,friendlyId:o().number.isRequired,title:o().string.isRequired,code:o().string.isRequired}).isRequired,state:o().shape({cssClass:o().string.isRequired,title:o().string.isRequired}).isRequired,submitter:o().shape({fullName:o().string.isRequired}).isRequired,eventId:o().number.isRequired,children:o().node.isRequired};var Ee=a(637),be=a.n(Ee),ye=a(67198),ge=a(56237),fe=a(49138),_e=a(77940);function De({onSubmit:e,onToggleExpand:t,comment:a,expanded:n}){const[l,s]=(0,i.useState)(n),c=(0,r.useSelector)(K),o=(0,r.useSelector)(Y),m=l?me.FinalTextArea:me.FinalInput,d=l?{autoFocus:!0}:{onFocus:()=>{s(!0),t(!0)}},u={judges:{value:"judges",text:g.Translate.string("Visible only to judges")},reviewers:{value:"reviewers",text:g.Translate.string("Visible to reviewers and judges")},contributors:{value:"contributors",text:g.Translate.string("Visible to contributors, reviewers and judges")}};o||delete u.judges;const p=a?{comment:a.text}:{};return c&&(p.visibility=a&&a.visibility?a.visibility.name:Object.keys(u)[0]),i.createElement("div",{className:"f-self-stretch"},i.createElement(se.Form,{onSubmit:async(a,i)=>{const n=await e(a,i);if(n)return n;s(!1),t&&t(!1),setTimeout((()=>i.reset()),0)},initialValues:p,subscription:{submitting:!0}},(e=>i.createElement(ce.A,{onSubmit:e.handleSubmit},i.createElement(m,(0,_e.A)({},d,{name:"comment",placeholder:g.Translate.string("Leave a comment..."),required:l})),l&&i.createElement(i.Fragment,null,c&&i.createElement(me.FinalDropdown,{name:"visibility",options:Object.values(u),selection:!0,required:!0}),i.createElement(ce.A.Group,{style:{marginBottom:0},inline:!0},i.createElement(me.FinalSubmitButton,{label:a?g.Translate.string("Update comment"):g.Translate.string("Comment","Leave a comment (verb)")}),i.createElement(ge.A,{disabled:e.submitting,content:g.Translate.string("Cancel"),onClick:()=>{s(!1),t&&t(!1),e.form.reset()}})))))))}De.propTypes={onSubmit:o().func.isRequired,onToggleExpand:o().func,comment:o().shape({text:o().string,visibility:o().shape({name:o().oneOf(["judges","reviewers","contributors"]).isRequired})}),expanded:o().bool},De.defaultProps={onToggleExpand:null,comment:null,expanded:!1};var Te=a(16520),we=a(25277);const he=[{value:"accept",text:g.Translate.string("Accept")},{value:"reject",text:g.Translate.string("Reject")},{value:"to_be_corrected",text:g.Translate.string("To be corrected")}];function Ne({question:{id:e,isRequired:t,fieldType:a,fieldData:n}}){const{cfp:{ratingRange:[l,s]}}=(0,r.useSelector)(W),c=`question_${e}`;if("text"===a){const e=n.multiline?me.FinalTextArea:me.FinalInput,a={"data-max-words":n.maxWords,maxLength:n.maxLength};return i.createElement(e,(0,_e.A)({name:c,required:t},a))}if("bool"===a)return i.createElement(ce.A.Group,null,i.createElement(me.FinalRadio,{name:c,required:t,label:g.Translate.string("Yes"),value:"yes"}),i.createElement(me.FinalRadio,{name:c,required:t,label:g.Translate.string("No"),value:"no"}));if("rating"===a)return i.createElement(we.c,{name:c,required:t,max:s,min:l,allowNull:!0});throw new Error(`Unsupported field type: ${a}`)}function Se({group:e,review:t,onSubmit:a,onCancel:n}){const l=(0,r.useSelector)(Q)[e.name],s={};if(t){s.proposed_action=t.proposedAction.name,s.comment=t.comment;for(const{value:e,question:a}of t.ratings)"bool"===a.fieldType?s[`question_${a.id}`]=e?"yes":"no":s[`question_${a.id}`]=e}return i.createElement(se.Form,{onSubmit:a,subscription:{submitting:!0},initialValues:s},(a=>i.createElement(ce.A,{onSubmit:a.handleSubmit,className:"events-papers-client-js-components-___GroupReviewForm-module__group-review-form___QGxzX"},!t&&i.createElement(i.Fragment,null,i.createElement("div",{className:"form-preface"},i.createElement(g.Translate,null,"Reviewing in"," ",i.createElement(g.Param,{name:"group",value:e.title,wrapper:i.createElement("div",{className:"review-group truncate-text"})}))),0!==l.length&&i.createElement("div",{className:"titled-rule"},i.createElement(g.Translate,null,"Ratings"))),0!==l.length&&i.createElement("div",{className:"review-questions"},l.map(((e,t)=>i.createElement(Te.A,{key:e.id,position:"left center",content:e.description,disabled:!e.description,trigger:i.createElement("div",{className:"flexrow question-row"},i.createElement("div",null,i.createElement("span",{className:"question-index"},t+1)),i.createElement("div",{className:"question-text f-self-stretch"},e.title,e.isRequired&&i.createElement(Te.A,{trigger:i.createElement("i",{className:"question-required"}," *"),content:g.Translate.string("Rating this question is mandatory"),position:"bottom center"})),i.createElement("div",{className:"events-papers-client-js-components-___GroupReviewForm-module__question-field___n8Cys"},i.createElement(Ne,{question:e})))})))),i.createElement("div",{className:"titled-rule"},i.createElement(g.Translate,null,"Proposal")),i.createElement(me.FinalDropdown,{name:"proposed_action",options:he,placeholder:g.Translate.string("Propose an action"),selection:!0,required:!0}),i.createElement(me.FinalTextArea,{name:"comment",placeholder:g.Translate.string("You may leave a comment (only visible to reviewers and judges)..."),nullIfEmpty:!0}),i.createElement(ce.A.Group,null,i.createElement(me.FinalSubmitButton,{label:t?g.Translate.string("Change review"):g.Translate.string("Submit review"),disabledUntilChange:!0}),i.createElement(ge.A,{onClick:n,disabled:a.submitting},i.createElement(g.Translate,null,"Cancel"))))))}Ne.propTypes={question:o().object.isRequired},Se.propTypes={group:o().shape({name:o().oneOf(["content","layout"]).isRequired,title:o().string.isRequired,value:o().number.isRequired}).isRequired,review:o().object,onSubmit:o().func.isRequired,onCancel:o().func},Se.defaultProps={review:null,onCancel:null};function xe(){const{event:{id:e},contribution:{id:t},lastRevision:a,isInFinalState:n}=(0,r.useSelector)(X),{reviewerData:s}=a,[c,o]=(0,i.useState)(!1),[m,d]=(0,i.useState)(null),p=(0,r.useSelector)(J),v=(0,r.useSelector)(ee),E=(0,r.useSelector)(K),b=(0,r.useDispatch)(),y=s.groups.map((e=>e.name)),_=s.reviewedGroups.map((e=>e.name)),w=(0,i.useCallback)((async a=>{const i=await b(function(e,t,a){const i={event_id:e,contrib_id:t};return(0,l.HX)((()=>f.indicoAxios.post(D(i),a)),null,(()=>k(e,t)),null)}(e,t,a));if(i.error)return i.error}),[b,e,t]);return i.createElement("div",{className:"i-timeline-item review-timeline-input events-papers-client-js-components-___PaperReviewForm-module__review-input___5znyG"},i.createElement(oe.A,{user:p}),i.createElement("div",{className:"i-timeline-item-box footer-only header-indicator-left"},i.createElement("div",{className:"i-box-footer",style:{overflow:"visible"}},(()=>{if(m){const n=s.groups.find((e=>e.name===m)),r=s.reviews[m]||null;return i.createElement(Se,{review:r,group:n,onCancel:()=>d(null),onSubmit:async i=>{const s=r?P(e,t,a.id,r.id,i):function(e,t,a,i){return(0,l.HX)((()=>f.indicoAxios.post(T({event_id:e,contrib_id:t,review_type:a}),i)),null,(()=>k(e,t)),null)}(e,t,n.name,i),c=await b(s);if(c.error)return c.error;d(null)}})}if(v)return i.createElement("div",{className:"flexrow"},i.createElement(De,{onSubmit:w,onToggleExpand:o}),!c&&y.length>0&&!n&&E&&i.createElement("div",{className:"review-trigger flexrow"},i.createElement("span",{className:"comment-or-review"},i.createElement(g.Translate,null,"or")),1===y.length?i.createElement(ge.A,{onClick:()=>d(y[0])},y[0]in s.reviews?i.createElement(g.Translate,null,"Change review"):i.createElement(g.Translate,null,"Review")):i.createElement(fe.A,{text:(0,me.unsortedArraysEqual)(y,_)?g.Translate.string("Change reviews"):g.Translate.string("Review","Review papers (verb)"),button:!0},i.createElement(fe.A.Menu,null,s.groups.map((e=>i.createElement(fe.A.Item,{key:e.name,onClick:()=>d(e.name)},i.createElement("span",null,e.title),e.name in s.reviews&&i.createElement(u.A,{name:"checkmark",floated:"right"}))))))))})())))}var Ae=a(78905);function Ce({revision:e}){const{state:t,judge:a,isLastRevision:n,judgmentCommentHtml:s,judgmentDt:c}=e,{event:o,contribution:m,canJudge:d}=(0,r.useSelector)(X),[p,v]=(0,i.useState)(!1),E=(0,r.useSelector)(H),b=(0,r.useDispatch)();return t===O.submitted?null:i.createElement("div",{className:"i-timeline-item"},i.createElement(oe.A,{user:a}),i.createElement("div",{className:"i-timeline-item-box header-indicator-left"},i.createElement("div",{className:"i-box-header flexrow"},i.createElement("div",{className:"f-self-stretch"},t===O.accepted&&i.createElement(g.Translate,null,i.createElement(g.Param,{name:"judgeName",value:a.fullName,wrapper:i.createElement("strong",null)})," accepted this paper."),t===O.rejected&&i.createElement(g.Translate,null,i.createElement(g.Param,{name:"judgeName",value:a.fullName,wrapper:i.createElement("strong",null)})," rejected this paper."),t===O.to_be_corrected&&i.createElement(g.Translate,null,i.createElement(g.Param,{name:"judgeName",value:a.fullName,wrapper:i.createElement("strong",null)})," asked for changes.")," ",i.createElement("time",{dateTime:(0,ne.serializeDate)(c,ie().HTML5_FMT.DATETIME_LOCAL_SECONDS)},(0,ne.serializeDate)(c,"LL"))),d&&n&&i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(Te.A,{position:"bottom center",offset:[0,5],content:g.Translate.string("Reset judgment"),trigger:i.createElement(u.A,{link:!0,className:"undo",color:"red",onClick:()=>v(!0)})})),i.createElement(Ae.A,{size:"tiny",header:g.Translate.string("Confirm the operation"),open:p,closeOnDimmerClick:!E,closeOnEscape:!E,content:g.Translate.string("Do you really want to reset the judgment? This operation is irreversible."),onCancel:()=>v(!1),onConfirm:async()=>{var e,t;(await b((e=o.id,t=m.id,(0,l.P$)((()=>f.indicoAxios.delete(N({event_id:e,contrib_id:t}))),R,[I,()=>k(e,t)],q)))).error||v(!1)},cancelButton:i.createElement(ge.A,{content:g.Translate.string("Cancel"),disabled:E}),confirmButton:i.createElement(ge.A,{content:g.Translate.string("Reset judgment"),disabled:E,loading:E,negative:!0}),closeIcon:!E}))),i.createElement("div",{className:"i-box-content"},t===O.accepted&&i.createElement(g.Translate,null,"The paper was accepted."),t===O.rejected&&i.createElement(g.Translate,null,"The paper was rejected."),t===O.to_be_corrected&&i.createElement(g.Translate,null,"The paper requires changes."),s&&i.createElement(i.Fragment,null,i.createElement("div",{className:"titled-rule"},i.createElement(g.Translate,null,"Comment")),i.createElement("div",{dangerouslySetInnerHTML:{__html:s}})))))}function Re({comment:e,revision:t}){const a=(0,r.useDispatch)(),[n,s]=(0,i.useState)(!1),[c,o]=(0,i.useState)(!1),{id:m}=(0,r.useSelector)(W),{id:d}=(0,r.useSelector)(V),u=(0,r.useSelector)(B);return i.createElement("div",{className:"i-timeline-item"},i.createElement(oe.A,{user:e.user}),i.createElement("div",{className:"flexrow i-timeline-item-content"},i.createElement("div",{className:"i-timeline-item-box header-indicator-left"},i.createElement("div",{className:"i-box-header flexrow",style:{display:c?"none":"flex"}},i.createElement("div",{className:"f-self-stretch"},i.createElement(g.Translate,null,i.createElement(g.Param,{name:"userName",value:e.user.fullName,wrapper:i.createElement("strong",null)})," left a comment")," ",e.visibility.name!==M.contributors&&i.createElement(Te.A,{trigger:i.createElement("i",{className:`review-comment-visibility ${e.visibility.name} icon-shield`}),content:e.visibility.title,position:"bottom center"})," ",i.createElement("time",{dateTime:(0,ne.serializeDate)(e.createdDt,ie().HTML5_FMT.DATETIME_LOCAL_SECONDS)},(0,ne.serializeDate)(e.createdDt,"LL")),e.modifiedDt&&i.createElement(Te.A,{trigger:i.createElement("span",{className:"review-comment-edited"}," ","· ",i.createElement(g.Translate,null,"edited")),content:g.Translate.string("On {modificationDate} by {modifiedBy}",{modificationDate:(0,ne.serializeDate)(e.modifiedDt,"LL"),modifiedBy:e.modifiedBy.fullName}),position:"bottom center"})),e.canEdit&&i.createElement("div",{className:"review-comment-action hide-if-locked"},i.createElement(Te.A,{position:"bottom center",content:g.Translate.string("Edit comment"),trigger:i.createElement("a",{className:"i-link icon-edit",onClick:()=>o(!c)})})," ",i.createElement(Te.A,{position:"bottom center",content:g.Translate.string("Remove comment"),trigger:i.createElement("a",{onClick:()=>s(!0),className:"i-link icon-cross"})}),i.createElement(Ae.A,{size:"tiny",header:g.Translate.string("Remove comment"),open:n,content:g.Translate.string("Are you sure you want to remove this comment?"),onCancel:()=>s(!1),closeOnDimmerClick:!u,closeOnEscape:!u,onConfirm:async()=>{const i=await a(function(e,t,a,i){const n={event_id:e,contrib_id:t,revision_id:a,comment_id:i};return(0,l.P$)((()=>f.indicoAxios.delete(_(n))),L,[F,()=>k(e,t)],j,(e=>({commentId:i,...e})))}(m,d,t.id,e.id));i.error||s(!1)},cancelButton:i.createElement(ge.A,{content:g.Translate.string("Cancel"),disabled:u}),confirmButton:i.createElement(ge.A,{content:g.Translate.string("Remove comment"),loading:u,disabled:u,negative:!0}),closeIcon:!u}))),i.createElement("div",{className:"i-box-content js-form-container"},c?i.createElement(De,{onSubmit:async(i,n)=>{const r=await a(function(e,t,a,i,n){const r={event_id:e,contrib_id:t,revision_id:a,comment_id:i};return(0,l.HX)((()=>f.indicoAxios.patch(_(r),n)),null,(()=>k(e,t)),null)}(m,d,t.id,e.id,(0,me.getChangedValues)(i,n)));if(r.error)return r.error},onToggleExpand:e=>{e||o(!1)},comment:e,expanded:!0}):i.createElement("div",{className:"markdown-text",dangerouslySetInnerHTML:{__html:e.html}})))))}function Ie({review:e,revision:t}){const[a,n]=(0,i.useState)(!1),[l,s]=(0,i.useState)(!1),c=(0,r.useDispatch)(),{contribution:{id:o},event:{id:m,cfp:{ratingRange:[d,u]}}}=(0,r.useSelector)(X),p=i.createElement("span",{className:`bold underline semantic-text ${e.proposedAction.cssClass}`});return i.createElement("div",{id:`proposal-review-${e.id}`,className:"i-timeline-item"},i.createElement(oe.A,{user:e.user}),i.createElement("div",{className:"flexrow i-timeline-item-content"},i.createElement("div",{className:"i-timeline-item-metadata"},i.createElement("div",{className:"f-self-stretch"},i.createElement(g.Translate,null,i.createElement(g.Param,{name:"reviewerName",value:e.user.fullName,wrapper:i.createElement("strong",null)})," left a review")," ",i.createElement(Te.A,{trigger:i.createElement("i",{className:`review-comment-visibility ${e.visibility.name} icon-shield`}),content:e.visibility.title,position:"bottom center"})," ",i.createElement("time",{dateTime:(0,ne.serializeDate)(e.createdDt,ie().HTML5_FMT.DATETIME_LOCAL_SECONDS)},(0,ne.serializeDate)(e.createdDt,"LL")),e.modifiedDt&&i.createElement(i.Fragment,null," ","·"," ",i.createElement(Te.A,{trigger:i.createElement("span",{className:"review-comment-edited"},i.createElement(g.Translate,null,"edited")),content:(0,ne.serializeDate)(e.modifiedDt,"LL"),position:"bottom center"}))),i.createElement("div",{className:"review-group truncate-text"},i.createElement("span",null,e.group.title))),i.createElement("div",{"data-no-comment":!e.comment,className:"i-timeline-item-box header-indicator-top "+(e.comment||l||a?"":"header-only")},!a&&i.createElement("div",{className:"i-box-header flexrow"},i.createElement("div",{className:"review-badges"},"accept"===e.proposedAction.name&&i.createElement(g.Translate,null,"Proposed to"," ",i.createElement(g.Param,{name:"actionName",wrapper:p},"accept")),"reject"===e.proposedAction.name&&i.createElement(g.Translate,null,"Proposed to"," ",i.createElement(g.Param,{name:"actionName",wrapper:p},"reject")),"to_be_corrected"===e.proposedAction.name&&i.createElement(g.Translate,null,"Proposed to"," ",i.createElement(g.Param,{name:"actionName",wrapper:p},"correct"))," ",e.ratings.length>0&&i.createElement(i.Fragment,null,null!==e.score&&i.createElement(g.Translate,null,"· score"," ",i.createElement(g.Param,{name:"prettyScore",value:e.score,wrapper:i.createElement("span",{className:"highlight bold semantic-text",title:g.Translate.string("Score: {score} / {maxScore}",{score:e.score,maxScore:u})})}))," (",i.createElement("a",{className:"toggle-link",onClick:()=>s(!l)},i.createElement("span",null,l?i.createElement(g.Translate,null,"hide ratings"):i.createElement(g.Translate,null,"show ratings"))),")")),e.canEdit&&i.createElement("div",{className:"review-comment-actions"},i.createElement(Te.A,{position:"right center",content:g.Translate.string("Edit review"),trigger:i.createElement("a",{className:"i-link icon-edit",onClick:()=>n(!0)})}))),i.createElement("div",{className:"i-box-content"},a?i.createElement(Se,{group:e.group,review:e,onSubmit:async a=>{const i=await c(P(m,o,t.id,e.id,a));if(i.error)return i.error;n(!1)},onCancel:()=>n(!1)}):i.createElement(i.Fragment,null,i.createElement(ye.A,{visible:0!==e.ratings.length&&l,animation:"slide down",duration:50},i.createElement("div",{className:"ratings-details"},i.createElement("ul",{className:"review-questions"},e.ratings.map(((e,t)=>i.createElement("li",{key:`rating-${e.question.id}-${e.id}`,className:"flexrow"},i.createElement("div",null,i.createElement("span",{className:"question-index"},t+1)),i.createElement("div",{className:"question-text f-self-stretch"},e.question.title),i.createElement("div",null,(e=>"bool"===e.question.fieldType?null!==e.value?e.value?g.Translate.string("Yes"):g.Translate.string("No"):null:"rating"===e.question.fieldType?i.createElement(ue.ReviewRating,{min:d,max:u,value:e.value,disabled:!0}):e.value)(e)))))),e.comment&&i.createElement("div",{className:"titled-rule"},i.createElement(g.Translate,null,"Comment")))),e.comment&&i.createElement("div",{className:"markdown-text",dangerouslySetInnerHTML:{__html:e.commentHtml}}))))))}function qe({revision:e}){return e.timeline.map((t=>function(e,t){return"judgment"===e.timelineItemType?i.createElement(Ce,{key:`${e.createdDt}-${t.id}`,revision:t}):"comment"===e.timelineItemType?i.createElement(Re,{key:e.id,revision:t,comment:e}):"review"===e.timelineItemType?i.createElement(Ie,{key:e.id,review:e,revision:t}):void 0}(t,e)))}Ce.propTypes={revision:o().object.isRequired},Re.propTypes={comment:o().object.isRequired,revision:o().object.isRequired},Ie.propTypes={review:o().object.isRequired,revision:o().object.isRequired},qe.propTypes={revision:o().object.isRequired};const Le=s.default.bind(null,{endpoint:"papers.api_submit_revision",rules:[{args:["contrib_id","event_id"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"papers",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"paper",isDynamic:!1},{data:"/",isDynamic:!1},{data:"submit",isDynamic:!1}]}]},"/");function Fe(){const{state:{name:e},event:{id:t},contribution:{id:a}}=(0,r.useSelector)(X),[n,l]=(0,i.useState)([]),[s,c]=(0,i.useState)(!1),o=(0,r.useSelector)(J),m=(0,r.useDispatch)();if(e!==O.to_be_corrected)return null;return i.createElement("div",{className:"i-timeline-item",id:"proposal-revision-submission-box",style:{position:"relative",zIndex:-1}},i.createElement(oe.A,{user:o}),i.createElement("div",{className:"i-timeline-item-box header-indicator-left"},i.createElement("div",{className:"i-box-header flexrow"},i.createElement(g.Translate,null,"Upload corrected revision")),i.createElement("div",{className:"i-box-content"},i.createElement(ue.FileSubmission,{onChange:e=>l(e),disabled:s}),i.createElement(ge.A,{onClick:async()=>{c(!0);const e={"content-type":"multipart/form-data"},i=new FormData;n.forEach((e=>{i.append("files",e)}));try{await f.indicoAxios.post(Le({event_id:t,contrib_id:a}),i,{headers:e})}catch(e){return void(0,f.handleAxiosError)(e)}finally{c(!1)}l([]),m(k(t,a))},content:g.Translate.string("Submit new revision"),style:{marginTop:10},disabled:0===n.length||s,loading:s,primary:!0}))))}function je({block:e}){const{submitter:t,isLastRevision:a,number:n,submittedDt:l,files:s,timeline:c}=e,o=t.isSystem?g.Translate.string("A user"):t.fullName,m=(0,r.useSelector)(ee),d=(0,r.useSelector)(K),u=(0,r.useSelector)(Z),p=(0,r.useSelector)(X),[v,E]=(0,i.useState)(a);return i.createElement(i.Fragment,null,i.createElement("div",{className:"i-timeline"},i.createElement("div",{className:"i-timeline-item"},i.createElement(oe.A,{user:t}),i.createElement("div",{className:"i-timeline-item-box header-indicator-left "+(v?"":"header-only"),id:`block-info-${e.id}`},i.createElement("div",{className:"i-box-header flexrow"},i.createElement("div",{className:"f-self-stretch"},i.createElement(g.Translate,null,i.createElement(g.Param,{name:"submitterName",value:o,wrapper:i.createElement("strong",null)})," ","submitted paper revision ",i.createElement(g.Param,{name:"revisionNumber",value:`#${n}`}))," ",i.createElement("time",{dateTime:(0,ne.serializeDate)(l,ie().HTML5_FMT.DATETIME_LOCAL_SECONDS)},(0,ne.serializeDate)(l,"LL"))),!a&&i.createElement("a",{className:"block-info-link i-link",onClick:()=>E(!v)},v?i.createElement(g.Translate,null,"Hide old revision"):i.createElement(g.Translate,null,"Show old revision"))),i.createElement(ye.A,{animation:"slide down",duration:50,visible:v||a},i.createElement("div",{className:"i-box-content submission-info"},i.createElement("ul",{className:"file-list"},be().sortBy(s,"filename").map((e=>i.createElement("li",{className:"truncate-text",key:e.id},i.createElement("a",{href:e.downloadURL,className:`attachment ${e.icon}`}," ",i.createElement("span",{className:"title"},e.filename))))))))))),i.createElement(ye.A,{animation:"slide down",duration:50,visible:v||a},i.createElement("div",{className:"i-timeline",style:{zIndex:a?1:0}},(c.length>0||!p.isInFinalState&&d||m)&&i.createElement("div",{className:"i-timeline with-line"},i.createElement("div",{className:"i-timeline-connect-up"}),i.createElement(qe,{revision:e}),a&&(m||d)&&i.createElement(xe,null)),a&&i.createElement(i.Fragment,null,i.createElement("div",{className:"i-timeline to-separator-wrapper"},i.createElement("div",{className:"i-timeline-connect-down to-separator"})),i.createElement("div",{className:"i-timeline-separator"}),u&&i.createElement(Fe,null),p.isInFinalState&&i.createElement(Ce,{revision:e})))))}je.propTypes={block:o().object.isRequired};const ke=s.default.bind(null,{endpoint:"event_editing.api_editable",rules:[{args:["contrib_id","event_id","type"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter",type:"AnyConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contributions",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"editing",isDynamic:!1},{data:"/",isDynamic:!1},{data:"type",isDynamic:!0}]}]},"/"),Pe=s.default.bind(null,{endpoint:"event_editing.api_file_types",rules:[{args:["event_id","type"],converters:{event_id:"IntegerConverter",type:"AnyConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"editing",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"type",isDynamic:!0},{data:"/",isDynamic:!1},{data:"file-types",isDynamic:!1}]}]},"/"),Oe=s.default.bind(null,{endpoint:"event_editing.editable",rules:[{args:["contrib_id","event_id","type"],converters:{contrib_id:"IntegerConverter",event_id:"IntegerConverter",type:"AnyConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"contributions",isDynamic:!1},{data:"/",isDynamic:!1},{data:"contrib_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"editing",isDynamic:!1},{data:"/",isDynamic:!1},{data:"type",isDynamic:!0}]}]},"/");function $e({eventId:e,contributionId:t}){const a=(0,r.useDispatch)(),n=(0,r.useSelector)(X),l=(0,r.useSelector)(U),{data:s,loading:c}=(0,y.Ku)(Pe({event_id:e,type:E.zl.paper}),{unhandledErrors:[404],camelize:!0}),{data:o,loading:d}=(0,y.Ku)(ke({event_id:e,contrib_id:t,type:E.zl.paper}),{unhandledErrors:[404,403],camelize:!0});if((0,i.useEffect)((()=>{a(k(e,t))}),[a,t,e]),l||c||d)return i.createElement(m.A,{active:!0});if(!n)return null;const{contribution:u,lastRevision:{submitter:p,files:v},revisions:g,state:f,isInFinalState:_,canSubmitProceedings:D,editingEnabled:T,editingOpen:w}=n,h=T&&w&&!!s;return i.createElement(i.Fragment,null,i.createElement(ve,{contribution:u,state:f,submitter:p,eventId:e},i.createElement(le,null)),D&&h&&i.createElement(Me,{isInFinalState:_,isRejected:f.name===O.rejected,hasEditable:!!o,fileTypes:s,uploadableFiles:v,editableURL:Oe({event_id:e,contrib_id:t,type:E.zl.paper})}),i.createElement(b.A,{itemComponent:je,blocks:g}),i.createElement(de,null))}function Me({isInFinalState:e,isRejected:t,hasEditable:a,editableURL:n,fileTypes:l,uploadableFiles:s}){const{event:c,contribution:o}=(0,r.useSelector)(X);return i.createElement(d.A.Group,{fluid:!0},i.createElement(d.A,{active:!e,completed:e},i.createElement(u.A,{name:"copy outline"}),i.createElement(d.A.Content,null,i.createElement(d.A.Title,null,i.createElement(g.Translate,null,"Peer Reviewing")),i.createElement(d.A.Description,{style:{marginBottom:0}},e?i.createElement(g.Translate,null,"The paper was reviewed"):i.createElement(g.Translate,null,"Your paper is under review")))),i.createElement(d.A,{active:e,completed:a,disabled:t},i.createElement(u.A,{name:"pencil alternate"}),i.createElement(d.A.Content,null,i.createElement(d.A.Title,null,a||!e||t?i.createElement(g.Translate,null,"Submit for Editing"):i.createElement(p.A,{eventId:c.id,contributionId:o.id,contributionCode:o.code,fileTypes:{[E.zl.paper]:l},uploadableFiles:s.map((({id:e,...t})=>({...t,paperId:e}))),text:g.Translate.string("Submit for editing")})),a&&i.createElement(d.A.Description,{style:{marginBottom:0}},i.createElement(g.Translate,null,"The paper was"," ",i.createElement(g.Param,{name:"url",wrapper:i.createElement("a",{href:n})},"submitted")," ","for editing")))))}$e.propTypes={eventId:o().number.isRequired,contributionId:o().number.isRequired},Me.propTypes={isInFinalState:o().bool.isRequired,isRejected:o().bool.isRequired,hasEditable:o().bool.isRequired,editableURL:o().string,fileTypes:o().arrayOf(o().shape(v.Zh)).isRequired,uploadableFiles:o().arrayOf(o().shape(v.WH))},Me.defaultProps={uploadableFiles:[],editableURL:void 0};var ze=a(62338),Ue=a(24372);const He=(0,ze.combineReducers)({requests:(0,ze.combineReducers)({details:(0,l.Od)(x,A,C),resetState:(0,l.Od)(R,I,q),deleteComment:(0,l.Od)(L,F,j)}),details:(e=null,t)=>t.type===A?(0,Ue.camelizeKeys)(t.data):e});var Be;(Be=window).setupPaperAssignmentList=function(){setupTableSorter("#assignment-list .tablesorter"),enableIfChecked("#assignment-list","input[name=contribution_id]",".js-enable-if-checked"),setupListGenerator({itemHandle:"tr",listItems:"#assignment-list tbody tr",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"}),$("#assignment-list .tablesorter").on("mouseover",".title-column .vertical-aligner, .track-column .vertical-aligner",(function(){const e=$(this);this.offsetWidth<this.scrollWidth&&e.qtip({hide:"mouseout",content:e.text(),overwrite:!1}).qtip("show")}))},Be.setupReviewingAreaList=function(e){if((e=$.extend({hasPapers:!1},e)).hasPapers){let t={itemHandle:"div.contribution-row"};t="to-review"===e.list?$.extend({listItems:"#to-review-list div.contribution-row",term:"#search-input-to-review",state:"#filtering-state-to-review",placeholder:"#filter-placeholder-to-review"},t):$.extend({listItems:"#reviewed-list div.contribution-row",term:"#search-input-reviewed",state:"#filtering-state-reviewed",placeholder:"#filter-placeholder-reviewed"},t),setupSearchBox(t)()}},Be.setupCallForPapersPage=function(e){e.hasPapers&&setupSearchBox({itemHandle:"div.contribution-row",listItems:"div.paper-contribution-list div.contribution-row",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"})()},Be.setupConflictsList=function(){$(".js-assign-dialog .name-column .affiliation > span").qbubble({show:{event:"mouseover"},hide:{fixed:!0,delay:100,event:"mouseleave"},position:{my:"left center",at:"right center"},content:{text(){const e=$(this),t=$("<div>"),a=$("<strong>",{text:$(this).data("title")});if(t.append(a),e.is(".js-count-label")){const a=$("<ul>",{class:"qbubble-item-list"}),i=Object.values(e.data("items"));$.each(i,((e,t)=>{const i=$("<li>");i.append($("<a>",{text:t[0],href:t[1]}).attr("target","_blank").attr("rel","noopener noreferrer")),a.append(i)})),t.append(a)}return t}}})},document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=document.querySelector(".paper-timeline");if(!e)return;const t=parseInt(e.dataset.eventId,10),a=parseInt(e.dataset.contribId,10),s={staticData:{user:{fullName:Indico.User.fullName,avatarURL:Indico.User.avatarURL}}},c=(0,l.Ay)("paper-timeline",{paper:He},s);n.render(i.createElement(r.Provider,{store:c},i.createElement($e,{eventId:t,contributionId:a})),e)})()}))}},e=>{e.O(0,[4644,4394,2076],(()=>{return t=92941,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_events.papers.8fa6df52.bundle.js.map