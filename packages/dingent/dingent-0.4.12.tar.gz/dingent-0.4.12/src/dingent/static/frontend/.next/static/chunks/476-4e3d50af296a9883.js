"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{15267:(e,t,a)=>{a.d(t,{qm:()=>s,vw:()=>d,xH:()=>i});var r=a(12115),n=a(79737),l=a(60860);let s=(0,r.createContext)(void 0),i=()=>{let e=(0,r.useContext)(s);if(!e)throw Error("useThreadContext must be used within a ThreadProvider (in Providers component)");return e},o="chatThreadIdList";function d(){let{isLoading:e}=(0,l.U)(),{activeThreadId:t,setActiveThreadId:a}=i(),[s,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let e=JSON.parse(localStorage.getItem(o)||"[]");if(d(e),!t&&0===e.length){let e=(0,n.A)();a(e)}}catch(e){console.error("Initialization failed:",e),d([])}finally{u(!1)}})()},[]),(0,r.useEffect)(()=>{t&&!c&&(localStorage.setItem("currentChatThreadId",t),d(e=>{if(!e.some(e=>e.id===t)){let a=[{id:t,title:"New Chat"},...e];return localStorage.setItem(o,JSON.stringify(a)),a}return e}))},[t,c]),{isLoading:c||e,threads:s,activeThreadId:t||"",setActiveThreadId:a,updateThreadTitle:(0,r.useCallback)((e,t)=>{d(a=>{let r=a.map(a=>a.id===e?{...a,title:t}:a);return localStorage.setItem(o,JSON.stringify(r)),r})},[]),deleteAllThreads:()=>{let e=(0,n.A)(),t={id:e,title:"New Chat"};d([t]),localStorage.setItem(o,JSON.stringify([t])),a(e)}}}},70476:(e,t,a)=>{a.d(t,{D:()=>T,Providers:()=>_});var r=a(95155),n=a(12115),l=a(80744),s=a(69982);function i(e){let{children:t,className:a="",title:n}=e;return(0,r.jsxs)("div",{className:["w-full max-w-7xl","rounded-xl border border-zinc-200/80 dark:border-zinc-800/80","bg-white/70 dark:bg-zinc-900/60 backdrop-blur","shadow-sm hover:shadow-md transition-shadow",a].join(" "),children:[n?(0,r.jsx)("div",{className:"px-4 py-3 border-b border-zinc-200/70 dark:border-zinc-800/70",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-zinc-800 dark:text-zinc-200",children:n})}):null,(0,r.jsx)("div",{className:"p-4 md:p-6",children:t})]})}function o(e){let{data:t}=e;return(0,r.jsx)(i,{title:t.title,children:(0,r.jsx)(s.oz,{remarkPlugins:[l.A],components:{a:e=>{let{node:t,...a}=e;return(0,r.jsx)("a",{...a,target:"_blank",rel:"noreferrer"})},img:e=>{let{node:t,...a}=e;return(0,r.jsx)("img",{...a,loading:"lazy",style:{maxWidth:"100%"}})}},children:t.content})})}a(90107);var d=a(36268),c=a(11032),u=a(52596),g=a(39688);function m(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,g.QP)((0,u.$)(t))}function x(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:m("w-full caption-bottom text-sm",t),...a})})}function h(e){let{className:t,...a}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:m("[&_tr]:border-b",t),...a})}function p(e){let{className:t,...a}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:m("[&_tr:last-child]:border-0",t),...a})}function f(e){let{className:t,...a}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:m("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function b(e){let{className:t,...a}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:m("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function v(e){let{className:t,...a}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:m("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var j=a(54624);let w=(0,a(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function N(e){let{className:t,variant:a,size:n,asChild:l=!1,...s}=e,i=l?j.DX:"button";return(0,r.jsx)(i,{"data-slot":"button",className:m(w({variant:a,size:n,className:t})),...s})}function y(e){let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:m("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}function k(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"skeleton",className:m("bg-accent animate-pulse rounded-md",t),...a})}function C(e){let{sorted:t}=e;return t?(0,r.jsx)("span",{className:"ml-1",children:"asc"===t?(0,r.jsx)("span",{"aria-label":"Ascending",className:"text-primary",children:"▲"}):(0,r.jsx)("span",{"aria-label":"Descending",className:"text-primary",children:"▼"})}):(0,r.jsx)("span",{className:"ml-1 text-muted-foreground opacity-40",children:"↕"})}function S(e){let{row:t}=e;return(0,r.jsxs)("div",{className:"p-4 bg-muted/40 rounded-md animate-in fade-in",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Details"}),(0,r.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:t.getVisibleCells().map(e=>{let t=e.column.columnDef.header,a="function"==typeof t?e.column.id:String(null!=t?t:"");return(0,r.jsxs)("div",{className:"flex flex-col rounded border bg-background/60 p-2",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-muted-foreground truncate mb-1",children:a}),(0,r.jsx)("div",{className:"text-sm break-all",children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())})]},"".concat(e.id,"-expanded"))})})]})}function z(e){let{table:t}=e,a=t.getState().pagination.pageIndex,n=t.getPageCount()||1;return(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-3 py-4",children:[(0,r.jsxs)("div",{className:"flex-1 text-xs sm:text-sm text-muted-foreground",children:["Page ",a+1," of ",n," (",t.getFilteredRowModel().rows.length," rows total)"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(N,{variant:"outline",size:"sm",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:"First"}),(0,r.jsx)(N,{variant:"outline",size:"sm",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:"Previous"}),(0,r.jsx)(N,{variant:"outline",size:"sm",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:"Next"}),(0,r.jsx)(N,{variant:"outline",size:"sm",onClick:()=>t.setPageIndex(n-1),disabled:!t.getCanNextPage(),children:"Last"})]})]})}function I(e){var t;let{columns:a,data:l,isLoading:s=!1,filterColumnId:i,title:o,pageSize:u=12,enableExpand:g=!0,enableZebra:m=!0,tableContainerClassName:j=""}=e,[w,I]=(0,n.useState)([]),[P,A]=(0,n.useState)([]),[D,T]=(0,n.useState)({}),M=i&&(null==(t=P.find(e=>e.id===i))?void 0:t.value)||"",E=(0,n.useDeferredValue)(M);n.useEffect(()=>{i&&A(e=>{let t=e.filter(e=>e.id!==i);return E?[...t,{id:i,value:E}]:t})},[E,i]);let _=(0,d.N4)({data:l,columns:a,getRowId:(e,t)=>"row_".concat(t),getCoreRowModel:(0,c.HT)(),getPaginationRowModel:(0,c.kW)(),getSortedRowModel:(0,c.h5)(),getFilteredRowModel:(0,c.hM)(),getExpandedRowModel:(0,c.D0)(),onSortingChange:I,onColumnFiltersChange:A,onExpandedChange:T,initialState:{pagination:{pageSize:u}},state:{sorting:w,columnFilters:P,expanded:D}}),R=(0,n.useCallback)(e=>{let t=e.target.value;i&&A(e=>{let a=e.filter(e=>e.id!==i);return t?[...a,{id:i,value:t}]:a})},[i]),F=_.getState().pagination.pageSize||u,L=e=>{g&&T(D[e.id]?{}:{[e.id]:!0})},K=_.getRowModel().rows,{pageSize:J}=_.getState().pagination,O=_.getRowModel().rows,V=O.length<J?J-O.length:0;return(0,r.jsxs)("div",{className:"space-y-4",children:[o&&(0,r.jsx)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:(0,r.jsx)("h3",{className:"text-xl font-semibold tracking-tight",children:o})}),i&&(0,r.jsx)("div",{className:"max-w-xs",children:(0,r.jsx)(y,{placeholder:"Filter ".concat(i,"..."),value:M,onChange:R,className:"h-9"})}),(0,r.jsx)("div",{className:"overflow-hidden rounded-lg border bg-white/80 backdrop-blur-sm shadow-sm "+j,children:(0,r.jsxs)(x,{className:"w-full table-fixed",children:[(0,r.jsx)(h,{className:"bg-muted/40",children:_.getHeaderGroups().map(e=>(0,r.jsx)(f,{children:e.headers.map(e=>{if(e.isPlaceholder)return(0,r.jsx)(b,{},e.id);let t=e.column.getIsSorted(),a=e.column.getCanSort();return(0,r.jsx)(b,{className:"whitespace-nowrap",children:a?(0,r.jsxs)(N,{variant:"ghost",size:"sm",className:"-ml-2 px-2 hover:bg-transparent data-[state=open]:bg-transparent",onClick:()=>e.column.toggleSorting("asc"===e.column.getIsSorted()),children:[(0,d.Kv)(e.column.columnDef.header,e.getContext()),(0,r.jsx)(C,{sorted:t})]}):(0,d.Kv)(e.column.columnDef.header,e.getContext())},e.id)})},e.id))}),(0,r.jsxs)(p,{children:[s?Array.from({length:F}).map((e,t)=>(0,r.jsx)(f,{children:a.map((e,a)=>(0,r.jsx)(v,{children:(0,r.jsx)(k,{className:"h-5 w-full"})},"skeleton-cell-".concat(t,"-").concat(a)))},"skeleton-row-".concat(t))):0===K.length?(0,r.jsx)(f,{children:(0,r.jsx)(v,{colSpan:a.length,className:"h-28 text-center text-sm text-muted-foreground",children:"No results found."})}):K.map((e,t)=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(f,{"data-state":e.getIsSelected()&&"selected",tabIndex:g?0:-1,"aria-expanded":g?e.getIsExpanded():void 0,onClick:()=>L(e),onKeyDown:t=>{g&&("Enter"===t.key||" "===t.key)&&(t.preventDefault(),L(e))},className:"cursor-pointer select-none transition-colors hover:bg-accent/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring/50 ".concat(m&&t%2==1?"bg-muted/20 dark:bg-muted/30":""),children:e.getVisibleCells().map(e=>{var t;return(0,r.jsx)(v,{className:"max-w-[280px] truncate align-middle",title:String(null!=(t=e.getValue())?t:""),children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})}),g&&e.getIsExpanded()&&(0,r.jsx)(f,{className:"bg-background/70",children:(0,r.jsx)(v,{colSpan:a.length,className:"p-4",children:(0,r.jsx)(S,{row:e})})})]},e.id)),!s&&V>0&&Array.from({length:V}).map((e,t)=>(0,r.jsx)(f,{className:"hover:bg-transparent pointer-events-none",children:(0,r.jsx)(v,{colSpan:a.length,style:{padding:0,border:"none"},children:(0,r.jsx)("div",{style:{height:"36px"},children:"\xa0"})})},"empty-".concat(t)))]})]})}),(0,r.jsx)(z,{table:_})]})}function P(e){let{data:t,pageSize:a=12,enableExpand:l=!0,enableZebra:o=!0,enableMarkdown:d=!0,filterColumnId:c,tableContainerClassName:u="",remarkPlugins:g,rehypePlugins:m}=e,x=t&&Array.isArray(t.columns)&&Array.isArray(t.rows),h=(null==t?void 0:t.title)||"",p=(0,n.useMemo)(()=>x?t.columns.map(e=>({accessorKey:e,header:e,enableSorting:!0,cell:e=>{let{getValue:t}=e,a=t(),n=null==a?"":String(a);return d?(0,r.jsx)(s.oz,{remarkPlugins:g,rehypePlugins:m,components:{p:e=>(0,r.jsx)("p",{...e,className:"m-0 leading-snug"}),a:e=>(0,r.jsx)("a",{...e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline"})},children:n}):(0,r.jsx)("span",{className:"block truncate",children:n})}})):[],[t,d,x,g,m]),f=(0,n.useMemo)(()=>x?t.rows:[],[t,x]),b=!x;return(0,r.jsx)(i,{children:(0,r.jsx)(I,{columns:p,data:f,isLoading:b,title:h,filterColumnId:c,pageSize:a,enableExpand:l,enableZebra:o,tableContainerClassName:u})})}var A=a(47823),D=a(15267);function T(e){let{widgets:t}=e;return(0,r.jsx)("div",{className:"h-screen w-full flex flex-col items-center overflow-y-auto pt-8 pb-8 space-y-6",style:{zIndex:1},children:0===t.length?(0,r.jsx)("div",{className:"flex-grow flex justify-center items-center text-gray-500",children:(0,r.jsx)("p",{className:"text-xl p-6 bg-white/60 rounded-lg shadow-md",children:"Agent output will appear here..."})}):t.map(e=>{switch(e.type){case"table":return(0,r.jsx)(P,{data:e.payload},e.id);case"markdown":return(0,r.jsx)(o,{data:e.payload},e.id);default:return null}})})}function M(e){let{children:t}=e,{threads:a,updateThreadTitle:l,...s}=(0,D.vw)(),i=(0,n.useMemo)(()=>({...s,threads:a,updateThreadTitle:l}),[s,a,l]);return(0,r.jsx)(D.qm.Provider,{value:i,children:t})}function E(){let e=JSON.parse(localStorage.getItem("chatThreadIdList")||"[]"),t=localStorage.getItem("currentChatThreadId");return t&&e.some(e=>e.id===t)?t:e.length>0?e[0].id:void 0}function _(e){let{children:t}=e,[a,l]=(0,n.useState)(E),s=(0,n.useMemo)(()=>({activeThreadId:a,setActiveThreadId:l,threads:[],isLoading:!0,updateThreadTitle:()=>{},deleteAllThreads:()=>{}}),[a]);return(0,r.jsx)(A.zP,{runtimeUrl:"/api/copilotkit",showDevConsole:!1,agent:"dingent",threadId:a,children:(0,r.jsx)(D.qm.Provider,{value:s,children:(0,r.jsx)(M,{children:t})})})}}}]);